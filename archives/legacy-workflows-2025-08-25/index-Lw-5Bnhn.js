const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["SSOButton-QgSwZlfs.js","SSOButton-B24KFsNb.css","SearchControls-CQAliH80.js","geocoding-Lee6uqsg.js","Row-DRjBf6u9.js","SearchControls-3ZqrzJlE.css","AppwriteAuth-apnbgcYu.js","index.esm-BygFhAql.js","AuthIntegration-DxokBJFM.css","UserProfile-CkoJgSs1.js","Tabs-DzavwWDD.js","MyListings-Bm9Auuby.js","Pagination-Cz2DnCQI.js","UserProfile-Z5bcDWHj.js","ReviewDetail-B_pJhz8v.js","ListingForm-Ck6qu_7q.js","featureImplementation-CT90UR52.js","ProgressBar-BOpsOi1c.js","plus-Dp7DqCjS.js","MatchesDashboard-Q6gyBQqL.js","BasicMarketplace-BSgN2qe4.js","EnhancedMessages-DjSsbupM.js","EnhancedMessages-CpoxY9tg.css","ListingDetailFixed-CK51Jvw2.js","DesignCustomizer-ChGMwgRR.js","ForgotPassword-DUirAeYc.js"])))=>i.map(i=>d[i]);
var oE=Object.defineProperty,aE=Object.defineProperties;var lE=Object.getOwnPropertyDescriptors;var fl=Object.getOwnPropertySymbols;var Ag=Object.prototype.hasOwnProperty,Rg=Object.prototype.propertyIsEnumerable;var ni=(n,e)=>(e=Symbol[n])?e:Symbol.for("Symbol."+n),cE=n=>{throw TypeError(n)},Mg=Math.pow,md=(n,e,t)=>e in n?oE(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,A=(n,e)=>{for(var t in e||(e={}))Ag.call(e,t)&&md(n,t,e[t]);if(fl)for(var t of fl(e))Rg.call(e,t)&&md(n,t,e[t]);return n},Y=(n,e)=>aE(n,lE(e));var le=(n,e)=>{var t={};for(var r in n)Ag.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&fl)for(var r of fl(n))e.indexOf(r)<0&&Rg.call(n,r)&&(t[r]=n[r]);return t};var ri=(n,e,t)=>md(n,typeof e!="symbol"?e+"":e,t);var E=(n,e,t)=>new Promise((r,i)=>{var a=d=>{try{u(t.next(d))}catch(p){i(p)}},l=d=>{try{u(t.throw(d))}catch(p){i(p)}},u=d=>d.done?r(d.value):Promise.resolve(d.value).then(a,l);u((t=t.apply(n,e)).next())}),cs=function(n,e){this[0]=n,this[1]=e},gd=(n,e,t)=>{var r=(l,u,d,p)=>{try{var h=t[l](u),g=(u=h.value)instanceof cs,v=h.done;Promise.resolve(g?u[0]:u).then(b=>g?r(l==="return"?l:"next",u[1]?{done:b.done,value:b.value}:b,d,p):d({value:b,done:v})).catch(b=>r("throw",b,d,p))}catch(b){p(b)}},i=l=>a[l]=u=>new Promise((d,p)=>r(l,u,d,p)),a={};return t=t.apply(n,e),a[ni("asyncIterator")]=()=>a,i("next"),i("throw"),i("return"),a},yd=n=>{var e=n[ni("asyncIterator")],t=!1,r,i={};return e==null?(e=n[ni("iterator")](),r=a=>i[a]=l=>e[a](l)):(e=e.call(n),r=a=>i[a]=l=>{if(t){if(t=!1,a==="throw")throw l;return l}return t=!0,{done:!1,value:new cs(new Promise(u=>{var d=e[a](l);d instanceof Object||cE("Object expected"),u(d)}),1)}}),i[ni("iterator")]=()=>i,r("next"),"throw"in e?r("throw"):i.throw=a=>{throw a},"return"in e&&r("return"),i},Og=(n,e,t)=>(e=n[ni("asyncIterator")])?e.call(n):(n=n[ni("iterator")](),e={},t=(r,i)=>(i=n[r])&&(e[r]=a=>new Promise((l,u,d)=>(a=i.call(n,a),d=a.done,Promise.resolve(a.value).then(p=>l({value:p,done:d}),u)))),t("next"),t("return"),e);function uE(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function xi(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var wd={exports:{}},vo={},vd={exports:{}},$e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pg;function dE(){if(Pg)return $e;Pg=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),g=Symbol.iterator;function v(D){return D===null||typeof D!="object"?null:(D=g&&D[g]||D["@@iterator"],typeof D=="function"?D:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,T={};function x(D,J,Ee){this.props=D,this.context=J,this.refs=T,this.updater=Ee||b}x.prototype.isReactComponent={},x.prototype.setState=function(D,J){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,J,"setState")},x.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function M(){}M.prototype=x.prototype;function I(D,J,Ee){this.props=D,this.context=J,this.refs=T,this.updater=Ee||b}var R=I.prototype=new M;R.constructor=I,C(R,x.prototype),R.isPureReactComponent=!0;var O=Array.isArray,L=Object.prototype.hasOwnProperty,H={current:null},W={key:!0,ref:!0,__self:!0,__source:!0};function F(D,J,Ee){var $,B={},Z=null,ye=null;if(J!=null)for($ in J.ref!==void 0&&(ye=J.ref),J.key!==void 0&&(Z=""+J.key),J)L.call(J,$)&&!W.hasOwnProperty($)&&(B[$]=J[$]);var Ce=arguments.length-2;if(Ce===1)B.children=Ee;else if(1<Ce){for(var Me=Array(Ce),Ve=0;Ve<Ce;Ve++)Me[Ve]=arguments[Ve+2];B.children=Me}if(D&&D.defaultProps)for($ in Ce=D.defaultProps,Ce)B[$]===void 0&&(B[$]=Ce[$]);return{$$typeof:n,type:D,key:Z,ref:ye,props:B,_owner:H.current}}function K(D,J){return{$$typeof:n,type:D.type,key:J,ref:D.ref,props:D.props,_owner:D._owner}}function ae(D){return typeof D=="object"&&D!==null&&D.$$typeof===n}function ce(D){var J={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(Ee){return J[Ee]})}var ue=/\/+/g;function ve(D,J){return typeof D=="object"&&D!==null&&D.key!=null?ce(""+D.key):J.toString(36)}function Re(D,J,Ee,$,B){var Z=typeof D;(Z==="undefined"||Z==="boolean")&&(D=null);var ye=!1;if(D===null)ye=!0;else switch(Z){case"string":case"number":ye=!0;break;case"object":switch(D.$$typeof){case n:case e:ye=!0}}if(ye)return ye=D,B=B(ye),D=$===""?"."+ve(ye,0):$,O(B)?(Ee="",D!=null&&(Ee=D.replace(ue,"$&/")+"/"),Re(B,J,Ee,"",function(Ve){return Ve})):B!=null&&(ae(B)&&(B=K(B,Ee+(!B.key||ye&&ye.key===B.key?"":(""+B.key).replace(ue,"$&/")+"/")+D)),J.push(B)),1;if(ye=0,$=$===""?".":$+":",O(D))for(var Ce=0;Ce<D.length;Ce++){Z=D[Ce];var Me=$+ve(Z,Ce);ye+=Re(Z,J,Ee,Me,B)}else if(Me=v(D),typeof Me=="function")for(D=Me.call(D),Ce=0;!(Z=D.next()).done;)Z=Z.value,Me=$+ve(Z,Ce++),ye+=Re(Z,J,Ee,Me,B);else if(Z==="object")throw J=String(D),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return ye}function _e(D,J,Ee){if(D==null)return D;var $=[],B=0;return Re(D,$,"","",function(Z){return J.call(Ee,Z,B++)}),$}function Ie(D){if(D._status===-1){var J=D._result;J=J(),J.then(function(Ee){(D._status===0||D._status===-1)&&(D._status=1,D._result=Ee)},function(Ee){(D._status===0||D._status===-1)&&(D._status=2,D._result=Ee)}),D._status===-1&&(D._status=0,D._result=J)}if(D._status===1)return D._result.default;throw D._result}var pe={current:null},ee={transition:null},de={ReactCurrentDispatcher:pe,ReactCurrentBatchConfig:ee,ReactCurrentOwner:H};function se(){throw Error("act(...) is not supported in production builds of React.")}return $e.Children={map:_e,forEach:function(D,J,Ee){_e(D,function(){J.apply(this,arguments)},Ee)},count:function(D){var J=0;return _e(D,function(){J++}),J},toArray:function(D){return _e(D,function(J){return J})||[]},only:function(D){if(!ae(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},$e.Component=x,$e.Fragment=t,$e.Profiler=i,$e.PureComponent=I,$e.StrictMode=r,$e.Suspense=d,$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=de,$e.act=se,$e.cloneElement=function(D,J,Ee){if(D==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+D+".");var $=C({},D.props),B=D.key,Z=D.ref,ye=D._owner;if(J!=null){if(J.ref!==void 0&&(Z=J.ref,ye=H.current),J.key!==void 0&&(B=""+J.key),D.type&&D.type.defaultProps)var Ce=D.type.defaultProps;for(Me in J)L.call(J,Me)&&!W.hasOwnProperty(Me)&&($[Me]=J[Me]===void 0&&Ce!==void 0?Ce[Me]:J[Me])}var Me=arguments.length-2;if(Me===1)$.children=Ee;else if(1<Me){Ce=Array(Me);for(var Ve=0;Ve<Me;Ve++)Ce[Ve]=arguments[Ve+2];$.children=Ce}return{$$typeof:n,type:D.type,key:B,ref:Z,props:$,_owner:ye}},$e.createContext=function(D){return D={$$typeof:l,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},D.Provider={$$typeof:a,_context:D},D.Consumer=D},$e.createElement=F,$e.createFactory=function(D){var J=F.bind(null,D);return J.type=D,J},$e.createRef=function(){return{current:null}},$e.forwardRef=function(D){return{$$typeof:u,render:D}},$e.isValidElement=ae,$e.lazy=function(D){return{$$typeof:h,_payload:{_status:-1,_result:D},_init:Ie}},$e.memo=function(D,J){return{$$typeof:p,type:D,compare:J===void 0?null:J}},$e.startTransition=function(D){var J=ee.transition;ee.transition={};try{D()}finally{ee.transition=J}},$e.unstable_act=se,$e.useCallback=function(D,J){return pe.current.useCallback(D,J)},$e.useContext=function(D){return pe.current.useContext(D)},$e.useDebugValue=function(){},$e.useDeferredValue=function(D){return pe.current.useDeferredValue(D)},$e.useEffect=function(D,J){return pe.current.useEffect(D,J)},$e.useId=function(){return pe.current.useId()},$e.useImperativeHandle=function(D,J,Ee){return pe.current.useImperativeHandle(D,J,Ee)},$e.useInsertionEffect=function(D,J){return pe.current.useInsertionEffect(D,J)},$e.useLayoutEffect=function(D,J){return pe.current.useLayoutEffect(D,J)},$e.useMemo=function(D,J){return pe.current.useMemo(D,J)},$e.useReducer=function(D,J,Ee){return pe.current.useReducer(D,J,Ee)},$e.useRef=function(D){return pe.current.useRef(D)},$e.useState=function(D){return pe.current.useState(D)},$e.useSyncExternalStore=function(D,J,Ee){return pe.current.useSyncExternalStore(D,J,Ee)},$e.useTransition=function(){return pe.current.useTransition()},$e.version="18.3.1",$e}var Dg;function Jl(){return Dg||(Dg=1,vd.exports=dE()),vd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ng;function fE(){if(Ng)return vo;Ng=1;var n=Jl(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(u,d,p){var h,g={},v=null,b=null;p!==void 0&&(v=""+p),d.key!==void 0&&(v=""+d.key),d.ref!==void 0&&(b=d.ref);for(h in d)r.call(d,h)&&!a.hasOwnProperty(h)&&(g[h]=d[h]);if(u&&u.defaultProps)for(h in d=u.defaultProps,d)g[h]===void 0&&(g[h]=d[h]);return{$$typeof:e,type:u,key:v,ref:b,props:g,_owner:i.current}}return vo.Fragment=t,vo.jsx=l,vo.jsxs=l,vo}var Lg;function pE(){return Lg||(Lg=1,wd.exports=fE()),wd.exports}var w=pE(),S=Jl();const oe=xi(S),hE=uE({__proto__:null,default:oe},[S]);var pl={},Sd={exports:{}},Vt={},bd={exports:{}},_d={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jg;function mE(){return jg||(jg=1,(function(n){function e(ee,de){var se=ee.length;ee.push(de);e:for(;0<se;){var D=se-1>>>1,J=ee[D];if(0<i(J,de))ee[D]=de,ee[se]=J,se=D;else break e}}function t(ee){return ee.length===0?null:ee[0]}function r(ee){if(ee.length===0)return null;var de=ee[0],se=ee.pop();if(se!==de){ee[0]=se;e:for(var D=0,J=ee.length,Ee=J>>>1;D<Ee;){var $=2*(D+1)-1,B=ee[$],Z=$+1,ye=ee[Z];if(0>i(B,se))Z<J&&0>i(ye,B)?(ee[D]=ye,ee[Z]=se,D=Z):(ee[D]=B,ee[$]=se,D=$);else if(Z<J&&0>i(ye,se))ee[D]=ye,ee[Z]=se,D=Z;else break e}}return de}function i(ee,de){var se=ee.sortIndex-de.sortIndex;return se!==0?se:ee.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var d=[],p=[],h=1,g=null,v=3,b=!1,C=!1,T=!1,x=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(ee){for(var de=t(p);de!==null;){if(de.callback===null)r(p);else if(de.startTime<=ee)r(p),de.sortIndex=de.expirationTime,e(d,de);else break;de=t(p)}}function O(ee){if(T=!1,R(ee),!C)if(t(d)!==null)C=!0,Ie(L);else{var de=t(p);de!==null&&pe(O,de.startTime-ee)}}function L(ee,de){C=!1,T&&(T=!1,M(F),F=-1),b=!0;var se=v;try{for(R(de),g=t(d);g!==null&&(!(g.expirationTime>de)||ee&&!ce());){var D=g.callback;if(typeof D=="function"){g.callback=null,v=g.priorityLevel;var J=D(g.expirationTime<=de);de=n.unstable_now(),typeof J=="function"?g.callback=J:g===t(d)&&r(d),R(de)}else r(d);g=t(d)}if(g!==null)var Ee=!0;else{var $=t(p);$!==null&&pe(O,$.startTime-de),Ee=!1}return Ee}finally{g=null,v=se,b=!1}}var H=!1,W=null,F=-1,K=5,ae=-1;function ce(){return!(n.unstable_now()-ae<K)}function ue(){if(W!==null){var ee=n.unstable_now();ae=ee;var de=!0;try{de=W(!0,ee)}finally{de?ve():(H=!1,W=null)}}else H=!1}var ve;if(typeof I=="function")ve=function(){I(ue)};else if(typeof MessageChannel!="undefined"){var Re=new MessageChannel,_e=Re.port2;Re.port1.onmessage=ue,ve=function(){_e.postMessage(null)}}else ve=function(){x(ue,0)};function Ie(ee){W=ee,H||(H=!0,ve())}function pe(ee,de){F=x(function(){ee(n.unstable_now())},de)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ee){ee.callback=null},n.unstable_continueExecution=function(){C||b||(C=!0,Ie(L))},n.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<ee?Math.floor(1e3/ee):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(ee){switch(v){case 1:case 2:case 3:var de=3;break;default:de=v}var se=v;v=de;try{return ee()}finally{v=se}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ee,de){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var se=v;v=ee;try{return de()}finally{v=se}},n.unstable_scheduleCallback=function(ee,de,se){var D=n.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?D+se:D):se=D,ee){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=se+J,ee={id:h++,callback:de,priorityLevel:ee,startTime:se,expirationTime:J,sortIndex:-1},se>D?(ee.sortIndex=se,e(p,ee),t(d)===null&&ee===t(p)&&(T?(M(F),F=-1):T=!0,pe(O,se-D))):(ee.sortIndex=J,e(d,ee),C||b||(C=!0,Ie(L))),ee},n.unstable_shouldYield=ce,n.unstable_wrapCallback=function(ee){var de=v;return function(){var se=v;v=de;try{return ee.apply(this,arguments)}finally{v=se}}}})(_d)),_d}var $g;function gE(){return $g||($g=1,bd.exports=mE()),bd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ug;function yE(){if(Ug)return Vt;Ug=1;var n=Jl(),e=gE();function t(s){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+s,c=1;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function a(s,o){l(s,o),l(s+"Capture",o)}function l(s,o){for(i[s]=o,s=0;s<o.length;s++)r.add(o[s])}var u=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},g={};function v(s){return d.call(g,s)?!0:d.call(h,s)?!1:p.test(s)?g[s]=!0:(h[s]=!0,!1)}function b(s,o,c,f){if(c!==null&&c.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return f?!1:c!==null?!c.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function C(s,o,c,f){if(o===null||typeof o=="undefined"||b(s,o,c,f))return!0;if(f)return!1;if(c!==null)switch(c.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function T(s,o,c,f,m,y,_){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=f,this.attributeNamespace=m,this.mustUseProperty=c,this.propertyName=s,this.type=o,this.sanitizeURL=y,this.removeEmptyString=_}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){x[s]=new T(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var o=s[0];x[o]=new T(o,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){x[s]=new T(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){x[s]=new T(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){x[s]=new T(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){x[s]=new T(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){x[s]=new T(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){x[s]=new T(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){x[s]=new T(s,5,!1,s.toLowerCase(),null,!1,!1)});var M=/[\-:]([a-z])/g;function I(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var o=s.replace(M,I);x[o]=new T(o,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var o=s.replace(M,I);x[o]=new T(o,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var o=s.replace(M,I);x[o]=new T(o,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){x[s]=new T(s,1,!1,s.toLowerCase(),null,!1,!1)}),x.xlinkHref=new T("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){x[s]=new T(s,1,!1,s.toLowerCase(),null,!0,!0)});function R(s,o,c,f){var m=x.hasOwnProperty(o)?x[o]:null;(m!==null?m.type!==0:f||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(C(o,c,m,f)&&(c=null),f||m===null?v(o)&&(c===null?s.removeAttribute(o):s.setAttribute(o,""+c)):m.mustUseProperty?s[m.propertyName]=c===null?m.type===3?!1:"":c:(o=m.attributeName,f=m.attributeNamespace,c===null?s.removeAttribute(o):(m=m.type,c=m===3||m===4&&c===!0?"":""+c,f?s.setAttributeNS(f,o,c):s.setAttribute(o,c))))}var O=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,L=Symbol.for("react.element"),H=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),ae=Symbol.for("react.provider"),ce=Symbol.for("react.context"),ue=Symbol.for("react.forward_ref"),ve=Symbol.for("react.suspense"),Re=Symbol.for("react.suspense_list"),_e=Symbol.for("react.memo"),Ie=Symbol.for("react.lazy"),pe=Symbol.for("react.offscreen"),ee=Symbol.iterator;function de(s){return s===null||typeof s!="object"?null:(s=ee&&s[ee]||s["@@iterator"],typeof s=="function"?s:null)}var se=Object.assign,D;function J(s){if(D===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);D=o&&o[1]||""}return"\n"+D+s}var Ee=!1;function $(s,o){if(!s||Ee)return"";Ee=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(q){var f=q}Reflect.construct(s,[],o)}else{try{o.call()}catch(q){f=q}s.call(o.prototype)}else{try{throw Error()}catch(q){f=q}s()}}catch(q){if(q&&f&&typeof q.stack=="string"){for(var m=q.stack.split("\n"),y=f.stack.split("\n"),_=m.length-1,k=y.length-1;1<=_&&0<=k&&m[_]!==y[k];)k--;for(;1<=_&&0<=k;_--,k--)if(m[_]!==y[k]){if(_!==1||k!==1)do if(_--,k--,0>k||m[_]!==y[k]){var P="\n"+m[_].replace(" at new "," at ");return s.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",s.displayName)),P}while(1<=_&&0<=k);break}}}finally{Ee=!1,Error.prepareStackTrace=c}return(s=s?s.displayName||s.name:"")?J(s):""}function B(s){switch(s.tag){case 5:return J(s.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return s=$(s.type,!1),s;case 11:return s=$(s.type.render,!1),s;case 1:return s=$(s.type,!0),s;default:return""}}function Z(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case W:return"Fragment";case H:return"Portal";case K:return"Profiler";case F:return"StrictMode";case ve:return"Suspense";case Re:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case ce:return(s.displayName||"Context")+".Consumer";case ae:return(s._context.displayName||"Context")+".Provider";case ue:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case _e:return o=s.displayName||null,o!==null?o:Z(s.type)||"Memo";case Ie:o=s._payload,s=s._init;try{return Z(s(o))}catch(c){}}return null}function ye(s){var o=s.type;switch(s.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=o.render,s=s.displayName||s.name||"",o.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Z(o);case 8:return o===F?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Ce(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Me(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ve(s){var o=Me(s)?"checked":"value",c=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),f=""+s[o];if(!s.hasOwnProperty(o)&&typeof c!="undefined"&&typeof c.get=="function"&&typeof c.set=="function"){var m=c.get,y=c.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return m.call(this)},set:function(_){f=""+_,y.call(this,_)}}),Object.defineProperty(s,o,{enumerable:c.enumerable}),{getValue:function(){return f},setValue:function(_){f=""+_},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function Tt(s){s._valueTracker||(s._valueTracker=Ve(s))}function Xt(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var c=o.getValue(),f="";return s&&(f=Me(s)?s.checked?"true":"false":s.value),s=f,s!==c?(o.setValue(s),!0):!1}function vt(s){if(s=s||(typeof document!="undefined"?document:void 0),typeof s=="undefined")return null;try{return s.activeElement||s.body}catch(o){return s.body}}function St(s,o){var c=o.checked;return se({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c!=null?c:s._wrapperState.initialChecked})}function We(s,o){var c=o.defaultValue==null?"":o.defaultValue,f=o.checked!=null?o.checked:o.defaultChecked;c=Ce(o.value!=null?o.value:c),s._wrapperState={initialChecked:f,initialValue:c,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function On(s,o){o=o.checked,o!=null&&R(s,"checked",o,!1)}function Qt(s,o){On(s,o);var c=Ce(o.value),f=o.type;if(c!=null)f==="number"?(c===0&&s.value===""||s.value!=c)&&(s.value=""+c):s.value!==""+c&&(s.value=""+c);else if(f==="submit"||f==="reset"){s.removeAttribute("value");return}o.hasOwnProperty("value")?Gr(s,o.type,c):o.hasOwnProperty("defaultValue")&&Gr(s,o.type,Ce(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(s.defaultChecked=!!o.defaultChecked)}function Ms(s,o,c){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var f=o.type;if(!(f!=="submit"&&f!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+s._wrapperState.initialValue,c||o===s.value||(s.value=o),s.defaultValue=o}c=s.name,c!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,c!==""&&(s.name=c)}function Gr(s,o,c){(o!=="number"||vt(s.ownerDocument)!==s)&&(c==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+c&&(s.defaultValue=""+c))}var Ot=Array.isArray;function Jt(s,o,c,f){if(s=s.options,o){o={};for(var m=0;m<c.length;m++)o["$"+c[m]]=!0;for(c=0;c<s.length;c++)m=o.hasOwnProperty("$"+s[c].value),s[c].selected!==m&&(s[c].selected=m),m&&f&&(s[c].defaultSelected=!0)}else{for(c=""+Ce(c),o=null,m=0;m<s.length;m++){if(s[m].value===c){s[m].selected=!0,f&&(s[m].defaultSelected=!0);return}o!==null||s[m].disabled||(o=s[m])}o!==null&&(o.selected=!0)}}function fr(s,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return se({},o,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function Kr(s,o){var c=o.value;if(c==null){if(c=o.children,o=o.defaultValue,c!=null){if(o!=null)throw Error(t(92));if(Ot(c)){if(1<c.length)throw Error(t(93));c=c[0]}o=c}o==null&&(o=""),c=o}s._wrapperState={initialValue:Ce(c)}}function pr(s,o){var c=Ce(o.value),f=Ce(o.defaultValue);c!=null&&(c=""+c,c!==s.value&&(s.value=c),o.defaultValue==null&&s.defaultValue!==c&&(s.defaultValue=c)),f!=null&&(s.defaultValue=""+f)}function Yr(s){var o=s.textContent;o===s._wrapperState.initialValue&&o!==""&&o!==null&&(s.value=o)}function hr(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mr(s,o){return s==null||s==="http://www.w3.org/1999/xhtml"?hr(o):s==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var je,qn=(function(s){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(o,c,f,m){MSApp.execUnsafeLocalFunction(function(){return s(o,c,f,m)})}:s})(function(s,o){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=o;else{for(je=je||document.createElement("div"),je.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=je.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;o.firstChild;)s.appendChild(o.firstChild)}});function gr(s,o){if(o){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=o;return}}s.textContent=o}var Ni={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ub=["Webkit","ms","Moz","O"];Object.keys(Ni).forEach(function(s){ub.forEach(function(o){o=o+s.charAt(0).toUpperCase()+s.substring(1),Ni[o]=Ni[s]})});function Hp(s,o,c){return o==null||typeof o=="boolean"||o===""?"":c||typeof o!="number"||o===0||Ni.hasOwnProperty(s)&&Ni[s]?(""+o).trim():o+"px"}function Vp(s,o){s=s.style;for(var c in o)if(o.hasOwnProperty(c)){var f=c.indexOf("--")===0,m=Hp(c,o[c],f);c==="float"&&(c="cssFloat"),f?s.setProperty(c,m):s[c]=m}}var db=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ic(s,o){if(o){if(db[s]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function kc(s,o){if(s.indexOf("-")===-1)return typeof o.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ac=null;function Rc(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Mc=null,Os=null,Ps=null;function Wp(s){if(s=ro(s)){if(typeof Mc!="function")throw Error(t(280));var o=s.stateNode;o&&(o=Ia(o),Mc(s.stateNode,s.type,o))}}function Gp(s){Os?Ps?Ps.push(s):Ps=[s]:Os=s}function Kp(){if(Os){var s=Os,o=Ps;if(Ps=Os=null,Wp(s),o)for(s=0;s<o.length;s++)Wp(o[s])}}function Yp(s,o){return s(o)}function Xp(){}var Oc=!1;function Qp(s,o,c){if(Oc)return s(o,c);Oc=!0;try{return Yp(s,o,c)}finally{Oc=!1,(Os!==null||Ps!==null)&&(Xp(),Kp())}}function Li(s,o){var c=s.stateNode;if(c===null)return null;var f=Ia(c);if(f===null)return null;c=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(s=s.type,f=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!f;break e;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(t(231,o,typeof c));return c}var Pc=!1;if(u)try{var ji={};Object.defineProperty(ji,"passive",{get:function(){Pc=!0}}),window.addEventListener("test",ji,ji),window.removeEventListener("test",ji,ji)}catch(s){Pc=!1}function fb(s,o,c,f,m,y,_,k,P){var q=Array.prototype.slice.call(arguments,3);try{o.apply(c,q)}catch(ne){this.onError(ne)}}var $i=!1,ia=null,oa=!1,Dc=null,pb={onError:function(s){$i=!0,ia=s}};function hb(s,o,c,f,m,y,_,k,P){$i=!1,ia=null,fb.apply(pb,arguments)}function mb(s,o,c,f,m,y,_,k,P){if(hb.apply(this,arguments),$i){if($i){var q=ia;$i=!1,ia=null}else throw Error(t(198));oa||(oa=!0,Dc=q)}}function Xr(s){var o=s,c=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(c=o.return),s=o.return;while(s)}return o.tag===3?c:null}function Jp(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function Zp(s){if(Xr(s)!==s)throw Error(t(188))}function gb(s){var o=s.alternate;if(!o){if(o=Xr(s),o===null)throw Error(t(188));return o!==s?null:s}for(var c=s,f=o;;){var m=c.return;if(m===null)break;var y=m.alternate;if(y===null){if(f=m.return,f!==null){c=f;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===c)return Zp(m),s;if(y===f)return Zp(m),o;y=y.sibling}throw Error(t(188))}if(c.return!==f.return)c=m,f=y;else{for(var _=!1,k=m.child;k;){if(k===c){_=!0,c=m,f=y;break}if(k===f){_=!0,f=m,c=y;break}k=k.sibling}if(!_){for(k=y.child;k;){if(k===c){_=!0,c=y,f=m;break}if(k===f){_=!0,f=y,c=m;break}k=k.sibling}if(!_)throw Error(t(189))}}if(c.alternate!==f)throw Error(t(190))}if(c.tag!==3)throw Error(t(188));return c.stateNode.current===c?s:o}function eh(s){return s=gb(s),s!==null?th(s):null}function th(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var o=th(s);if(o!==null)return o;s=s.sibling}return null}var nh=e.unstable_scheduleCallback,rh=e.unstable_cancelCallback,yb=e.unstable_shouldYield,wb=e.unstable_requestPaint,rt=e.unstable_now,vb=e.unstable_getCurrentPriorityLevel,Nc=e.unstable_ImmediatePriority,sh=e.unstable_UserBlockingPriority,aa=e.unstable_NormalPriority,Sb=e.unstable_LowPriority,ih=e.unstable_IdlePriority,la=null,Pn=null;function bb(s){if(Pn&&typeof Pn.onCommitFiberRoot=="function")try{Pn.onCommitFiberRoot(la,s,void 0,(s.current.flags&128)===128)}catch(o){}}var vn=Math.clz32?Math.clz32:xb,_b=Math.log,Eb=Math.LN2;function xb(s){return s>>>=0,s===0?32:31-(_b(s)/Eb|0)|0}var ca=64,ua=4194304;function Ui(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function da(s,o){var c=s.pendingLanes;if(c===0)return 0;var f=0,m=s.suspendedLanes,y=s.pingedLanes,_=c&268435455;if(_!==0){var k=_&~m;k!==0?f=Ui(k):(y&=_,y!==0&&(f=Ui(y)))}else _=c&~m,_!==0?f=Ui(_):y!==0&&(f=Ui(y));if(f===0)return 0;if(o!==0&&o!==f&&(o&m)===0&&(m=f&-f,y=o&-o,m>=y||m===16&&(y&4194240)!==0))return o;if((f&4)!==0&&(f|=c&16),o=s.entangledLanes,o!==0)for(s=s.entanglements,o&=f;0<o;)c=31-vn(o),m=1<<c,f|=s[c],o&=~m;return f}function Cb(s,o){switch(s){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tb(s,o){for(var c=s.suspendedLanes,f=s.pingedLanes,m=s.expirationTimes,y=s.pendingLanes;0<y;){var _=31-vn(y),k=1<<_,P=m[_];P===-1?((k&c)===0||(k&f)!==0)&&(m[_]=Cb(k,o)):P<=o&&(s.expiredLanes|=k),y&=~k}}function Lc(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function oh(){var s=ca;return ca<<=1,(ca&4194240)===0&&(ca=64),s}function jc(s){for(var o=[],c=0;31>c;c++)o.push(s);return o}function Fi(s,o,c){s.pendingLanes|=o,o!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,o=31-vn(o),s[o]=c}function Ib(s,o){var c=s.pendingLanes&~o;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=o,s.mutableReadLanes&=o,s.entangledLanes&=o,o=s.entanglements;var f=s.eventTimes;for(s=s.expirationTimes;0<c;){var m=31-vn(c),y=1<<m;o[m]=0,f[m]=-1,s[m]=-1,c&=~y}}function $c(s,o){var c=s.entangledLanes|=o;for(s=s.entanglements;c;){var f=31-vn(c),m=1<<f;m&o|s[f]&o&&(s[f]|=o),c&=~m}}var qe=0;function ah(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var lh,Uc,ch,uh,dh,Fc=!1,fa=[],yr=null,wr=null,vr=null,zi=new Map,Bi=new Map,Sr=[],kb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fh(s,o){switch(s){case"focusin":case"focusout":yr=null;break;case"dragenter":case"dragleave":wr=null;break;case"mouseover":case"mouseout":vr=null;break;case"pointerover":case"pointerout":zi.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bi.delete(o.pointerId)}}function qi(s,o,c,f,m,y){return s===null||s.nativeEvent!==y?(s={blockedOn:o,domEventName:c,eventSystemFlags:f,nativeEvent:y,targetContainers:[m]},o!==null&&(o=ro(o),o!==null&&Uc(o)),s):(s.eventSystemFlags|=f,o=s.targetContainers,m!==null&&o.indexOf(m)===-1&&o.push(m),s)}function Ab(s,o,c,f,m){switch(o){case"focusin":return yr=qi(yr,s,o,c,f,m),!0;case"dragenter":return wr=qi(wr,s,o,c,f,m),!0;case"mouseover":return vr=qi(vr,s,o,c,f,m),!0;case"pointerover":var y=m.pointerId;return zi.set(y,qi(zi.get(y)||null,s,o,c,f,m)),!0;case"gotpointercapture":return y=m.pointerId,Bi.set(y,qi(Bi.get(y)||null,s,o,c,f,m)),!0}return!1}function ph(s){var o=Qr(s.target);if(o!==null){var c=Xr(o);if(c!==null){if(o=c.tag,o===13){if(o=Jp(c),o!==null){s.blockedOn=o,dh(s.priority,function(){ch(c)});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function pa(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var c=Bc(s.domEventName,s.eventSystemFlags,o[0],s.nativeEvent);if(c===null){c=s.nativeEvent;var f=new c.constructor(c.type,c);Ac=f,c.target.dispatchEvent(f),Ac=null}else return o=ro(c),o!==null&&Uc(o),s.blockedOn=c,!1;o.shift()}return!0}function hh(s,o,c){pa(s)&&c.delete(o)}function Rb(){Fc=!1,yr!==null&&pa(yr)&&(yr=null),wr!==null&&pa(wr)&&(wr=null),vr!==null&&pa(vr)&&(vr=null),zi.forEach(hh),Bi.forEach(hh)}function Hi(s,o){s.blockedOn===o&&(s.blockedOn=null,Fc||(Fc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Rb)))}function Vi(s){function o(m){return Hi(m,s)}if(0<fa.length){Hi(fa[0],s);for(var c=1;c<fa.length;c++){var f=fa[c];f.blockedOn===s&&(f.blockedOn=null)}}for(yr!==null&&Hi(yr,s),wr!==null&&Hi(wr,s),vr!==null&&Hi(vr,s),zi.forEach(o),Bi.forEach(o),c=0;c<Sr.length;c++)f=Sr[c],f.blockedOn===s&&(f.blockedOn=null);for(;0<Sr.length&&(c=Sr[0],c.blockedOn===null);)ph(c),c.blockedOn===null&&Sr.shift()}var Ds=O.ReactCurrentBatchConfig,ha=!0;function Mb(s,o,c,f){var m=qe,y=Ds.transition;Ds.transition=null;try{qe=1,zc(s,o,c,f)}finally{qe=m,Ds.transition=y}}function Ob(s,o,c,f){var m=qe,y=Ds.transition;Ds.transition=null;try{qe=4,zc(s,o,c,f)}finally{qe=m,Ds.transition=y}}function zc(s,o,c,f){if(ha){var m=Bc(s,o,c,f);if(m===null)iu(s,o,f,ma,c),fh(s,f);else if(Ab(m,s,o,c,f))f.stopPropagation();else if(fh(s,f),o&4&&-1<kb.indexOf(s)){for(;m!==null;){var y=ro(m);if(y!==null&&lh(y),y=Bc(s,o,c,f),y===null&&iu(s,o,f,ma,c),y===m)break;m=y}m!==null&&f.stopPropagation()}else iu(s,o,f,null,c)}}var ma=null;function Bc(s,o,c,f){if(ma=null,s=Rc(f),s=Qr(s),s!==null)if(o=Xr(s),o===null)s=null;else if(c=o.tag,c===13){if(s=Jp(o),s!==null)return s;s=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null);return ma=s,null}function mh(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vb()){case Nc:return 1;case sh:return 4;case aa:case Sb:return 16;case ih:return 536870912;default:return 16}default:return 16}}var br=null,qc=null,ga=null;function gh(){if(ga)return ga;var s,o=qc,c=o.length,f,m="value"in br?br.value:br.textContent,y=m.length;for(s=0;s<c&&o[s]===m[s];s++);var _=c-s;for(f=1;f<=_&&o[c-f]===m[y-f];f++);return ga=m.slice(s,1<f?1-f:void 0)}function ya(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function wa(){return!0}function yh(){return!1}function Zt(s){function o(c,f,m,y,_){this._reactName=c,this._targetInst=m,this.type=f,this.nativeEvent=y,this.target=_,this.currentTarget=null;for(var k in s)s.hasOwnProperty(k)&&(c=s[k],this[k]=c?c(y):y[k]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?wa:yh,this.isPropagationStopped=yh,this}return se(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=wa)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=wa)},persist:function(){},isPersistent:wa}),o}var Ns={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hc=Zt(Ns),Wi=se({},Ns,{view:0,detail:0}),Pb=Zt(Wi),Vc,Wc,Gi,va=se({},Wi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kc,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Gi&&(Gi&&s.type==="mousemove"?(Vc=s.screenX-Gi.screenX,Wc=s.screenY-Gi.screenY):Wc=Vc=0,Gi=s),Vc)},movementY:function(s){return"movementY"in s?s.movementY:Wc}}),wh=Zt(va),Db=se({},va,{dataTransfer:0}),Nb=Zt(Db),Lb=se({},Wi,{relatedTarget:0}),Gc=Zt(Lb),jb=se({},Ns,{animationName:0,elapsedTime:0,pseudoElement:0}),$b=Zt(jb),Ub=se({},Ns,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Fb=Zt(Ub),zb=se({},Ns,{data:0}),vh=Zt(zb),Bb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vb(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=Hb[s])?!!o[s]:!1}function Kc(){return Vb}var Wb=se({},Wi,{key:function(s){if(s.key){var o=Bb[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=ya(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?qb[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kc,charCode:function(s){return s.type==="keypress"?ya(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?ya(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Gb=Zt(Wb),Kb=se({},va,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sh=Zt(Kb),Yb=se({},Wi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kc}),Xb=Zt(Yb),Qb=se({},Ns,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jb=Zt(Qb),Zb=se({},va,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),e_=Zt(Zb),t_=[9,13,27,32],Yc=u&&"CompositionEvent"in window,Ki=null;u&&"documentMode"in document&&(Ki=document.documentMode);var n_=u&&"TextEvent"in window&&!Ki,bh=u&&(!Yc||Ki&&8<Ki&&11>=Ki),_h=" ",Eh=!1;function xh(s,o){switch(s){case"keyup":return t_.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ch(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Ls=!1;function r_(s,o){switch(s){case"compositionend":return Ch(o);case"keypress":return o.which!==32?null:(Eh=!0,_h);case"textInput":return s=o.data,s===_h&&Eh?null:s;default:return null}}function s_(s,o){if(Ls)return s==="compositionend"||!Yc&&xh(s,o)?(s=gh(),ga=qc=br=null,Ls=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return bh&&o.locale!=="ko"?null:o.data;default:return null}}var i_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Th(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!i_[s.type]:o==="textarea"}function Ih(s,o,c,f){Gp(f),o=xa(o,"onChange"),0<o.length&&(c=new Hc("onChange","change",null,c,f),s.push({event:c,listeners:o}))}var Yi=null,Xi=null;function o_(s){Vh(s,0)}function Sa(s){var o=zs(s);if(Xt(o))return s}function a_(s,o){if(s==="change")return o}var kh=!1;if(u){var Xc;if(u){var Qc="oninput"in document;if(!Qc){var Ah=document.createElement("div");Ah.setAttribute("oninput","return;"),Qc=typeof Ah.oninput=="function"}Xc=Qc}else Xc=!1;kh=Xc&&(!document.documentMode||9<document.documentMode)}function Rh(){Yi&&(Yi.detachEvent("onpropertychange",Mh),Xi=Yi=null)}function Mh(s){if(s.propertyName==="value"&&Sa(Xi)){var o=[];Ih(o,Xi,s,Rc(s)),Qp(o_,o)}}function l_(s,o,c){s==="focusin"?(Rh(),Yi=o,Xi=c,Yi.attachEvent("onpropertychange",Mh)):s==="focusout"&&Rh()}function c_(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Sa(Xi)}function u_(s,o){if(s==="click")return Sa(o)}function d_(s,o){if(s==="input"||s==="change")return Sa(o)}function f_(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var Sn=typeof Object.is=="function"?Object.is:f_;function Qi(s,o){if(Sn(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var c=Object.keys(s),f=Object.keys(o);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var m=c[f];if(!d.call(o,m)||!Sn(s[m],o[m]))return!1}return!0}function Oh(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Ph(s,o){var c=Oh(s);s=0;for(var f;c;){if(c.nodeType===3){if(f=s+c.textContent.length,s<=o&&f>=o)return{node:c,offset:o-s};s=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Oh(c)}}function Dh(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?Dh(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function Nh(){for(var s=window,o=vt();o instanceof s.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch(f){c=!1}if(c)s=o.contentWindow;else break;o=vt(s.document)}return o}function Jc(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}function p_(s){var o=Nh(),c=s.focusedElem,f=s.selectionRange;if(o!==c&&c&&c.ownerDocument&&Dh(c.ownerDocument.documentElement,c)){if(f!==null&&Jc(c)){if(o=f.start,s=f.end,s===void 0&&(s=o),"selectionStart"in c)c.selectionStart=o,c.selectionEnd=Math.min(s,c.value.length);else if(s=(o=c.ownerDocument||document)&&o.defaultView||window,s.getSelection){s=s.getSelection();var m=c.textContent.length,y=Math.min(f.start,m);f=f.end===void 0?y:Math.min(f.end,m),!s.extend&&y>f&&(m=f,f=y,y=m),m=Ph(c,y);var _=Ph(c,f);m&&_&&(s.rangeCount!==1||s.anchorNode!==m.node||s.anchorOffset!==m.offset||s.focusNode!==_.node||s.focusOffset!==_.offset)&&(o=o.createRange(),o.setStart(m.node,m.offset),s.removeAllRanges(),y>f?(s.addRange(o),s.extend(_.node,_.offset)):(o.setEnd(_.node,_.offset),s.addRange(o)))}}for(o=[],s=c;s=s.parentNode;)s.nodeType===1&&o.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<o.length;c++)s=o[c],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var h_=u&&"documentMode"in document&&11>=document.documentMode,js=null,Zc=null,Ji=null,eu=!1;function Lh(s,o,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;eu||js==null||js!==vt(f)||(f=js,"selectionStart"in f&&Jc(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Ji&&Qi(Ji,f)||(Ji=f,f=xa(Zc,"onSelect"),0<f.length&&(o=new Hc("onSelect","select",null,o,c),s.push({event:o,listeners:f}),o.target=js)))}function ba(s,o){var c={};return c[s.toLowerCase()]=o.toLowerCase(),c["Webkit"+s]="webkit"+o,c["Moz"+s]="moz"+o,c}var $s={animationend:ba("Animation","AnimationEnd"),animationiteration:ba("Animation","AnimationIteration"),animationstart:ba("Animation","AnimationStart"),transitionend:ba("Transition","TransitionEnd")},tu={},jh={};u&&(jh=document.createElement("div").style,"AnimationEvent"in window||(delete $s.animationend.animation,delete $s.animationiteration.animation,delete $s.animationstart.animation),"TransitionEvent"in window||delete $s.transitionend.transition);function _a(s){if(tu[s])return tu[s];if(!$s[s])return s;var o=$s[s],c;for(c in o)if(o.hasOwnProperty(c)&&c in jh)return tu[s]=o[c];return s}var $h=_a("animationend"),Uh=_a("animationiteration"),Fh=_a("animationstart"),zh=_a("transitionend"),Bh=new Map,qh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _r(s,o){Bh.set(s,o),a(o,[s])}for(var nu=0;nu<qh.length;nu++){var ru=qh[nu],m_=ru.toLowerCase(),g_=ru[0].toUpperCase()+ru.slice(1);_r(m_,"on"+g_)}_r($h,"onAnimationEnd"),_r(Uh,"onAnimationIteration"),_r(Fh,"onAnimationStart"),_r("dblclick","onDoubleClick"),_r("focusin","onFocus"),_r("focusout","onBlur"),_r(zh,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),y_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zi));function Hh(s,o,c){var f=s.type||"unknown-event";s.currentTarget=c,mb(f,o,void 0,s),s.currentTarget=null}function Vh(s,o){o=(o&4)!==0;for(var c=0;c<s.length;c++){var f=s[c],m=f.event;f=f.listeners;e:{var y=void 0;if(o)for(var _=f.length-1;0<=_;_--){var k=f[_],P=k.instance,q=k.currentTarget;if(k=k.listener,P!==y&&m.isPropagationStopped())break e;Hh(m,k,q),y=P}else for(_=0;_<f.length;_++){if(k=f[_],P=k.instance,q=k.currentTarget,k=k.listener,P!==y&&m.isPropagationStopped())break e;Hh(m,k,q),y=P}}}if(oa)throw s=Dc,oa=!1,Dc=null,s}function Xe(s,o){var c=o[du];c===void 0&&(c=o[du]=new Set);var f=s+"__bubble";c.has(f)||(Wh(o,s,2,!1),c.add(f))}function su(s,o,c){var f=0;o&&(f|=4),Wh(c,s,f,o)}var Ea="_reactListening"+Math.random().toString(36).slice(2);function eo(s){if(!s[Ea]){s[Ea]=!0,r.forEach(function(c){c!=="selectionchange"&&(y_.has(c)||su(c,!1,s),su(c,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[Ea]||(o[Ea]=!0,su("selectionchange",!1,o))}}function Wh(s,o,c,f){switch(mh(o)){case 1:var m=Mb;break;case 4:m=Ob;break;default:m=zc}c=m.bind(null,o,c,s),m=void 0,!Pc||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(m=!0),f?m!==void 0?s.addEventListener(o,c,{capture:!0,passive:m}):s.addEventListener(o,c,!0):m!==void 0?s.addEventListener(o,c,{passive:m}):s.addEventListener(o,c,!1)}function iu(s,o,c,f,m){var y=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var _=f.tag;if(_===3||_===4){var k=f.stateNode.containerInfo;if(k===m||k.nodeType===8&&k.parentNode===m)break;if(_===4)for(_=f.return;_!==null;){var P=_.tag;if((P===3||P===4)&&(P=_.stateNode.containerInfo,P===m||P.nodeType===8&&P.parentNode===m))return;_=_.return}for(;k!==null;){if(_=Qr(k),_===null)return;if(P=_.tag,P===5||P===6){f=y=_;continue e}k=k.parentNode}}f=f.return}Qp(function(){var q=y,ne=Rc(c),re=[];e:{var te=Bh.get(s);if(te!==void 0){var he=Hc,Se=s;switch(s){case"keypress":if(ya(c)===0)break e;case"keydown":case"keyup":he=Gb;break;case"focusin":Se="focus",he=Gc;break;case"focusout":Se="blur",he=Gc;break;case"beforeblur":case"afterblur":he=Gc;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=wh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=Nb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=Xb;break;case $h:case Uh:case Fh:he=$b;break;case zh:he=Jb;break;case"scroll":he=Pb;break;case"wheel":he=e_;break;case"copy":case"cut":case"paste":he=Fb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=Sh}var be=(o&4)!==0,st=!be&&s==="scroll",U=be?te!==null?te+"Capture":null:te;be=[];for(var j=q,z;j!==null;){z=j;var ie=z.stateNode;if(z.tag===5&&ie!==null&&(z=ie,U!==null&&(ie=Li(j,U),ie!=null&&be.push(to(j,ie,z)))),st)break;j=j.return}0<be.length&&(te=new he(te,Se,null,c,ne),re.push({event:te,listeners:be}))}}if((o&7)===0){e:{if(te=s==="mouseover"||s==="pointerover",he=s==="mouseout"||s==="pointerout",te&&c!==Ac&&(Se=c.relatedTarget||c.fromElement)&&(Qr(Se)||Se[Hn]))break e;if((he||te)&&(te=ne.window===ne?ne:(te=ne.ownerDocument)?te.defaultView||te.parentWindow:window,he?(Se=c.relatedTarget||c.toElement,he=q,Se=Se?Qr(Se):null,Se!==null&&(st=Xr(Se),Se!==st||Se.tag!==5&&Se.tag!==6)&&(Se=null)):(he=null,Se=q),he!==Se)){if(be=wh,ie="onMouseLeave",U="onMouseEnter",j="mouse",(s==="pointerout"||s==="pointerover")&&(be=Sh,ie="onPointerLeave",U="onPointerEnter",j="pointer"),st=he==null?te:zs(he),z=Se==null?te:zs(Se),te=new be(ie,j+"leave",he,c,ne),te.target=st,te.relatedTarget=z,ie=null,Qr(ne)===q&&(be=new be(U,j+"enter",Se,c,ne),be.target=z,be.relatedTarget=st,ie=be),st=ie,he&&Se)t:{for(be=he,U=Se,j=0,z=be;z;z=Us(z))j++;for(z=0,ie=U;ie;ie=Us(ie))z++;for(;0<j-z;)be=Us(be),j--;for(;0<z-j;)U=Us(U),z--;for(;j--;){if(be===U||U!==null&&be===U.alternate)break t;be=Us(be),U=Us(U)}be=null}else be=null;he!==null&&Gh(re,te,he,be,!1),Se!==null&&st!==null&&Gh(re,st,Se,be,!0)}}e:{if(te=q?zs(q):window,he=te.nodeName&&te.nodeName.toLowerCase(),he==="select"||he==="input"&&te.type==="file")var Te=a_;else if(Th(te))if(kh)Te=d_;else{Te=c_;var ke=l_}else(he=te.nodeName)&&he.toLowerCase()==="input"&&(te.type==="checkbox"||te.type==="radio")&&(Te=u_);if(Te&&(Te=Te(s,q))){Ih(re,Te,c,ne);break e}ke&&ke(s,te,q),s==="focusout"&&(ke=te._wrapperState)&&ke.controlled&&te.type==="number"&&Gr(te,"number",te.value)}switch(ke=q?zs(q):window,s){case"focusin":(Th(ke)||ke.contentEditable==="true")&&(js=ke,Zc=q,Ji=null);break;case"focusout":Ji=Zc=js=null;break;case"mousedown":eu=!0;break;case"contextmenu":case"mouseup":case"dragend":eu=!1,Lh(re,c,ne);break;case"selectionchange":if(h_)break;case"keydown":case"keyup":Lh(re,c,ne)}var Ae;if(Yc)e:{switch(s){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else Ls?xh(s,c)&&(Oe="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(Oe="onCompositionStart");Oe&&(bh&&c.locale!=="ko"&&(Ls||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&Ls&&(Ae=gh()):(br=ne,qc="value"in br?br.value:br.textContent,Ls=!0)),ke=xa(q,Oe),0<ke.length&&(Oe=new vh(Oe,s,null,c,ne),re.push({event:Oe,listeners:ke}),Ae?Oe.data=Ae:(Ae=Ch(c),Ae!==null&&(Oe.data=Ae)))),(Ae=n_?r_(s,c):s_(s,c))&&(q=xa(q,"onBeforeInput"),0<q.length&&(ne=new vh("onBeforeInput","beforeinput",null,c,ne),re.push({event:ne,listeners:q}),ne.data=Ae))}Vh(re,o)})}function to(s,o,c){return{instance:s,listener:o,currentTarget:c}}function xa(s,o){for(var c=o+"Capture",f=[];s!==null;){var m=s,y=m.stateNode;m.tag===5&&y!==null&&(m=y,y=Li(s,c),y!=null&&f.unshift(to(s,y,m)),y=Li(s,o),y!=null&&f.push(to(s,y,m))),s=s.return}return f}function Us(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Gh(s,o,c,f,m){for(var y=o._reactName,_=[];c!==null&&c!==f;){var k=c,P=k.alternate,q=k.stateNode;if(P!==null&&P===f)break;k.tag===5&&q!==null&&(k=q,m?(P=Li(c,y),P!=null&&_.unshift(to(c,P,k))):m||(P=Li(c,y),P!=null&&_.push(to(c,P,k)))),c=c.return}_.length!==0&&s.push({event:o,listeners:_})}var w_=/\r\n?/g,v_=/\u0000|\uFFFD/g;function Kh(s){return(typeof s=="string"?s:""+s).replace(w_,"\n").replace(v_,"")}function Ca(s,o,c){if(o=Kh(o),Kh(s)!==o&&c)throw Error(t(425))}function Ta(){}var ou=null,au=null;function lu(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var cu=typeof setTimeout=="function"?setTimeout:void 0,S_=typeof clearTimeout=="function"?clearTimeout:void 0,Yh=typeof Promise=="function"?Promise:void 0,b_=typeof queueMicrotask=="function"?queueMicrotask:typeof Yh!="undefined"?function(s){return Yh.resolve(null).then(s).catch(__)}:cu;function __(s){setTimeout(function(){throw s})}function uu(s,o){var c=o,f=0;do{var m=c.nextSibling;if(s.removeChild(c),m&&m.nodeType===8)if(c=m.data,c==="/$"){if(f===0){s.removeChild(m),Vi(o);return}f--}else c!=="$"&&c!=="$?"&&c!=="$!"||f++;c=m}while(c);Vi(o)}function Er(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return s}function Xh(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return s;o--}else c==="/$"&&o++}s=s.previousSibling}return null}var Fs=Math.random().toString(36).slice(2),Dn="__reactFiber$"+Fs,no="__reactProps$"+Fs,Hn="__reactContainer$"+Fs,du="__reactEvents$"+Fs,E_="__reactListeners$"+Fs,x_="__reactHandles$"+Fs;function Qr(s){var o=s[Dn];if(o)return o;for(var c=s.parentNode;c;){if(o=c[Hn]||c[Dn]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(s=Xh(s);s!==null;){if(c=s[Dn])return c;s=Xh(s)}return o}s=c,c=s.parentNode}return null}function ro(s){return s=s[Dn]||s[Hn],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function zs(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function Ia(s){return s[no]||null}var fu=[],Bs=-1;function xr(s){return{current:s}}function Qe(s){0>Bs||(s.current=fu[Bs],fu[Bs]=null,Bs--)}function Ke(s,o){Bs++,fu[Bs]=s.current,s.current=o}var Cr={},It=xr(Cr),Ft=xr(!1),Jr=Cr;function qs(s,o){var c=s.type.contextTypes;if(!c)return Cr;var f=s.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===o)return f.__reactInternalMemoizedMaskedChildContext;var m={},y;for(y in c)m[y]=o[y];return f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=o,s.__reactInternalMemoizedMaskedChildContext=m),m}function zt(s){return s=s.childContextTypes,s!=null}function ka(){Qe(Ft),Qe(It)}function Qh(s,o,c){if(It.current!==Cr)throw Error(t(168));Ke(It,o),Ke(Ft,c)}function Jh(s,o,c){var f=s.stateNode;if(o=o.childContextTypes,typeof f.getChildContext!="function")return c;f=f.getChildContext();for(var m in f)if(!(m in o))throw Error(t(108,ye(s)||"Unknown",m));return se({},c,f)}function Aa(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Cr,Jr=It.current,Ke(It,s),Ke(Ft,Ft.current),!0}function Zh(s,o,c){var f=s.stateNode;if(!f)throw Error(t(169));c?(s=Jh(s,o,Jr),f.__reactInternalMemoizedMergedChildContext=s,Qe(Ft),Qe(It),Ke(It,s)):Qe(Ft),Ke(Ft,c)}var Vn=null,Ra=!1,pu=!1;function em(s){Vn===null?Vn=[s]:Vn.push(s)}function C_(s){Ra=!0,em(s)}function Tr(){if(!pu&&Vn!==null){pu=!0;var s=0,o=qe;try{var c=Vn;for(qe=1;s<c.length;s++){var f=c[s];do f=f(!0);while(f!==null)}Vn=null,Ra=!1}catch(m){throw Vn!==null&&(Vn=Vn.slice(s+1)),nh(Nc,Tr),m}finally{qe=o,pu=!1}}return null}var Hs=[],Vs=0,Ma=null,Oa=0,un=[],dn=0,Zr=null,Wn=1,Gn="";function es(s,o){Hs[Vs++]=Oa,Hs[Vs++]=Ma,Ma=s,Oa=o}function tm(s,o,c){un[dn++]=Wn,un[dn++]=Gn,un[dn++]=Zr,Zr=s;var f=Wn;s=Gn;var m=32-vn(f)-1;f&=~(1<<m),c+=1;var y=32-vn(o)+m;if(30<y){var _=m-m%5;y=(f&(1<<_)-1).toString(32),f>>=_,m-=_,Wn=1<<32-vn(o)+m|c<<m|f,Gn=y+s}else Wn=1<<y|c<<m|f,Gn=s}function hu(s){s.return!==null&&(es(s,1),tm(s,1,0))}function mu(s){for(;s===Ma;)Ma=Hs[--Vs],Hs[Vs]=null,Oa=Hs[--Vs],Hs[Vs]=null;for(;s===Zr;)Zr=un[--dn],un[dn]=null,Gn=un[--dn],un[dn]=null,Wn=un[--dn],un[dn]=null}var en=null,tn=null,Je=!1,bn=null;function nm(s,o){var c=mn(5,null,null,0);c.elementType="DELETED",c.stateNode=o,c.return=s,o=s.deletions,o===null?(s.deletions=[c],s.flags|=16):o.push(c)}function rm(s,o){switch(s.tag){case 5:var c=s.type;return o=o.nodeType!==1||c.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(s.stateNode=o,en=s,tn=Er(o.firstChild),!0):!1;case 6:return o=s.pendingProps===""||o.nodeType!==3?null:o,o!==null?(s.stateNode=o,en=s,tn=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(c=Zr!==null?{id:Wn,overflow:Gn}:null,s.memoizedState={dehydrated:o,treeContext:c,retryLane:1073741824},c=mn(18,null,null,0),c.stateNode=o,c.return=s,s.child=c,en=s,tn=null,!0):!1;default:return!1}}function gu(s){return(s.mode&1)!==0&&(s.flags&128)===0}function yu(s){if(Je){var o=tn;if(o){var c=o;if(!rm(s,o)){if(gu(s))throw Error(t(418));o=Er(c.nextSibling);var f=en;o&&rm(s,o)?nm(f,c):(s.flags=s.flags&-4097|2,Je=!1,en=s)}}else{if(gu(s))throw Error(t(418));s.flags=s.flags&-4097|2,Je=!1,en=s}}}function sm(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;en=s}function Pa(s){if(s!==en)return!1;if(!Je)return sm(s),Je=!0,!1;var o;if((o=s.tag!==3)&&!(o=s.tag!==5)&&(o=s.type,o=o!=="head"&&o!=="body"&&!lu(s.type,s.memoizedProps)),o&&(o=tn)){if(gu(s))throw im(),Error(t(418));for(;o;)nm(s,o),o=Er(o.nextSibling)}if(sm(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8){var c=s.data;if(c==="/$"){if(o===0){tn=Er(s.nextSibling);break e}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++}s=s.nextSibling}tn=null}}else tn=en?Er(s.stateNode.nextSibling):null;return!0}function im(){for(var s=tn;s;)s=Er(s.nextSibling)}function Ws(){tn=en=null,Je=!1}function wu(s){bn===null?bn=[s]:bn.push(s)}var T_=O.ReactCurrentBatchConfig;function so(s,o,c){if(s=c.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(t(309));var f=c.stateNode}if(!f)throw Error(t(147,s));var m=f,y=""+s;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===y?o.ref:(o=function(_){var k=m.refs;_===null?delete k[y]:k[y]=_},o._stringRef=y,o)}if(typeof s!="string")throw Error(t(284));if(!c._owner)throw Error(t(290,s))}return s}function Da(s,o){throw s=Object.prototype.toString.call(o),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s))}function om(s){var o=s._init;return o(s._payload)}function am(s){function o(U,j){if(s){var z=U.deletions;z===null?(U.deletions=[j],U.flags|=16):z.push(j)}}function c(U,j){if(!s)return null;for(;j!==null;)o(U,j),j=j.sibling;return null}function f(U,j){for(U=new Map;j!==null;)j.key!==null?U.set(j.key,j):U.set(j.index,j),j=j.sibling;return U}function m(U,j){return U=Dr(U,j),U.index=0,U.sibling=null,U}function y(U,j,z){return U.index=z,s?(z=U.alternate,z!==null?(z=z.index,z<j?(U.flags|=2,j):z):(U.flags|=2,j)):(U.flags|=1048576,j)}function _(U){return s&&U.alternate===null&&(U.flags|=2),U}function k(U,j,z,ie){return j===null||j.tag!==6?(j=cd(z,U.mode,ie),j.return=U,j):(j=m(j,z),j.return=U,j)}function P(U,j,z,ie){var Te=z.type;return Te===W?ne(U,j,z.props.children,ie,z.key):j!==null&&(j.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===Ie&&om(Te)===j.type)?(ie=m(j,z.props),ie.ref=so(U,j,z),ie.return=U,ie):(ie=sl(z.type,z.key,z.props,null,U.mode,ie),ie.ref=so(U,j,z),ie.return=U,ie)}function q(U,j,z,ie){return j===null||j.tag!==4||j.stateNode.containerInfo!==z.containerInfo||j.stateNode.implementation!==z.implementation?(j=ud(z,U.mode,ie),j.return=U,j):(j=m(j,z.children||[]),j.return=U,j)}function ne(U,j,z,ie,Te){return j===null||j.tag!==7?(j=ls(z,U.mode,ie,Te),j.return=U,j):(j=m(j,z),j.return=U,j)}function re(U,j,z){if(typeof j=="string"&&j!==""||typeof j=="number")return j=cd(""+j,U.mode,z),j.return=U,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case L:return z=sl(j.type,j.key,j.props,null,U.mode,z),z.ref=so(U,null,j),z.return=U,z;case H:return j=ud(j,U.mode,z),j.return=U,j;case Ie:var ie=j._init;return re(U,ie(j._payload),z)}if(Ot(j)||de(j))return j=ls(j,U.mode,z,null),j.return=U,j;Da(U,j)}return null}function te(U,j,z,ie){var Te=j!==null?j.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return Te!==null?null:k(U,j,""+z,ie);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case L:return z.key===Te?P(U,j,z,ie):null;case H:return z.key===Te?q(U,j,z,ie):null;case Ie:return Te=z._init,te(U,j,Te(z._payload),ie)}if(Ot(z)||de(z))return Te!==null?null:ne(U,j,z,ie,null);Da(U,z)}return null}function he(U,j,z,ie,Te){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return U=U.get(z)||null,k(j,U,""+ie,Te);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case L:return U=U.get(ie.key===null?z:ie.key)||null,P(j,U,ie,Te);case H:return U=U.get(ie.key===null?z:ie.key)||null,q(j,U,ie,Te);case Ie:var ke=ie._init;return he(U,j,z,ke(ie._payload),Te)}if(Ot(ie)||de(ie))return U=U.get(z)||null,ne(j,U,ie,Te,null);Da(j,ie)}return null}function Se(U,j,z,ie){for(var Te=null,ke=null,Ae=j,Oe=j=0,gt=null;Ae!==null&&Oe<z.length;Oe++){Ae.index>Oe?(gt=Ae,Ae=null):gt=Ae.sibling;var Be=te(U,Ae,z[Oe],ie);if(Be===null){Ae===null&&(Ae=gt);break}s&&Ae&&Be.alternate===null&&o(U,Ae),j=y(Be,j,Oe),ke===null?Te=Be:ke.sibling=Be,ke=Be,Ae=gt}if(Oe===z.length)return c(U,Ae),Je&&es(U,Oe),Te;if(Ae===null){for(;Oe<z.length;Oe++)Ae=re(U,z[Oe],ie),Ae!==null&&(j=y(Ae,j,Oe),ke===null?Te=Ae:ke.sibling=Ae,ke=Ae);return Je&&es(U,Oe),Te}for(Ae=f(U,Ae);Oe<z.length;Oe++)gt=he(Ae,U,Oe,z[Oe],ie),gt!==null&&(s&&gt.alternate!==null&&Ae.delete(gt.key===null?Oe:gt.key),j=y(gt,j,Oe),ke===null?Te=gt:ke.sibling=gt,ke=gt);return s&&Ae.forEach(function(Nr){return o(U,Nr)}),Je&&es(U,Oe),Te}function be(U,j,z,ie){var Te=de(z);if(typeof Te!="function")throw Error(t(150));if(z=Te.call(z),z==null)throw Error(t(151));for(var ke=Te=null,Ae=j,Oe=j=0,gt=null,Be=z.next();Ae!==null&&!Be.done;Oe++,Be=z.next()){Ae.index>Oe?(gt=Ae,Ae=null):gt=Ae.sibling;var Nr=te(U,Ae,Be.value,ie);if(Nr===null){Ae===null&&(Ae=gt);break}s&&Ae&&Nr.alternate===null&&o(U,Ae),j=y(Nr,j,Oe),ke===null?Te=Nr:ke.sibling=Nr,ke=Nr,Ae=gt}if(Be.done)return c(U,Ae),Je&&es(U,Oe),Te;if(Ae===null){for(;!Be.done;Oe++,Be=z.next())Be=re(U,Be.value,ie),Be!==null&&(j=y(Be,j,Oe),ke===null?Te=Be:ke.sibling=Be,ke=Be);return Je&&es(U,Oe),Te}for(Ae=f(U,Ae);!Be.done;Oe++,Be=z.next())Be=he(Ae,U,Oe,Be.value,ie),Be!==null&&(s&&Be.alternate!==null&&Ae.delete(Be.key===null?Oe:Be.key),j=y(Be,j,Oe),ke===null?Te=Be:ke.sibling=Be,ke=Be);return s&&Ae.forEach(function(iE){return o(U,iE)}),Je&&es(U,Oe),Te}function st(U,j,z,ie){if(typeof z=="object"&&z!==null&&z.type===W&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case L:e:{for(var Te=z.key,ke=j;ke!==null;){if(ke.key===Te){if(Te=z.type,Te===W){if(ke.tag===7){c(U,ke.sibling),j=m(ke,z.props.children),j.return=U,U=j;break e}}else if(ke.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===Ie&&om(Te)===ke.type){c(U,ke.sibling),j=m(ke,z.props),j.ref=so(U,ke,z),j.return=U,U=j;break e}c(U,ke);break}else o(U,ke);ke=ke.sibling}z.type===W?(j=ls(z.props.children,U.mode,ie,z.key),j.return=U,U=j):(ie=sl(z.type,z.key,z.props,null,U.mode,ie),ie.ref=so(U,j,z),ie.return=U,U=ie)}return _(U);case H:e:{for(ke=z.key;j!==null;){if(j.key===ke)if(j.tag===4&&j.stateNode.containerInfo===z.containerInfo&&j.stateNode.implementation===z.implementation){c(U,j.sibling),j=m(j,z.children||[]),j.return=U,U=j;break e}else{c(U,j);break}else o(U,j);j=j.sibling}j=ud(z,U.mode,ie),j.return=U,U=j}return _(U);case Ie:return ke=z._init,st(U,j,ke(z._payload),ie)}if(Ot(z))return Se(U,j,z,ie);if(de(z))return be(U,j,z,ie);Da(U,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,j!==null&&j.tag===6?(c(U,j.sibling),j=m(j,z),j.return=U,U=j):(c(U,j),j=cd(z,U.mode,ie),j.return=U,U=j),_(U)):c(U,j)}return st}var Gs=am(!0),lm=am(!1),Na=xr(null),La=null,Ks=null,vu=null;function Su(){vu=Ks=La=null}function bu(s){var o=Na.current;Qe(Na),s._currentValue=o}function _u(s,o,c){for(;s!==null;){var f=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),s===c)break;s=s.return}}function Ys(s,o){La=s,vu=Ks=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&o)!==0&&(Bt=!0),s.firstContext=null)}function fn(s){var o=s._currentValue;if(vu!==s)if(s={context:s,memoizedValue:o,next:null},Ks===null){if(La===null)throw Error(t(308));Ks=s,La.dependencies={lanes:0,firstContext:s}}else Ks=Ks.next=s;return o}var ts=null;function Eu(s){ts===null?ts=[s]:ts.push(s)}function cm(s,o,c,f){var m=o.interleaved;return m===null?(c.next=c,Eu(o)):(c.next=m.next,m.next=c),o.interleaved=c,Kn(s,f)}function Kn(s,o){s.lanes|=o;var c=s.alternate;for(c!==null&&(c.lanes|=o),c=s,s=s.return;s!==null;)s.childLanes|=o,c=s.alternate,c!==null&&(c.childLanes|=o),c=s,s=s.return;return c.tag===3?c.stateNode:null}var Ir=!1;function xu(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function um(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Yn(s,o){return{eventTime:s,lane:o,tag:0,payload:null,callback:null,next:null}}function kr(s,o,c){var f=s.updateQueue;if(f===null)return null;if(f=f.shared,(Ue&2)!==0){var m=f.pending;return m===null?o.next=o:(o.next=m.next,m.next=o),f.pending=o,Kn(s,c)}return m=f.interleaved,m===null?(o.next=o,Eu(f)):(o.next=m.next,m.next=o),f.interleaved=o,Kn(s,c)}function ja(s,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194240)!==0)){var f=o.lanes;f&=s.pendingLanes,c|=f,o.lanes=c,$c(s,c)}}function dm(s,o){var c=s.updateQueue,f=s.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var m=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var _={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};y===null?m=y=_:y=y.next=_,c=c.next}while(c!==null);y===null?m=y=o:y=y.next=o}else m=y=o;c={baseState:f.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:f.shared,effects:f.effects},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=o:s.next=o,c.lastBaseUpdate=o}function $a(s,o,c,f){var m=s.updateQueue;Ir=!1;var y=m.firstBaseUpdate,_=m.lastBaseUpdate,k=m.shared.pending;if(k!==null){m.shared.pending=null;var P=k,q=P.next;P.next=null,_===null?y=q:_.next=q,_=P;var ne=s.alternate;ne!==null&&(ne=ne.updateQueue,k=ne.lastBaseUpdate,k!==_&&(k===null?ne.firstBaseUpdate=q:k.next=q,ne.lastBaseUpdate=P))}if(y!==null){var re=m.baseState;_=0,ne=q=P=null,k=y;do{var te=k.lane,he=k.eventTime;if((f&te)===te){ne!==null&&(ne=ne.next={eventTime:he,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var Se=s,be=k;switch(te=o,he=c,be.tag){case 1:if(Se=be.payload,typeof Se=="function"){re=Se.call(he,re,te);break e}re=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=be.payload,te=typeof Se=="function"?Se.call(he,re,te):Se,te==null)break e;re=se({},re,te);break e;case 2:Ir=!0}}k.callback!==null&&k.lane!==0&&(s.flags|=64,te=m.effects,te===null?m.effects=[k]:te.push(k))}else he={eventTime:he,lane:te,tag:k.tag,payload:k.payload,callback:k.callback,next:null},ne===null?(q=ne=he,P=re):ne=ne.next=he,_|=te;if(k=k.next,k===null){if(k=m.shared.pending,k===null)break;te=k,k=te.next,te.next=null,m.lastBaseUpdate=te,m.shared.pending=null}}while(!0);if(ne===null&&(P=re),m.baseState=P,m.firstBaseUpdate=q,m.lastBaseUpdate=ne,o=m.shared.interleaved,o!==null){m=o;do _|=m.lane,m=m.next;while(m!==o)}else y===null&&(m.shared.lanes=0);ss|=_,s.lanes=_,s.memoizedState=re}}function fm(s,o,c){if(s=o.effects,o.effects=null,s!==null)for(o=0;o<s.length;o++){var f=s[o],m=f.callback;if(m!==null){if(f.callback=null,f=c,typeof m!="function")throw Error(t(191,m));m.call(f)}}}var io={},Nn=xr(io),oo=xr(io),ao=xr(io);function ns(s){if(s===io)throw Error(t(174));return s}function Cu(s,o){switch(Ke(ao,o),Ke(oo,s),Ke(Nn,io),s=o.nodeType,s){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:mr(null,"");break;default:s=s===8?o.parentNode:o,o=s.namespaceURI||null,s=s.tagName,o=mr(o,s)}Qe(Nn),Ke(Nn,o)}function Xs(){Qe(Nn),Qe(oo),Qe(ao)}function pm(s){ns(ao.current);var o=ns(Nn.current),c=mr(o,s.type);o!==c&&(Ke(oo,s),Ke(Nn,c))}function Tu(s){oo.current===s&&(Qe(Nn),Qe(oo))}var Ze=xr(0);function Ua(s){for(var o=s;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Iu=[];function ku(){for(var s=0;s<Iu.length;s++)Iu[s]._workInProgressVersionPrimary=null;Iu.length=0}var Fa=O.ReactCurrentDispatcher,Au=O.ReactCurrentBatchConfig,rs=0,et=null,dt=null,ht=null,za=!1,lo=!1,co=0,I_=0;function kt(){throw Error(t(321))}function Ru(s,o){if(o===null)return!1;for(var c=0;c<o.length&&c<s.length;c++)if(!Sn(s[c],o[c]))return!1;return!0}function Mu(s,o,c,f,m,y){if(rs=y,et=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Fa.current=s===null||s.memoizedState===null?M_:O_,s=c(f,m),lo){y=0;do{if(lo=!1,co=0,25<=y)throw Error(t(301));y+=1,ht=dt=null,o.updateQueue=null,Fa.current=P_,s=c(f,m)}while(lo)}if(Fa.current=Ha,o=dt!==null&&dt.next!==null,rs=0,ht=dt=et=null,za=!1,o)throw Error(t(300));return s}function Ou(){var s=co!==0;return co=0,s}function Ln(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?et.memoizedState=ht=s:ht=ht.next=s,ht}function pn(){if(dt===null){var s=et.alternate;s=s!==null?s.memoizedState:null}else s=dt.next;var o=ht===null?et.memoizedState:ht.next;if(o!==null)ht=o,dt=s;else{if(s===null)throw Error(t(310));dt=s,s={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},ht===null?et.memoizedState=ht=s:ht=ht.next=s}return ht}function uo(s,o){return typeof o=="function"?o(s):o}function Pu(s){var o=pn(),c=o.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=s;var f=dt,m=f.baseQueue,y=c.pending;if(y!==null){if(m!==null){var _=m.next;m.next=y.next,y.next=_}f.baseQueue=m=y,c.pending=null}if(m!==null){y=m.next,f=f.baseState;var k=_=null,P=null,q=y;do{var ne=q.lane;if((rs&ne)===ne)P!==null&&(P=P.next={lane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),f=q.hasEagerState?q.eagerState:s(f,q.action);else{var re={lane:ne,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null};P===null?(k=P=re,_=f):P=P.next=re,et.lanes|=ne,ss|=ne}q=q.next}while(q!==null&&q!==y);P===null?_=f:P.next=k,Sn(f,o.memoizedState)||(Bt=!0),o.memoizedState=f,o.baseState=_,o.baseQueue=P,c.lastRenderedState=f}if(s=c.interleaved,s!==null){m=s;do y=m.lane,et.lanes|=y,ss|=y,m=m.next;while(m!==s)}else m===null&&(c.lanes=0);return[o.memoizedState,c.dispatch]}function Du(s){var o=pn(),c=o.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=s;var f=c.dispatch,m=c.pending,y=o.memoizedState;if(m!==null){c.pending=null;var _=m=m.next;do y=s(y,_.action),_=_.next;while(_!==m);Sn(y,o.memoizedState)||(Bt=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),c.lastRenderedState=y}return[y,f]}function hm(){}function mm(s,o){var c=et,f=pn(),m=o(),y=!Sn(f.memoizedState,m);if(y&&(f.memoizedState=m,Bt=!0),f=f.queue,Nu(wm.bind(null,c,f,s),[s]),f.getSnapshot!==o||y||ht!==null&&ht.memoizedState.tag&1){if(c.flags|=2048,fo(9,ym.bind(null,c,f,m,o),void 0,null),mt===null)throw Error(t(349));(rs&30)!==0||gm(c,o,m)}return m}function gm(s,o,c){s.flags|=16384,s={getSnapshot:o,value:c},o=et.updateQueue,o===null?(o={lastEffect:null,stores:null},et.updateQueue=o,o.stores=[s]):(c=o.stores,c===null?o.stores=[s]:c.push(s))}function ym(s,o,c,f){o.value=c,o.getSnapshot=f,vm(o)&&Sm(s)}function wm(s,o,c){return c(function(){vm(o)&&Sm(s)})}function vm(s){var o=s.getSnapshot;s=s.value;try{var c=o();return!Sn(s,c)}catch(f){return!0}}function Sm(s){var o=Kn(s,1);o!==null&&Cn(o,s,1,-1)}function bm(s){var o=Ln();return typeof s=="function"&&(s=s()),o.memoizedState=o.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:uo,lastRenderedState:s},o.queue=s,s=s.dispatch=R_.bind(null,et,s),[o.memoizedState,s]}function fo(s,o,c,f){return s={tag:s,create:o,destroy:c,deps:f,next:null},o=et.updateQueue,o===null?(o={lastEffect:null,stores:null},et.updateQueue=o,o.lastEffect=s.next=s):(c=o.lastEffect,c===null?o.lastEffect=s.next=s:(f=c.next,c.next=s,s.next=f,o.lastEffect=s)),s}function _m(){return pn().memoizedState}function Ba(s,o,c,f){var m=Ln();et.flags|=s,m.memoizedState=fo(1|o,c,void 0,f===void 0?null:f)}function qa(s,o,c,f){var m=pn();f=f===void 0?null:f;var y=void 0;if(dt!==null){var _=dt.memoizedState;if(y=_.destroy,f!==null&&Ru(f,_.deps)){m.memoizedState=fo(o,c,y,f);return}}et.flags|=s,m.memoizedState=fo(1|o,c,y,f)}function Em(s,o){return Ba(8390656,8,s,o)}function Nu(s,o){return qa(2048,8,s,o)}function xm(s,o){return qa(4,2,s,o)}function Cm(s,o){return qa(4,4,s,o)}function Tm(s,o){if(typeof o=="function")return s=s(),o(s),function(){o(null)};if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function Im(s,o,c){return c=c!=null?c.concat([s]):null,qa(4,4,Tm.bind(null,o,s),c)}function Lu(){}function km(s,o){var c=pn();o=o===void 0?null:o;var f=c.memoizedState;return f!==null&&o!==null&&Ru(o,f[1])?f[0]:(c.memoizedState=[s,o],s)}function Am(s,o){var c=pn();o=o===void 0?null:o;var f=c.memoizedState;return f!==null&&o!==null&&Ru(o,f[1])?f[0]:(s=s(),c.memoizedState=[s,o],s)}function Rm(s,o,c){return(rs&21)===0?(s.baseState&&(s.baseState=!1,Bt=!0),s.memoizedState=c):(Sn(c,o)||(c=oh(),et.lanes|=c,ss|=c,s.baseState=!0),o)}function k_(s,o){var c=qe;qe=c!==0&&4>c?c:4,s(!0);var f=Au.transition;Au.transition={};try{s(!1),o()}finally{qe=c,Au.transition=f}}function Mm(){return pn().memoizedState}function A_(s,o,c){var f=Or(s);if(c={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null},Om(s))Pm(o,c);else if(c=cm(s,o,c,f),c!==null){var m=Dt();Cn(c,s,f,m),Dm(c,o,f)}}function R_(s,o,c){var f=Or(s),m={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null};if(Om(s))Pm(o,m);else{var y=s.alternate;if(s.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var _=o.lastRenderedState,k=y(_,c);if(m.hasEagerState=!0,m.eagerState=k,Sn(k,_)){var P=o.interleaved;P===null?(m.next=m,Eu(o)):(m.next=P.next,P.next=m),o.interleaved=m;return}}catch(q){}finally{}c=cm(s,o,m,f),c!==null&&(m=Dt(),Cn(c,s,f,m),Dm(c,o,f))}}function Om(s){var o=s.alternate;return s===et||o!==null&&o===et}function Pm(s,o){lo=za=!0;var c=s.pending;c===null?o.next=o:(o.next=c.next,c.next=o),s.pending=o}function Dm(s,o,c){if((c&4194240)!==0){var f=o.lanes;f&=s.pendingLanes,c|=f,o.lanes=c,$c(s,c)}}var Ha={readContext:fn,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useInsertionEffect:kt,useLayoutEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useMutableSource:kt,useSyncExternalStore:kt,useId:kt,unstable_isNewReconciler:!1},M_={readContext:fn,useCallback:function(s,o){return Ln().memoizedState=[s,o===void 0?null:o],s},useContext:fn,useEffect:Em,useImperativeHandle:function(s,o,c){return c=c!=null?c.concat([s]):null,Ba(4194308,4,Tm.bind(null,o,s),c)},useLayoutEffect:function(s,o){return Ba(4194308,4,s,o)},useInsertionEffect:function(s,o){return Ba(4,2,s,o)},useMemo:function(s,o){var c=Ln();return o=o===void 0?null:o,s=s(),c.memoizedState=[s,o],s},useReducer:function(s,o,c){var f=Ln();return o=c!==void 0?c(o):o,f.memoizedState=f.baseState=o,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:o},f.queue=s,s=s.dispatch=A_.bind(null,et,s),[f.memoizedState,s]},useRef:function(s){var o=Ln();return s={current:s},o.memoizedState=s},useState:bm,useDebugValue:Lu,useDeferredValue:function(s){return Ln().memoizedState=s},useTransition:function(){var s=bm(!1),o=s[0];return s=k_.bind(null,s[1]),Ln().memoizedState=s,[o,s]},useMutableSource:function(){},useSyncExternalStore:function(s,o,c){var f=et,m=Ln();if(Je){if(c===void 0)throw Error(t(407));c=c()}else{if(c=o(),mt===null)throw Error(t(349));(rs&30)!==0||gm(f,o,c)}m.memoizedState=c;var y={value:c,getSnapshot:o};return m.queue=y,Em(wm.bind(null,f,y,s),[s]),f.flags|=2048,fo(9,ym.bind(null,f,y,c,o),void 0,null),c},useId:function(){var s=Ln(),o=mt.identifierPrefix;if(Je){var c=Gn,f=Wn;c=(f&~(1<<32-vn(f)-1)).toString(32)+c,o=":"+o+"R"+c,c=co++,0<c&&(o+="H"+c.toString(32)),o+=":"}else c=I_++,o=":"+o+"r"+c.toString(32)+":";return s.memoizedState=o},unstable_isNewReconciler:!1},O_={readContext:fn,useCallback:km,useContext:fn,useEffect:Nu,useImperativeHandle:Im,useInsertionEffect:xm,useLayoutEffect:Cm,useMemo:Am,useReducer:Pu,useRef:_m,useState:function(){return Pu(uo)},useDebugValue:Lu,useDeferredValue:function(s){var o=pn();return Rm(o,dt.memoizedState,s)},useTransition:function(){var s=Pu(uo)[0],o=pn().memoizedState;return[s,o]},useMutableSource:hm,useSyncExternalStore:mm,useId:Mm,unstable_isNewReconciler:!1},P_={readContext:fn,useCallback:km,useContext:fn,useEffect:Nu,useImperativeHandle:Im,useInsertionEffect:xm,useLayoutEffect:Cm,useMemo:Am,useReducer:Du,useRef:_m,useState:function(){return Du(uo)},useDebugValue:Lu,useDeferredValue:function(s){var o=pn();return dt===null?o.memoizedState=s:Rm(o,dt.memoizedState,s)},useTransition:function(){var s=Du(uo)[0],o=pn().memoizedState;return[s,o]},useMutableSource:hm,useSyncExternalStore:mm,useId:Mm,unstable_isNewReconciler:!1};function _n(s,o){if(s&&s.defaultProps){o=se({},o),s=s.defaultProps;for(var c in s)o[c]===void 0&&(o[c]=s[c]);return o}return o}function ju(s,o,c,f){o=s.memoizedState,c=c(f,o),c=c==null?o:se({},o,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var Va={isMounted:function(s){return(s=s._reactInternals)?Xr(s)===s:!1},enqueueSetState:function(s,o,c){s=s._reactInternals;var f=Dt(),m=Or(s),y=Yn(f,m);y.payload=o,c!=null&&(y.callback=c),o=kr(s,y,m),o!==null&&(Cn(o,s,m,f),ja(o,s,m))},enqueueReplaceState:function(s,o,c){s=s._reactInternals;var f=Dt(),m=Or(s),y=Yn(f,m);y.tag=1,y.payload=o,c!=null&&(y.callback=c),o=kr(s,y,m),o!==null&&(Cn(o,s,m,f),ja(o,s,m))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var c=Dt(),f=Or(s),m=Yn(c,f);m.tag=2,o!=null&&(m.callback=o),o=kr(s,m,f),o!==null&&(Cn(o,s,f,c),ja(o,s,f))}};function Nm(s,o,c,f,m,y,_){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(f,y,_):o.prototype&&o.prototype.isPureReactComponent?!Qi(c,f)||!Qi(m,y):!0}function Lm(s,o,c){var f=!1,m=Cr,y=o.contextType;return typeof y=="object"&&y!==null?y=fn(y):(m=zt(o)?Jr:It.current,f=o.contextTypes,y=(f=f!=null)?qs(s,m):Cr),o=new o(c,y),s.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Va,s.stateNode=o,o._reactInternals=s,f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=m,s.__reactInternalMemoizedMaskedChildContext=y),o}function jm(s,o,c,f){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,f),o.state!==s&&Va.enqueueReplaceState(o,o.state,null)}function $u(s,o,c,f){var m=s.stateNode;m.props=c,m.state=s.memoizedState,m.refs={},xu(s);var y=o.contextType;typeof y=="object"&&y!==null?m.context=fn(y):(y=zt(o)?Jr:It.current,m.context=qs(s,y)),m.state=s.memoizedState,y=o.getDerivedStateFromProps,typeof y=="function"&&(ju(s,o,y,c),m.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(o=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),o!==m.state&&Va.enqueueReplaceState(m,m.state,null),$a(s,c,m,f),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308)}function Qs(s,o){try{var c="",f=o;do c+=B(f),f=f.return;while(f);var m=c}catch(y){m="\nError generating stack: "+y.message+"\n"+y.stack}return{value:s,source:o,stack:m,digest:null}}function Uu(s,o,c){return{value:s,source:null,stack:c!=null?c:null,digest:o!=null?o:null}}function Fu(s,o){try{console.error(o.value)}catch(c){setTimeout(function(){throw c})}}var D_=typeof WeakMap=="function"?WeakMap:Map;function $m(s,o,c){c=Yn(-1,c),c.tag=3,c.payload={element:null};var f=o.value;return c.callback=function(){Ja||(Ja=!0,td=f),Fu(s,o)},c}function Um(s,o,c){c=Yn(-1,c),c.tag=3;var f=s.type.getDerivedStateFromError;if(typeof f=="function"){var m=o.value;c.payload=function(){return f(m)},c.callback=function(){Fu(s,o)}}var y=s.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(c.callback=function(){Fu(s,o),typeof f!="function"&&(Rr===null?Rr=new Set([this]):Rr.add(this));var _=o.stack;this.componentDidCatch(o.value,{componentStack:_!==null?_:""})}),c}function Fm(s,o,c){var f=s.pingCache;if(f===null){f=s.pingCache=new D_;var m=new Set;f.set(o,m)}else m=f.get(o),m===void 0&&(m=new Set,f.set(o,m));m.has(c)||(m.add(c),s=K_.bind(null,s,o,c),o.then(s,s))}function zm(s){do{var o;if((o=s.tag===13)&&(o=s.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return s;s=s.return}while(s!==null);return null}function Bm(s,o,c,f,m){return(s.mode&1)===0?(s===o?s.flags|=65536:(s.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(o=Yn(-1,1),o.tag=2,kr(c,o,1))),c.lanes|=1),s):(s.flags|=65536,s.lanes=m,s)}var N_=O.ReactCurrentOwner,Bt=!1;function Pt(s,o,c,f){o.child=s===null?lm(o,null,c,f):Gs(o,s.child,c,f)}function qm(s,o,c,f,m){c=c.render;var y=o.ref;return Ys(o,m),f=Mu(s,o,c,f,y,m),c=Ou(),s!==null&&!Bt?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~m,Xn(s,o,m)):(Je&&c&&hu(o),o.flags|=1,Pt(s,o,f,m),o.child)}function Hm(s,o,c,f,m){if(s===null){var y=c.type;return typeof y=="function"&&!ld(y)&&y.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(o.tag=15,o.type=y,Vm(s,o,y,f,m)):(s=sl(c.type,null,f,o,o.mode,m),s.ref=o.ref,s.return=o,o.child=s)}if(y=s.child,(s.lanes&m)===0){var _=y.memoizedProps;if(c=c.compare,c=c!==null?c:Qi,c(_,f)&&s.ref===o.ref)return Xn(s,o,m)}return o.flags|=1,s=Dr(y,f),s.ref=o.ref,s.return=o,o.child=s}function Vm(s,o,c,f,m){if(s!==null){var y=s.memoizedProps;if(Qi(y,f)&&s.ref===o.ref)if(Bt=!1,o.pendingProps=f=y,(s.lanes&m)!==0)(s.flags&131072)!==0&&(Bt=!0);else return o.lanes=s.lanes,Xn(s,o,m)}return zu(s,o,c,f,m)}function Wm(s,o,c){var f=o.pendingProps,m=f.children,y=s!==null?s.memoizedState:null;if(f.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(Zs,nn),nn|=c;else{if((c&1073741824)===0)return s=y!==null?y.baseLanes|c:c,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:s,cachePool:null,transitions:null},o.updateQueue=null,Ke(Zs,nn),nn|=s,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=y!==null?y.baseLanes:c,Ke(Zs,nn),nn|=f}else y!==null?(f=y.baseLanes|c,o.memoizedState=null):f=c,Ke(Zs,nn),nn|=f;return Pt(s,o,m,c),o.child}function Gm(s,o){var c=o.ref;(s===null&&c!==null||s!==null&&s.ref!==c)&&(o.flags|=512,o.flags|=2097152)}function zu(s,o,c,f,m){var y=zt(c)?Jr:It.current;return y=qs(o,y),Ys(o,m),c=Mu(s,o,c,f,y,m),f=Ou(),s!==null&&!Bt?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~m,Xn(s,o,m)):(Je&&f&&hu(o),o.flags|=1,Pt(s,o,c,m),o.child)}function Km(s,o,c,f,m){if(zt(c)){var y=!0;Aa(o)}else y=!1;if(Ys(o,m),o.stateNode===null)Ga(s,o),Lm(o,c,f),$u(o,c,f,m),f=!0;else if(s===null){var _=o.stateNode,k=o.memoizedProps;_.props=k;var P=_.context,q=c.contextType;typeof q=="object"&&q!==null?q=fn(q):(q=zt(c)?Jr:It.current,q=qs(o,q));var ne=c.getDerivedStateFromProps,re=typeof ne=="function"||typeof _.getSnapshotBeforeUpdate=="function";re||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(k!==f||P!==q)&&jm(o,_,f,q),Ir=!1;var te=o.memoizedState;_.state=te,$a(o,f,_,m),P=o.memoizedState,k!==f||te!==P||Ft.current||Ir?(typeof ne=="function"&&(ju(o,c,ne,f),P=o.memoizedState),(k=Ir||Nm(o,c,k,f,te,P,q))?(re||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(o.flags|=4194308)):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=P),_.props=f,_.state=P,_.context=q,f=k):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{_=o.stateNode,um(s,o),k=o.memoizedProps,q=o.type===o.elementType?k:_n(o.type,k),_.props=q,re=o.pendingProps,te=_.context,P=c.contextType,typeof P=="object"&&P!==null?P=fn(P):(P=zt(c)?Jr:It.current,P=qs(o,P));var he=c.getDerivedStateFromProps;(ne=typeof he=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(k!==re||te!==P)&&jm(o,_,f,P),Ir=!1,te=o.memoizedState,_.state=te,$a(o,f,_,m);var Se=o.memoizedState;k!==re||te!==Se||Ft.current||Ir?(typeof he=="function"&&(ju(o,c,he,f),Se=o.memoizedState),(q=Ir||Nm(o,c,q,f,te,Se,P)||!1)?(ne||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(f,Se,P),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(f,Se,P)),typeof _.componentDidUpdate=="function"&&(o.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof _.componentDidUpdate!="function"||k===s.memoizedProps&&te===s.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||k===s.memoizedProps&&te===s.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=Se),_.props=f,_.state=Se,_.context=P,f=q):(typeof _.componentDidUpdate!="function"||k===s.memoizedProps&&te===s.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||k===s.memoizedProps&&te===s.memoizedState||(o.flags|=1024),f=!1)}return Bu(s,o,c,f,y,m)}function Bu(s,o,c,f,m,y){Gm(s,o);var _=(o.flags&128)!==0;if(!f&&!_)return m&&Zh(o,c,!1),Xn(s,o,y);f=o.stateNode,N_.current=o;var k=_&&typeof c.getDerivedStateFromError!="function"?null:f.render();return o.flags|=1,s!==null&&_?(o.child=Gs(o,s.child,null,y),o.child=Gs(o,null,k,y)):Pt(s,o,k,y),o.memoizedState=f.state,m&&Zh(o,c,!0),o.child}function Ym(s){var o=s.stateNode;o.pendingContext?Qh(s,o.pendingContext,o.pendingContext!==o.context):o.context&&Qh(s,o.context,!1),Cu(s,o.containerInfo)}function Xm(s,o,c,f,m){return Ws(),wu(m),o.flags|=256,Pt(s,o,c,f),o.child}var qu={dehydrated:null,treeContext:null,retryLane:0};function Hu(s){return{baseLanes:s,cachePool:null,transitions:null}}function Qm(s,o,c){var f=o.pendingProps,m=Ze.current,y=!1,_=(o.flags&128)!==0,k;if((k=_)||(k=s!==null&&s.memoizedState===null?!1:(m&2)!==0),k?(y=!0,o.flags&=-129):(s===null||s.memoizedState!==null)&&(m|=1),Ke(Ze,m&1),s===null)return yu(o),s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((o.mode&1)===0?o.lanes=1:s.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(_=f.children,s=f.fallback,y?(f=o.mode,y=o.child,_={mode:"hidden",children:_},(f&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=_):y=il(_,f,0,null),s=ls(s,f,c,null),y.return=o,s.return=o,y.sibling=s,o.child=y,o.child.memoizedState=Hu(c),o.memoizedState=qu,s):Vu(o,_));if(m=s.memoizedState,m!==null&&(k=m.dehydrated,k!==null))return L_(s,o,_,f,k,m,c);if(y){y=f.fallback,_=o.mode,m=s.child,k=m.sibling;var P={mode:"hidden",children:f.children};return(_&1)===0&&o.child!==m?(f=o.child,f.childLanes=0,f.pendingProps=P,o.deletions=null):(f=Dr(m,P),f.subtreeFlags=m.subtreeFlags&14680064),k!==null?y=Dr(k,y):(y=ls(y,_,c,null),y.flags|=2),y.return=o,f.return=o,f.sibling=y,o.child=f,f=y,y=o.child,_=s.child.memoizedState,_=_===null?Hu(c):{baseLanes:_.baseLanes|c,cachePool:null,transitions:_.transitions},y.memoizedState=_,y.childLanes=s.childLanes&~c,o.memoizedState=qu,f}return y=s.child,s=y.sibling,f=Dr(y,{mode:"visible",children:f.children}),(o.mode&1)===0&&(f.lanes=c),f.return=o,f.sibling=null,s!==null&&(c=o.deletions,c===null?(o.deletions=[s],o.flags|=16):c.push(s)),o.child=f,o.memoizedState=null,f}function Vu(s,o){return o=il({mode:"visible",children:o},s.mode,0,null),o.return=s,s.child=o}function Wa(s,o,c,f){return f!==null&&wu(f),Gs(o,s.child,null,c),s=Vu(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function L_(s,o,c,f,m,y,_){if(c)return o.flags&256?(o.flags&=-257,f=Uu(Error(t(422))),Wa(s,o,_,f)):o.memoizedState!==null?(o.child=s.child,o.flags|=128,null):(y=f.fallback,m=o.mode,f=il({mode:"visible",children:f.children},m,0,null),y=ls(y,m,_,null),y.flags|=2,f.return=o,y.return=o,f.sibling=y,o.child=f,(o.mode&1)!==0&&Gs(o,s.child,null,_),o.child.memoizedState=Hu(_),o.memoizedState=qu,y);if((o.mode&1)===0)return Wa(s,o,_,null);if(m.data==="$!"){if(f=m.nextSibling&&m.nextSibling.dataset,f)var k=f.dgst;return f=k,y=Error(t(419)),f=Uu(y,f,void 0),Wa(s,o,_,f)}if(k=(_&s.childLanes)!==0,Bt||k){if(f=mt,f!==null){switch(_&-_){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(f.suspendedLanes|_))!==0?0:m,m!==0&&m!==y.retryLane&&(y.retryLane=m,Kn(s,m),Cn(f,s,m,-1))}return ad(),f=Uu(Error(t(421))),Wa(s,o,_,f)}return m.data==="$?"?(o.flags|=128,o.child=s.child,o=Y_.bind(null,s),m._reactRetry=o,null):(s=y.treeContext,tn=Er(m.nextSibling),en=o,Je=!0,bn=null,s!==null&&(un[dn++]=Wn,un[dn++]=Gn,un[dn++]=Zr,Wn=s.id,Gn=s.overflow,Zr=o),o=Vu(o,f.children),o.flags|=4096,o)}function Jm(s,o,c){s.lanes|=o;var f=s.alternate;f!==null&&(f.lanes|=o),_u(s.return,o,c)}function Wu(s,o,c,f,m){var y=s.memoizedState;y===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:m}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=f,y.tail=c,y.tailMode=m)}function Zm(s,o,c){var f=o.pendingProps,m=f.revealOrder,y=f.tail;if(Pt(s,o,f.children,c),f=Ze.current,(f&2)!==0)f=f&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Jm(s,c,o);else if(s.tag===19)Jm(s,c,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}f&=1}if(Ke(Ze,f),(o.mode&1)===0)o.memoizedState=null;else switch(m){case"forwards":for(c=o.child,m=null;c!==null;)s=c.alternate,s!==null&&Ua(s)===null&&(m=c),c=c.sibling;c=m,c===null?(m=o.child,o.child=null):(m=c.sibling,c.sibling=null),Wu(o,!1,m,c,y);break;case"backwards":for(c=null,m=o.child,o.child=null;m!==null;){if(s=m.alternate,s!==null&&Ua(s)===null){o.child=m;break}s=m.sibling,m.sibling=c,c=m,m=s}Wu(o,!0,c,null,y);break;case"together":Wu(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Ga(s,o){(o.mode&1)===0&&s!==null&&(s.alternate=null,o.alternate=null,o.flags|=2)}function Xn(s,o,c){if(s!==null&&(o.dependencies=s.dependencies),ss|=o.lanes,(c&o.childLanes)===0)return null;if(s!==null&&o.child!==s.child)throw Error(t(153));if(o.child!==null){for(s=o.child,c=Dr(s,s.pendingProps),o.child=c,c.return=o;s.sibling!==null;)s=s.sibling,c=c.sibling=Dr(s,s.pendingProps),c.return=o;c.sibling=null}return o.child}function j_(s,o,c){switch(o.tag){case 3:Ym(o),Ws();break;case 5:pm(o);break;case 1:zt(o.type)&&Aa(o);break;case 4:Cu(o,o.stateNode.containerInfo);break;case 10:var f=o.type._context,m=o.memoizedProps.value;Ke(Na,f._currentValue),f._currentValue=m;break;case 13:if(f=o.memoizedState,f!==null)return f.dehydrated!==null?(Ke(Ze,Ze.current&1),o.flags|=128,null):(c&o.child.childLanes)!==0?Qm(s,o,c):(Ke(Ze,Ze.current&1),s=Xn(s,o,c),s!==null?s.sibling:null);Ke(Ze,Ze.current&1);break;case 19:if(f=(c&o.childLanes)!==0,(s.flags&128)!==0){if(f)return Zm(s,o,c);o.flags|=128}if(m=o.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Ke(Ze,Ze.current),f)break;return null;case 22:case 23:return o.lanes=0,Wm(s,o,c)}return Xn(s,o,c)}var eg,Gu,tg,ng;eg=function(s,o){for(var c=o.child;c!==null;){if(c.tag===5||c.tag===6)s.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Gu=function(){},tg=function(s,o,c,f){var m=s.memoizedProps;if(m!==f){s=o.stateNode,ns(Nn.current);var y=null;switch(c){case"input":m=St(s,m),f=St(s,f),y=[];break;case"select":m=se({},m,{value:void 0}),f=se({},f,{value:void 0}),y=[];break;case"textarea":m=fr(s,m),f=fr(s,f),y=[];break;default:typeof m.onClick!="function"&&typeof f.onClick=="function"&&(s.onclick=Ta)}Ic(c,f);var _;c=null;for(q in m)if(!f.hasOwnProperty(q)&&m.hasOwnProperty(q)&&m[q]!=null)if(q==="style"){var k=m[q];for(_ in k)k.hasOwnProperty(_)&&(c||(c={}),c[_]="")}else q!=="dangerouslySetInnerHTML"&&q!=="children"&&q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&q!=="autoFocus"&&(i.hasOwnProperty(q)?y||(y=[]):(y=y||[]).push(q,null));for(q in f){var P=f[q];if(k=m!=null?m[q]:void 0,f.hasOwnProperty(q)&&P!==k&&(P!=null||k!=null))if(q==="style")if(k){for(_ in k)!k.hasOwnProperty(_)||P&&P.hasOwnProperty(_)||(c||(c={}),c[_]="");for(_ in P)P.hasOwnProperty(_)&&k[_]!==P[_]&&(c||(c={}),c[_]=P[_])}else c||(y||(y=[]),y.push(q,c)),c=P;else q==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,k=k?k.__html:void 0,P!=null&&k!==P&&(y=y||[]).push(q,P)):q==="children"?typeof P!="string"&&typeof P!="number"||(y=y||[]).push(q,""+P):q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&(i.hasOwnProperty(q)?(P!=null&&q==="onScroll"&&Xe("scroll",s),y||k===P||(y=[])):(y=y||[]).push(q,P))}c&&(y=y||[]).push("style",c);var q=y;(o.updateQueue=q)&&(o.flags|=4)}},ng=function(s,o,c,f){c!==f&&(o.flags|=4)};function po(s,o){if(!Je)switch(s.tailMode){case"hidden":o=s.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:f.sibling=null}}function At(s){var o=s.alternate!==null&&s.alternate.child===s.child,c=0,f=0;if(o)for(var m=s.child;m!==null;)c|=m.lanes|m.childLanes,f|=m.subtreeFlags&14680064,f|=m.flags&14680064,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)c|=m.lanes|m.childLanes,f|=m.subtreeFlags,f|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=f,s.childLanes=c,o}function $_(s,o,c){var f=o.pendingProps;switch(mu(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(o),null;case 1:return zt(o.type)&&ka(),At(o),null;case 3:return f=o.stateNode,Xs(),Qe(Ft),Qe(It),ku(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(Pa(o)?o.flags|=4:s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,bn!==null&&(sd(bn),bn=null))),Gu(s,o),At(o),null;case 5:Tu(o);var m=ns(ao.current);if(c=o.type,s!==null&&o.stateNode!=null)tg(s,o,c,f,m),s.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!f){if(o.stateNode===null)throw Error(t(166));return At(o),null}if(s=ns(Nn.current),Pa(o)){f=o.stateNode,c=o.type;var y=o.memoizedProps;switch(f[Dn]=o,f[no]=y,s=(o.mode&1)!==0,c){case"dialog":Xe("cancel",f),Xe("close",f);break;case"iframe":case"object":case"embed":Xe("load",f);break;case"video":case"audio":for(m=0;m<Zi.length;m++)Xe(Zi[m],f);break;case"source":Xe("error",f);break;case"img":case"image":case"link":Xe("error",f),Xe("load",f);break;case"details":Xe("toggle",f);break;case"input":We(f,y),Xe("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!y.multiple},Xe("invalid",f);break;case"textarea":Kr(f,y),Xe("invalid",f)}Ic(c,y),m=null;for(var _ in y)if(y.hasOwnProperty(_)){var k=y[_];_==="children"?typeof k=="string"?f.textContent!==k&&(y.suppressHydrationWarning!==!0&&Ca(f.textContent,k,s),m=["children",k]):typeof k=="number"&&f.textContent!==""+k&&(y.suppressHydrationWarning!==!0&&Ca(f.textContent,k,s),m=["children",""+k]):i.hasOwnProperty(_)&&k!=null&&_==="onScroll"&&Xe("scroll",f)}switch(c){case"input":Tt(f),Ms(f,y,!0);break;case"textarea":Tt(f),Yr(f);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(f.onclick=Ta)}f=m,o.updateQueue=f,f!==null&&(o.flags|=4)}else{_=m.nodeType===9?m:m.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=hr(c)),s==="http://www.w3.org/1999/xhtml"?c==="script"?(s=_.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof f.is=="string"?s=_.createElement(c,{is:f.is}):(s=_.createElement(c),c==="select"&&(_=s,f.multiple?_.multiple=!0:f.size&&(_.size=f.size))):s=_.createElementNS(s,c),s[Dn]=o,s[no]=f,eg(s,o,!1,!1),o.stateNode=s;e:{switch(_=kc(c,f),c){case"dialog":Xe("cancel",s),Xe("close",s),m=f;break;case"iframe":case"object":case"embed":Xe("load",s),m=f;break;case"video":case"audio":for(m=0;m<Zi.length;m++)Xe(Zi[m],s);m=f;break;case"source":Xe("error",s),m=f;break;case"img":case"image":case"link":Xe("error",s),Xe("load",s),m=f;break;case"details":Xe("toggle",s),m=f;break;case"input":We(s,f),m=St(s,f),Xe("invalid",s);break;case"option":m=f;break;case"select":s._wrapperState={wasMultiple:!!f.multiple},m=se({},f,{value:void 0}),Xe("invalid",s);break;case"textarea":Kr(s,f),m=fr(s,f),Xe("invalid",s);break;default:m=f}Ic(c,m),k=m;for(y in k)if(k.hasOwnProperty(y)){var P=k[y];y==="style"?Vp(s,P):y==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,P!=null&&qn(s,P)):y==="children"?typeof P=="string"?(c!=="textarea"||P!=="")&&gr(s,P):typeof P=="number"&&gr(s,""+P):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(i.hasOwnProperty(y)?P!=null&&y==="onScroll"&&Xe("scroll",s):P!=null&&R(s,y,P,_))}switch(c){case"input":Tt(s),Ms(s,f,!1);break;case"textarea":Tt(s),Yr(s);break;case"option":f.value!=null&&s.setAttribute("value",""+Ce(f.value));break;case"select":s.multiple=!!f.multiple,y=f.value,y!=null?Jt(s,!!f.multiple,y,!1):f.defaultValue!=null&&Jt(s,!!f.multiple,f.defaultValue,!0);break;default:typeof m.onClick=="function"&&(s.onclick=Ta)}switch(c){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return At(o),null;case 6:if(s&&o.stateNode!=null)ng(s,o,s.memoizedProps,f);else{if(typeof f!="string"&&o.stateNode===null)throw Error(t(166));if(c=ns(ao.current),ns(Nn.current),Pa(o)){if(f=o.stateNode,c=o.memoizedProps,f[Dn]=o,(y=f.nodeValue!==c)&&(s=en,s!==null))switch(s.tag){case 3:Ca(f.nodeValue,c,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Ca(f.nodeValue,c,(s.mode&1)!==0)}y&&(o.flags|=4)}else f=(c.nodeType===9?c:c.ownerDocument).createTextNode(f),f[Dn]=o,o.stateNode=f}return At(o),null;case 13:if(Qe(Ze),f=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(Je&&tn!==null&&(o.mode&1)!==0&&(o.flags&128)===0)im(),Ws(),o.flags|=98560,y=!1;else if(y=Pa(o),f!==null&&f.dehydrated!==null){if(s===null){if(!y)throw Error(t(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[Dn]=o}else Ws(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;At(o),y=!1}else bn!==null&&(sd(bn),bn=null),y=!0;if(!y)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=c,o):(f=f!==null,f!==(s!==null&&s.memoizedState!==null)&&f&&(o.child.flags|=8192,(o.mode&1)!==0&&(s===null||(Ze.current&1)!==0?ft===0&&(ft=3):ad())),o.updateQueue!==null&&(o.flags|=4),At(o),null);case 4:return Xs(),Gu(s,o),s===null&&eo(o.stateNode.containerInfo),At(o),null;case 10:return bu(o.type._context),At(o),null;case 17:return zt(o.type)&&ka(),At(o),null;case 19:if(Qe(Ze),y=o.memoizedState,y===null)return At(o),null;if(f=(o.flags&128)!==0,_=y.rendering,_===null)if(f)po(y,!1);else{if(ft!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(_=Ua(s),_!==null){for(o.flags|=128,po(y,!1),f=_.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),o.subtreeFlags=0,f=c,c=o.child;c!==null;)y=c,s=f,y.flags&=14680066,_=y.alternate,_===null?(y.childLanes=0,y.lanes=s,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=_.childLanes,y.lanes=_.lanes,y.child=_.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=_.memoizedProps,y.memoizedState=_.memoizedState,y.updateQueue=_.updateQueue,y.type=_.type,s=_.dependencies,y.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),c=c.sibling;return Ke(Ze,Ze.current&1|2),o.child}s=s.sibling}y.tail!==null&&rt()>ei&&(o.flags|=128,f=!0,po(y,!1),o.lanes=4194304)}else{if(!f)if(s=Ua(_),s!==null){if(o.flags|=128,f=!0,c=s.updateQueue,c!==null&&(o.updateQueue=c,o.flags|=4),po(y,!0),y.tail===null&&y.tailMode==="hidden"&&!_.alternate&&!Je)return At(o),null}else 2*rt()-y.renderingStartTime>ei&&c!==1073741824&&(o.flags|=128,f=!0,po(y,!1),o.lanes=4194304);y.isBackwards?(_.sibling=o.child,o.child=_):(c=y.last,c!==null?c.sibling=_:o.child=_,y.last=_)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=rt(),o.sibling=null,c=Ze.current,Ke(Ze,f?c&1|2:c&1),o):(At(o),null);case 22:case 23:return od(),f=o.memoizedState!==null,s!==null&&s.memoizedState!==null!==f&&(o.flags|=8192),f&&(o.mode&1)!==0?(nn&1073741824)!==0&&(At(o),o.subtreeFlags&6&&(o.flags|=8192)):At(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function U_(s,o){switch(mu(o),o.tag){case 1:return zt(o.type)&&ka(),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return Xs(),Qe(Ft),Qe(It),ku(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 5:return Tu(o),null;case 13:if(Qe(Ze),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(t(340));Ws()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return Qe(Ze),null;case 4:return Xs(),null;case 10:return bu(o.type._context),null;case 22:case 23:return od(),null;case 24:return null;default:return null}}var Ka=!1,Rt=!1,F_=typeof WeakSet=="function"?WeakSet:Set,ge=null;function Js(s,o){var c=s.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(f){tt(s,o,f)}else c.current=null}function Ku(s,o,c){try{c()}catch(f){tt(s,o,f)}}var rg=!1;function z_(s,o){if(ou=ha,s=Nh(),Jc(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{c=(c=s.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var m=f.anchorOffset,y=f.focusNode;f=f.focusOffset;try{c.nodeType,y.nodeType}catch(ie){c=null;break e}var _=0,k=-1,P=-1,q=0,ne=0,re=s,te=null;t:for(;;){for(var he;re!==c||m!==0&&re.nodeType!==3||(k=_+m),re!==y||f!==0&&re.nodeType!==3||(P=_+f),re.nodeType===3&&(_+=re.nodeValue.length),(he=re.firstChild)!==null;)te=re,re=he;for(;;){if(re===s)break t;if(te===c&&++q===m&&(k=_),te===y&&++ne===f&&(P=_),(he=re.nextSibling)!==null)break;re=te,te=re.parentNode}re=he}c=k===-1||P===-1?null:{start:k,end:P}}else c=null}c=c||{start:0,end:0}}else c=null;for(au={focusedElem:s,selectionRange:c},ha=!1,ge=o;ge!==null;)if(o=ge,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,ge=s;else for(;ge!==null;){o=ge;try{var Se=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(Se!==null){var be=Se.memoizedProps,st=Se.memoizedState,U=o.stateNode,j=U.getSnapshotBeforeUpdate(o.elementType===o.type?be:_n(o.type,be),st);U.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var z=o.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ie){tt(o,o.return,ie)}if(s=o.sibling,s!==null){s.return=o.return,ge=s;break}ge=o.return}return Se=rg,rg=!1,Se}function ho(s,o,c){var f=o.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var m=f=f.next;do{if((m.tag&s)===s){var y=m.destroy;m.destroy=void 0,y!==void 0&&Ku(o,c,y)}m=m.next}while(m!==f)}}function Ya(s,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var c=o=o.next;do{if((c.tag&s)===s){var f=c.create;c.destroy=f()}c=c.next}while(c!==o)}}function Yu(s){var o=s.ref;if(o!==null){var c=s.stateNode;switch(s.tag){case 5:s=c;break;default:s=c}typeof o=="function"?o(s):o.current=s}}function sg(s){var o=s.alternate;o!==null&&(s.alternate=null,sg(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&(delete o[Dn],delete o[no],delete o[du],delete o[E_],delete o[x_])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function ig(s){return s.tag===5||s.tag===3||s.tag===4}function og(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||ig(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Xu(s,o,c){var f=s.tag;if(f===5||f===6)s=s.stateNode,o?c.nodeType===8?c.parentNode.insertBefore(s,o):c.insertBefore(s,o):(c.nodeType===8?(o=c.parentNode,o.insertBefore(s,c)):(o=c,o.appendChild(s)),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=Ta));else if(f!==4&&(s=s.child,s!==null))for(Xu(s,o,c),s=s.sibling;s!==null;)Xu(s,o,c),s=s.sibling}function Qu(s,o,c){var f=s.tag;if(f===5||f===6)s=s.stateNode,o?c.insertBefore(s,o):c.appendChild(s);else if(f!==4&&(s=s.child,s!==null))for(Qu(s,o,c),s=s.sibling;s!==null;)Qu(s,o,c),s=s.sibling}var bt=null,En=!1;function Ar(s,o,c){for(c=c.child;c!==null;)ag(s,o,c),c=c.sibling}function ag(s,o,c){if(Pn&&typeof Pn.onCommitFiberUnmount=="function")try{Pn.onCommitFiberUnmount(la,c)}catch(k){}switch(c.tag){case 5:Rt||Js(c,o);case 6:var f=bt,m=En;bt=null,Ar(s,o,c),bt=f,En=m,bt!==null&&(En?(s=bt,c=c.stateNode,s.nodeType===8?s.parentNode.removeChild(c):s.removeChild(c)):bt.removeChild(c.stateNode));break;case 18:bt!==null&&(En?(s=bt,c=c.stateNode,s.nodeType===8?uu(s.parentNode,c):s.nodeType===1&&uu(s,c),Vi(s)):uu(bt,c.stateNode));break;case 4:f=bt,m=En,bt=c.stateNode.containerInfo,En=!0,Ar(s,o,c),bt=f,En=m;break;case 0:case 11:case 14:case 15:if(!Rt&&(f=c.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){m=f=f.next;do{var y=m,_=y.destroy;y=y.tag,_!==void 0&&((y&2)!==0||(y&4)!==0)&&Ku(c,o,_),m=m.next}while(m!==f)}Ar(s,o,c);break;case 1:if(!Rt&&(Js(c,o),f=c.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=c.memoizedProps,f.state=c.memoizedState,f.componentWillUnmount()}catch(k){tt(c,o,k)}Ar(s,o,c);break;case 21:Ar(s,o,c);break;case 22:c.mode&1?(Rt=(f=Rt)||c.memoizedState!==null,Ar(s,o,c),Rt=f):Ar(s,o,c);break;default:Ar(s,o,c)}}function lg(s){var o=s.updateQueue;if(o!==null){s.updateQueue=null;var c=s.stateNode;c===null&&(c=s.stateNode=new F_),o.forEach(function(f){var m=X_.bind(null,s,f);c.has(f)||(c.add(f),f.then(m,m))})}}function xn(s,o){var c=o.deletions;if(c!==null)for(var f=0;f<c.length;f++){var m=c[f];try{var y=s,_=o,k=_;e:for(;k!==null;){switch(k.tag){case 5:bt=k.stateNode,En=!1;break e;case 3:bt=k.stateNode.containerInfo,En=!0;break e;case 4:bt=k.stateNode.containerInfo,En=!0;break e}k=k.return}if(bt===null)throw Error(t(160));ag(y,_,m),bt=null,En=!1;var P=m.alternate;P!==null&&(P.return=null),m.return=null}catch(q){tt(m,o,q)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)cg(o,s),o=o.sibling}function cg(s,o){var c=s.alternate,f=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(xn(o,s),jn(s),f&4){try{ho(3,s,s.return),Ya(3,s)}catch(be){tt(s,s.return,be)}try{ho(5,s,s.return)}catch(be){tt(s,s.return,be)}}break;case 1:xn(o,s),jn(s),f&512&&c!==null&&Js(c,c.return);break;case 5:if(xn(o,s),jn(s),f&512&&c!==null&&Js(c,c.return),s.flags&32){var m=s.stateNode;try{gr(m,"")}catch(be){tt(s,s.return,be)}}if(f&4&&(m=s.stateNode,m!=null)){var y=s.memoizedProps,_=c!==null?c.memoizedProps:y,k=s.type,P=s.updateQueue;if(s.updateQueue=null,P!==null)try{k==="input"&&y.type==="radio"&&y.name!=null&&On(m,y),kc(k,_);var q=kc(k,y);for(_=0;_<P.length;_+=2){var ne=P[_],re=P[_+1];ne==="style"?Vp(m,re):ne==="dangerouslySetInnerHTML"?qn(m,re):ne==="children"?gr(m,re):R(m,ne,re,q)}switch(k){case"input":Qt(m,y);break;case"textarea":pr(m,y);break;case"select":var te=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!y.multiple;var he=y.value;he!=null?Jt(m,!!y.multiple,he,!1):te!==!!y.multiple&&(y.defaultValue!=null?Jt(m,!!y.multiple,y.defaultValue,!0):Jt(m,!!y.multiple,y.multiple?[]:"",!1))}m[no]=y}catch(be){tt(s,s.return,be)}}break;case 6:if(xn(o,s),jn(s),f&4){if(s.stateNode===null)throw Error(t(162));m=s.stateNode,y=s.memoizedProps;try{m.nodeValue=y}catch(be){tt(s,s.return,be)}}break;case 3:if(xn(o,s),jn(s),f&4&&c!==null&&c.memoizedState.isDehydrated)try{Vi(o.containerInfo)}catch(be){tt(s,s.return,be)}break;case 4:xn(o,s),jn(s);break;case 13:xn(o,s),jn(s),m=s.child,m.flags&8192&&(y=m.memoizedState!==null,m.stateNode.isHidden=y,!y||m.alternate!==null&&m.alternate.memoizedState!==null||(ed=rt())),f&4&&lg(s);break;case 22:if(ne=c!==null&&c.memoizedState!==null,s.mode&1?(Rt=(q=Rt)||ne,xn(o,s),Rt=q):xn(o,s),jn(s),f&8192){if(q=s.memoizedState!==null,(s.stateNode.isHidden=q)&&!ne&&(s.mode&1)!==0)for(ge=s,ne=s.child;ne!==null;){for(re=ge=ne;ge!==null;){switch(te=ge,he=te.child,te.tag){case 0:case 11:case 14:case 15:ho(4,te,te.return);break;case 1:Js(te,te.return);var Se=te.stateNode;if(typeof Se.componentWillUnmount=="function"){f=te,c=te.return;try{o=f,Se.props=o.memoizedProps,Se.state=o.memoizedState,Se.componentWillUnmount()}catch(be){tt(f,c,be)}}break;case 5:Js(te,te.return);break;case 22:if(te.memoizedState!==null){fg(re);continue}}he!==null?(he.return=te,ge=he):fg(re)}ne=ne.sibling}e:for(ne=null,re=s;;){if(re.tag===5){if(ne===null){ne=re;try{m=re.stateNode,q?(y=m.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(k=re.stateNode,P=re.memoizedProps.style,_=P!=null&&P.hasOwnProperty("display")?P.display:null,k.style.display=Hp("display",_))}catch(be){tt(s,s.return,be)}}}else if(re.tag===6){if(ne===null)try{re.stateNode.nodeValue=q?"":re.memoizedProps}catch(be){tt(s,s.return,be)}}else if((re.tag!==22&&re.tag!==23||re.memoizedState===null||re===s)&&re.child!==null){re.child.return=re,re=re.child;continue}if(re===s)break e;for(;re.sibling===null;){if(re.return===null||re.return===s)break e;ne===re&&(ne=null),re=re.return}ne===re&&(ne=null),re.sibling.return=re.return,re=re.sibling}}break;case 19:xn(o,s),jn(s),f&4&&lg(s);break;case 21:break;default:xn(o,s),jn(s)}}function jn(s){var o=s.flags;if(o&2){try{e:{for(var c=s.return;c!==null;){if(ig(c)){var f=c;break e}c=c.return}throw Error(t(160))}switch(f.tag){case 5:var m=f.stateNode;f.flags&32&&(gr(m,""),f.flags&=-33);var y=og(s);Qu(s,y,m);break;case 3:case 4:var _=f.stateNode.containerInfo,k=og(s);Xu(s,k,_);break;default:throw Error(t(161))}}catch(P){tt(s,s.return,P)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function B_(s,o,c){ge=s,ug(s)}function ug(s,o,c){for(var f=(s.mode&1)!==0;ge!==null;){var m=ge,y=m.child;if(m.tag===22&&f){var _=m.memoizedState!==null||Ka;if(!_){var k=m.alternate,P=k!==null&&k.memoizedState!==null||Rt;k=Ka;var q=Rt;if(Ka=_,(Rt=P)&&!q)for(ge=m;ge!==null;)_=ge,P=_.child,_.tag===22&&_.memoizedState!==null?pg(m):P!==null?(P.return=_,ge=P):pg(m);for(;y!==null;)ge=y,ug(y),y=y.sibling;ge=m,Ka=k,Rt=q}dg(s)}else(m.subtreeFlags&8772)!==0&&y!==null?(y.return=m,ge=y):dg(s)}}function dg(s){for(;ge!==null;){var o=ge;if((o.flags&8772)!==0){var c=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Rt||Ya(5,o);break;case 1:var f=o.stateNode;if(o.flags&4&&!Rt)if(c===null)f.componentDidMount();else{var m=o.elementType===o.type?c.memoizedProps:_n(o.type,c.memoizedProps);f.componentDidUpdate(m,c.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var y=o.updateQueue;y!==null&&fm(o,y,f);break;case 3:var _=o.updateQueue;if(_!==null){if(c=null,o.child!==null)switch(o.child.tag){case 5:c=o.child.stateNode;break;case 1:c=o.child.stateNode}fm(o,_,c)}break;case 5:var k=o.stateNode;if(c===null&&o.flags&4){c=k;var P=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":P.autoFocus&&c.focus();break;case"img":P.src&&(c.src=P.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var q=o.alternate;if(q!==null){var ne=q.memoizedState;if(ne!==null){var re=ne.dehydrated;re!==null&&Vi(re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Rt||o.flags&512&&Yu(o)}catch(te){tt(o,o.return,te)}}if(o===s){ge=null;break}if(c=o.sibling,c!==null){c.return=o.return,ge=c;break}ge=o.return}}function fg(s){for(;ge!==null;){var o=ge;if(o===s){ge=null;break}var c=o.sibling;if(c!==null){c.return=o.return,ge=c;break}ge=o.return}}function pg(s){for(;ge!==null;){var o=ge;try{switch(o.tag){case 0:case 11:case 15:var c=o.return;try{Ya(4,o)}catch(P){tt(o,c,P)}break;case 1:var f=o.stateNode;if(typeof f.componentDidMount=="function"){var m=o.return;try{f.componentDidMount()}catch(P){tt(o,m,P)}}var y=o.return;try{Yu(o)}catch(P){tt(o,y,P)}break;case 5:var _=o.return;try{Yu(o)}catch(P){tt(o,_,P)}}}catch(P){tt(o,o.return,P)}if(o===s){ge=null;break}var k=o.sibling;if(k!==null){k.return=o.return,ge=k;break}ge=o.return}}var q_=Math.ceil,Xa=O.ReactCurrentDispatcher,Ju=O.ReactCurrentOwner,hn=O.ReactCurrentBatchConfig,Ue=0,mt=null,ut=null,_t=0,nn=0,Zs=xr(0),ft=0,mo=null,ss=0,Qa=0,Zu=0,go=null,qt=null,ed=0,ei=1/0,Qn=null,Ja=!1,td=null,Rr=null,Za=!1,Mr=null,el=0,yo=0,nd=null,tl=-1,nl=0;function Dt(){return(Ue&6)!==0?rt():tl!==-1?tl:tl=rt()}function Or(s){return(s.mode&1)===0?1:(Ue&2)!==0&&_t!==0?_t&-_t:T_.transition!==null?(nl===0&&(nl=oh()),nl):(s=qe,s!==0||(s=window.event,s=s===void 0?16:mh(s.type)),s)}function Cn(s,o,c,f){if(50<yo)throw yo=0,nd=null,Error(t(185));Fi(s,c,f),((Ue&2)===0||s!==mt)&&(s===mt&&((Ue&2)===0&&(Qa|=c),ft===4&&Pr(s,_t)),Ht(s,f),c===1&&Ue===0&&(o.mode&1)===0&&(ei=rt()+500,Ra&&Tr()))}function Ht(s,o){var c=s.callbackNode;Tb(s,o);var f=da(s,s===mt?_t:0);if(f===0)c!==null&&rh(c),s.callbackNode=null,s.callbackPriority=0;else if(o=f&-f,s.callbackPriority!==o){if(c!=null&&rh(c),o===1)s.tag===0?C_(mg.bind(null,s)):em(mg.bind(null,s)),b_(function(){(Ue&6)===0&&Tr()}),c=null;else{switch(ah(f)){case 1:c=Nc;break;case 4:c=sh;break;case 16:c=aa;break;case 536870912:c=ih;break;default:c=aa}c=Eg(c,hg.bind(null,s))}s.callbackPriority=o,s.callbackNode=c}}function hg(s,o){if(tl=-1,nl=0,(Ue&6)!==0)throw Error(t(327));var c=s.callbackNode;if(ti()&&s.callbackNode!==c)return null;var f=da(s,s===mt?_t:0);if(f===0)return null;if((f&30)!==0||(f&s.expiredLanes)!==0||o)o=rl(s,f);else{o=f;var m=Ue;Ue|=2;var y=yg();(mt!==s||_t!==o)&&(Qn=null,ei=rt()+500,os(s,o));do try{W_();break}catch(k){gg(s,k)}while(!0);Su(),Xa.current=y,Ue=m,ut!==null?o=0:(mt=null,_t=0,o=ft)}if(o!==0){if(o===2&&(m=Lc(s),m!==0&&(f=m,o=rd(s,m))),o===1)throw c=mo,os(s,0),Pr(s,f),Ht(s,rt()),c;if(o===6)Pr(s,f);else{if(m=s.current.alternate,(f&30)===0&&!H_(m)&&(o=rl(s,f),o===2&&(y=Lc(s),y!==0&&(f=y,o=rd(s,y))),o===1))throw c=mo,os(s,0),Pr(s,f),Ht(s,rt()),c;switch(s.finishedWork=m,s.finishedLanes=f,o){case 0:case 1:throw Error(t(345));case 2:as(s,qt,Qn);break;case 3:if(Pr(s,f),(f&130023424)===f&&(o=ed+500-rt(),10<o)){if(da(s,0)!==0)break;if(m=s.suspendedLanes,(m&f)!==f){Dt(),s.pingedLanes|=s.suspendedLanes&m;break}s.timeoutHandle=cu(as.bind(null,s,qt,Qn),o);break}as(s,qt,Qn);break;case 4:if(Pr(s,f),(f&4194240)===f)break;for(o=s.eventTimes,m=-1;0<f;){var _=31-vn(f);y=1<<_,_=o[_],_>m&&(m=_),f&=~y}if(f=m,f=rt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*q_(f/1960))-f,10<f){s.timeoutHandle=cu(as.bind(null,s,qt,Qn),f);break}as(s,qt,Qn);break;case 5:as(s,qt,Qn);break;default:throw Error(t(329))}}}return Ht(s,rt()),s.callbackNode===c?hg.bind(null,s):null}function rd(s,o){var c=go;return s.current.memoizedState.isDehydrated&&(os(s,o).flags|=256),s=rl(s,o),s!==2&&(o=qt,qt=c,o!==null&&sd(o)),s}function sd(s){qt===null?qt=s:qt.push.apply(qt,s)}function H_(s){for(var o=s;;){if(o.flags&16384){var c=o.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var f=0;f<c.length;f++){var m=c[f],y=m.getSnapshot;m=m.value;try{if(!Sn(y(),m))return!1}catch(_){return!1}}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Pr(s,o){for(o&=~Zu,o&=~Qa,s.suspendedLanes|=o,s.pingedLanes&=~o,s=s.expirationTimes;0<o;){var c=31-vn(o),f=1<<c;s[c]=-1,o&=~f}}function mg(s){if((Ue&6)!==0)throw Error(t(327));ti();var o=da(s,0);if((o&1)===0)return Ht(s,rt()),null;var c=rl(s,o);if(s.tag!==0&&c===2){var f=Lc(s);f!==0&&(o=f,c=rd(s,f))}if(c===1)throw c=mo,os(s,0),Pr(s,o),Ht(s,rt()),c;if(c===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=o,as(s,qt,Qn),Ht(s,rt()),null}function id(s,o){var c=Ue;Ue|=1;try{return s(o)}finally{Ue=c,Ue===0&&(ei=rt()+500,Ra&&Tr())}}function is(s){Mr!==null&&Mr.tag===0&&(Ue&6)===0&&ti();var o=Ue;Ue|=1;var c=hn.transition,f=qe;try{if(hn.transition=null,qe=1,s)return s()}finally{qe=f,hn.transition=c,Ue=o,(Ue&6)===0&&Tr()}}function od(){nn=Zs.current,Qe(Zs)}function os(s,o){s.finishedWork=null,s.finishedLanes=0;var c=s.timeoutHandle;if(c!==-1&&(s.timeoutHandle=-1,S_(c)),ut!==null)for(c=ut.return;c!==null;){var f=c;switch(mu(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&ka();break;case 3:Xs(),Qe(Ft),Qe(It),ku();break;case 5:Tu(f);break;case 4:Xs();break;case 13:Qe(Ze);break;case 19:Qe(Ze);break;case 10:bu(f.type._context);break;case 22:case 23:od()}c=c.return}if(mt=s,ut=s=Dr(s.current,null),_t=nn=o,ft=0,mo=null,Zu=Qa=ss=0,qt=go=null,ts!==null){for(o=0;o<ts.length;o++)if(c=ts[o],f=c.interleaved,f!==null){c.interleaved=null;var m=f.next,y=c.pending;if(y!==null){var _=y.next;y.next=m,f.next=_}c.pending=f}ts=null}return s}function gg(s,o){do{var c=ut;try{if(Su(),Fa.current=Ha,za){for(var f=et.memoizedState;f!==null;){var m=f.queue;m!==null&&(m.pending=null),f=f.next}za=!1}if(rs=0,ht=dt=et=null,lo=!1,co=0,Ju.current=null,c===null||c.return===null){ft=1,mo=o,ut=null;break}e:{var y=s,_=c.return,k=c,P=o;if(o=_t,k.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){var q=P,ne=k,re=ne.tag;if((ne.mode&1)===0&&(re===0||re===11||re===15)){var te=ne.alternate;te?(ne.updateQueue=te.updateQueue,ne.memoizedState=te.memoizedState,ne.lanes=te.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var he=zm(_);if(he!==null){he.flags&=-257,Bm(he,_,k,y,o),he.mode&1&&Fm(y,q,o),o=he,P=q;var Se=o.updateQueue;if(Se===null){var be=new Set;be.add(P),o.updateQueue=be}else Se.add(P);break e}else{if((o&1)===0){Fm(y,q,o),ad();break e}P=Error(t(426))}}else if(Je&&k.mode&1){var st=zm(_);if(st!==null){(st.flags&65536)===0&&(st.flags|=256),Bm(st,_,k,y,o),wu(Qs(P,k));break e}}y=P=Qs(P,k),ft!==4&&(ft=2),go===null?go=[y]:go.push(y),y=_;do{switch(y.tag){case 3:y.flags|=65536,o&=-o,y.lanes|=o;var U=$m(y,P,o);dm(y,U);break e;case 1:k=P;var j=y.type,z=y.stateNode;if((y.flags&128)===0&&(typeof j.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(Rr===null||!Rr.has(z)))){y.flags|=65536,o&=-o,y.lanes|=o;var ie=Um(y,k,o);dm(y,ie);break e}}y=y.return}while(y!==null)}vg(c)}catch(Te){o=Te,ut===c&&c!==null&&(ut=c=c.return);continue}break}while(!0)}function yg(){var s=Xa.current;return Xa.current=Ha,s===null?Ha:s}function ad(){(ft===0||ft===3||ft===2)&&(ft=4),mt===null||(ss&268435455)===0&&(Qa&268435455)===0||Pr(mt,_t)}function rl(s,o){var c=Ue;Ue|=2;var f=yg();(mt!==s||_t!==o)&&(Qn=null,os(s,o));do try{V_();break}catch(m){gg(s,m)}while(!0);if(Su(),Ue=c,Xa.current=f,ut!==null)throw Error(t(261));return mt=null,_t=0,ft}function V_(){for(;ut!==null;)wg(ut)}function W_(){for(;ut!==null&&!yb();)wg(ut)}function wg(s){var o=_g(s.alternate,s,nn);s.memoizedProps=s.pendingProps,o===null?vg(s):ut=o,Ju.current=null}function vg(s){var o=s;do{var c=o.alternate;if(s=o.return,(o.flags&32768)===0){if(c=$_(c,o,nn),c!==null){ut=c;return}}else{if(c=U_(c,o),c!==null){c.flags&=32767,ut=c;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{ft=6,ut=null;return}}if(o=o.sibling,o!==null){ut=o;return}ut=o=s}while(o!==null);ft===0&&(ft=5)}function as(s,o,c){var f=qe,m=hn.transition;try{hn.transition=null,qe=1,G_(s,o,c,f)}finally{hn.transition=m,qe=f}return null}function G_(s,o,c,f){do ti();while(Mr!==null);if((Ue&6)!==0)throw Error(t(327));c=s.finishedWork;var m=s.finishedLanes;if(c===null)return null;if(s.finishedWork=null,s.finishedLanes=0,c===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var y=c.lanes|c.childLanes;if(Ib(s,y),s===mt&&(ut=mt=null,_t=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||Za||(Za=!0,Eg(aa,function(){return ti(),null})),y=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||y){y=hn.transition,hn.transition=null;var _=qe;qe=1;var k=Ue;Ue|=4,Ju.current=null,z_(s,c),cg(c,s),p_(au),ha=!!ou,au=ou=null,s.current=c,B_(c),wb(),Ue=k,qe=_,hn.transition=y}else s.current=c;if(Za&&(Za=!1,Mr=s,el=m),y=s.pendingLanes,y===0&&(Rr=null),bb(c.stateNode),Ht(s,rt()),o!==null)for(f=s.onRecoverableError,c=0;c<o.length;c++)m=o[c],f(m.value,{componentStack:m.stack,digest:m.digest});if(Ja)throw Ja=!1,s=td,td=null,s;return(el&1)!==0&&s.tag!==0&&ti(),y=s.pendingLanes,(y&1)!==0?s===nd?yo++:(yo=0,nd=s):yo=0,Tr(),null}function ti(){if(Mr!==null){var s=ah(el),o=hn.transition,c=qe;try{if(hn.transition=null,qe=16>s?16:s,Mr===null)var f=!1;else{if(s=Mr,Mr=null,el=0,(Ue&6)!==0)throw Error(t(331));var m=Ue;for(Ue|=4,ge=s.current;ge!==null;){var y=ge,_=y.child;if((ge.flags&16)!==0){var k=y.deletions;if(k!==null){for(var P=0;P<k.length;P++){var q=k[P];for(ge=q;ge!==null;){var ne=ge;switch(ne.tag){case 0:case 11:case 15:ho(8,ne,y)}var re=ne.child;if(re!==null)re.return=ne,ge=re;else for(;ge!==null;){ne=ge;var te=ne.sibling,he=ne.return;if(sg(ne),ne===q){ge=null;break}if(te!==null){te.return=he,ge=te;break}ge=he}}}var Se=y.alternate;if(Se!==null){var be=Se.child;if(be!==null){Se.child=null;do{var st=be.sibling;be.sibling=null,be=st}while(be!==null)}}ge=y}}if((y.subtreeFlags&2064)!==0&&_!==null)_.return=y,ge=_;else e:for(;ge!==null;){if(y=ge,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:ho(9,y,y.return)}var U=y.sibling;if(U!==null){U.return=y.return,ge=U;break e}ge=y.return}}var j=s.current;for(ge=j;ge!==null;){_=ge;var z=_.child;if((_.subtreeFlags&2064)!==0&&z!==null)z.return=_,ge=z;else e:for(_=j;ge!==null;){if(k=ge,(k.flags&2048)!==0)try{switch(k.tag){case 0:case 11:case 15:Ya(9,k)}}catch(Te){tt(k,k.return,Te)}if(k===_){ge=null;break e}var ie=k.sibling;if(ie!==null){ie.return=k.return,ge=ie;break e}ge=k.return}}if(Ue=m,Tr(),Pn&&typeof Pn.onPostCommitFiberRoot=="function")try{Pn.onPostCommitFiberRoot(la,s)}catch(Te){}f=!0}return f}finally{qe=c,hn.transition=o}}return!1}function Sg(s,o,c){o=Qs(c,o),o=$m(s,o,1),s=kr(s,o,1),o=Dt(),s!==null&&(Fi(s,1,o),Ht(s,o))}function tt(s,o,c){if(s.tag===3)Sg(s,s,c);else for(;o!==null;){if(o.tag===3){Sg(o,s,c);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Rr===null||!Rr.has(f))){s=Qs(c,s),s=Um(o,s,1),o=kr(o,s,1),s=Dt(),o!==null&&(Fi(o,1,s),Ht(o,s));break}}o=o.return}}function K_(s,o,c){var f=s.pingCache;f!==null&&f.delete(o),o=Dt(),s.pingedLanes|=s.suspendedLanes&c,mt===s&&(_t&c)===c&&(ft===4||ft===3&&(_t&130023424)===_t&&500>rt()-ed?os(s,0):Zu|=c),Ht(s,o)}function bg(s,o){o===0&&((s.mode&1)===0?o=1:(o=ua,ua<<=1,(ua&130023424)===0&&(ua=4194304)));var c=Dt();s=Kn(s,o),s!==null&&(Fi(s,o,c),Ht(s,c))}function Y_(s){var o=s.memoizedState,c=0;o!==null&&(c=o.retryLane),bg(s,c)}function X_(s,o){var c=0;switch(s.tag){case 13:var f=s.stateNode,m=s.memoizedState;m!==null&&(c=m.retryLane);break;case 19:f=s.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(o),bg(s,c)}var _g;_g=function(s,o,c){if(s!==null)if(s.memoizedProps!==o.pendingProps||Ft.current)Bt=!0;else{if((s.lanes&c)===0&&(o.flags&128)===0)return Bt=!1,j_(s,o,c);Bt=(s.flags&131072)!==0}else Bt=!1,Je&&(o.flags&1048576)!==0&&tm(o,Oa,o.index);switch(o.lanes=0,o.tag){case 2:var f=o.type;Ga(s,o),s=o.pendingProps;var m=qs(o,It.current);Ys(o,c),m=Mu(null,o,f,s,m,c);var y=Ou();return o.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,zt(f)?(y=!0,Aa(o)):y=!1,o.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,xu(o),m.updater=Va,o.stateNode=m,m._reactInternals=o,$u(o,f,s,c),o=Bu(null,o,f,!0,y,c)):(o.tag=0,Je&&y&&hu(o),Pt(null,o,m,c),o=o.child),o;case 16:f=o.elementType;e:{switch(Ga(s,o),s=o.pendingProps,m=f._init,f=m(f._payload),o.type=f,m=o.tag=J_(f),s=_n(f,s),m){case 0:o=zu(null,o,f,s,c);break e;case 1:o=Km(null,o,f,s,c);break e;case 11:o=qm(null,o,f,s,c);break e;case 14:o=Hm(null,o,f,_n(f.type,s),c);break e}throw Error(t(306,f,""))}return o;case 0:return f=o.type,m=o.pendingProps,m=o.elementType===f?m:_n(f,m),zu(s,o,f,m,c);case 1:return f=o.type,m=o.pendingProps,m=o.elementType===f?m:_n(f,m),Km(s,o,f,m,c);case 3:e:{if(Ym(o),s===null)throw Error(t(387));f=o.pendingProps,y=o.memoizedState,m=y.element,um(s,o),$a(o,f,null,c);var _=o.memoizedState;if(f=_.element,y.isDehydrated)if(y={element:f,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){m=Qs(Error(t(423)),o),o=Xm(s,o,f,c,m);break e}else if(f!==m){m=Qs(Error(t(424)),o),o=Xm(s,o,f,c,m);break e}else for(tn=Er(o.stateNode.containerInfo.firstChild),en=o,Je=!0,bn=null,c=lm(o,null,f,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Ws(),f===m){o=Xn(s,o,c);break e}Pt(s,o,f,c)}o=o.child}return o;case 5:return pm(o),s===null&&yu(o),f=o.type,m=o.pendingProps,y=s!==null?s.memoizedProps:null,_=m.children,lu(f,m)?_=null:y!==null&&lu(f,y)&&(o.flags|=32),Gm(s,o),Pt(s,o,_,c),o.child;case 6:return s===null&&yu(o),null;case 13:return Qm(s,o,c);case 4:return Cu(o,o.stateNode.containerInfo),f=o.pendingProps,s===null?o.child=Gs(o,null,f,c):Pt(s,o,f,c),o.child;case 11:return f=o.type,m=o.pendingProps,m=o.elementType===f?m:_n(f,m),qm(s,o,f,m,c);case 7:return Pt(s,o,o.pendingProps,c),o.child;case 8:return Pt(s,o,o.pendingProps.children,c),o.child;case 12:return Pt(s,o,o.pendingProps.children,c),o.child;case 10:e:{if(f=o.type._context,m=o.pendingProps,y=o.memoizedProps,_=m.value,Ke(Na,f._currentValue),f._currentValue=_,y!==null)if(Sn(y.value,_)){if(y.children===m.children&&!Ft.current){o=Xn(s,o,c);break e}}else for(y=o.child,y!==null&&(y.return=o);y!==null;){var k=y.dependencies;if(k!==null){_=y.child;for(var P=k.firstContext;P!==null;){if(P.context===f){if(y.tag===1){P=Yn(-1,c&-c),P.tag=2;var q=y.updateQueue;if(q!==null){q=q.shared;var ne=q.pending;ne===null?P.next=P:(P.next=ne.next,ne.next=P),q.pending=P}}y.lanes|=c,P=y.alternate,P!==null&&(P.lanes|=c),_u(y.return,c,o),k.lanes|=c;break}P=P.next}}else if(y.tag===10)_=y.type===o.type?null:y.child;else if(y.tag===18){if(_=y.return,_===null)throw Error(t(341));_.lanes|=c,k=_.alternate,k!==null&&(k.lanes|=c),_u(_,c,o),_=y.sibling}else _=y.child;if(_!==null)_.return=y;else for(_=y;_!==null;){if(_===o){_=null;break}if(y=_.sibling,y!==null){y.return=_.return,_=y;break}_=_.return}y=_}Pt(s,o,m.children,c),o=o.child}return o;case 9:return m=o.type,f=o.pendingProps.children,Ys(o,c),m=fn(m),f=f(m),o.flags|=1,Pt(s,o,f,c),o.child;case 14:return f=o.type,m=_n(f,o.pendingProps),m=_n(f.type,m),Hm(s,o,f,m,c);case 15:return Vm(s,o,o.type,o.pendingProps,c);case 17:return f=o.type,m=o.pendingProps,m=o.elementType===f?m:_n(f,m),Ga(s,o),o.tag=1,zt(f)?(s=!0,Aa(o)):s=!1,Ys(o,c),Lm(o,f,m),$u(o,f,m,c),Bu(null,o,f,!0,s,c);case 19:return Zm(s,o,c);case 22:return Wm(s,o,c)}throw Error(t(156,o.tag))};function Eg(s,o){return nh(s,o)}function Q_(s,o,c,f){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mn(s,o,c,f){return new Q_(s,o,c,f)}function ld(s){return s=s.prototype,!(!s||!s.isReactComponent)}function J_(s){if(typeof s=="function")return ld(s)?1:0;if(s!=null){if(s=s.$$typeof,s===ue)return 11;if(s===_e)return 14}return 2}function Dr(s,o){var c=s.alternate;return c===null?(c=mn(s.tag,o,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=o,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&14680064,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,o=s.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c}function sl(s,o,c,f,m,y){var _=2;if(f=s,typeof s=="function")ld(s)&&(_=1);else if(typeof s=="string")_=5;else e:switch(s){case W:return ls(c.children,m,y,o);case F:_=8,m|=8;break;case K:return s=mn(12,c,o,m|2),s.elementType=K,s.lanes=y,s;case ve:return s=mn(13,c,o,m),s.elementType=ve,s.lanes=y,s;case Re:return s=mn(19,c,o,m),s.elementType=Re,s.lanes=y,s;case pe:return il(c,m,y,o);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case ae:_=10;break e;case ce:_=9;break e;case ue:_=11;break e;case _e:_=14;break e;case Ie:_=16,f=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return o=mn(_,c,o,m),o.elementType=s,o.type=f,o.lanes=y,o}function ls(s,o,c,f){return s=mn(7,s,f,o),s.lanes=c,s}function il(s,o,c,f){return s=mn(22,s,f,o),s.elementType=pe,s.lanes=c,s.stateNode={isHidden:!1},s}function cd(s,o,c){return s=mn(6,s,null,o),s.lanes=c,s}function ud(s,o,c){return o=mn(4,s.children!==null?s.children:[],s.key,o),o.lanes=c,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}function Z_(s,o,c,f,m){this.tag=o,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jc(0),this.expirationTimes=jc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jc(0),this.identifierPrefix=f,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function dd(s,o,c,f,m,y,_,k,P){return s=new Z_(s,o,c,k,P),o===1?(o=1,y===!0&&(o|=8)):o=0,y=mn(3,null,null,o),s.current=y,y.stateNode=s,y.memoizedState={element:f,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},xu(y),s}function eE(s,o,c){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:H,key:f==null?null:""+f,children:s,containerInfo:o,implementation:c}}function xg(s){if(!s)return Cr;s=s._reactInternals;e:{if(Xr(s)!==s||s.tag!==1)throw Error(t(170));var o=s;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(zt(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(s.tag===1){var c=s.type;if(zt(c))return Jh(s,c,o)}return o}function Cg(s,o,c,f,m,y,_,k,P){return s=dd(c,f,!0,s,m,y,_,k,P),s.context=xg(null),c=s.current,f=Dt(),m=Or(c),y=Yn(f,m),y.callback=o!=null?o:null,kr(c,y,m),s.current.lanes=m,Fi(s,m,f),Ht(s,f),s}function ol(s,o,c,f){var m=o.current,y=Dt(),_=Or(m);return c=xg(c),o.context===null?o.context=c:o.pendingContext=c,o=Yn(y,_),o.payload={element:s},f=f===void 0?null:f,f!==null&&(o.callback=f),s=kr(m,o,_),s!==null&&(Cn(s,m,_,y),ja(s,m,_)),_}function al(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function Tg(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<o?c:o}}function fd(s,o){Tg(s,o),(s=s.alternate)&&Tg(s,o)}function tE(){return null}var Ig=typeof reportError=="function"?reportError:function(s){console.error(s)};function pd(s){this._internalRoot=s}ll.prototype.render=pd.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(t(409));ol(s,o,null,null)},ll.prototype.unmount=pd.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;is(function(){ol(null,s,null,null)}),o[Hn]=null}};function ll(s){this._internalRoot=s}ll.prototype.unstable_scheduleHydration=function(s){if(s){var o=uh();s={blockedOn:null,target:s,priority:o};for(var c=0;c<Sr.length&&o!==0&&o<Sr[c].priority;c++);Sr.splice(c,0,s),c===0&&ph(s)}};function hd(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function cl(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function kg(){}function nE(s,o,c,f,m){if(m){if(typeof f=="function"){var y=f;f=function(){var q=al(_);y.call(q)}}var _=Cg(o,f,s,0,null,!1,!1,"",kg);return s._reactRootContainer=_,s[Hn]=_.current,eo(s.nodeType===8?s.parentNode:s),is(),_}for(;m=s.lastChild;)s.removeChild(m);if(typeof f=="function"){var k=f;f=function(){var q=al(P);k.call(q)}}var P=dd(s,0,!1,null,null,!1,!1,"",kg);return s._reactRootContainer=P,s[Hn]=P.current,eo(s.nodeType===8?s.parentNode:s),is(function(){ol(o,P,c,f)}),P}function ul(s,o,c,f,m){var y=c._reactRootContainer;if(y){var _=y;if(typeof m=="function"){var k=m;m=function(){var P=al(_);k.call(P)}}ol(o,_,s,m)}else _=nE(c,o,s,m,f);return al(_)}lh=function(s){switch(s.tag){case 3:var o=s.stateNode;if(o.current.memoizedState.isDehydrated){var c=Ui(o.pendingLanes);c!==0&&($c(o,c|1),Ht(o,rt()),(Ue&6)===0&&(ei=rt()+500,Tr()))}break;case 13:is(function(){var f=Kn(s,1);if(f!==null){var m=Dt();Cn(f,s,1,m)}}),fd(s,1)}},Uc=function(s){if(s.tag===13){var o=Kn(s,134217728);if(o!==null){var c=Dt();Cn(o,s,134217728,c)}fd(s,134217728)}},ch=function(s){if(s.tag===13){var o=Or(s),c=Kn(s,o);if(c!==null){var f=Dt();Cn(c,s,o,f)}fd(s,o)}},uh=function(){return qe},dh=function(s,o){var c=qe;try{return qe=s,o()}finally{qe=c}},Mc=function(s,o,c){switch(o){case"input":if(Qt(s,c),o=c.name,c.type==="radio"&&o!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<c.length;o++){var f=c[o];if(f!==s&&f.form===s.form){var m=Ia(f);if(!m)throw Error(t(90));Xt(f),Qt(f,m)}}}break;case"textarea":pr(s,c);break;case"select":o=c.value,o!=null&&Jt(s,!!c.multiple,o,!1)}},Yp=id,Xp=is;var rE={usingClientEntryPoint:!1,Events:[ro,zs,Ia,Gp,Kp,id]},wo={findFiberByHostInstance:Qr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sE={bundleType:wo.bundleType,version:wo.version,rendererPackageName:wo.rendererPackageName,rendererConfig:wo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:O.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=eh(s),s===null?null:s.stateNode},findFiberByHostInstance:wo.findFiberByHostInstance||tE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var dl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dl.isDisabled&&dl.supportsFiber)try{la=dl.inject(sE),Pn=dl}catch(s){}}return Vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rE,Vt.createPortal=function(s,o){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hd(o))throw Error(t(200));return eE(s,o,null,c)},Vt.createRoot=function(s,o){if(!hd(s))throw Error(t(299));var c=!1,f="",m=Ig;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onRecoverableError!==void 0&&(m=o.onRecoverableError)),o=dd(s,1,!1,null,null,c,!1,f,m),s[Hn]=o.current,eo(s.nodeType===8?s.parentNode:s),new pd(o)},Vt.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=eh(o),s=s===null?null:s.stateNode,s},Vt.flushSync=function(s){return is(s)},Vt.hydrate=function(s,o,c){if(!cl(o))throw Error(t(200));return ul(null,s,o,!0,c)},Vt.hydrateRoot=function(s,o,c){if(!hd(s))throw Error(t(405));var f=c!=null&&c.hydratedSources||null,m=!1,y="",_=Ig;if(c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onRecoverableError!==void 0&&(_=c.onRecoverableError)),o=Cg(o,null,s,1,c!=null?c:null,m,!1,y,_),s[Hn]=o.current,eo(s),f)for(s=0;s<f.length;s++)c=f[s],m=c._getVersion,m=m(c._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[c,m]:o.mutableSourceEagerHydrationData.push(c,m);return new ll(o)},Vt.render=function(s,o,c){if(!cl(o))throw Error(t(200));return ul(null,s,o,!1,c)},Vt.unmountComponentAtNode=function(s){if(!cl(s))throw Error(t(40));return s._reactRootContainer?(is(function(){ul(null,null,s,!1,function(){s._reactRootContainer=null,s[Hn]=null})}),!0):!1},Vt.unstable_batchedUpdates=id,Vt.unstable_renderSubtreeIntoContainer=function(s,o,c,f){if(!cl(c))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return ul(s,o,c,!1,f)},Vt.version="18.3.1-next-f1338f8080-20240426",Vt}var Fg;function kw(){if(Fg)return Sd.exports;Fg=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Sd.exports=yE(),Sd.exports}var zg;function wE(){if(zg)return pl;zg=1;var n=kw();return pl.createRoot=n.createRoot,pl.hydrateRoot=n.hydrateRoot,pl}var vE=wE();const SE=xi(vE);var Ed={exports:{}},xd={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bg;function bE(){if(Bg)return xd;Bg=1;var n=Jl();function e(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var t=typeof Object.is=="function"?Object.is:e,r=n.useSyncExternalStore,i=n.useRef,a=n.useEffect,l=n.useMemo,u=n.useDebugValue;return xd.useSyncExternalStoreWithSelector=function(d,p,h,g,v){var b=i(null);if(b.current===null){var C={hasValue:!1,value:null};b.current=C}else C=b.current;b=l(function(){function x(L){if(!M){if(M=!0,I=L,L=g(L),v!==void 0&&C.hasValue){var H=C.value;if(v(H,L))return R=H}return R=L}if(H=R,t(I,L))return H;var W=g(L);return v!==void 0&&v(H,W)?(I=L,H):(I=L,R=W)}var M=!1,I,R,O=h===void 0?null:h;return[function(){return x(p())},O===null?void 0:function(){return x(O())}]},[p,h,g,v]);var T=r(d,b[0],b[1]);return a(function(){C.hasValue=!0,C.value=T},[T]),u(T),T},xd}var qg;function _E(){return qg||(qg=1,Ed.exports=bE()),Ed.exports}var EE=_E();function xE(n){n()}function CE(){let n=null,e=null;return{clear(){n=null,e=null},notify(){xE(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let r=n;for(;r;)t.push(r),r=r.next;return t},subscribe(t){let r=!0;const i=e={callback:t,next:null,prev:e};return i.prev?i.prev.next=i:n=i,function(){!r||n===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:n=i.next)}}}}var Hg={notify(){},get:()=>[]};function TE(n,e){let t,r=Hg,i=0,a=!1;function l(T){h();const x=r.subscribe(T);let M=!1;return()=>{M||(M=!0,x(),g())}}function u(){r.notify()}function d(){C.onStateChange&&C.onStateChange()}function p(){return a}function h(){i++,t||(t=n.subscribe(d),r=CE())}function g(){i--,t&&i===0&&(t(),t=void 0,r.clear(),r=Hg)}function v(){a||(a=!0,h())}function b(){a&&(a=!1,g())}const C={addNestedSub:l,notifyNestedSubs:u,handleChangeWrapper:d,isSubscribed:p,trySubscribe:v,tryUnsubscribe:b,getListeners:()=>r};return C}var IE=()=>typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined",kE=IE(),AE=()=>typeof navigator!="undefined"&&navigator.product==="ReactNative",RE=AE(),ME=()=>kE||RE?S.useLayoutEffect:S.useEffect,OE=ME(),Cd=Symbol.for("react-redux-context"),Td=typeof globalThis!="undefined"?globalThis:{};function PE(){var t;if(!S.createContext)return{};const n=(t=Td[Cd])!=null?t:Td[Cd]=new Map;let e=n.get(S.createContext);return e||(e=S.createContext(null),n.set(S.createContext,e)),e}var zr=PE();function DE(n){const{children:e,context:t,serverState:r,store:i}=n,a=S.useMemo(()=>{const d=TE(i);return{store:i,subscription:d,getServerState:r?()=>r:void 0}},[i,r]),l=S.useMemo(()=>i.getState(),[i]);OE(()=>{const{subscription:d}=a;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),l!==i.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[a,l]);const u=t||zr;return S.createElement(u.Provider,{value:a},e)}var Aw=DE;function Xf(n=zr){return function(){return S.useContext(n)}}var Rw=Xf();function Mw(n=zr){const e=n===zr?Rw:Xf(n),t=()=>{const{store:r}=e();return r};return Object.assign(t,{withTypes:()=>t}),t}var NE=Mw();function LE(n=zr){const e=n===zr?NE:Mw(n),t=()=>e().dispatch;return Object.assign(t,{withTypes:()=>t}),t}var Ow=LE(),jE=(n,e)=>n===e;function $E(n=zr){const e=n===zr?Rw:Xf(n),t=(r,i={})=>{const{equalityFn:a=jE}=typeof i=="function"?{equalityFn:i}:i,l=e(),{store:u,subscription:d,getServerState:p}=l;S.useRef(!0);const h=S.useCallback({[r.name](v){return r(v)}}[r.name],[r]),g=EE.useSyncExternalStoreWithSelector(d.addNestedSub,u.getState,p||u.getState,h,a);return S.useDebugValue(g),g};return Object.assign(t,{withTypes:()=>t}),t}var Qf=$E();const UE="modulepreload",FE=function(n){return"/"+n},Vg={},Ye=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let l=function(p){return Promise.all(p.map(h=>Promise.resolve(h).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));i=l(t.map(p=>{if(p=FE(p),p in Vg)return;Vg[p]=!0;const h=p.endsWith(".css"),g=h?'[rel="stylesheet"]':"";if(document.querySelector('link[href="'.concat(p,'"]').concat(g)))return;const v=document.createElement("link");if(v.rel=h?"stylesheet":UE,h||(v.as="script"),v.crossOrigin="",v.href=p,d&&v.setAttribute("nonce",d),document.head.appendChild(v),h)return new Promise((b,C)=>{v.addEventListener("load",b),v.addEventListener("error",()=>C(new Error("Unable to preload CSS for ".concat(p))))})}))}function a(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return i.then(l=>{for(const u of l||[])u.status==="rejected"&&a(u.reason);return e().catch(a)})};var zE=kw();const fs=xi(zE);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Po(){return Po=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Po.apply(this,arguments)}var $r;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})($r||($r={}));const Wg="popstate";function BE(n){n===void 0&&(n={});function e(r,i){let{pathname:a,search:l,hash:u}=r.location;return ff("",{pathname:a,search:l,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Dl(i)}return HE(e,t,null,n)}function ot(n,e){if(n===!1||n===null||typeof n=="undefined")throw new Error(e)}function Pw(n,e){if(!n){typeof console!="undefined"&&console.warn(e);try{throw new Error(e)}catch(t){}}}function qE(){return Math.random().toString(36).substr(2,8)}function Gg(n,e){return{usr:n.state,key:n.key,idx:e}}function ff(n,e,t,r){return t===void 0&&(t=null),Po({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Ci(e):e,{state:t,key:e&&e.key||r||qE()})}function Dl(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ci(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function HE(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,l=i.history,u=$r.Pop,d=null,p=h();p==null&&(p=0,l.replaceState(Po({},l.state,{idx:p}),""));function h(){return(l.state||{idx:null}).idx}function g(){u=$r.Pop;let x=h(),M=x==null?null:x-p;p=x,d&&d({action:u,location:T.location,delta:M})}function v(x,M){u=$r.Push;let I=ff(T.location,x,M);p=h()+1;let R=Gg(I,p),O=T.createHref(I);try{l.pushState(R,"",O)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;i.location.assign(O)}a&&d&&d({action:u,location:T.location,delta:1})}function b(x,M){u=$r.Replace;let I=ff(T.location,x,M);p=h();let R=Gg(I,p),O=T.createHref(I);l.replaceState(R,"",O),a&&d&&d({action:u,location:T.location,delta:0})}function C(x){let M=i.location.origin!=="null"?i.location.origin:i.location.href,I=typeof x=="string"?x:Dl(x);return I=I.replace(/ $/,"%20"),ot(M,"No window.location.(origin|href) available to create URL for href: "+I),new URL(I,M)}let T={get action(){return u},get location(){return n(i,l)},listen(x){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(Wg,g),d=x,()=>{i.removeEventListener(Wg,g),d=null}},createHref(x){return e(i,x)},createURL:C,encodeLocation(x){let M=C(x);return{pathname:M.pathname,search:M.search,hash:M.hash}},push:v,replace:b,go(x){return l.go(x)}};return T}var Kg;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Kg||(Kg={}));function VE(n,e,t){return t===void 0&&(t="/"),WE(n,e,t)}function WE(n,e,t,r){let i=typeof e=="string"?Ci(e):e,a=Jf(i.pathname||"/",t);if(a==null)return null;let l=Dw(n);GE(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let p=ix(a);u=nx(l[d],p)}return u}function Dw(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(a,l,u)=>{let d={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};d.relativePath.startsWith("/")&&(ot(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let p=Ur([r,d.relativePath]),h=t.concat(d);a.children&&a.children.length>0&&(ot(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),Dw(a.children,e,h,p)),!(a.path==null&&!a.index)&&e.push({path:p,score:ex(p,a.index),routesMeta:h})};return n.forEach((a,l)=>{var u;if(a.path===""||!((u=a.path)!=null&&u.includes("?")))i(a,l);else for(let d of Nw(a.path))i(a,l,d)}),e}function Nw(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let l=Nw(r.join("/")),u=[];return u.push(...l.map(d=>d===""?a:[a,d].join("/"))),i&&u.push(...l),u.map(d=>n.startsWith("/")&&d===""?"/":d)}function GE(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:tx(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const KE=/^:[\w-]+$/,YE=3,XE=2,QE=1,JE=10,ZE=-2,Yg=n=>n==="*";function ex(n,e){let t=n.split("/"),r=t.length;return t.some(Yg)&&(r+=ZE),e&&(r+=XE),t.filter(i=>!Yg(i)).reduce((i,a)=>i+(KE.test(a)?YE:a===""?QE:JE),r)}function tx(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function nx(n,e,t){let{routesMeta:r}=n,i={},a="/",l=[];for(let u=0;u<r.length;++u){let d=r[u],p=u===r.length-1,h=a==="/"?e:e.slice(a.length)||"/",g=rx({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},h),v=d.route;if(!g)return null;Object.assign(i,g.params),l.push({params:i,pathname:Ur([a,g.pathname]),pathnameBase:cx(Ur([a,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(a=Ur([a,g.pathnameBase]))}return l}function rx(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=sx(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],l=a.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((p,h,g)=>{let{paramName:v,isOptional:b}=h;if(v==="*"){let T=u[g]||"";l=a.slice(0,a.length-T.length).replace(/(.)\/+$/,"$1")}const C=u[g];return b&&!C?p[v]=void 0:p[v]=(C||"").replace(/%2F/g,"/"),p},{}),pathname:a,pathnameBase:l,pattern:n}}function sx(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Pw(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(r.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function ix(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Pw(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Jf(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function ox(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Ci(n):n;return{pathname:t?t.startsWith("/")?t:ax(t,e):e,search:ux(r),hash:dx(i)}}function ax(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Id(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function lx(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Zf(n,e){let t=lx(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function ep(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=Ci(n):(i=Po({},n),ot(!i.pathname||!i.pathname.includes("?"),Id("?","pathname","search",i)),ot(!i.pathname||!i.pathname.includes("#"),Id("#","pathname","hash",i)),ot(!i.search||!i.search.includes("#"),Id("#","search","hash",i)));let a=n===""||i.pathname==="",l=a?"/":i.pathname,u;if(l==null)u=t;else{let g=e.length-1;if(!r&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),g-=1;i.pathname=v.join("/")}u=g>=0?e[g]:"/"}let d=ox(i,u),p=l&&l!=="/"&&l.endsWith("/"),h=(a||l===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(p||h)&&(d.pathname+="/"),d}const Ur=n=>n.join("/").replace(/\/\/+/g,"/"),cx=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),ux=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,dx=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function fx(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Lw=["post","put","patch","delete"];new Set(Lw);const px=["get",...Lw];new Set(px);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Do(){return Do=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Do.apply(this,arguments)}const tp=S.createContext(null),hx=S.createContext(null),qr=S.createContext(null),Zl=S.createContext(null),ur=S.createContext({outlet:null,matches:[],isDataRoute:!1}),jw=S.createContext(null);function mx(n,e){let{relative:t}=e===void 0?{}:e;Ti()||ot(!1);let{basename:r,navigator:i}=S.useContext(qr),{hash:a,pathname:l,search:u}=Uw(n,{relative:t}),d=l;return r!=="/"&&(d=l==="/"?r:Ur([r,l])),i.createHref({pathname:d,search:u,hash:a})}function Ti(){return S.useContext(Zl)!=null}function Hr(){return Ti()||ot(!1),S.useContext(Zl).location}function $w(n){S.useContext(qr).static||S.useLayoutEffect(n)}function Ii(){let{isDataRoute:n}=S.useContext(ur);return n?kx():gx()}function gx(){Ti()||ot(!1);let n=S.useContext(tp),{basename:e,future:t,navigator:r}=S.useContext(qr),{matches:i}=S.useContext(ur),{pathname:a}=Hr(),l=JSON.stringify(Zf(i,t.v7_relativeSplatPath)),u=S.useRef(!1);return $w(()=>{u.current=!0}),S.useCallback(function(p,h){if(h===void 0&&(h={}),!u.current)return;if(typeof p=="number"){r.go(p);return}let g=ep(p,JSON.parse(l),a,h.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Ur([e,g.pathname])),(h.replace?r.replace:r.push)(g,h.state,h)},[e,r,l,a,n])}function cP(){let{matches:n}=S.useContext(ur),e=n[n.length-1];return e?e.params:{}}function Uw(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=S.useContext(qr),{matches:i}=S.useContext(ur),{pathname:a}=Hr(),l=JSON.stringify(Zf(i,r.v7_relativeSplatPath));return S.useMemo(()=>ep(n,JSON.parse(l),a,t==="path"),[n,l,a,t])}function yx(n,e){return wx(n,e)}function wx(n,e,t,r){Ti()||ot(!1);let{navigator:i}=S.useContext(qr),{matches:a}=S.useContext(ur),l=a[a.length-1],u=l?l.params:{};l&&l.pathname;let d=l?l.pathnameBase:"/";l&&l.route;let p=Hr(),h;if(e){var g;let x=typeof e=="string"?Ci(e):e;d==="/"||(g=x.pathname)!=null&&g.startsWith(d)||ot(!1),h=x}else h=p;let v=h.pathname||"/",b=v;if(d!=="/"){let x=d.replace(/^\//,"").split("/");b="/"+v.replace(/^\//,"").split("/").slice(x.length).join("/")}let C=VE(n,{pathname:b}),T=Ex(C&&C.map(x=>Object.assign({},x,{params:Object.assign({},u,x.params),pathname:Ur([d,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?d:Ur([d,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),a,t,r);return e&&T?S.createElement(Zl.Provider,{value:{location:Do({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:$r.Pop}},T):T}function vx(){let n=Ix(),e=fx(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),t?S.createElement("pre",{style:i},t):null,null)}const Sx=S.createElement(vx,null);class bx extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?S.createElement(ur.Provider,{value:this.props.routeContext},S.createElement(jw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function _x(n){let{routeContext:e,match:t,children:r}=n,i=S.useContext(tp);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),S.createElement(ur.Provider,{value:e},r)}function Ex(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,u=(i=t)==null?void 0:i.errors;if(u!=null){let h=l.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);h>=0||ot(!1),l=l.slice(0,Math.min(l.length,h+1))}let d=!1,p=-1;if(t&&r&&r.v7_partialHydration)for(let h=0;h<l.length;h++){let g=l[h];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(p=h),g.route.id){let{loaderData:v,errors:b}=t,C=g.route.loader&&v[g.route.id]===void 0&&(!b||b[g.route.id]===void 0);if(g.route.lazy||C){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}return l.reduceRight((h,g,v)=>{let b,C=!1,T=null,x=null;t&&(b=u&&g.route.id?u[g.route.id]:void 0,T=g.route.errorElement||Sx,d&&(p<0&&v===0?(Ax("route-fallback"),C=!0,x=null):p===v&&(C=!0,x=g.route.hydrateFallbackElement||null)));let M=e.concat(l.slice(0,v+1)),I=()=>{let R;return b?R=T:C?R=x:g.route.Component?R=S.createElement(g.route.Component,null):g.route.element?R=g.route.element:R=h,S.createElement(_x,{match:g,routeContext:{outlet:h,matches:M,isDataRoute:t!=null},children:R})};return t&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?S.createElement(bx,{location:t.location,revalidation:t.revalidation,component:T,error:b,children:I(),routeContext:{outlet:null,matches:M,isDataRoute:!0}}):I()},null)}var Fw=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(Fw||{}),zw=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(zw||{});function xx(n){let e=S.useContext(tp);return e||ot(!1),e}function Cx(n){let e=S.useContext(hx);return e||ot(!1),e}function Tx(n){let e=S.useContext(ur);return e||ot(!1),e}function Bw(n){let e=Tx(),t=e.matches[e.matches.length-1];return t.route.id||ot(!1),t.route.id}function Ix(){var n;let e=S.useContext(jw),t=Cx(),r=Bw();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function kx(){let{router:n}=xx(Fw.UseNavigateStable),e=Bw(zw.UseNavigateStable),t=S.useRef(!1);return $w(()=>{t.current=!0}),S.useCallback(function(i,a){a===void 0&&(a={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,Do({fromRouteId:e},a)))},[n,e])}const Xg={};function Ax(n,e,t){Xg[n]||(Xg[n]=!0)}function Rx(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function Tl(n){let{to:e,replace:t,state:r,relative:i}=n;Ti()||ot(!1);let{future:a,static:l}=S.useContext(qr),{matches:u}=S.useContext(ur),{pathname:d}=Hr(),p=Ii(),h=ep(e,Zf(u,a.v7_relativeSplatPath),d,i==="path"),g=JSON.stringify(h);return S.useEffect(()=>p(JSON.parse(g),{replace:t,state:r,relative:i}),[p,g,i,t,r]),null}function Ge(n){ot(!1)}function Mx(n){let{basename:e="/",children:t=null,location:r,navigationType:i=$r.Pop,navigator:a,static:l=!1,future:u}=n;Ti()&&ot(!1);let d=e.replace(/^\/*/,"/"),p=S.useMemo(()=>({basename:d,navigator:a,static:l,future:Do({v7_relativeSplatPath:!1},u)}),[d,u,a,l]);typeof r=="string"&&(r=Ci(r));let{pathname:h="/",search:g="",hash:v="",state:b=null,key:C="default"}=r,T=S.useMemo(()=>{let x=Jf(h,d);return x==null?null:{location:{pathname:x,search:g,hash:v,state:b,key:C},navigationType:i}},[d,h,g,v,b,C,i]);return T==null?null:S.createElement(qr.Provider,{value:p},S.createElement(Zl.Provider,{children:t,value:T}))}function Ox(n){let{children:e,location:t}=n;return yx(pf(e),t)}new Promise(()=>{});function pf(n,e){e===void 0&&(e=[]);let t=[];return S.Children.forEach(n,(r,i)=>{if(!S.isValidElement(r))return;let a=[...e,i];if(r.type===S.Fragment){t.push.apply(t,pf(r.props.children,a));return}r.type!==Ge&&ot(!1),!r.props.index||!r.props.children||ot(!1);let l={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=pf(r.props.children,a)),t.push(l)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hf(){return hf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},hf.apply(this,arguments)}function Px(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function Dx(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Nx(n,e){return n.button===0&&(!e||e==="_self")&&!Dx(n)}function mf(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(i=>[t,i]):[[t,r]])},[]))}function Lx(n,e){let t=mf(n);return e&&e.forEach((r,i)=>{t.has(i)||e.getAll(i).forEach(a=>{t.append(i,a)})}),t}const jx=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],$x="6";try{window.__reactRouterVersion=$x}catch(n){}const Ux="startTransition",Qg=hE[Ux];function Fx(n){let{basename:e,children:t,future:r,window:i}=n,a=S.useRef();a.current==null&&(a.current=BE({window:i,v5Compat:!0}));let l=a.current,[u,d]=S.useState({action:l.action,location:l.location}),{v7_startTransition:p}=r||{},h=S.useCallback(g=>{p&&Qg?Qg(()=>d(g)):d(g)},[d,p]);return S.useLayoutEffect(()=>l.listen(h),[l,h]),S.useEffect(()=>Rx(r),[r]),S.createElement(Mx,{basename:e,children:t,location:u.location,navigationType:u.action,navigator:l,future:r})}const zx=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined",Bx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Lr=S.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:a,replace:l,state:u,target:d,to:p,preventScrollReset:h,viewTransition:g}=e,v=Px(e,jx),{basename:b}=S.useContext(qr),C,T=!1;if(typeof p=="string"&&Bx.test(p)&&(C=p,zx))try{let R=new URL(window.location.href),O=p.startsWith("//")?new URL(R.protocol+p):new URL(p),L=Jf(O.pathname,b);O.origin===R.origin&&L!=null?p=L+O.search+O.hash:T=!0}catch(R){}let x=mx(p,{relative:i}),M=qx(p,{replace:l,state:u,target:d,preventScrollReset:h,relative:i,viewTransition:g});function I(R){r&&r(R),R.defaultPrevented||M(R)}return S.createElement("a",hf({},v,{href:C||x,onClick:T||a?r:I,ref:t,target:d}))});var Jg;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Jg||(Jg={}));var Zg;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Zg||(Zg={}));function qx(n,e){let{target:t,replace:r,state:i,preventScrollReset:a,relative:l,viewTransition:u}=e===void 0?{}:e,d=Ii(),p=Hr(),h=Uw(n,{relative:l});return S.useCallback(g=>{if(Nx(g,t)){g.preventDefault();let v=r!==void 0?r:Dl(p)===Dl(h);d(n,{replace:v,state:i,preventScrollReset:a,relative:l,viewTransition:u})}},[p,d,h,r,i,t,n,a,l,u])}function uP(n){let e=S.useRef(mf(n)),t=S.useRef(!1),r=Hr(),i=S.useMemo(()=>Lx(r.search,t.current?null:e.current),[r.search]),a=Ii(),l=S.useCallback((u,d)=>{const p=mf(typeof u=="function"?u(i):u);t.current=!0,a("?"+p,d)},[a,i]);return[i,l]}function qw(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=qw(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function gs(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=qw(n))&&(r&&(r+=" "),r+=e);return r}function Hx(n){if(typeof document=="undefined")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}Hx(':root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}\n');var qo=n=>typeof n=="number"&&!isNaN(n),_s=n=>typeof n=="string",ir=n=>typeof n=="function",Vx=n=>_s(n)||qo(n),gf=n=>_s(n)||ir(n)?n:null,Wx=(n,e)=>n===!1||qo(n)&&n>0?n:e,yf=n=>S.isValidElement(n)||_s(n)||ir(n)||qo(n);function Gx(n,e,t=300){let{scrollHeight:r,style:i}=n;requestAnimationFrame(()=>{i.minHeight="initial",i.height=r+"px",i.transition="all ".concat(t,"ms"),requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(e,t)})})}function Kx({enter:n,exit:e,appendPosition:t=!1,collapse:r=!0,collapseDuration:i=300}){return function({children:a,position:l,preventExitTransition:u,done:d,nodeRef:p,isIn:h,playToast:g}){let v=t?"".concat(n,"--").concat(l):n,b=t?"".concat(e,"--").concat(l):e,C=S.useRef(0);return S.useLayoutEffect(()=>{let T=p.current,x=v.split(" "),M=I=>{I.target===p.current&&(g(),T.removeEventListener("animationend",M),T.removeEventListener("animationcancel",M),C.current===0&&I.type!=="animationcancel"&&T.classList.remove(...x))};T.classList.add(...x),T.addEventListener("animationend",M),T.addEventListener("animationcancel",M)},[]),S.useEffect(()=>{let T=p.current,x=()=>{T.removeEventListener("animationend",x),r?Gx(T,d,i):d()};h||(u?x():(C.current=1,T.className+=" ".concat(b),T.addEventListener("animationend",x)))},[h]),oe.createElement(oe.Fragment,null,a)}}function ey(n,e){return{content:Hw(n.content,n.props),containerId:n.props.containerId,id:n.props.toastId,theme:n.props.theme,type:n.props.type,data:n.props.data||{},isLoading:n.props.isLoading,icon:n.props.icon,reason:n.removalReason,status:e}}function Hw(n,e,t=!1){return S.isValidElement(n)&&!_s(n.type)?S.cloneElement(n,{closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):ir(n)?n({closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):n}function Yx({closeToast:n,theme:e,ariaLabel:t="close"}){return oe.createElement("button",{className:"Toastify__close-button Toastify__close-button--".concat(e),type:"button",onClick:r=>{r.stopPropagation(),n(!0)},"aria-label":t},oe.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},oe.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function Xx({delay:n,isRunning:e,closeToast:t,type:r="default",hide:i,className:a,controlledProgress:l,progress:u,rtl:d,isIn:p,theme:h}){let g=i||l&&u===0,v={animationDuration:"".concat(n,"ms"),animationPlayState:e?"running":"paused"};l&&(v.transform="scaleX(".concat(u,")"));let b=gs("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated","Toastify__progress-bar-theme--".concat(h),"Toastify__progress-bar--".concat(r),{"Toastify__progress-bar--rtl":d}),C=ir(a)?a({rtl:d,type:r,defaultClassName:b}):gs(b,a),T={[l&&u>=1?"onTransitionEnd":"onAnimationEnd"]:l&&u<1?null:()=>{p&&t()}};return oe.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":g},oe.createElement("div",{className:"Toastify__progress-bar--bg Toastify__progress-bar-theme--".concat(h," Toastify__progress-bar--").concat(r)}),oe.createElement("div",A({role:"progressbar","aria-hidden":g?"true":"false","aria-label":"notification timer",className:C,style:v},T)))}var Qx=1,Vw=()=>"".concat(Qx++);function Jx(n,e,t){let r=1,i=0,a=[],l=[],u=e,d=new Map,p=new Set,h=I=>(p.add(I),()=>p.delete(I)),g=()=>{l=Array.from(d.values()),p.forEach(I=>I())},v=({containerId:I,toastId:R,updateId:O})=>{let L=I?I!==n:n!==1,H=d.has(R)&&O==null;return L||H},b=(I,R)=>{d.forEach(O=>{var L;(R==null||R===O.props.toastId)&&((L=O.toggle)==null||L.call(O,I))})},C=I=>{var R,O;(O=(R=I.props)==null?void 0:R.onClose)==null||O.call(R,I.removalReason),I.isActive=!1},T=I=>{if(I==null)d.forEach(C);else{let R=d.get(I);R&&C(R)}g()},x=()=>{i-=a.length,a=[]},M=I=>{var R,O;let{toastId:L,updateId:H}=I.props,W=H==null;I.staleId&&d.delete(I.staleId),I.isActive=!0,d.set(L,I),g(),t(ey(I,W?"added":"updated")),W&&((O=(R=I.props).onOpen)==null||O.call(R))};return{id:n,props:u,observe:h,toggle:b,removeToast:T,toasts:d,clearQueue:x,buildToast:(I,R)=>{if(v(R))return;let{toastId:O,updateId:L,data:H,staleId:W,delay:F}=R,K=L==null;K&&i++;let ae=Y(A(Y(A({},u),{style:u.toastStyle,key:r++}),Object.fromEntries(Object.entries(R).filter(([ue,ve])=>ve!=null))),{toastId:O,updateId:L,data:H,isIn:!1,className:gf(R.className||u.toastClassName),progressClassName:gf(R.progressClassName||u.progressClassName),autoClose:R.isLoading?!1:Wx(R.autoClose,u.autoClose),closeToast(ue){d.get(O).removalReason=ue,T(O)},deleteToast(){let ue=d.get(O);if(ue!=null){if(t(ey(ue,"removed")),d.delete(O),i--,i<0&&(i=0),a.length>0){M(a.shift());return}g()}}});ae.closeButton=u.closeButton,R.closeButton===!1||yf(R.closeButton)?ae.closeButton=R.closeButton:R.closeButton===!0&&(ae.closeButton=yf(u.closeButton)?u.closeButton:!0);let ce={content:I,props:ae,staleId:W};u.limit&&u.limit>0&&i>u.limit&&K?a.push(ce):qo(F)?setTimeout(()=>{M(ce)},F):M(ce)},setProps(I){u=I},setToggle:(I,R)=>{let O=d.get(I);O&&(O.toggle=R)},isToastActive:I=>{var R;return(R=d.get(I))==null?void 0:R.isActive},getSnapshot:()=>l}}var Ut=new Map,No=[],wf=new Set,Zx=n=>wf.forEach(e=>e(n)),Ww=()=>Ut.size>0;function eC(){No.forEach(n=>Kw(n.content,n.options)),No=[]}var tC=(n,{containerId:e})=>{var t;return(t=Ut.get(e||1))==null?void 0:t.toasts.get(n)};function Gw(n,e){var t;if(e)return!!((t=Ut.get(e))!=null&&t.isToastActive(n));let r=!1;return Ut.forEach(i=>{i.isToastActive(n)&&(r=!0)}),r}function nC(n){if(!Ww()){No=No.filter(e=>n!=null&&e.options.toastId!==n);return}if(n==null||Vx(n))Ut.forEach(e=>{e.removeToast(n)});else if(n&&("containerId"in n||"id"in n)){let e=Ut.get(n.containerId);e?e.removeToast(n.id):Ut.forEach(t=>{t.removeToast(n.id)})}}var rC=(n={})=>{Ut.forEach(e=>{e.props.limit&&(!n.containerId||e.id===n.containerId)&&e.clearQueue()})};function Kw(n,e){yf(n)&&(Ww()||No.push({content:n,options:e}),Ut.forEach(t=>{t.buildToast(n,e)}))}function sC(n){var e;(e=Ut.get(n.containerId||1))==null||e.setToggle(n.id,n.fn)}function Yw(n,e){Ut.forEach(t=>{(e==null||!(e!=null&&e.containerId)||(e==null?void 0:e.containerId)===t.id)&&t.toggle(n,e==null?void 0:e.id)})}function iC(n){let e=n.containerId||1;return{subscribe(t){let r=Jx(e,n,Zx);Ut.set(e,r);let i=r.observe(t);return eC(),()=>{i(),Ut.delete(e)}},setProps(t){var r;(r=Ut.get(e))==null||r.setProps(t)},getSnapshot(){var t;return(t=Ut.get(e))==null?void 0:t.getSnapshot()}}}function oC(n){return wf.add(n),()=>{wf.delete(n)}}function aC(n){return n&&(_s(n.toastId)||qo(n.toastId))?n.toastId:Vw()}function Ho(n,e){return Kw(n,e),e.toastId}function ec(n,e){return Y(A({},e),{type:e&&e.type||n,toastId:aC(e)})}function tc(n){return(e,t)=>Ho(e,ec(n,t))}function De(n,e){return Ho(n,ec("default",e))}De.loading=(n,e)=>Ho(n,ec("default",A({isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1},e)));function lC(n,{pending:e,error:t,success:r},i){let a;e&&(a=_s(e)?De.loading(e,i):De.loading(e.render,A(A({},i),e)));let l={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},u=(p,h,g)=>{if(h==null){De.dismiss(a);return}let v=Y(A(A({type:p},l),i),{data:g}),b=_s(h)?{render:h}:h;return a?De.update(a,A(A({},v),b)):De(b.render,A(A({},v),b)),g},d=ir(n)?n():n;return d.then(p=>u("success",r,p)).catch(p=>u("error",t,p)),d}De.promise=lC;De.success=tc("success");De.info=tc("info");De.error=tc("error");De.warning=tc("warning");De.warn=De.warning;De.dark=(n,e)=>Ho(n,ec("default",A({theme:"dark"},e)));function cC(n){nC(n)}De.dismiss=cC;De.clearWaitingQueue=rC;De.isActive=Gw;De.update=(n,e={})=>{let t=tC(n,e);if(t){let{props:r,content:i}=t,a=Y(A(A({delay:100},r),e),{toastId:e.toastId||n,updateId:Vw()});a.toastId!==n&&(a.staleId=n);let l=a.render||i;delete a.render,Ho(l,a)}};De.done=n=>{De.update(n,{progress:1})};De.onChange=oC;De.play=n=>Yw(!0,n);De.pause=n=>Yw(!1,n);function uC(n){var e;let{subscribe:t,getSnapshot:r,setProps:i}=S.useRef(iC(n)).current;i(n);let a=(e=S.useSyncExternalStore(t,r,r))==null?void 0:e.slice();function l(u){if(!a)return[];let d=new Map;return n.newestOnTop&&a.reverse(),a.forEach(p=>{let{position:h}=p.props;d.has(h)||d.set(h,[]),d.get(h).push(p)}),Array.from(d,p=>u(p[0],p[1]))}return{getToastToRender:l,isToastActive:Gw,count:a==null?void 0:a.length}}function dC(n){let[e,t]=S.useState(!1),[r,i]=S.useState(!1),a=S.useRef(null),l=S.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:u,pauseOnHover:d,closeToast:p,onClick:h,closeOnClick:g}=n;sC({id:n.toastId,containerId:n.containerId,fn:t}),S.useEffect(()=>{if(n.pauseOnFocusLoss)return v(),()=>{b()}},[n.pauseOnFocusLoss]);function v(){document.hasFocus()||M(),window.addEventListener("focus",x),window.addEventListener("blur",M)}function b(){window.removeEventListener("focus",x),window.removeEventListener("blur",M)}function C(W){if(n.draggable===!0||n.draggable===W.pointerType){I();let F=a.current;l.canCloseOnClick=!0,l.canDrag=!0,F.style.transition="none",n.draggableDirection==="x"?(l.start=W.clientX,l.removalDistance=F.offsetWidth*(n.draggablePercent/100)):(l.start=W.clientY,l.removalDistance=F.offsetHeight*(n.draggablePercent===80?n.draggablePercent*1.5:n.draggablePercent)/100)}}function T(W){let{top:F,bottom:K,left:ae,right:ce}=a.current.getBoundingClientRect();W.nativeEvent.type!=="touchend"&&n.pauseOnHover&&W.clientX>=ae&&W.clientX<=ce&&W.clientY>=F&&W.clientY<=K?M():x()}function x(){t(!0)}function M(){t(!1)}function I(){l.didMove=!1,document.addEventListener("pointermove",O),document.addEventListener("pointerup",L)}function R(){document.removeEventListener("pointermove",O),document.removeEventListener("pointerup",L)}function O(W){let F=a.current;if(l.canDrag&&F){l.didMove=!0,e&&M(),n.draggableDirection==="x"?l.delta=W.clientX-l.start:l.delta=W.clientY-l.start,l.start!==W.clientX&&(l.canCloseOnClick=!1);let K=n.draggableDirection==="x"?"".concat(l.delta,"px, var(--y)"):"0, calc(".concat(l.delta,"px + var(--y))");F.style.transform="translate3d(".concat(K,",0)"),F.style.opacity="".concat(1-Math.abs(l.delta/l.removalDistance))}}function L(){R();let W=a.current;if(l.canDrag&&l.didMove&&W){if(l.canDrag=!1,Math.abs(l.delta)>l.removalDistance){i(!0),n.closeToast(!0),n.collapseAll();return}W.style.transition="transform 0.2s, opacity 0.2s",W.style.removeProperty("transform"),W.style.removeProperty("opacity")}}let H={onPointerDown:C,onPointerUp:T};return u&&d&&(H.onMouseEnter=M,n.stacked||(H.onMouseLeave=x)),g&&(H.onClick=W=>{h&&h(W),l.canCloseOnClick&&p(!0)}),{playToast:x,pauseToast:M,isRunning:e,preventExitTransition:r,toastRef:a,eventHandlers:H}}var fC=typeof window!="undefined"?S.useLayoutEffect:S.useEffect,nc=i=>{var a=i,{theme:n,type:e,isLoading:t}=a,r=le(a,["theme","type","isLoading"]);return oe.createElement("svg",A({viewBox:"0 0 24 24",width:"100%",height:"100%",fill:n==="colored"?"currentColor":"var(--toastify-icon-color-".concat(e,")")},r))};function pC(n){return oe.createElement(nc,A({},n),oe.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function hC(n){return oe.createElement(nc,A({},n),oe.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function mC(n){return oe.createElement(nc,A({},n),oe.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function gC(n){return oe.createElement(nc,A({},n),oe.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function yC(){return oe.createElement("div",{className:"Toastify__spinner"})}var vf={info:hC,warning:pC,success:mC,error:gC,spinner:yC},wC=n=>n in vf;function vC({theme:n,type:e,isLoading:t,icon:r}){let i=null,a={theme:n,type:e};return r===!1||(ir(r)?i=r(Y(A({},a),{isLoading:t})):S.isValidElement(r)?i=S.cloneElement(r,a):t?i=vf.spinner():wC(e)&&(i=vf[e](a))),i}var SC=n=>{let{isRunning:e,preventExitTransition:t,toastRef:r,eventHandlers:i,playToast:a}=dC(n),{closeButton:l,children:u,autoClose:d,onClick:p,type:h,hideProgressBar:g,closeToast:v,transition:b,position:C,className:T,style:x,progressClassName:M,updateId:I,role:R,progress:O,rtl:L,toastId:H,deleteToast:W,isIn:F,isLoading:K,closeOnClick:ae,theme:ce,ariaLabel:ue}=n,ve=gs("Toastify__toast","Toastify__toast-theme--".concat(ce),"Toastify__toast--".concat(h),{"Toastify__toast--rtl":L},{"Toastify__toast--close-on-click":ae}),Re=ir(T)?T({rtl:L,position:C,type:h,defaultClassName:ve}):gs(ve,T),_e=vC(n),Ie=!!O||!d,pe={closeToast:v,type:h,theme:ce},ee=null;return l===!1||(ir(l)?ee=l(pe):S.isValidElement(l)?ee=S.cloneElement(l,pe):ee=Yx(pe)),oe.createElement(b,{isIn:F,done:W,position:C,preventExitTransition:t,nodeRef:r,playToast:a},oe.createElement("div",A(Y(A({id:H,tabIndex:0,onClick:p,"data-in":F,className:Re},i),{style:x,ref:r}),F&&{role:R,"aria-label":ue}),_e!=null&&oe.createElement("div",{className:gs("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!K})},_e),Hw(u,n,!e),ee,!n.customProgressBar&&oe.createElement(Xx,Y(A({},I&&!Ie?{key:"p-".concat(I)}:{}),{rtl:L,theme:ce,delay:d,isRunning:e,isIn:F,closeToast:v,hide:g,type:h,className:M,controlledProgress:Ie,progress:O||0}))))},bC=(n,e=!1)=>({enter:"Toastify--animate Toastify__".concat(n,"-enter"),exit:"Toastify--animate Toastify__".concat(n,"-exit"),appendPosition:e}),_C=Kx(bC("bounce",!0)),EC={position:"top-right",transition:_C,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:n=>n.altKey&&n.code==="KeyT"};function xC(n){let e=A(A({},EC),n),t=n.stacked,[r,i]=S.useState(!0),a=S.useRef(null),{getToastToRender:l,isToastActive:u,count:d}=uC(e),{className:p,style:h,rtl:g,containerId:v,hotKeys:b}=e;function C(x){let M=gs("Toastify__toast-container","Toastify__toast-container--".concat(x),{"Toastify__toast-container--rtl":g});return ir(p)?p({position:x,rtl:g,defaultClassName:M}):gs(M,gf(p))}function T(){t&&(i(!0),De.play())}return fC(()=>{var x;if(t){let M=a.current.querySelectorAll('[data-in="true"]'),I=12,R=(x=e.position)==null?void 0:x.includes("top"),O=0,L=0;Array.from(M).reverse().forEach((H,W)=>{let F=H;F.classList.add("Toastify__toast--stacked"),W>0&&(F.dataset.collapsed="".concat(r)),F.dataset.pos||(F.dataset.pos=R?"top":"bot");let K=O*(r?.2:1)+(r?0:I*W);F.style.setProperty("--y","".concat(R?K:K*-1,"px")),F.style.setProperty("--g","".concat(I)),F.style.setProperty("--s","".concat(1-(r?L:0))),O+=F.offsetHeight,L+=.025})}},[r,d,t]),S.useEffect(()=>{function x(M){var I;let R=a.current;b(M)&&((I=R.querySelector('[tabIndex="0"]'))==null||I.focus(),i(!1),De.pause()),M.key==="Escape"&&(document.activeElement===R||R!=null&&R.contains(document.activeElement))&&(i(!0),De.play())}return document.addEventListener("keydown",x),()=>{document.removeEventListener("keydown",x)}},[b]),oe.createElement("section",{ref:a,className:"Toastify",id:v,onMouseEnter:()=>{t&&(i(!1),De.pause())},onMouseLeave:T,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":e["aria-label"]},l((x,M)=>{let I=M.length?A({},h):Y(A({},h),{pointerEvents:"none"});return oe.createElement("div",{tabIndex:-1,className:C(x),"data-stacked":t,style:I,key:"c-".concat(x)},M.map(({content:R,props:O})=>oe.createElement(SC,Y(A({},O),{stacked:t,collapseAll:T,isIn:u(O.toastId,O.containerId),key:"t-".concat(O.key)}),R)))}))}function Et(n){return"Minified Redux error #".concat(n,"; visit https://redux.js.org/Errors?code=").concat(n," for the full message or use the non-minified dev environment for full errors. ")}var CC=typeof Symbol=="function"&&Symbol.observable||"@@observable",ty=CC,kd=()=>Math.random().toString(36).substring(7).split("").join("."),TC={INIT:"@@redux/INIT".concat(kd()),REPLACE:"@@redux/REPLACE".concat(kd()),PROBE_UNKNOWN_ACTION:()=>"@@redux/PROBE_UNKNOWN_ACTION".concat(kd())},Nl=TC;function np(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function Xw(n,e,t){if(typeof n!="function")throw new Error(Et(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(Et(0));if(typeof e=="function"&&typeof t=="undefined"&&(t=e,e=void 0),typeof t!="undefined"){if(typeof t!="function")throw new Error(Et(1));return t(Xw)(n,e)}let r=n,i=e,a=new Map,l=a,u=0,d=!1;function p(){l===a&&(l=new Map,a.forEach((x,M)=>{l.set(M,x)}))}function h(){if(d)throw new Error(Et(3));return i}function g(x){if(typeof x!="function")throw new Error(Et(4));if(d)throw new Error(Et(5));let M=!0;p();const I=u++;return l.set(I,x),function(){if(M){if(d)throw new Error(Et(6));M=!1,p(),l.delete(I),a=null}}}function v(x){if(!np(x))throw new Error(Et(7));if(typeof x.type=="undefined")throw new Error(Et(8));if(typeof x.type!="string")throw new Error(Et(17));if(d)throw new Error(Et(9));try{d=!0,i=r(i,x)}finally{d=!1}return(a=l).forEach(I=>{I()}),x}function b(x){if(typeof x!="function")throw new Error(Et(10));r=x,v({type:Nl.REPLACE})}function C(){const x=g;return{subscribe(M){if(typeof M!="object"||M===null)throw new Error(Et(11));function I(){const O=M;O.next&&O.next(h())}return I(),{unsubscribe:x(I)}},[ty](){return this}}}return v({type:Nl.INIT}),{dispatch:v,subscribe:g,getState:h,replaceReducer:b,[ty]:C}}function IC(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:Nl.INIT})=="undefined")throw new Error(Et(12));if(typeof t(void 0,{type:Nl.PROBE_UNKNOWN_ACTION()})=="undefined")throw new Error(Et(13))})}function kC(n){const e=Object.keys(n),t={};for(let a=0;a<e.length;a++){const l=e[a];typeof n[l]=="function"&&(t[l]=n[l])}const r=Object.keys(t);let i;try{IC(t)}catch(a){i=a}return function(l={},u){if(i)throw i;let d=!1;const p={};for(let h=0;h<r.length;h++){const g=r[h],v=t[g],b=l[g],C=v(b,u);if(typeof C=="undefined")throw u&&u.type,new Error(Et(14));p[g]=C,d=d||C!==b}return d=d||r.length!==Object.keys(l).length,d?p:l}}function Ll(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...r)=>e(t(...r)))}function AC(...n){return e=>(t,r)=>{const i=e(t,r);let a=()=>{throw new Error(Et(15))};const l={getState:i.getState,dispatch:(d,...p)=>a(d,...p)},u=n.map(d=>d(l));return a=Ll(...u)(i.dispatch),Y(A({},i),{dispatch:a})}}function RC(n){return np(n)&&"type"in n&&typeof n.type=="string"}var Qw=Symbol.for("immer-nothing"),ny=Symbol.for("immer-draftable"),on=Symbol.for("immer-state");function An(n,...e){throw new Error("[Immer] minified error nr: ".concat(n,". Full error at: https://bit.ly/3cXEKWf"))}var hi=Object.getPrototypeOf;function Es(n){return!!n&&!!n[on]}function or(n){var e;return n?Jw(n)||Array.isArray(n)||!!n[ny]||!!((e=n.constructor)!=null&&e[ny])||sc(n)||ic(n):!1}var MC=Object.prototype.constructor.toString();function Jw(n){if(!n||typeof n!="object")return!1;const e=hi(n);if(e===null)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return t===Object?!0:typeof t=="function"&&Function.toString.call(t)===MC}function jl(n,e){rc(n)===0?Reflect.ownKeys(n).forEach(t=>{e(t,n[t],n)}):n.forEach((t,r)=>e(r,t,n))}function rc(n){const e=n[on];return e?e.type_:Array.isArray(n)?1:sc(n)?2:ic(n)?3:0}function Sf(n,e){return rc(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function Zw(n,e,t){const r=rc(n);r===2?n.set(e,t):r===3?n.add(t):n[e]=t}function OC(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}function sc(n){return n instanceof Map}function ic(n){return n instanceof Set}function ds(n){return n.copy_||n.base_}function bf(n,e){if(sc(n))return new Map(n);if(ic(n))return new Set(n);if(Array.isArray(n))return Array.prototype.slice.call(n);const t=Jw(n);if(e===!0||e==="class_only"&&!t){const r=Object.getOwnPropertyDescriptors(n);delete r[on];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const l=i[a],u=r[l];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(r[l]={configurable:!0,writable:!0,enumerable:u.enumerable,value:n[l]})}return Object.create(hi(n),r)}else{const r=hi(n);if(r!==null&&t)return A({},n);const i=Object.create(r);return Object.assign(i,n)}}function rp(n,e=!1){return oc(n)||Es(n)||!or(n)||(rc(n)>1&&(n.set=n.add=n.clear=n.delete=PC),Object.freeze(n),e&&Object.entries(n).forEach(([t,r])=>rp(r,!0))),n}function PC(){An(2)}function oc(n){return Object.isFrozen(n)}var DC={};function xs(n){const e=DC[n];return e||An(0,n),e}var Lo;function ev(){return Lo}function NC(n,e){return{drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function ry(n,e){e&&(xs("Patches"),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function _f(n){Ef(n),n.drafts_.forEach(LC),n.drafts_=null}function Ef(n){n===Lo&&(Lo=n.parent_)}function sy(n){return Lo=NC(Lo,n)}function LC(n){const e=n[on];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function iy(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return n!==void 0&&n!==t?(t[on].modified_&&(_f(e),An(4)),or(n)&&(n=$l(e,n),e.parent_||Ul(e,n)),e.patches_&&xs("Patches").generateReplacementPatches_(t[on].base_,n,e.patches_,e.inversePatches_)):n=$l(e,t,[]),_f(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==Qw?n:void 0}function $l(n,e,t){if(oc(e))return e;const r=e[on];if(!r)return jl(e,(i,a)=>oy(n,r,e,i,a,t)),e;if(r.scope_!==n)return e;if(!r.modified_)return Ul(n,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let a=i,l=!1;r.type_===3&&(a=new Set(i),i.clear(),l=!0),jl(a,(u,d)=>oy(n,r,i,u,d,t,l)),Ul(n,i,!1),t&&n.patches_&&xs("Patches").generatePatches_(r,t,n.patches_,n.inversePatches_)}return r.copy_}function oy(n,e,t,r,i,a,l){if(Es(i)){const u=a&&e&&e.type_!==3&&!Sf(e.assigned_,r)?a.concat(r):void 0,d=$l(n,i,u);if(Zw(t,r,d),Es(d))n.canAutoFreeze_=!1;else return}else l&&t.add(i);if(or(i)&&!oc(i)){if(!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1)return;$l(n,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(t,r)&&Ul(n,i)}}function Ul(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&rp(e,t)}function jC(n,e){const t=Array.isArray(n),r={type_:t?1:0,scope_:e?e.scope_:ev(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,a=sp;t&&(i=[r],a=jo);const{revoke:l,proxy:u}=Proxy.revocable(i,a);return r.draft_=u,r.revoke_=l,u}var sp={get(n,e){if(e===on)return n;const t=ds(n);if(!Sf(t,e))return $C(n,t,e);const r=t[e];return n.finalized_||!or(r)?r:r===Ad(n.base_,e)?(Rd(n),n.copy_[e]=Cf(r,n)):r},has(n,e){return e in ds(n)},ownKeys(n){return Reflect.ownKeys(ds(n))},set(n,e,t){const r=tv(ds(n),e);if(r!=null&&r.set)return r.set.call(n.draft_,t),!0;if(!n.modified_){const i=Ad(ds(n),e),a=i==null?void 0:i[on];if(a&&a.base_===t)return n.copy_[e]=t,n.assigned_[e]=!1,!0;if(OC(t,i)&&(t!==void 0||Sf(n.base_,e)))return!0;Rd(n),xf(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_[e]=!0),!0},deleteProperty(n,e){return Ad(n.base_,e)!==void 0||e in n.base_?(n.assigned_[e]=!1,Rd(n),xf(n)):delete n.assigned_[e],n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=ds(n),r=Reflect.getOwnPropertyDescriptor(t,e);return r&&{writable:!0,configurable:n.type_!==1||e!=="length",enumerable:r.enumerable,value:t[e]}},defineProperty(){An(11)},getPrototypeOf(n){return hi(n.base_)},setPrototypeOf(){An(12)}},jo={};jl(sp,(n,e)=>{jo[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});jo.deleteProperty=function(n,e){return jo.set.call(this,n,e,void 0)};jo.set=function(n,e,t){return sp.set.call(this,n[0],e,t,n[0])};function Ad(n,e){const t=n[on];return(t?ds(t):n)[e]}function $C(n,e,t){var i;const r=tv(e,t);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(n.draft_):void 0}function tv(n,e){if(!(e in n))return;let t=hi(n);for(;t;){const r=Object.getOwnPropertyDescriptor(t,e);if(r)return r;t=hi(t)}}function xf(n){n.modified_||(n.modified_=!0,n.parent_&&xf(n.parent_))}function Rd(n){n.copy_||(n.copy_=bf(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var UC=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,r)=>{if(typeof e=="function"&&typeof t!="function"){const a=t;t=e;const l=this;return function(d=a,...p){return l.produce(d,h=>t.call(this,h,...p))}}typeof t!="function"&&An(6),r!==void 0&&typeof r!="function"&&An(7);let i;if(or(e)){const a=sy(this),l=Cf(e,void 0);let u=!0;try{i=t(l),u=!1}finally{u?_f(a):Ef(a)}return ry(a,r),iy(i,a)}else if(!e||typeof e!="object"){if(i=t(e),i===void 0&&(i=e),i===Qw&&(i=void 0),this.autoFreeze_&&rp(i,!0),r){const a=[],l=[];xs("Patches").generateReplacementPatches_(e,i,a,l),r(a,l)}return i}else An(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(l,...u)=>this.produceWithPatches(l,d=>e(d,...u));let r,i;return[this.produce(e,t,(l,u)=>{r=l,i=u}),r,i]},typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze),typeof(n==null?void 0:n.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(n.useStrictShallowCopy)}createDraft(n){or(n)||An(8),Es(n)&&(n=FC(n));const e=sy(this),t=Cf(n,void 0);return t[on].isManual_=!0,Ef(e),t}finishDraft(n,e){const t=n&&n[on];(!t||!t.isManual_)&&An(9);const{scope_:r}=t;return ry(r,e),iy(void 0,r)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const i=e[t];if(i.path.length===0&&i.op==="replace"){n=i.value;break}}t>-1&&(e=e.slice(t+1));const r=xs("Patches").applyPatches_;return Es(n)?r(n,e):this.produce(n,i=>r(i,e))}};function Cf(n,e){const t=sc(n)?xs("MapSet").proxyMap_(n,e):ic(n)?xs("MapSet").proxySet_(n,e):jC(n,e);return(e?e.scope_:ev()).drafts_.push(t),t}function FC(n){return Es(n)||An(10,n),nv(n)}function nv(n){if(!or(n)||oc(n))return n;const e=n[on];let t;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=bf(n,e.scope_.immer_.useStrictShallowCopy_)}else t=bf(n,!0);return jl(t,(r,i)=>{Zw(t,r,nv(i))}),e&&(e.finalized_=!1),t}var an=new UC,rv=an.produce;an.produceWithPatches.bind(an);an.setAutoFreeze.bind(an);an.setUseStrictShallowCopy.bind(an);an.applyPatches.bind(an);an.createDraft.bind(an);an.finishDraft.bind(an);function sv(n){return({dispatch:t,getState:r})=>i=>a=>typeof a=="function"?a(t,r,n):i(a)}var zC=sv(),BC=sv,qC=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Ll:Ll.apply(null,arguments)},HC=n=>n&&typeof n.match=="function";function Ao(n,e){function t(...r){if(e){let i=e(...r);if(!i)throw new Error(nr(0));return A(A({type:n,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:n,payload:r[0]}}return t.toString=()=>"".concat(n),t.type=n,t.match=r=>RC(r)&&r.type===n,t}var iv=class To extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,To.prototype)}static get[Symbol.species](){return To}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new To(...e[0].concat(this)):new To(...e.concat(this))}};function ay(n){return or(n)?rv(n,()=>{}):n}function hl(n,e,t){return n.has(e)?n.get(e):n.set(e,t(e)).get(e)}function VC(n){return typeof n=="boolean"}var WC=()=>function(e){const{thunk:t=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=e!=null?e:{};let l=new iv;return t&&(VC(t)?l.push(zC):l.push(BC(t.extraArgument))),l},GC="RTK_autoBatch",ly=n=>e=>{setTimeout(e,n)},KC=(n={type:"raf"})=>e=>(...t)=>{const r=e(...t);let i=!0,a=!1,l=!1;const u=new Set,d=n.type==="tick"?queueMicrotask:n.type==="raf"?typeof window!="undefined"&&window.requestAnimationFrame?window.requestAnimationFrame:ly(10):n.type==="callback"?n.queueNotification:ly(n.timeout),p=()=>{l=!1,a&&(a=!1,u.forEach(h=>h()))};return Object.assign({},r,{subscribe(h){const g=()=>i&&h(),v=r.subscribe(g);return u.add(h),()=>{v(),u.delete(h)}},dispatch(h){var g;try{return i=!((g=h==null?void 0:h.meta)!=null&&g[GC]),a=!i,a&&(l||(l=!0,d(p))),r.dispatch(h)}finally{i=!0}}})},YC=n=>function(t){const{autoBatch:r=!0}=t!=null?t:{};let i=new iv(n);return r&&i.push(KC(typeof r=="object"?r:void 0)),i};function XC(n){const e=WC(),{reducer:t=void 0,middleware:r,devTools:i=!0,preloadedState:a=void 0,enhancers:l=void 0}=n||{};let u;if(typeof t=="function")u=t;else if(np(t))u=kC(t);else throw new Error(nr(1));let d;typeof r=="function"?d=r(e):d=e();let p=Ll;i&&(p=qC(A({trace:!1},typeof i=="object"&&i)));const h=AC(...d),g=YC(h);let v=typeof l=="function"?l(g):g();const b=p(...v);return Xw(u,a,b)}function ov(n){const e={},t=[];let r;const i={addCase(a,l){const u=typeof a=="string"?a:a.type;if(!u)throw new Error(nr(28));if(u in e)throw new Error(nr(29));return e[u]=l,i},addMatcher(a,l){return t.push({matcher:a,reducer:l}),i},addDefaultCase(a){return r=a,i}};return n(i),[e,t,r]}function QC(n){return typeof n=="function"}function JC(n,e){let[t,r,i]=ov(e),a;if(QC(n))a=()=>ay(n());else{const u=ay(n);a=()=>u}function l(u=a(),d){let p=[t[d.type],...r.filter(({matcher:h})=>h(d)).map(({reducer:h})=>h)];return p.filter(h=>!!h).length===0&&(p=[i]),p.reduce((h,g)=>{if(g)if(Es(h)){const b=g(h,d);return b===void 0?h:b}else{if(or(h))return rv(h,v=>g(v,d));{const v=g(h,d);if(v===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return h},u)}return l.getInitialState=a,l}var ZC=(n,e)=>HC(n)?n.match(e):n(e);function e1(...n){return e=>n.some(t=>ZC(t,e))}var t1="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",n1=(n=21)=>{let e="",t=n;for(;t--;)e+=t1[Math.random()*64|0];return e},r1=["name","message","stack","code"],Md=class{constructor(n,e){ri(this,"_type");this.payload=n,this.meta=e}},cy=class{constructor(n,e){ri(this,"_type");this.payload=n,this.meta=e}},s1=n=>{if(typeof n=="object"&&n!==null){const e={};for(const t of r1)typeof n[t]=="string"&&(e[t]=n[t]);return e}return{message:String(n)}},uy="External signal was aborted",cn=(()=>{function n(e,t,r){const i=Ao(e+"/fulfilled",(d,p,h,g)=>({payload:d,meta:Y(A({},g||{}),{arg:h,requestId:p,requestStatus:"fulfilled"})})),a=Ao(e+"/pending",(d,p,h)=>({payload:void 0,meta:Y(A({},h||{}),{arg:p,requestId:d,requestStatus:"pending"})})),l=Ao(e+"/rejected",(d,p,h,g,v)=>({payload:g,error:(r&&r.serializeError||s1)(d||"Rejected"),meta:Y(A({},v||{}),{arg:h,requestId:p,rejectedWithValue:!!g,requestStatus:"rejected",aborted:(d==null?void 0:d.name)==="AbortError",condition:(d==null?void 0:d.name)==="ConditionError"})}));function u(d,{signal:p}={}){return(h,g,v)=>{const b=r!=null&&r.idGenerator?r.idGenerator(d):n1(),C=new AbortController;let T,x;function M(R){x=R,C.abort()}p&&(p.aborted?M(uy):p.addEventListener("abort",()=>M(uy),{once:!0}));const I=(function(){return E(this,null,function*(){var L,H;let R;try{let W=(L=r==null?void 0:r.condition)==null?void 0:L.call(r,d,{getState:g,extra:v});if(o1(W)&&(W=yield W),W===!1||C.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const F=new Promise((K,ae)=>{T=()=>{ae({name:"AbortError",message:x||"Aborted"})},C.signal.addEventListener("abort",T)});h(a(b,d,(H=r==null?void 0:r.getPendingMeta)==null?void 0:H.call(r,{requestId:b,arg:d},{getState:g,extra:v}))),R=yield Promise.race([F,Promise.resolve(t(d,{dispatch:h,getState:g,extra:v,requestId:b,signal:C.signal,abort:M,rejectWithValue:(K,ae)=>new Md(K,ae),fulfillWithValue:(K,ae)=>new cy(K,ae)})).then(K=>{if(K instanceof Md)throw K;return K instanceof cy?i(K.payload,b,d,K.meta):i(K,b,d)})])}catch(W){R=W instanceof Md?l(null,b,d,W.payload,W.meta):l(W,b,d)}finally{T&&C.signal.removeEventListener("abort",T)}return r&&!r.dispatchConditionRejection&&l.match(R)&&R.meta.condition||h(R),R})})();return Object.assign(I,{abort:M,requestId:b,arg:d,unwrap(){return I.then(i1)}})}}return Object.assign(u,{pending:a,rejected:l,fulfilled:i,settled:e1(l,i),typePrefix:e})}return n.withTypes=()=>n,n})();function i1(n){if(n.meta&&n.meta.rejectedWithValue)throw n.payload;if(n.error)throw n.error;return n.payload}function o1(n){return n!==null&&typeof n=="object"&&typeof n.then=="function"}var a1=Symbol.for("rtk-slice-createasyncthunk");function l1(n,e){return"".concat(n,"/").concat(e)}function c1({creators:n}={}){var t;const e=(t=n==null?void 0:n.asyncThunk)==null?void 0:t[a1];return function(i){const{name:a,reducerPath:l=a}=i;if(!a)throw new Error(nr(11));const u=(typeof i.reducers=="function"?i.reducers(d1()):i.reducers)||{},d=Object.keys(u),p={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(O,L){const H=typeof O=="string"?O:O.type;if(!H)throw new Error(nr(12));if(H in p.sliceCaseReducersByType)throw new Error(nr(13));return p.sliceCaseReducersByType[H]=L,h},addMatcher(O,L){return p.sliceMatchers.push({matcher:O,reducer:L}),h},exposeAction(O,L){return p.actionCreators[O]=L,h},exposeCaseReducer(O,L){return p.sliceCaseReducersByName[O]=L,h}};d.forEach(O=>{const L=u[O],H={reducerName:O,type:l1(a,O),createNotation:typeof i.reducers=="function"};p1(L)?m1(H,L,h,e):f1(H,L,h)});function g(){const[O={},L=[],H=void 0]=typeof i.extraReducers=="function"?ov(i.extraReducers):[i.extraReducers],W=A(A({},O),p.sliceCaseReducersByType);return JC(i.initialState,F=>{for(let K in W)F.addCase(K,W[K]);for(let K of p.sliceMatchers)F.addMatcher(K.matcher,K.reducer);for(let K of L)F.addMatcher(K.matcher,K.reducer);H&&F.addDefaultCase(H)})}const v=O=>O,b=new Map,C=new WeakMap;let T;function x(O,L){return T||(T=g()),T(O,L)}function M(){return T||(T=g()),T.getInitialState()}function I(O,L=!1){function H(F){let K=F[O];return typeof K=="undefined"&&L&&(K=hl(C,H,M)),K}function W(F=v){const K=hl(b,L,()=>new WeakMap);return hl(K,F,()=>{var ce;const ae={};for(const[ue,ve]of Object.entries((ce=i.selectors)!=null?ce:{}))ae[ue]=u1(ve,F,()=>hl(C,F,M),L);return ae})}return{reducerPath:O,getSelectors:W,get selectors(){return W(H)},selectSlice:H}}const R=Y(A({name:a,reducer:x,actions:p.actionCreators,caseReducers:p.sliceCaseReducersByName,getInitialState:M},I(l)),{injectInto(O,W={}){var F=W,{reducerPath:L}=F,H=le(F,["reducerPath"]);const K=L!=null?L:l;return O.inject({reducerPath:K,reducer:x},H),A(A({},R),I(K,!0))}});return R}}function u1(n,e,t,r){function i(a,...l){let u=e(a);return typeof u=="undefined"&&r&&(u=t()),n(u,...l)}return i.unwrapped=n,i}var ip=c1();function d1(){function n(e,t){return A({_reducerDefinitionType:"asyncThunk",payloadCreator:e},t)}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function f1({type:n,reducerName:e,createNotation:t},r,i){let a,l;if("reducer"in r){if(t&&!h1(r))throw new Error(nr(17));a=r.reducer,l=r.prepare}else a=r;i.addCase(n,a).exposeCaseReducer(e,a).exposeAction(e,l?Ao(n,l):Ao(n))}function p1(n){return n._reducerDefinitionType==="asyncThunk"}function h1(n){return n._reducerDefinitionType==="reducerWithPrepare"}function m1({type:n,reducerName:e},t,r,i){if(!i)throw new Error(nr(18));const{payloadCreator:a,fulfilled:l,pending:u,rejected:d,settled:p,options:h}=t,g=i(n,a,h);r.exposeAction(e,g),l&&r.addCase(g.fulfilled,l),u&&r.addCase(g.pending,u),d&&r.addCase(g.rejected,d),p&&r.addMatcher(g.settled,p),r.exposeCaseReducer(e,{fulfilled:l||ml,pending:u||ml,rejected:d||ml,settled:p||ml})}function ml(){}function nr(n){return"Minified Redux Toolkit error #".concat(n,"; visit https://redux-toolkit.js.org/Errors?code=").concat(n," for the full message or use the non-minified dev environment for full errors. ")}function av(n,e){return function(){return n.apply(e,arguments)}}const{toString:g1}=Object.prototype,{getPrototypeOf:op}=Object,{iterator:ac,toStringTag:lv}=Symbol,lc=(n=>e=>{const t=g1.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Mn=n=>(n=n.toLowerCase(),e=>lc(e)===n),cc=n=>e=>typeof e===n,{isArray:ki}=Array,$o=cc("undefined");function Vo(n){return n!==null&&!$o(n)&&n.constructor!==null&&!$o(n.constructor)&&Wt(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const cv=Mn("ArrayBuffer");function y1(n){let e;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&cv(n.buffer),e}const w1=cc("string"),Wt=cc("function"),uv=cc("number"),Wo=n=>n!==null&&typeof n=="object",v1=n=>n===!0||n===!1,Il=n=>{if(lc(n)!=="object")return!1;const e=op(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(lv in n)&&!(ac in n)},S1=n=>{if(!Wo(n)||Vo(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch(e){return!1}},b1=Mn("Date"),_1=Mn("File"),E1=Mn("Blob"),x1=Mn("FileList"),C1=n=>Wo(n)&&Wt(n.pipe),T1=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||Wt(n.append)&&((e=lc(n))==="formdata"||e==="object"&&Wt(n.toString)&&n.toString()==="[object FormData]"))},I1=Mn("URLSearchParams"),[k1,A1,R1,M1]=["ReadableStream","Request","Response","Headers"].map(Mn),O1=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Go(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n=="undefined")return;let r,i;if(typeof n!="object"&&(n=[n]),ki(n))for(r=0,i=n.length;r<i;r++)e.call(null,n[r],r,n);else{if(Vo(n))return;const a=t?Object.getOwnPropertyNames(n):Object.keys(n),l=a.length;let u;for(r=0;r<l;r++)u=a[r],e.call(null,n[u],u,n)}}function dv(n,e){if(Vo(n))return null;e=e.toLowerCase();const t=Object.keys(n);let r=t.length,i;for(;r-- >0;)if(i=t[r],e===i.toLowerCase())return i;return null}const ps=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global,fv=n=>!$o(n)&&n!==ps;function Tf(){const{caseless:n}=fv(this)&&this||{},e={},t=(r,i)=>{const a=n&&dv(e,i)||i;Il(e[a])&&Il(r)?e[a]=Tf(e[a],r):Il(r)?e[a]=Tf({},r):ki(r)?e[a]=r.slice():e[a]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Go(arguments[r],t);return e}const P1=(n,e,t,{allOwnKeys:r}={})=>(Go(e,(i,a)=>{t&&Wt(i)?n[a]=av(i,t):n[a]=i},{allOwnKeys:r}),n),D1=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),N1=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},L1=(n,e,t,r)=>{let i,a,l;const u={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),a=i.length;a-- >0;)l=i[a],(!r||r(l,n,e))&&!u[l]&&(e[l]=n[l],u[l]=!0);n=t!==!1&&op(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},j1=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},$1=n=>{if(!n)return null;if(ki(n))return n;let e=n.length;if(!uv(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},U1=(n=>e=>n&&e instanceof n)(typeof Uint8Array!="undefined"&&op(Uint8Array)),F1=(n,e)=>{const r=(n&&n[ac]).call(n);let i;for(;(i=r.next())&&!i.done;){const a=i.value;e.call(n,a[0],a[1])}},z1=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},B1=Mn("HTMLFormElement"),q1=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,i){return r.toUpperCase()+i}),dy=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),H1=Mn("RegExp"),pv=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};Go(t,(i,a)=>{let l;(l=e(i,a,n))!==!1&&(r[a]=l||i)}),Object.defineProperties(n,r)},V1=n=>{pv(n,(e,t)=>{if(Wt(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(Wt(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},W1=(n,e)=>{const t={},r=i=>{i.forEach(a=>{t[a]=!0})};return ki(n)?r(n):r(String(n).split(e)),t},G1=()=>{},K1=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function Y1(n){return!!(n&&Wt(n.append)&&n[lv]==="FormData"&&n[ac])}const X1=n=>{const e=new Array(10),t=(r,i)=>{if(Wo(r)){if(e.indexOf(r)>=0)return;if(Vo(r))return r;if(!("toJSON"in r)){e[i]=r;const a=ki(r)?[]:{};return Go(r,(l,u)=>{const d=t(l,i+1);!$o(d)&&(a[u]=d)}),e[i]=void 0,a}}return r};return t(n,0)},Q1=Mn("AsyncFunction"),J1=n=>n&&(Wo(n)||Wt(n))&&Wt(n.then)&&Wt(n.catch),hv=((n,e)=>n?setImmediate:e?((t,r)=>(ps.addEventListener("message",({source:i,data:a})=>{i===ps&&a===t&&r.length&&r.shift()()},!1),i=>{r.push(i),ps.postMessage(t,"*")}))("axios@".concat(Math.random()),[]):t=>setTimeout(t))(typeof setImmediate=="function",Wt(ps.postMessage)),Z1=typeof queueMicrotask!="undefined"?queueMicrotask.bind(ps):typeof process!="undefined"&&process.nextTick||hv,eT=n=>n!=null&&Wt(n[ac]),G={isArray:ki,isArrayBuffer:cv,isBuffer:Vo,isFormData:T1,isArrayBufferView:y1,isString:w1,isNumber:uv,isBoolean:v1,isObject:Wo,isPlainObject:Il,isEmptyObject:S1,isReadableStream:k1,isRequest:A1,isResponse:R1,isHeaders:M1,isUndefined:$o,isDate:b1,isFile:_1,isBlob:E1,isRegExp:H1,isFunction:Wt,isStream:C1,isURLSearchParams:I1,isTypedArray:U1,isFileList:x1,forEach:Go,merge:Tf,extend:P1,trim:O1,stripBOM:D1,inherits:N1,toFlatObject:L1,kindOf:lc,kindOfTest:Mn,endsWith:j1,toArray:$1,forEachEntry:F1,matchAll:z1,isHTMLForm:B1,hasOwnProperty:dy,hasOwnProp:dy,reduceDescriptors:pv,freezeMethods:V1,toObjectSet:W1,toCamelCase:q1,noop:G1,toFiniteNumber:K1,findKey:dv,global:ps,isContextDefined:fv,isSpecCompliantForm:Y1,toJSONObject:X1,isAsyncFn:Q1,isThenable:J1,setImmediate:hv,asap:Z1,isIterable:eT};function Pe(n,e,t,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}G.inherits(Pe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:G.toJSONObject(this.config),code:this.code,status:this.status}}});const mv=Pe.prototype,gv={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{gv[n]={value:n}});Object.defineProperties(Pe,gv);Object.defineProperty(mv,"isAxiosError",{value:!0});Pe.from=(n,e,t,r,i,a)=>{const l=Object.create(mv);return G.toFlatObject(n,l,function(d){return d!==Error.prototype},u=>u!=="isAxiosError"),Pe.call(l,n.message,e,t,r,i),l.cause=n,l.name=n.name,a&&Object.assign(l,a),l};const tT=null;function If(n){return G.isPlainObject(n)||G.isArray(n)}function yv(n){return G.endsWith(n,"[]")?n.slice(0,-2):n}function fy(n,e,t){return n?n.concat(e).map(function(i,a){return i=yv(i),!t&&a?"["+i+"]":i}).join(t?".":""):e}function nT(n){return G.isArray(n)&&!n.some(If)}const rT=G.toFlatObject(G,{},null,function(e){return/^is[A-Z]/.test(e)});function uc(n,e,t){if(!G.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=G.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(T,x){return!G.isUndefined(x[T])});const r=t.metaTokens,i=t.visitor||h,a=t.dots,l=t.indexes,d=(t.Blob||typeof Blob!="undefined"&&Blob)&&G.isSpecCompliantForm(e);if(!G.isFunction(i))throw new TypeError("visitor must be a function");function p(C){if(C===null)return"";if(G.isDate(C))return C.toISOString();if(G.isBoolean(C))return C.toString();if(!d&&G.isBlob(C))throw new Pe("Blob is not supported. Use a Buffer instead.");return G.isArrayBuffer(C)||G.isTypedArray(C)?d&&typeof Blob=="function"?new Blob([C]):Buffer.from(C):C}function h(C,T,x){let M=C;if(C&&!x&&typeof C=="object"){if(G.endsWith(T,"{}"))T=r?T:T.slice(0,-2),C=JSON.stringify(C);else if(G.isArray(C)&&nT(C)||(G.isFileList(C)||G.endsWith(T,"[]"))&&(M=G.toArray(C)))return T=yv(T),M.forEach(function(R,O){!(G.isUndefined(R)||R===null)&&e.append(l===!0?fy([T],O,a):l===null?T:T+"[]",p(R))}),!1}return If(C)?!0:(e.append(fy(x,T,a),p(C)),!1)}const g=[],v=Object.assign(rT,{defaultVisitor:h,convertValue:p,isVisitable:If});function b(C,T){if(!G.isUndefined(C)){if(g.indexOf(C)!==-1)throw Error("Circular reference detected in "+T.join("."));g.push(C),G.forEach(C,function(M,I){(!(G.isUndefined(M)||M===null)&&i.call(e,M,G.isString(I)?I.trim():I,T,v))===!0&&b(M,T?T.concat(I):[I])}),g.pop()}}if(!G.isObject(n))throw new TypeError("data must be an object");return b(n),e}function py(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function ap(n,e){this._pairs=[],n&&uc(n,this,e)}const wv=ap.prototype;wv.append=function(e,t){this._pairs.push([e,t])};wv.toString=function(e){const t=e?function(r){return e.call(this,r,py)}:py;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function sT(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function vv(n,e,t){if(!e)return n;const r=t&&t.encode||sT;G.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let a;if(i?a=i(e,t):a=G.isURLSearchParams(e)?e.toString():new ap(e,t).toString(r),a){const l=n.indexOf("#");l!==-1&&(n=n.slice(0,l)),n+=(n.indexOf("?")===-1?"?":"&")+a}return n}class hy{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){G.forEach(this.handlers,function(r){r!==null&&e(r)})}}const Sv={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},iT=typeof URLSearchParams!="undefined"?URLSearchParams:ap,oT=typeof FormData!="undefined"?FormData:null,aT=typeof Blob!="undefined"?Blob:null,lT={isBrowser:!0,classes:{URLSearchParams:iT,FormData:oT,Blob:aT},protocols:["http","https","file","blob","url","data"]},lp=typeof window!="undefined"&&typeof document!="undefined",kf=typeof navigator=="object"&&navigator||void 0,cT=lp&&(!kf||["ReactNative","NativeScript","NS"].indexOf(kf.product)<0),uT=typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",dT=lp&&window.location.href||"http://localhost",fT=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:lp,hasStandardBrowserEnv:cT,hasStandardBrowserWebWorkerEnv:uT,navigator:kf,origin:dT},Symbol.toStringTag,{value:"Module"})),Mt=A(A({},fT),lT);function pT(n,e){return uc(n,new Mt.classes.URLSearchParams,A({visitor:function(t,r,i,a){return Mt.isNode&&G.isBuffer(t)?(this.append(r,t.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},e))}function hT(n){return G.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function mT(n){const e={},t=Object.keys(n);let r;const i=t.length;let a;for(r=0;r<i;r++)a=t[r],e[a]=n[a];return e}function bv(n){function e(t,r,i,a){let l=t[a++];if(l==="__proto__")return!0;const u=Number.isFinite(+l),d=a>=t.length;return l=!l&&G.isArray(i)?i.length:l,d?(G.hasOwnProp(i,l)?i[l]=[i[l],r]:i[l]=r,!u):((!i[l]||!G.isObject(i[l]))&&(i[l]=[]),e(t,r,i[l],a)&&G.isArray(i[l])&&(i[l]=mT(i[l])),!u)}if(G.isFormData(n)&&G.isFunction(n.entries)){const t={};return G.forEachEntry(n,(r,i)=>{e(hT(r),i,t,0)}),t}return null}function gT(n,e,t){if(G.isString(n))try{return(e||JSON.parse)(n),G.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const Ko={transitional:Sv,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",i=r.indexOf("application/json")>-1,a=G.isObject(e);if(a&&G.isHTMLForm(e)&&(e=new FormData(e)),G.isFormData(e))return i?JSON.stringify(bv(e)):e;if(G.isArrayBuffer(e)||G.isBuffer(e)||G.isStream(e)||G.isFile(e)||G.isBlob(e)||G.isReadableStream(e))return e;if(G.isArrayBufferView(e))return e.buffer;if(G.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return pT(e,this.formSerializer).toString();if((u=G.isFileList(e))||r.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return uc(u?{"files[]":e}:e,d&&new d,this.formSerializer)}}return a||i?(t.setContentType("application/json",!1),gT(e)):e}],transformResponse:[function(e){const t=this.transitional||Ko.transitional,r=t&&t.forcedJSONParsing,i=this.responseType==="json";if(G.isResponse(e)||G.isReadableStream(e))return e;if(e&&G.isString(e)&&(r&&!this.responseType||i)){const l=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(u){if(l)throw u.name==="SyntaxError"?Pe.from(u,Pe.ERR_BAD_RESPONSE,this,null,this.response):u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Mt.classes.FormData,Blob:Mt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};G.forEach(["delete","get","head","post","put","patch"],n=>{Ko.headers[n]={}});const yT=G.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),wT=n=>{const e={};let t,r,i;return n&&n.split("\n").forEach(function(l){i=l.indexOf(":"),t=l.substring(0,i).trim().toLowerCase(),r=l.substring(i+1).trim(),!(!t||e[t]&&yT[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},my=Symbol("internals");function So(n){return n&&String(n).trim().toLowerCase()}function kl(n){return n===!1||n==null?n:G.isArray(n)?n.map(kl):String(n)}function vT(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const ST=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function Od(n,e,t,r,i){if(G.isFunction(r))return r.call(this,e,t);if(i&&(e=t),!!G.isString(e)){if(G.isString(r))return e.indexOf(r)!==-1;if(G.isRegExp(r))return r.test(e)}}function bT(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function _T(n,e){const t=G.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(i,a,l){return this[r].call(this,e,i,a,l)},configurable:!0})})}let Gt=class{constructor(e){e&&this.set(e)}set(e,t,r){const i=this;function a(u,d,p){const h=So(d);if(!h)throw new Error("header name must be a non-empty string");const g=G.findKey(i,h);(!g||i[g]===void 0||p===!0||p===void 0&&i[g]!==!1)&&(i[g||d]=kl(u))}const l=(u,d)=>G.forEach(u,(p,h)=>a(p,h,d));if(G.isPlainObject(e)||e instanceof this.constructor)l(e,t);else if(G.isString(e)&&(e=e.trim())&&!ST(e))l(wT(e),t);else if(G.isObject(e)&&G.isIterable(e)){let u={},d,p;for(const h of e){if(!G.isArray(h))throw TypeError("Object iterator must return a key-value pair");u[p=h[0]]=(d=u[p])?G.isArray(d)?[...d,h[1]]:[d,h[1]]:h[1]}l(u,t)}else e!=null&&a(t,e,r);return this}get(e,t){if(e=So(e),e){const r=G.findKey(this,e);if(r){const i=this[r];if(!t)return i;if(t===!0)return vT(i);if(G.isFunction(t))return t.call(this,i,r);if(G.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=So(e),e){const r=G.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||Od(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let i=!1;function a(l){if(l=So(l),l){const u=G.findKey(r,l);u&&(!t||Od(r,r[u],u,t))&&(delete r[u],i=!0)}}return G.isArray(e)?e.forEach(a):a(e),i}clear(e){const t=Object.keys(this);let r=t.length,i=!1;for(;r--;){const a=t[r];(!e||Od(this,this[a],a,e,!0))&&(delete this[a],i=!0)}return i}normalize(e){const t=this,r={};return G.forEach(this,(i,a)=>{const l=G.findKey(r,a);if(l){t[l]=kl(i),delete t[a];return}const u=e?bT(a):String(a).trim();u!==a&&delete t[a],t[u]=kl(i),r[u]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return G.forEach(this,(r,i)=>{r!=null&&r!==!1&&(t[i]=e&&G.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[my]=this[my]={accessors:{}}).accessors,i=this.prototype;function a(l){const u=So(l);r[u]||(_T(i,l),r[u]=!0)}return G.isArray(e)?e.forEach(a):a(e),this}};Gt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);G.reduceDescriptors(Gt.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});G.freezeMethods(Gt);function Pd(n,e){const t=this||Ko,r=e||t,i=Gt.from(r.headers);let a=r.data;return G.forEach(n,function(u){a=u.call(t,a,i.normalize(),e?e.status:void 0)}),i.normalize(),a}function _v(n){return!!(n&&n.__CANCEL__)}function Ai(n,e,t){Pe.call(this,n==null?"canceled":n,Pe.ERR_CANCELED,e,t),this.name="CanceledError"}G.inherits(Ai,Pe,{__CANCEL__:!0});function Ev(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new Pe("Request failed with status code "+t.status,[Pe.ERR_BAD_REQUEST,Pe.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function ET(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function xT(n,e){n=n||10;const t=new Array(n),r=new Array(n);let i=0,a=0,l;return e=e!==void 0?e:1e3,function(d){const p=Date.now(),h=r[a];l||(l=p),t[i]=d,r[i]=p;let g=a,v=0;for(;g!==i;)v+=t[g++],g=g%n;if(i=(i+1)%n,i===a&&(a=(a+1)%n),p-l<e)return;const b=h&&p-h;return b?Math.round(v*1e3/b):void 0}}function CT(n,e){let t=0,r=1e3/e,i,a;const l=(p,h=Date.now())=>{t=h,i=null,a&&(clearTimeout(a),a=null),n(...p)};return[(...p)=>{const h=Date.now(),g=h-t;g>=r?l(p,h):(i=p,a||(a=setTimeout(()=>{a=null,l(i)},r-g)))},()=>i&&l(i)]}const Fl=(n,e,t=3)=>{let r=0;const i=xT(50,250);return CT(a=>{const l=a.loaded,u=a.lengthComputable?a.total:void 0,d=l-r,p=i(d),h=l<=u;r=l;const g={loaded:l,total:u,progress:u?l/u:void 0,bytes:d,rate:p||void 0,estimated:p&&u&&h?(u-l)/p:void 0,event:a,lengthComputable:u!=null,[e?"download":"upload"]:!0};n(g)},t)},gy=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},yy=n=>(...e)=>G.asap(()=>n(...e)),TT=Mt.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,Mt.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(Mt.origin),Mt.navigator&&/(msie|trident)/i.test(Mt.navigator.userAgent)):()=>!0,IT=Mt.hasStandardBrowserEnv?{write(n,e,t,r,i,a){const l=[n+"="+encodeURIComponent(e)];G.isNumber(t)&&l.push("expires="+new Date(t).toGMTString()),G.isString(r)&&l.push("path="+r),G.isString(i)&&l.push("domain="+i),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function kT(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function AT(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function xv(n,e,t){let r=!kT(e);return n&&(r||t==!1)?AT(n,e):e}const wy=n=>n instanceof Gt?A({},n):n;function Cs(n,e){e=e||{};const t={};function r(p,h,g,v){return G.isPlainObject(p)&&G.isPlainObject(h)?G.merge.call({caseless:v},p,h):G.isPlainObject(h)?G.merge({},h):G.isArray(h)?h.slice():h}function i(p,h,g,v){if(G.isUndefined(h)){if(!G.isUndefined(p))return r(void 0,p,g,v)}else return r(p,h,g,v)}function a(p,h){if(!G.isUndefined(h))return r(void 0,h)}function l(p,h){if(G.isUndefined(h)){if(!G.isUndefined(p))return r(void 0,p)}else return r(void 0,h)}function u(p,h,g){if(g in e)return r(p,h);if(g in n)return r(void 0,p)}const d={url:a,method:a,data:a,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:u,headers:(p,h,g)=>i(wy(p),wy(h),g,!0)};return G.forEach(Object.keys(A(A({},n),e)),function(h){const g=d[h]||i,v=g(n[h],e[h],h);G.isUndefined(v)&&g!==u||(t[h]=v)}),t}const Cv=n=>{const e=Cs({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:a,headers:l,auth:u}=e;e.headers=l=Gt.from(l),e.url=vv(xv(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),u&&l.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let d;if(G.isFormData(t)){if(Mt.hasStandardBrowserEnv||Mt.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if((d=l.getContentType())!==!1){const[p,...h]=d?d.split(";").map(g=>g.trim()).filter(Boolean):[];l.setContentType([p||"multipart/form-data",...h].join("; "))}}if(Mt.hasStandardBrowserEnv&&(r&&G.isFunction(r)&&(r=r(e)),r||r!==!1&&TT(e.url))){const p=i&&a&&IT.read(a);p&&l.set(i,p)}return e},RT=typeof XMLHttpRequest!="undefined",MT=RT&&function(n){return new Promise(function(t,r){const i=Cv(n);let a=i.data;const l=Gt.from(i.headers).normalize();let{responseType:u,onUploadProgress:d,onDownloadProgress:p}=i,h,g,v,b,C;function T(){b&&b(),C&&C(),i.cancelToken&&i.cancelToken.unsubscribe(h),i.signal&&i.signal.removeEventListener("abort",h)}let x=new XMLHttpRequest;x.open(i.method.toUpperCase(),i.url,!0),x.timeout=i.timeout;function M(){if(!x)return;const R=Gt.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),L={data:!u||u==="text"||u==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:R,config:n,request:x};Ev(function(W){t(W),T()},function(W){r(W),T()},L),x=null}"onloadend"in x?x.onloadend=M:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(M)},x.onabort=function(){x&&(r(new Pe("Request aborted",Pe.ECONNABORTED,n,x)),x=null)},x.onerror=function(){r(new Pe("Network Error",Pe.ERR_NETWORK,n,x)),x=null},x.ontimeout=function(){let O=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const L=i.transitional||Sv;i.timeoutErrorMessage&&(O=i.timeoutErrorMessage),r(new Pe(O,L.clarifyTimeoutError?Pe.ETIMEDOUT:Pe.ECONNABORTED,n,x)),x=null},a===void 0&&l.setContentType(null),"setRequestHeader"in x&&G.forEach(l.toJSON(),function(O,L){x.setRequestHeader(L,O)}),G.isUndefined(i.withCredentials)||(x.withCredentials=!!i.withCredentials),u&&u!=="json"&&(x.responseType=i.responseType),p&&([v,C]=Fl(p,!0),x.addEventListener("progress",v)),d&&x.upload&&([g,b]=Fl(d),x.upload.addEventListener("progress",g),x.upload.addEventListener("loadend",b)),(i.cancelToken||i.signal)&&(h=R=>{x&&(r(!R||R.type?new Ai(null,n,x):R),x.abort(),x=null)},i.cancelToken&&i.cancelToken.subscribe(h),i.signal&&(i.signal.aborted?h():i.signal.addEventListener("abort",h)));const I=ET(i.url);if(I&&Mt.protocols.indexOf(I)===-1){r(new Pe("Unsupported protocol "+I+":",Pe.ERR_BAD_REQUEST,n));return}x.send(a||null)})},OT=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,i;const a=function(p){if(!i){i=!0,u();const h=p instanceof Error?p:this.reason;r.abort(h instanceof Pe?h:new Ai(h instanceof Error?h.message:h))}};let l=e&&setTimeout(()=>{l=null,a(new Pe("timeout ".concat(e," of ms exceeded"),Pe.ETIMEDOUT))},e);const u=()=>{n&&(l&&clearTimeout(l),l=null,n.forEach(p=>{p.unsubscribe?p.unsubscribe(a):p.removeEventListener("abort",a)}),n=null)};n.forEach(p=>p.addEventListener("abort",a));const{signal:d}=r;return d.unsubscribe=()=>G.asap(u),d}},PT=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let r=0,i;for(;r<t;)i=r+e,yield n.slice(r,i),r=i},DT=function(n,e){return gd(this,null,function*(){try{for(var t=Og(NT(n)),r,i,a;r=!(i=yield new cs(t.next())).done;r=!1){const l=i.value;yield*yd(PT(l,e))}}catch(i){a=[i]}finally{try{r&&(i=t.return)&&(yield new cs(i.call(t)))}finally{if(a)throw a[0]}}})},NT=function(n){return gd(this,null,function*(){if(n[Symbol.asyncIterator]){yield*yd(n);return}const e=n.getReader();try{for(;;){const{done:t,value:r}=yield new cs(e.read());if(t)break;yield r}}finally{yield new cs(e.cancel())}})},vy=(n,e,t,r)=>{const i=DT(n,e);let a=0,l,u=p=>{l||(l=!0,r&&r(p))};return new ReadableStream({pull(p){return E(this,null,function*(){try{const{done:h,value:g}=yield i.next();if(h){u(),p.close();return}let v=g.byteLength;if(t){let b=a+=v;t(b)}p.enqueue(new Uint8Array(g))}catch(h){throw u(h),h}})},cancel(p){return u(p),i.return()}},{highWaterMark:2})},dc=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Tv=dc&&typeof ReadableStream=="function",LT=dc&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):n=>E(null,null,function*(){return new Uint8Array(yield new Response(n).arrayBuffer())})),Iv=(n,...e)=>{try{return!!n(...e)}catch(t){return!1}},jT=Tv&&Iv(()=>{let n=!1;const e=new Request(Mt.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),Sy=64*1024,Af=Tv&&Iv(()=>G.isReadableStream(new Response("").body)),zl={stream:Af&&(n=>n.body)};dc&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!zl[e]&&(zl[e]=G.isFunction(n[e])?t=>t[e]():(t,r)=>{throw new Pe("Response type '".concat(e,"' is not supported"),Pe.ERR_NOT_SUPPORT,r)})})})(new Response);const $T=n=>E(null,null,function*(){if(n==null)return 0;if(G.isBlob(n))return n.size;if(G.isSpecCompliantForm(n))return(yield new Request(Mt.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(G.isArrayBufferView(n)||G.isArrayBuffer(n))return n.byteLength;if(G.isURLSearchParams(n)&&(n=n+""),G.isString(n))return(yield LT(n)).byteLength}),UT=(n,e)=>E(null,null,function*(){const t=G.toFiniteNumber(n.getContentLength());return t==null?$T(e):t}),FT=dc&&(n=>E(null,null,function*(){let{url:e,method:t,data:r,signal:i,cancelToken:a,timeout:l,onDownloadProgress:u,onUploadProgress:d,responseType:p,headers:h,withCredentials:g="same-origin",fetchOptions:v}=Cv(n);p=p?(p+"").toLowerCase():"text";let b=OT([i,a&&a.toAbortSignal()],l),C;const T=b&&b.unsubscribe&&(()=>{b.unsubscribe()});let x;try{if(d&&jT&&t!=="get"&&t!=="head"&&(x=yield UT(h,r))!==0){let L=new Request(e,{method:"POST",body:r,duplex:"half"}),H;if(G.isFormData(r)&&(H=L.headers.get("content-type"))&&h.setContentType(H),L.body){const[W,F]=gy(x,Fl(yy(d)));r=vy(L.body,Sy,W,F)}}G.isString(g)||(g=g?"include":"omit");const M="credentials"in Request.prototype;C=new Request(e,Y(A({},v),{signal:b,method:t.toUpperCase(),headers:h.normalize().toJSON(),body:r,duplex:"half",credentials:M?g:void 0}));let I=yield fetch(C,v);const R=Af&&(p==="stream"||p==="response");if(Af&&(u||R&&T)){const L={};["status","statusText","headers"].forEach(K=>{L[K]=I[K]});const H=G.toFiniteNumber(I.headers.get("content-length")),[W,F]=u&&gy(H,Fl(yy(u),!0))||[];I=new Response(vy(I.body,Sy,W,()=>{F&&F(),T&&T()}),L)}p=p||"text";let O=yield zl[G.findKey(zl,p)||"text"](I,n);return!R&&T&&T(),yield new Promise((L,H)=>{Ev(L,H,{data:O,headers:Gt.from(I.headers),status:I.status,statusText:I.statusText,config:n,request:C})})}catch(M){throw T&&T(),M&&M.name==="TypeError"&&/Load failed|fetch/i.test(M.message)?Object.assign(new Pe("Network Error",Pe.ERR_NETWORK,n,C),{cause:M.cause||M}):Pe.from(M,M&&M.code,n,C)}})),Rf={http:tT,xhr:MT,fetch:FT};G.forEach(Rf,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch(t){}Object.defineProperty(n,"adapterName",{value:e})}});const by=n=>"- ".concat(n),zT=n=>G.isFunction(n)||n===null||n===!1,kv={getAdapter:n=>{n=G.isArray(n)?n:[n];const{length:e}=n;let t,r;const i={};for(let a=0;a<e;a++){t=n[a];let l;if(r=t,!zT(t)&&(r=Rf[(l=String(t)).toLowerCase()],r===void 0))throw new Pe("Unknown adapter '".concat(l,"'"));if(r)break;i[l||"#"+a]=r}if(!r){const a=Object.entries(i).map(([u,d])=>"adapter ".concat(u," ")+(d===!1?"is not supported by the environment":"is not available in the build"));let l=e?a.length>1?"since :\n"+a.map(by).join("\n"):" "+by(a[0]):"as no adapter specified";throw new Pe("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return r},adapters:Rf};function Dd(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Ai(null,n)}function _y(n){return Dd(n),n.headers=Gt.from(n.headers),n.data=Pd.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),kv.getAdapter(n.adapter||Ko.adapter)(n).then(function(r){return Dd(n),r.data=Pd.call(n,n.transformResponse,r),r.headers=Gt.from(r.headers),r},function(r){return _v(r)||(Dd(n),r&&r.response&&(r.response.data=Pd.call(n,n.transformResponse,r.response),r.response.headers=Gt.from(r.response.headers))),Promise.reject(r)})}const Av="1.11.0",fc={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{fc[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const Ey={};fc.transitional=function(e,t,r){function i(a,l){return"[Axios v"+Av+"] Transitional option '"+a+"'"+l+(r?". "+r:"")}return(a,l,u)=>{if(e===!1)throw new Pe(i(l," has been removed"+(t?" in "+t:"")),Pe.ERR_DEPRECATED);return t&&!Ey[l]&&(Ey[l]=!0,console.warn(i(l," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(a,l,u):!0}};fc.spelling=function(e){return(t,r)=>(console.warn("".concat(r," is likely a misspelling of ").concat(e)),!0)};function BT(n,e,t){if(typeof n!="object")throw new Pe("options must be an object",Pe.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let i=r.length;for(;i-- >0;){const a=r[i],l=e[a];if(l){const u=n[a],d=u===void 0||l(u,a,n);if(d!==!0)throw new Pe("option "+a+" must be "+d,Pe.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Pe("Unknown option "+a,Pe.ERR_BAD_OPTION)}}const Al={assertOptions:BT,validators:fc},$n=Al.validators;let ys=class{constructor(e){this.defaults=e||{},this.interceptors={request:new hy,response:new hy}}request(e,t){return E(this,null,function*(){try{return yield this._request(e,t)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const a=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+="\n"+a):r.stack=a}catch(l){}}throw r}})}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Cs(this.defaults,t);const{transitional:r,paramsSerializer:i,headers:a}=t;r!==void 0&&Al.assertOptions(r,{silentJSONParsing:$n.transitional($n.boolean),forcedJSONParsing:$n.transitional($n.boolean),clarifyTimeoutError:$n.transitional($n.boolean)},!1),i!=null&&(G.isFunction(i)?t.paramsSerializer={serialize:i}:Al.assertOptions(i,{encode:$n.function,serialize:$n.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Al.assertOptions(t,{baseUrl:$n.spelling("baseURL"),withXsrfToken:$n.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let l=a&&G.merge(a.common,a[t.method]);a&&G.forEach(["delete","get","head","post","put","patch","common"],C=>{delete a[C]}),t.headers=Gt.concat(l,a);const u=[];let d=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(t)===!1||(d=d&&T.synchronous,u.unshift(T.fulfilled,T.rejected))});const p=[];this.interceptors.response.forEach(function(T){p.push(T.fulfilled,T.rejected)});let h,g=0,v;if(!d){const C=[_y.bind(this),void 0];for(C.unshift(...u),C.push(...p),v=C.length,h=Promise.resolve(t);g<v;)h=h.then(C[g++],C[g++]);return h}v=u.length;let b=t;for(g=0;g<v;){const C=u[g++],T=u[g++];try{b=C(b)}catch(x){T.call(this,x);break}}try{h=_y.call(this,b)}catch(C){return Promise.reject(C)}for(g=0,v=p.length;g<v;)h=h.then(p[g++],p[g++]);return h}getUri(e){e=Cs(this.defaults,e);const t=xv(e.baseURL,e.url,e.allowAbsoluteUrls);return vv(t,e.params,e.paramsSerializer)}};G.forEach(["delete","get","head","options"],function(e){ys.prototype[e]=function(t,r){return this.request(Cs(r||{},{method:e,url:t,data:(r||{}).data}))}});G.forEach(["post","put","patch"],function(e){function t(r){return function(a,l,u){return this.request(Cs(u||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:l}))}}ys.prototype[e]=t(),ys.prototype[e+"Form"]=t(!0)});let qT=class Rv{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(a){t=a});const r=this;this.promise.then(i=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](i);r._listeners=null}),this.promise.then=i=>{let a;const l=new Promise(u=>{r.subscribe(u),a=u}).then(i);return l.cancel=function(){r.unsubscribe(a)},l},e(function(a,l,u){r.reason||(r.reason=new Ai(a,l,u),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Rv(function(i){e=i}),cancel:e}}};function HT(n){return function(t){return n.apply(null,t)}}function VT(n){return G.isObject(n)&&n.isAxiosError===!0}const Mf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Mf).forEach(([n,e])=>{Mf[e]=n});function Mv(n){const e=new ys(n),t=av(ys.prototype.request,e);return G.extend(t,ys.prototype,e,{allOwnKeys:!0}),G.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return Mv(Cs(n,i))},t}const at=Mv(Ko);at.Axios=ys;at.CanceledError=Ai;at.CancelToken=qT;at.isCancel=_v;at.VERSION=Av;at.toFormData=uc;at.AxiosError=Pe;at.Cancel=at.CanceledError;at.all=function(e){return Promise.all(e)};at.spread=HT;at.isAxiosError=VT;at.mergeConfig=Cs;at.AxiosHeaders=Gt;at.formToJSON=n=>bv(G.isHTMLForm(n)?new FormData(n):n);at.getAdapter=kv.getAdapter;at.HttpStatusCode=Mf;at.default=at;const{Axios:pP,AxiosError:hP,CanceledError:mP,isCancel:gP,CancelToken:yP,VERSION:wP,all:vP,Cancel:SP,isAxiosError:bP,spread:_P,toFormData:EP,AxiosHeaders:xP,HttpStatusCode:CP,formToJSON:TP,getAdapter:IP,mergeConfig:kP}=at;class WT{constructor(e="app"){this.namespace=e,this.enabled=this.checkEnabled()}checkEnabled(){return typeof window!="undefined"?localStorage.getItem("DEBUG")==="true"||window.location.search.includes("debug=true")||window.location.hostname==="localhost":!1}formatMessage(e,...t){const r=new Date().toISOString();return["[".concat(r,"] [").concat(this.namespace,"] [").concat(e.toUpperCase(),"]"),...t]}log(e,...t){if(!this.enabled)return;const r=this.formatMessage(e,...t);console[e==="trace"?"log":e](...r)}trace(...e){this.log("trace",...e)}debug(...e){this.log("debug",...e)}info(...e){this.log("info",...e)}warn(...e){this.log("warn",...e)}error(...e){this.log("error",...e)}success(...e){this.log("info",...e)}group(e){this.enabled&&console.group("[".concat(this.namespace,"] ").concat(e))}groupEnd(){this.enabled&&console.groupEnd()}time(e){this.enabled&&console.time("[".concat(this.namespace,"] ").concat(e))}timeEnd(e){this.enabled&&console.timeEnd("[".concat(this.namespace,"] ").concat(e))}}function Yo(n="app"){return new WT(n)}const In=Yo("trading-post:errorHandler");class cp extends Error{constructor(e,t,r=null){super(e),this.name="NetworkError",this.status=t,this.response=r}}class GT extends Error{constructor(e,t={}){super(e),this.name="ValidationError",this.errors=t}}class KT extends Error{constructor(e){super(e),this.name="AuthError"}}const YT=()=>"ERR_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),XT=(n,e={})=>{var h,g,v,b;const{showToast:t=!0,logToConsole:r=!1,logToService:i=!0,fallbackMessage:a="An unexpected error occurred",context:l="Unknown"}=e,u=YT();r&&(In.error(" [".concat(l,"] Error handled:"),{errorId:u,message:n.message,name:n.name,stack:n.stack,response:(h=n.response)==null?void 0:h.data,status:((g=n.response)==null?void 0:g.status)||n.status,originalError:n}),console.error(" [".concat(l,"] Error ID: ").concat(u," - Full error details logged above"))),i&&QT(n);let d=a,p="error";if(n instanceof cp)switch(n.status){case 404:d="The requested resource was not found. This feature may not be implemented yet.",p="warning",In.warn("404 Not Found",{status:n.status,url:(v=n.response)==null?void 0:v.url});break;case 405:d="This action is not currently supported. The feature is being implemented.",p="warning",In.warn("405 Method Not Allowed",{status:n.status,method:(b=n.response)==null?void 0:b.method});break;case 401:d="Authentication required. Please log in again.",In.warn("401 Unauthorized",{status:n.status});break;case 403:d="You do not have permission to perform this action.";break;case 429:d="Too many requests. Please wait a moment and try again.";break;case 500:d="Server error. Our team has been notified. Please try again later.",In.error("500 Server Error",{status:n.status,response:n.response});break;case 503:d="Service temporarily unavailable. Please try again in a few minutes.";break;default:d="".concat(n.message||a," - Error ID: ").concat(u)}else n instanceof GT?(d="".concat(n.message," - Error ID: ").concat(u),p="warning",In.warn("Validation Error",{errorId:u,message:n.message,errors:n.errors})):n instanceof KT?(d="".concat(n.message," - Error ID: ").concat(u),In.error("Authentication Error",{errorId:u,message:n.message})):n.message&&(d="".concat(n.message," - Error ID: ").concat(u));if(n.name==="TypeError"&&n.message.includes("fetch")?(d="Network connection error. Please check your internet connection. - Error ID: ".concat(u),In.error("Network Connection Error",{errorId:u,name:n.name,message:n.message})):n.name==="AbortError"&&(d="Request was cancelled.",p="info",In.info("Request Aborted",{errorId:u,name:n.name})),t&&d)switch(p){case"warning":De.warning(d);break;case"info":De.info(d);break;case"error":default:De.error(d)}return{error:n,message:d,type:p,errorId:u}},QT=n=>E(null,null,function*(){try{const e={message:n.message,stack:n.stack,name:n.name,url:window.location.href,userAgent:navigator.userAgent,timestamp:new Date().toISOString(),userId:JT()};n instanceof cp&&(e.status=n.status,e.response=n.response),In.error("Logging to service",e),window.errorLoggingService&&window.errorLoggingService.logError(n,e)}catch(e){In.error("Failed to log error to service",e)}}),JT=()=>{try{return localStorage.getItem("token")?"authenticated_user":"anonymous"}catch(n){return"unknown"}};function Nd(n,e,t,r){function i(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function u(h){try{p(r.next(h))}catch(g){l(g)}}function d(h){try{p(r.throw(h))}catch(g){l(g)}}function p(h){h.done?a(h.value):i(h.value).then(u,d)}p((r=r.apply(n,[])).next())})}function ZT(n,e,t,r){if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)}class N{constructor(e,t,r){this.method=e,this.attribute=t,r!==void 0&&(Array.isArray(r)?this.values=r:this.values=[r])}toString(){return JSON.stringify({method:this.method,attribute:this.attribute,values:this.values})}}N.equal=(n,e)=>new N("equal",n,e).toString();N.notEqual=(n,e)=>new N("notEqual",n,e).toString();N.lessThan=(n,e)=>new N("lessThan",n,e).toString();N.lessThanEqual=(n,e)=>new N("lessThanEqual",n,e).toString();N.greaterThan=(n,e)=>new N("greaterThan",n,e).toString();N.greaterThanEqual=(n,e)=>new N("greaterThanEqual",n,e).toString();N.isNull=n=>new N("isNull",n).toString();N.isNotNull=n=>new N("isNotNull",n).toString();N.between=(n,e,t)=>new N("between",n,[e,t]).toString();N.startsWith=(n,e)=>new N("startsWith",n,e).toString();N.endsWith=(n,e)=>new N("endsWith",n,e).toString();N.select=n=>new N("select",void 0,n).toString();N.search=(n,e)=>new N("search",n,e).toString();N.orderDesc=n=>new N("orderDesc",n).toString();N.orderAsc=n=>new N("orderAsc",n).toString();N.cursorAfter=n=>new N("cursorAfter",void 0,n).toString();N.cursorBefore=n=>new N("cursorBefore",void 0,n).toString();N.limit=n=>new N("limit",void 0,n).toString();N.offset=n=>new N("offset",void 0,n).toString();N.contains=(n,e)=>new N("contains",n,e).toString();N.or=n=>new N("or",void 0,n.map(e=>JSON.parse(e))).toString();N.and=n=>new N("and",void 0,n.map(e=>JSON.parse(e))).toString();class Q extends Error{constructor(e,t=0,r="",i=""){super(e),this.name="AppwriteException",this.message=e,this.code=t,this.type=r,this.response=i}}class Jn{constructor(){this.config={endpoint:"https://cloud.appwrite.io/v1",endpointRealtime:"",project:"",jwt:"",locale:"",session:"",devkey:""},this.headers={"x-sdk-name":"Web","x-sdk-platform":"client","x-sdk-language":"web","x-sdk-version":"18.2.0","X-Appwrite-Response-Format":"1.7.0"},this.realtime={socket:void 0,timeout:void 0,heartbeat:void 0,url:"",channels:new Set,subscriptions:new Map,subscriptionsCounter:0,reconnect:!0,reconnectAttempts:0,lastMessage:void 0,connect:()=>{clearTimeout(this.realtime.timeout),this.realtime.timeout=window==null?void 0:window.setTimeout(()=>{this.realtime.createSocket()},50)},getTimeout:()=>{switch(!0){case this.realtime.reconnectAttempts<5:return 1e3;case this.realtime.reconnectAttempts<15:return 5e3;case this.realtime.reconnectAttempts<100:return 1e4;default:return 6e4}},createHeartbeat:()=>{this.realtime.heartbeat&&clearTimeout(this.realtime.heartbeat),this.realtime.heartbeat=window==null?void 0:window.setInterval(()=>{var e;(e=this.realtime.socket)===null||e===void 0||e.send(JSON.stringify({type:"ping"}))},2e4)},createSocket:()=>{var e,t,r;if(this.realtime.channels.size<1){this.realtime.reconnect=!1,(e=this.realtime.socket)===null||e===void 0||e.close();return}const i=new URLSearchParams;i.set("project",this.config.project),this.realtime.channels.forEach(l=>{i.append("channels[]",l)});const a=this.config.endpointRealtime+"/realtime?"+i.toString();(a!==this.realtime.url||!this.realtime.socket||((t=this.realtime.socket)===null||t===void 0?void 0:t.readyState)>WebSocket.OPEN)&&(this.realtime.socket&&((r=this.realtime.socket)===null||r===void 0?void 0:r.readyState)<WebSocket.CLOSING&&(this.realtime.reconnect=!1,this.realtime.socket.close()),this.realtime.url=a,this.realtime.socket=new WebSocket(a),this.realtime.socket.addEventListener("message",this.realtime.onMessage),this.realtime.socket.addEventListener("open",l=>{this.realtime.reconnectAttempts=0,this.realtime.createHeartbeat()}),this.realtime.socket.addEventListener("close",l=>{var u,d,p;if(!this.realtime.reconnect||((d=(u=this.realtime)===null||u===void 0?void 0:u.lastMessage)===null||d===void 0?void 0:d.type)==="error"&&((p=this.realtime)===null||p===void 0?void 0:p.lastMessage.data).code===1008){this.realtime.reconnect=!0;return}const h=this.realtime.getTimeout();console.error("Realtime got disconnected. Reconnect will be attempted in ".concat(h/1e3," seconds."),l.reason),setTimeout(()=>{this.realtime.reconnectAttempts++,this.realtime.createSocket()},h)}))},onMessage:e=>{var t,r;try{const i=JSON.parse(e.data);switch(this.realtime.lastMessage=i,i.type){case"connected":const a=JSON.parse((t=window.localStorage.getItem("cookieFallback"))!==null&&t!==void 0?t:"{}"),l=a==null?void 0:a["a_session_".concat(this.config.project)],u=i.data;l&&!u.user&&((r=this.realtime.socket)===null||r===void 0||r.send(JSON.stringify({type:"authentication",data:{session:l}})));break;case"event":let d=i.data;if(d!=null&&d.channels){if(!d.channels.some(h=>this.realtime.channels.has(h)))return;this.realtime.subscriptions.forEach(h=>{d.channels.some(g=>h.channels.includes(g))&&setTimeout(()=>h.callback(d))})}break;case"pong":break;case"error":throw i.data;default:break}}catch(i){console.error(i)}},cleanUp:e=>{this.realtime.channels.forEach(t=>{e.includes(t)&&(Array.from(this.realtime.subscriptions).some(([i,a])=>a.channels.includes(t))||this.realtime.channels.delete(t))})}}}setEndpoint(e){if(!e.startsWith("http://")&&!e.startsWith("https://"))throw new Q("Invalid endpoint URL: "+e);return this.config.endpoint=e,this.config.endpointRealtime=e.replace("https://","wss://").replace("http://","ws://"),this}setEndpointRealtime(e){if(!e.startsWith("ws://")&&!e.startsWith("wss://"))throw new Q("Invalid realtime endpoint URL: "+e);return this.config.endpointRealtime=e,this}setProject(e){return this.headers["X-Appwrite-Project"]=e,this.config.project=e,this}setJWT(e){return this.headers["X-Appwrite-JWT"]=e,this.config.jwt=e,this}setLocale(e){return this.headers["X-Appwrite-Locale"]=e,this.config.locale=e,this}setSession(e){return this.headers["X-Appwrite-Session"]=e,this.config.session=e,this}setDevKey(e){return this.headers["X-Appwrite-Dev-Key"]=e,this.config.devkey=e,this}subscribe(e,t){let r=typeof e=="string"?[e]:e;r.forEach(a=>this.realtime.channels.add(a));const i=this.realtime.subscriptionsCounter++;return this.realtime.subscriptions.set(i,{channels:r,callback:t}),this.realtime.connect(),()=>{this.realtime.subscriptions.delete(i),this.realtime.cleanUp(r),this.realtime.connect()}}prepareRequest(e,t,r={},i={}){if(e=e.toUpperCase(),r=Object.assign({},this.headers,r),typeof window!="undefined"&&window.localStorage){const l=window.localStorage.getItem("cookieFallback");l&&(r["X-Fallback-Cookies"]=l)}let a={method:e,headers:r};if(r["X-Appwrite-Dev-Key"]===void 0&&(a.credentials="include"),e==="GET")for(const[l,u]of Object.entries(Jn.flatten(i)))t.searchParams.append(l,u);else switch(r["content-type"]){case"application/json":a.body=JSON.stringify(i);break;case"multipart/form-data":const l=new FormData;for(const[u,d]of Object.entries(i))if(d instanceof File)l.append(u,d,d.name);else if(Array.isArray(d))for(const p of d)l.append("".concat(u,"[]"),p);else l.append(u,d);a.body=l,delete r["content-type"];break}return{uri:t.toString(),options:a}}chunkedUpload(e,t,r={},i={},a){var l;return Nd(this,void 0,void 0,function*(){const[u,d]=(l=Object.entries(i).find(([g,v])=>v instanceof File))!==null&&l!==void 0?l:[];if(!d||!u)throw new Error("File not found in payload");if(d.size<=Jn.CHUNK_SIZE)return yield this.call(e,t,r,i);let p=0,h=null;for(;p<d.size;){let g=p+Jn.CHUNK_SIZE;g>=d.size&&(g=d.size),r["content-range"]="bytes ".concat(p,"-").concat(g-1,"/").concat(d.size);const v=d.slice(p,g);let b=Object.assign({},i);b[u]=new File([v],d.name),h=yield this.call(e,t,r,b),a&&typeof a=="function"&&a({$id:h.$id,progress:Math.round(g/d.size*100),sizeUploaded:g,chunksTotal:Math.ceil(d.size/Jn.CHUNK_SIZE),chunksUploaded:Math.ceil(g/Jn.CHUNK_SIZE)}),h&&h.$id&&(r["x-appwrite-id"]=h.$id),p=g}return h})}ping(){return Nd(this,void 0,void 0,function*(){return this.call("GET",new URL(this.config.endpoint+"/ping"))})}call(e,t,r={},i={},a="json"){var l,u;return Nd(this,void 0,void 0,function*(){const{uri:d,options:p}=this.prepareRequest(e,t,r,i);let h=null;const g=yield fetch(d,p);if(g.type==="opaque")throw new Q("Invalid Origin. Register your new client (".concat(window.location.host,") as a new Web platform on your project console dashboard"),403,"forbidden","");const v=g.headers.get("x-appwrite-warning");if(v&&v.split(";").forEach(C=>console.warn("Warning: "+C)),!((l=g.headers.get("content-type"))===null||l===void 0)&&l.includes("application/json")?h=yield g.json():a==="arrayBuffer"?h=yield g.arrayBuffer():h={message:yield g.text()},400<=g.status){let C="";throw!((u=g.headers.get("content-type"))===null||u===void 0)&&u.includes("application/json")||a==="arrayBuffer"?C=JSON.stringify(h):C=h==null?void 0:h.message,new Q(h==null?void 0:h.message,g.status,h==null?void 0:h.type,C)}const b=g.headers.get("X-Fallback-Cookies");return typeof window!="undefined"&&window.localStorage&&b&&(window.console.warn("Appwrite is using localStorage for session management. Increase your security by adding a custom domain as your API endpoint."),window.localStorage.setItem("cookieFallback",b)),h})}static flatten(e,t=""){let r={};for(const[i,a]of Object.entries(e)){let l=t?t+"["+i+"]":i;Array.isArray(a)?r=Object.assign(Object.assign({},r),Jn.flatten(a,l)):r[l]=a}return r}}Jn.CHUNK_SIZE=1024*1024*5;class Fr{constructor(e){this.client=e}static flatten(e,t=""){let r={};for(const[i,a]of Object.entries(e)){let l=t?t+"["+i+"]":i;Array.isArray(a)?r=Object.assign(Object.assign({},r),Fr.flatten(a,l)):r[l]=a}return r}}Fr.CHUNK_SIZE=5*1024*1024;class eI{constructor(e){this.client=e}get(){const e="/account",t={},r=new URL(this.client.config.endpoint+e),i={};return this.client.call("get",r,i,t)}create(e,t,r,i){if(typeof e=="undefined")throw new Q('Missing required parameter: "userId"');if(typeof t=="undefined")throw new Q('Missing required parameter: "email"');if(typeof r=="undefined")throw new Q('Missing required parameter: "password"');const a="/account",l={};typeof e!="undefined"&&(l.userId=e),typeof t!="undefined"&&(l.email=t),typeof r!="undefined"&&(l.password=r),typeof i!="undefined"&&(l.name=i);const u=new URL(this.client.config.endpoint+a),d={"content-type":"application/json"};return this.client.call("post",u,d,l)}updateEmail(e,t){if(typeof e=="undefined")throw new Q('Missing required parameter: "email"');if(typeof t=="undefined")throw new Q('Missing required parameter: "password"');const r="/account/email",i={};typeof e!="undefined"&&(i.email=e),typeof t!="undefined"&&(i.password=t);const a=new URL(this.client.config.endpoint+r),l={"content-type":"application/json"};return this.client.call("patch",a,l,i)}listIdentities(e){const t="/account/identities",r={};typeof e!="undefined"&&(r.queries=e);const i=new URL(this.client.config.endpoint+t),a={};return this.client.call("get",i,a,r)}deleteIdentity(e){if(typeof e=="undefined")throw new Q('Missing required parameter: "identityId"');const t="/account/identities/{identityId}".replace("{identityId}",e),r={},i=new URL(this.client.config.endpoint+t),a={"content-type":"application/json"};return this.client.call("delete",i,a,r)}createJWT(){const e="/account/jwts",t={},r=new URL(this.client.config.endpoint+e),i={"content-type":"application/json"};return this.client.call("post",r,i,t)}listLogs(e){const t="/account/logs",r={};typeof e!="undefined"&&(r.queries=e);const i=new URL(this.client.config.endpoint+t),a={};return this.client.call("get",i,a,r)}updateMFA(e){if(typeof e=="undefined")throw new Q('Missing required parameter: "mfa"');const t="/account/mfa",r={};typeof e!="undefined"&&(r.mfa=e);const i=new URL(this.client.config.endpoint+t),a={"content-type":"application/json"};return this.client.call("patch",i,a,r)}createMfaAuthenticator(e){if(typeof e=="undefined")throw new Q('Missing required parameter: "type"');const t="/account/mfa/authenticators/{type}".replace("{type}",e),r={},i=new URL(this.client.config.endpoint+t),a={"content-type":"application/json"};return this.client.call("post",i,a,r)}updateMfaAuthenticator(e,t){if(typeof e=="undefined")throw new Q('Missing required parameter: "type"');if(typeof t=="undefined")throw new Q('Missing required parameter: "otp"');const r="/account/mfa/authenticators/{type}".replace("{type}",e),i={};typeof t!="undefined"&&(i.otp=t);const a=new URL(this.client.config.endpoint+r),l={"content-type":"application/json"};return this.client.call("put",a,l,i)}deleteMfaAuthenticator(e){if(typeof e=="undefined")throw new Q('Missing required parameter: "type"');const t="/account/mfa/authenticators/{type}".replace("{type}",e),r={},i=new URL(this.client.config.endpoint+t),a={"content-type":"application/json"};return this.client.call("delete",i,a,r)}createMfaChallenge(e){if(typeof e=="undefined")throw new Q('Missing required parameter: "factor"');const t="/account/mfa/challenge",r={};typeof e!="undefined"&&(r.factor=e);const i=new URL(this.client.config.endpoint+t),a={"content-type":"application/json"};return this.client.call("post",i,a,r)}updateMfaChallenge(e,t){if(typeof e=="undefined")throw new Q('Missing required parameter: "challengeId"');if(typeof t=="undefined")throw new Q('Missing required parameter: "otp"');const r="/account/mfa/challenge",i={};typeof e!="undefined"&&(i.challengeId=e),typeof t!="undefined"&&(i.otp=t);const a=new URL(this.client.config.endpoint+r),l={"content-type":"application/json"};return this.client.call("put",a,l,i)}listMfaFactors(){const e="/account/mfa/factors",t={},r=new URL(this.client.config.endpoint+e),i={};return this.client.call("get",r,i,t)}getMfaRecoveryCodes(){const e="/account/mfa/recovery-codes",t={},r=new URL(this.client.config.endpoint+e),i={};return this.client.call("get",r,i,t)}createMfaRecoveryCodes(){const e="/account/mfa/recovery-codes",t={},r=new URL(this.client.config.endpoint+e),i={"content-type":"application/json"};return this.client.call("post",r,i,t)}updateMfaRecoveryCodes(){const e="/account/mfa/recovery-codes",t={},r=new URL(this.client.config.endpoint+e),i={"content-type":"application/json"};return this.client.call("patch",r,i,t)}updateName(e){if(typeof e=="undefined")throw new Q('Missing required parameter: "name"');const t="/account/name",r={};typeof e!="undefined"&&(r.name=e);const i=new URL(this.client.config.endpoint+t),a={"content-type":"application/json"};return this.client.call("patch",i,a,r)}updatePassword(e,t){if(typeof e=="undefined")throw new Q('Missing required parameter: "password"');const r="/account/password",i={};typeof e!="undefined"&&(i.password=e),typeof t!="undefined"&&(i.oldPassword=t);const a=new URL(this.client.config.endpoint+r),l={"content-type":"application/json"};return this.client.call("patch",a,l,i)}updatePhone(e,t){if(typeof e=="undefined")throw new Q('Missing required parameter: "phone"');if(typeof t=="undefined")throw new Q('Missing required parameter: "password"');const r="/account/phone",i={};typeof e!="undefined"&&(i.phone=e),typeof t!="undefined"&&(i.password=t);const a=new URL(this.client.config.endpoint+r),l={"content-type":"application/json"};return this.client.call("patch",a,l,i)}getPrefs(){const e="/account/prefs",t={},r=new URL(this.client.config.endpoint+e),i={};return this.client.call("get",r,i,t)}updatePrefs(e){if(typeof e=="undefined")throw new Q('Missing required parameter: "prefs"');const t="/account/prefs",r={};typeof e!="undefined"&&(r.prefs=e);const i=new URL(this.client.config.endpoint+t),a={"content-type":"application/json"};return this.client.call("patch",i,a,r)}createRecovery(e,t){if(typeof e=="undefined")throw new Q('Missing required parameter: "email"');if(typeof t=="undefined")throw new Q('Missing required parameter: "url"');const r="/account/recovery",i={};typeof e!="undefined"&&(i.email=e),typeof t!="undefined"&&(i.url=t);const a=new URL(this.client.config.endpoint+r),l={"content-type":"application/json"};return this.client.call("post",a,l,i)}updateRecovery(e,t,r){if(typeof e=="undefined")throw new Q('Missing required parameter: "userId"');if(typeof t=="undefined")throw new Q('Missing required parameter: "secret"');if(typeof r=="undefined")throw new Q('Missing required parameter: "password"');const i="/account/recovery",a={};typeof e!="undefined"&&(a.userId=e),typeof t!="undefined"&&(a.secret=t),typeof r!="undefined"&&(a.password=r);const l=new URL(this.client.config.endpoint+i),u={"content-type":"application/json"};return this.client.call("put",l,u,a)}listSessions(){const e="/account/sessions",t={},r=new URL(this.client.config.endpoint+e),i={};return this.client.call("get",r,i,t)}deleteSessions(){const e="/account/sessions",t={},r=new URL(this.client.config.endpoint+e),i={"content-type":"application/json"};return this.client.call("delete",r,i,t)}createAnonymousSession(){const e="/account/sessions/anonymous",t={},r=new URL(this.client.config.endpoint+e),i={"content-type":"application/json"};return this.client.call("post",r,i,t)}createEmailPasswordSession(e,t){if(typeof e=="undefined")throw new Q('Missing required parameter: "email"');if(typeof t=="undefined")throw new Q('Missing required parameter: "password"');const r="/account/sessions/email",i={};typeof e!="undefined"&&(i.email=e),typeof t!="undefined"&&(i.password=t);const a=new URL(this.client.config.endpoint+r),l={"content-type":"application/json"};return this.client.call("post",a,l,i)}updateMagicURLSession(e,t){if(typeof e=="undefined")throw new Q('Missing required parameter: "userId"');if(typeof t=="undefined")throw new Q('Missing required parameter: "secret"');const r="/account/sessions/magic-url",i={};typeof e!="undefined"&&(i.userId=e),typeof t!="undefined"&&(i.secret=t);const a=new URL(this.client.config.endpoint+r),l={"content-type":"application/json"};return this.client.call("put",a,l,i)}createOAuth2Session(e,t,r,i){if(typeof e=="undefined")throw new Q('Missing required parameter: "provider"');const a="/account/sessions/oauth2/{provider}".replace("{provider}",e),l={};typeof t!="undefined"&&(l.success=t),typeof r!="undefined"&&(l.failure=r),typeof i!="undefined"&&(l.scopes=i);const u=new URL(this.client.config.endpoint+a);l.project=this.client.config.project;for(const[d,p]of Object.entries(Fr.flatten(l)))u.searchParams.append(d,p);if(typeof window!="undefined"&&(window!=null&&window.location)){window.location.href=u.toString();return}else return u.toString()}updatePhoneSession(e,t){if(typeof e=="undefined")throw new Q('Missing required parameter: "userId"');if(typeof t=="undefined")throw new Q('Missing required parameter: "secret"');const r="/account/sessions/phone",i={};typeof e!="undefined"&&(i.userId=e),typeof t!="undefined"&&(i.secret=t);const a=new URL(this.client.config.endpoint+r),l={"content-type":"application/json"};return this.client.call("put",a,l,i)}createSession(e,t){if(typeof e=="undefined")throw new Q('Missing required parameter: "userId"');if(typeof t=="undefined")throw new Q('Missing required parameter: "secret"');const r="/account/sessions/token",i={};typeof e!="undefined"&&(i.userId=e),typeof t!="undefined"&&(i.secret=t);const a=new URL(this.client.config.endpoint+r),l={"content-type":"application/json"};return this.client.call("post",a,l,i)}getSession(e){if(typeof e=="undefined")throw new Q('Missing required parameter: "sessionId"');const t="/account/sessions/{sessionId}".replace("{sessionId}",e),r={},i=new URL(this.client.config.endpoint+t),a={};return this.client.call("get",i,a,r)}updateSession(e){if(typeof e=="undefined")throw new Q('Missing required parameter: "sessionId"');const t="/account/sessions/{sessionId}".replace("{sessionId}",e),r={},i=new URL(this.client.config.endpoint+t),a={"content-type":"application/json"};return this.client.call("patch",i,a,r)}deleteSession(e){if(typeof e=="undefined")throw new Q('Missing required parameter: "sessionId"');const t="/account/sessions/{sessionId}".replace("{sessionId}",e),r={},i=new URL(this.client.config.endpoint+t),a={"content-type":"application/json"};return this.client.call("delete",i,a,r)}updateStatus(){const e="/account/status",t={},r=new URL(this.client.config.endpoint+e),i={"content-type":"application/json"};return this.client.call("patch",r,i,t)}createPushTarget(e,t,r){if(typeof e=="undefined")throw new Q('Missing required parameter: "targetId"');if(typeof t=="undefined")throw new Q('Missing required parameter: "identifier"');const i="/account/targets/push",a={};typeof e!="undefined"&&(a.targetId=e),typeof t!="undefined"&&(a.identifier=t),typeof r!="undefined"&&(a.providerId=r);const l=new URL(this.client.config.endpoint+i),u={"content-type":"application/json"};return this.client.call("post",l,u,a)}updatePushTarget(e,t){if(typeof e=="undefined")throw new Q('Missing required parameter: "targetId"');if(typeof t=="undefined")throw new Q('Missing required parameter: "identifier"');const r="/account/targets/{targetId}/push".replace("{targetId}",e),i={};typeof t!="undefined"&&(i.identifier=t);const a=new URL(this.client.config.endpoint+r),l={"content-type":"application/json"};return this.client.call("put",a,l,i)}deletePushTarget(e){if(typeof e=="undefined")throw new Q('Missing required parameter: "targetId"');const t="/account/targets/{targetId}/push".replace("{targetId}",e),r={},i=new URL(this.client.config.endpoint+t),a={"content-type":"application/json"};return this.client.call("delete",i,a,r)}createEmailToken(e,t,r){if(typeof e=="undefined")throw new Q('Missing required parameter: "userId"');if(typeof t=="undefined")throw new Q('Missing required parameter: "email"');const i="/account/tokens/email",a={};typeof e!="undefined"&&(a.userId=e),typeof t!="undefined"&&(a.email=t),typeof r!="undefined"&&(a.phrase=r);const l=new URL(this.client.config.endpoint+i),u={"content-type":"application/json"};return this.client.call("post",l,u,a)}createMagicURLToken(e,t,r,i){if(typeof e=="undefined")throw new Q('Missing required parameter: "userId"');if(typeof t=="undefined")throw new Q('Missing required parameter: "email"');const a="/account/tokens/magic-url",l={};typeof e!="undefined"&&(l.userId=e),typeof t!="undefined"&&(l.email=t),typeof r!="undefined"&&(l.url=r),typeof i!="undefined"&&(l.phrase=i);const u=new URL(this.client.config.endpoint+a),d={"content-type":"application/json"};return this.client.call("post",u,d,l)}createOAuth2Token(e,t,r,i){if(typeof e=="undefined")throw new Q('Missing required parameter: "provider"');const a="/account/tokens/oauth2/{provider}".replace("{provider}",e),l={};typeof t!="undefined"&&(l.success=t),typeof r!="undefined"&&(l.failure=r),typeof i!="undefined"&&(l.scopes=i);const u=new URL(this.client.config.endpoint+a);l.project=this.client.config.project;for(const[d,p]of Object.entries(Fr.flatten(l)))u.searchParams.append(d,p);if(typeof window!="undefined"&&(window!=null&&window.location)){window.location.href=u.toString();return}else return u.toString()}createPhoneToken(e,t){if(typeof e=="undefined")throw new Q('Missing required parameter: "userId"');if(typeof t=="undefined")throw new Q('Missing required parameter: "phone"');const r="/account/tokens/phone",i={};typeof e!="undefined"&&(i.userId=e),typeof t!="undefined"&&(i.phone=t);const a=new URL(this.client.config.endpoint+r),l={"content-type":"application/json"};return this.client.call("post",a,l,i)}createVerification(e){if(typeof e=="undefined")throw new Q('Missing required parameter: "url"');const t="/account/verification",r={};typeof e!="undefined"&&(r.url=e);const i=new URL(this.client.config.endpoint+t),a={"content-type":"application/json"};return this.client.call("post",i,a,r)}updateVerification(e,t){if(typeof e=="undefined")throw new Q('Missing required parameter: "userId"');if(typeof t=="undefined")throw new Q('Missing required parameter: "secret"');const r="/account/verification",i={};typeof e!="undefined"&&(i.userId=e),typeof t!="undefined"&&(i.secret=t);const a=new URL(this.client.config.endpoint+r),l={"content-type":"application/json"};return this.client.call("put",a,l,i)}createPhoneVerification(){const e="/account/verification/phone",t={},r=new URL(this.client.config.endpoint+e),i={"content-type":"application/json"};return this.client.call("post",r,i,t)}updatePhoneVerification(e,t){if(typeof e=="undefined")throw new Q('Missing required parameter: "userId"');if(typeof t=="undefined")throw new Q('Missing required parameter: "secret"');const r="/account/verification/phone",i={};typeof e!="undefined"&&(i.userId=e),typeof t!="undefined"&&(i.secret=t);const a=new URL(this.client.config.endpoint+r),l={"content-type":"application/json"};return this.client.call("put",a,l,i)}}class tI{constructor(e){this.client=e}listDocuments(e,t,r){if(typeof e=="undefined")throw new Q('Missing required parameter: "databaseId"');if(typeof t=="undefined")throw new Q('Missing required parameter: "collectionId"');const i="/databases/{databaseId}/collections/{collectionId}/documents".replace("{databaseId}",e).replace("{collectionId}",t),a={};typeof r!="undefined"&&(a.queries=r);const l=new URL(this.client.config.endpoint+i),u={};return this.client.call("get",l,u,a)}createDocument(e,t,r,i,a){if(typeof e=="undefined")throw new Q('Missing required parameter: "databaseId"');if(typeof t=="undefined")throw new Q('Missing required parameter: "collectionId"');if(typeof r=="undefined")throw new Q('Missing required parameter: "documentId"');if(typeof i=="undefined")throw new Q('Missing required parameter: "data"');const l="/databases/{databaseId}/collections/{collectionId}/documents".replace("{databaseId}",e).replace("{collectionId}",t),u={};typeof r!="undefined"&&(u.documentId=r),typeof i!="undefined"&&(u.data=i),typeof a!="undefined"&&(u.permissions=a);const d=new URL(this.client.config.endpoint+l),p={"content-type":"application/json"};return this.client.call("post",d,p,u)}getDocument(e,t,r,i){if(typeof e=="undefined")throw new Q('Missing required parameter: "databaseId"');if(typeof t=="undefined")throw new Q('Missing required parameter: "collectionId"');if(typeof r=="undefined")throw new Q('Missing required parameter: "documentId"');const a="/databases/{databaseId}/collections/{collectionId}/documents/{documentId}".replace("{databaseId}",e).replace("{collectionId}",t).replace("{documentId}",r),l={};typeof i!="undefined"&&(l.queries=i);const u=new URL(this.client.config.endpoint+a),d={};return this.client.call("get",u,d,l)}upsertDocument(e,t,r,i,a){if(typeof e=="undefined")throw new Q('Missing required parameter: "databaseId"');if(typeof t=="undefined")throw new Q('Missing required parameter: "collectionId"');if(typeof r=="undefined")throw new Q('Missing required parameter: "documentId"');if(typeof i=="undefined")throw new Q('Missing required parameter: "data"');const l="/databases/{databaseId}/collections/{collectionId}/documents/{documentId}".replace("{databaseId}",e).replace("{collectionId}",t).replace("{documentId}",r),u={};typeof i!="undefined"&&(u.data=i),typeof a!="undefined"&&(u.permissions=a);const d=new URL(this.client.config.endpoint+l),p={"content-type":"application/json"};return this.client.call("put",d,p,u)}updateDocument(e,t,r,i,a){if(typeof e=="undefined")throw new Q('Missing required parameter: "databaseId"');if(typeof t=="undefined")throw new Q('Missing required parameter: "collectionId"');if(typeof r=="undefined")throw new Q('Missing required parameter: "documentId"');const l="/databases/{databaseId}/collections/{collectionId}/documents/{documentId}".replace("{databaseId}",e).replace("{collectionId}",t).replace("{documentId}",r),u={};typeof i!="undefined"&&(u.data=i),typeof a!="undefined"&&(u.permissions=a);const d=new URL(this.client.config.endpoint+l),p={"content-type":"application/json"};return this.client.call("patch",d,p,u)}deleteDocument(e,t,r){if(typeof e=="undefined")throw new Q('Missing required parameter: "databaseId"');if(typeof t=="undefined")throw new Q('Missing required parameter: "collectionId"');if(typeof r=="undefined")throw new Q('Missing required parameter: "documentId"');const i="/databases/{databaseId}/collections/{collectionId}/documents/{documentId}".replace("{databaseId}",e).replace("{collectionId}",t).replace("{documentId}",r),a={},l=new URL(this.client.config.endpoint+i),u={"content-type":"application/json"};return this.client.call("delete",l,u,a)}decrementDocumentAttribute(e,t,r,i,a,l){if(typeof e=="undefined")throw new Q('Missing required parameter: "databaseId"');if(typeof t=="undefined")throw new Q('Missing required parameter: "collectionId"');if(typeof r=="undefined")throw new Q('Missing required parameter: "documentId"');if(typeof i=="undefined")throw new Q('Missing required parameter: "attribute"');const u="/databases/{databaseId}/collections/{collectionId}/documents/{documentId}/{attribute}/decrement".replace("{databaseId}",e).replace("{collectionId}",t).replace("{documentId}",r).replace("{attribute}",i),d={};typeof a!="undefined"&&(d.value=a),typeof l!="undefined"&&(d.min=l);const p=new URL(this.client.config.endpoint+u),h={"content-type":"application/json"};return this.client.call("patch",p,h,d)}incrementDocumentAttribute(e,t,r,i,a,l){if(typeof e=="undefined")throw new Q('Missing required parameter: "databaseId"');if(typeof t=="undefined")throw new Q('Missing required parameter: "collectionId"');if(typeof r=="undefined")throw new Q('Missing required parameter: "documentId"');if(typeof i=="undefined")throw new Q('Missing required parameter: "attribute"');const u="/databases/{databaseId}/collections/{collectionId}/documents/{documentId}/{attribute}/increment".replace("{databaseId}",e).replace("{collectionId}",t).replace("{documentId}",r).replace("{attribute}",i),d={};typeof a!="undefined"&&(d.value=a),typeof l!="undefined"&&(d.max=l);const p=new URL(this.client.config.endpoint+u),h={"content-type":"application/json"};return this.client.call("patch",p,h,d)}}class nI{constructor(e){this.client=e}listExecutions(e,t){if(typeof e=="undefined")throw new Q('Missing required parameter: "functionId"');const r="/functions/{functionId}/executions".replace("{functionId}",e),i={};typeof t!="undefined"&&(i.queries=t);const a=new URL(this.client.config.endpoint+r),l={};return this.client.call("get",a,l,i)}createExecution(e,t,r,i,a,l,u){if(typeof e=="undefined")throw new Q('Missing required parameter: "functionId"');const d="/functions/{functionId}/executions".replace("{functionId}",e),p={};typeof t!="undefined"&&(p.body=t),typeof r!="undefined"&&(p.async=r),typeof i!="undefined"&&(p.path=i),typeof a!="undefined"&&(p.method=a),typeof l!="undefined"&&(p.headers=l),typeof u!="undefined"&&(p.scheduledAt=u);const h=new URL(this.client.config.endpoint+d),g={"content-type":"application/json"};return this.client.call("post",h,g,p)}getExecution(e,t){if(typeof e=="undefined")throw new Q('Missing required parameter: "functionId"');if(typeof t=="undefined")throw new Q('Missing required parameter: "executionId"');const r="/functions/{functionId}/executions/{executionId}".replace("{functionId}",e).replace("{executionId}",t),i={},a=new URL(this.client.config.endpoint+r),l={};return this.client.call("get",a,l,i)}}class rI{constructor(e){this.client=e}listFiles(e,t,r){if(typeof e=="undefined")throw new Q('Missing required parameter: "bucketId"');const i="/storage/buckets/{bucketId}/files".replace("{bucketId}",e),a={};typeof t!="undefined"&&(a.queries=t),typeof r!="undefined"&&(a.search=r);const l=new URL(this.client.config.endpoint+i),u={};return this.client.call("get",l,u,a)}createFile(e,t,r,i,a=l=>{}){if(typeof e=="undefined")throw new Q('Missing required parameter: "bucketId"');if(typeof t=="undefined")throw new Q('Missing required parameter: "fileId"');if(typeof r=="undefined")throw new Q('Missing required parameter: "file"');const l="/storage/buckets/{bucketId}/files".replace("{bucketId}",e),u={};typeof t!="undefined"&&(u.fileId=t),typeof r!="undefined"&&(u.file=r),typeof i!="undefined"&&(u.permissions=i);const d=new URL(this.client.config.endpoint+l),p={"content-type":"multipart/form-data"};return this.client.chunkedUpload("post",d,p,u,a)}getFile(e,t){if(typeof e=="undefined")throw new Q('Missing required parameter: "bucketId"');if(typeof t=="undefined")throw new Q('Missing required parameter: "fileId"');const r="/storage/buckets/{bucketId}/files/{fileId}".replace("{bucketId}",e).replace("{fileId}",t),i={},a=new URL(this.client.config.endpoint+r),l={};return this.client.call("get",a,l,i)}updateFile(e,t,r,i){if(typeof e=="undefined")throw new Q('Missing required parameter: "bucketId"');if(typeof t=="undefined")throw new Q('Missing required parameter: "fileId"');const a="/storage/buckets/{bucketId}/files/{fileId}".replace("{bucketId}",e).replace("{fileId}",t),l={};typeof r!="undefined"&&(l.name=r),typeof i!="undefined"&&(l.permissions=i);const u=new URL(this.client.config.endpoint+a),d={"content-type":"application/json"};return this.client.call("put",u,d,l)}deleteFile(e,t){if(typeof e=="undefined")throw new Q('Missing required parameter: "bucketId"');if(typeof t=="undefined")throw new Q('Missing required parameter: "fileId"');const r="/storage/buckets/{bucketId}/files/{fileId}".replace("{bucketId}",e).replace("{fileId}",t),i={},a=new URL(this.client.config.endpoint+r),l={"content-type":"application/json"};return this.client.call("delete",a,l,i)}getFileDownload(e,t,r){if(typeof e=="undefined")throw new Q('Missing required parameter: "bucketId"');if(typeof t=="undefined")throw new Q('Missing required parameter: "fileId"');const i="/storage/buckets/{bucketId}/files/{fileId}/download".replace("{bucketId}",e).replace("{fileId}",t),a={};typeof r!="undefined"&&(a.token=r);const l=new URL(this.client.config.endpoint+i);a.project=this.client.config.project;for(const[u,d]of Object.entries(Fr.flatten(a)))l.searchParams.append(u,d);return l.toString()}getFilePreview(e,t,r,i,a,l,u,d,p,h,g,v,b,C){if(typeof e=="undefined")throw new Q('Missing required parameter: "bucketId"');if(typeof t=="undefined")throw new Q('Missing required parameter: "fileId"');const T="/storage/buckets/{bucketId}/files/{fileId}/preview".replace("{bucketId}",e).replace("{fileId}",t),x={};typeof r!="undefined"&&(x.width=r),typeof i!="undefined"&&(x.height=i),typeof a!="undefined"&&(x.gravity=a),typeof l!="undefined"&&(x.quality=l),typeof u!="undefined"&&(x.borderWidth=u),typeof d!="undefined"&&(x.borderColor=d),typeof p!="undefined"&&(x.borderRadius=p),typeof h!="undefined"&&(x.opacity=h),typeof g!="undefined"&&(x.rotation=g),typeof v!="undefined"&&(x.background=v),typeof b!="undefined"&&(x.output=b),typeof C!="undefined"&&(x.token=C);const M=new URL(this.client.config.endpoint+T);x.project=this.client.config.project;for(const[I,R]of Object.entries(Fr.flatten(x)))M.searchParams.append(I,R);return M.toString()}getFileView(e,t,r){if(typeof e=="undefined")throw new Q('Missing required parameter: "bucketId"');if(typeof t=="undefined")throw new Q('Missing required parameter: "fileId"');const i="/storage/buckets/{bucketId}/files/{fileId}/view".replace("{bucketId}",e).replace("{fileId}",t),a={};typeof r!="undefined"&&(a.token=r);const l=new URL(this.client.config.endpoint+i);a.project=this.client.config.project;for(const[u,d]of Object.entries(Fr.flatten(a)))l.searchParams.append(u,d);return l.toString()}}class AP{constructor(e){this.client=e}list(e,t){const r="/teams",i={};typeof e!="undefined"&&(i.queries=e),typeof t!="undefined"&&(i.search=t);const a=new URL(this.client.config.endpoint+r),l={};return this.client.call("get",a,l,i)}create(e,t,r){if(typeof e=="undefined")throw new Q('Missing required parameter: "teamId"');if(typeof t=="undefined")throw new Q('Missing required parameter: "name"');const i="/teams",a={};typeof e!="undefined"&&(a.teamId=e),typeof t!="undefined"&&(a.name=t),typeof r!="undefined"&&(a.roles=r);const l=new URL(this.client.config.endpoint+i),u={"content-type":"application/json"};return this.client.call("post",l,u,a)}get(e){if(typeof e=="undefined")throw new Q('Missing required parameter: "teamId"');const t="/teams/{teamId}".replace("{teamId}",e),r={},i=new URL(this.client.config.endpoint+t),a={};return this.client.call("get",i,a,r)}updateName(e,t){if(typeof e=="undefined")throw new Q('Missing required parameter: "teamId"');if(typeof t=="undefined")throw new Q('Missing required parameter: "name"');const r="/teams/{teamId}".replace("{teamId}",e),i={};typeof t!="undefined"&&(i.name=t);const a=new URL(this.client.config.endpoint+r),l={"content-type":"application/json"};return this.client.call("put",a,l,i)}delete(e){if(typeof e=="undefined")throw new Q('Missing required parameter: "teamId"');const t="/teams/{teamId}".replace("{teamId}",e),r={},i=new URL(this.client.config.endpoint+t),a={"content-type":"application/json"};return this.client.call("delete",i,a,r)}listMemberships(e,t,r){if(typeof e=="undefined")throw new Q('Missing required parameter: "teamId"');const i="/teams/{teamId}/memberships".replace("{teamId}",e),a={};typeof t!="undefined"&&(a.queries=t),typeof r!="undefined"&&(a.search=r);const l=new URL(this.client.config.endpoint+i),u={};return this.client.call("get",l,u,a)}createMembership(e,t,r,i,a,l,u){if(typeof e=="undefined")throw new Q('Missing required parameter: "teamId"');if(typeof t=="undefined")throw new Q('Missing required parameter: "roles"');const d="/teams/{teamId}/memberships".replace("{teamId}",e),p={};typeof r!="undefined"&&(p.email=r),typeof i!="undefined"&&(p.userId=i),typeof a!="undefined"&&(p.phone=a),typeof t!="undefined"&&(p.roles=t),typeof l!="undefined"&&(p.url=l),typeof u!="undefined"&&(p.name=u);const h=new URL(this.client.config.endpoint+d),g={"content-type":"application/json"};return this.client.call("post",h,g,p)}getMembership(e,t){if(typeof e=="undefined")throw new Q('Missing required parameter: "teamId"');if(typeof t=="undefined")throw new Q('Missing required parameter: "membershipId"');const r="/teams/{teamId}/memberships/{membershipId}".replace("{teamId}",e).replace("{membershipId}",t),i={},a=new URL(this.client.config.endpoint+r),l={};return this.client.call("get",a,l,i)}updateMembership(e,t,r){if(typeof e=="undefined")throw new Q('Missing required parameter: "teamId"');if(typeof t=="undefined")throw new Q('Missing required parameter: "membershipId"');if(typeof r=="undefined")throw new Q('Missing required parameter: "roles"');const i="/teams/{teamId}/memberships/{membershipId}".replace("{teamId}",e).replace("{membershipId}",t),a={};typeof r!="undefined"&&(a.roles=r);const l=new URL(this.client.config.endpoint+i),u={"content-type":"application/json"};return this.client.call("patch",l,u,a)}deleteMembership(e,t){if(typeof e=="undefined")throw new Q('Missing required parameter: "teamId"');if(typeof t=="undefined")throw new Q('Missing required parameter: "membershipId"');const r="/teams/{teamId}/memberships/{membershipId}".replace("{teamId}",e).replace("{membershipId}",t),i={},a=new URL(this.client.config.endpoint+r),l={"content-type":"application/json"};return this.client.call("delete",a,l,i)}updateMembershipStatus(e,t,r,i){if(typeof e=="undefined")throw new Q('Missing required parameter: "teamId"');if(typeof t=="undefined")throw new Q('Missing required parameter: "membershipId"');if(typeof r=="undefined")throw new Q('Missing required parameter: "userId"');if(typeof i=="undefined")throw new Q('Missing required parameter: "secret"');const a="/teams/{teamId}/memberships/{membershipId}/status".replace("{teamId}",e).replace("{membershipId}",t),l={};typeof r!="undefined"&&(l.userId=r),typeof i!="undefined"&&(l.secret=i);const u=new URL(this.client.config.endpoint+a),d={"content-type":"application/json"};return this.client.call("patch",u,d,l)}getPrefs(e){if(typeof e=="undefined")throw new Q('Missing required parameter: "teamId"');const t="/teams/{teamId}/prefs".replace("{teamId}",e),r={},i=new URL(this.client.config.endpoint+t),a={};return this.client.call("get",i,a,r)}updatePrefs(e,t){if(typeof e=="undefined")throw new Q('Missing required parameter: "teamId"');if(typeof t=="undefined")throw new Q('Missing required parameter: "prefs"');const r="/teams/{teamId}/prefs".replace("{teamId}",e),i={};typeof t!="undefined"&&(i.prefs=t);const a=new URL(this.client.config.endpoint+r),l={"content-type":"application/json"};return this.client.call("put",a,l,i)}}var Ov,Pv;class ze{static custom(e){return e}static unique(e=7){const t=ZT(ze,Ov,"m",Pv).call(ze);let r="";for(let i=0;i<e;i++){const a=Math.floor(Math.random()*16).toString(16);r+=a}return t+r}}Ov=ze,Pv=function(){const e=new Date,t=Math.floor(e.getTime()/1e3),r=e.getMilliseconds();return t.toString(16)+r.toString(16).padStart(5,"0")};var xy;(function(n){n.Totp="totp"})(xy||(xy={}));var Cy;(function(n){n.Email="email",n.Phone="phone",n.Totp="totp",n.Recoverycode="recoverycode"})(Cy||(Cy={}));var Of;(function(n){n.Amazon="amazon",n.Apple="apple",n.Auth0="auth0",n.Authentik="authentik",n.Autodesk="autodesk",n.Bitbucket="bitbucket",n.Bitly="bitly",n.Box="box",n.Dailymotion="dailymotion",n.Discord="discord",n.Disqus="disqus",n.Dropbox="dropbox",n.Etsy="etsy",n.Facebook="facebook",n.Figma="figma",n.Github="github",n.Gitlab="gitlab",n.Google="google",n.Linkedin="linkedin",n.Microsoft="microsoft",n.Notion="notion",n.Oidc="oidc",n.Okta="okta",n.Paypal="paypal",n.PaypalSandbox="paypalSandbox",n.Podio="podio",n.Salesforce="salesforce",n.Slack="slack",n.Spotify="spotify",n.Stripe="stripe",n.Tradeshift="tradeshift",n.TradeshiftBox="tradeshiftBox",n.Twitch="twitch",n.Wordpress="wordpress",n.Yahoo="yahoo",n.Yammer="yammer",n.Yandex="yandex",n.Zoho="zoho",n.Zoom="zoom",n.Mock="mock"})(Of||(Of={}));var Ty;(function(n){n.AvantBrowser="aa",n.AndroidWebViewBeta="an",n.GoogleChrome="ch",n.GoogleChromeIOS="ci",n.GoogleChromeMobile="cm",n.Chromium="cr",n.MozillaFirefox="ff",n.Safari="sf",n.MobileSafari="mf",n.MicrosoftEdge="ps",n.MicrosoftEdgeIOS="oi",n.OperaMini="om",n.Opera="op",n.OperaNext="on"})(Ty||(Ty={}));var Iy;(function(n){n.AmericanExpress="amex",n.Argencard="argencard",n.Cabal="cabal",n.Cencosud="cencosud",n.DinersClub="diners",n.Discover="discover",n.Elo="elo",n.Hipercard="hipercard",n.JCB="jcb",n.Mastercard="mastercard",n.Naranja="naranja",n.TarjetaShopping="targeta-shopping",n.UnionChinaPay="union-china-pay",n.Visa="visa",n.MIR="mir",n.Maestro="maestro",n.Rupay="rupay"})(Iy||(Iy={}));var ky;(function(n){n.Afghanistan="af",n.Angola="ao",n.Albania="al",n.Andorra="ad",n.UnitedArabEmirates="ae",n.Argentina="ar",n.Armenia="am",n.AntiguaAndBarbuda="ag",n.Australia="au",n.Austria="at",n.Azerbaijan="az",n.Burundi="bi",n.Belgium="be",n.Benin="bj",n.BurkinaFaso="bf",n.Bangladesh="bd",n.Bulgaria="bg",n.Bahrain="bh",n.Bahamas="bs",n.BosniaAndHerzegovina="ba",n.Belarus="by",n.Belize="bz",n.Bolivia="bo",n.Brazil="br",n.Barbados="bb",n.BruneiDarussalam="bn",n.Bhutan="bt",n.Botswana="bw",n.CentralAfricanRepublic="cf",n.Canada="ca",n.Switzerland="ch",n.Chile="cl",n.China="cn",n.CoteDIvoire="ci",n.Cameroon="cm",n.DemocraticRepublicOfTheCongo="cd",n.RepublicOfTheCongo="cg",n.Colombia="co",n.Comoros="km",n.CapeVerde="cv",n.CostaRica="cr",n.Cuba="cu",n.Cyprus="cy",n.CzechRepublic="cz",n.Germany="de",n.Djibouti="dj",n.Dominica="dm",n.Denmark="dk",n.DominicanRepublic="do",n.Algeria="dz",n.Ecuador="ec",n.Egypt="eg",n.Eritrea="er",n.Spain="es",n.Estonia="ee",n.Ethiopia="et",n.Finland="fi",n.Fiji="fj",n.France="fr",n.MicronesiaFederatedStatesOf="fm",n.Gabon="ga",n.UnitedKingdom="gb",n.Georgia="ge",n.Ghana="gh",n.Guinea="gn",n.Gambia="gm",n.GuineaBissau="gw",n.EquatorialGuinea="gq",n.Greece="gr",n.Grenada="gd",n.Guatemala="gt",n.Guyana="gy",n.Honduras="hn",n.Croatia="hr",n.Haiti="ht",n.Hungary="hu",n.Indonesia="id",n.India="in",n.Ireland="ie",n.IranIslamicRepublicOf="ir",n.Iraq="iq",n.Iceland="is",n.Israel="il",n.Italy="it",n.Jamaica="jm",n.Jordan="jo",n.Japan="jp",n.Kazakhstan="kz",n.Kenya="ke",n.Kyrgyzstan="kg",n.Cambodia="kh",n.Kiribati="ki",n.SaintKittsAndNevis="kn",n.SouthKorea="kr",n.Kuwait="kw",n.LaoPeopleSDemocraticRepublic="la",n.Lebanon="lb",n.Liberia="lr",n.Libya="ly",n.SaintLucia="lc",n.Liechtenstein="li",n.SriLanka="lk",n.Lesotho="ls",n.Lithuania="lt",n.Luxembourg="lu",n.Latvia="lv",n.Morocco="ma",n.Monaco="mc",n.Moldova="md",n.Madagascar="mg",n.Maldives="mv",n.Mexico="mx",n.MarshallIslands="mh",n.NorthMacedonia="mk",n.Mali="ml",n.Malta="mt",n.Myanmar="mm",n.Montenegro="me",n.Mongolia="mn",n.Mozambique="mz",n.Mauritania="mr",n.Mauritius="mu",n.Malawi="mw",n.Malaysia="my",n.Namibia="na",n.Niger="ne",n.Nigeria="ng",n.Nicaragua="ni",n.Netherlands="nl",n.Norway="no",n.Nepal="np",n.Nauru="nr",n.NewZealand="nz",n.Oman="om",n.Pakistan="pk",n.Panama="pa",n.Peru="pe",n.Philippines="ph",n.Palau="pw",n.PapuaNewGuinea="pg",n.Poland="pl",n.FrenchPolynesia="pf",n.NorthKorea="kp",n.Portugal="pt",n.Paraguay="py",n.Qatar="qa",n.Romania="ro",n.Russia="ru",n.Rwanda="rw",n.SaudiArabia="sa",n.Sudan="sd",n.Senegal="sn",n.Singapore="sg",n.SolomonIslands="sb",n.SierraLeone="sl",n.ElSalvador="sv",n.SanMarino="sm",n.Somalia="so",n.Serbia="rs",n.SouthSudan="ss",n.SaoTomeAndPrincipe="st",n.Suriname="sr",n.Slovakia="sk",n.Slovenia="si",n.Sweden="se",n.Eswatini="sz",n.Seychelles="sc",n.Syria="sy",n.Chad="td",n.Togo="tg",n.Thailand="th",n.Tajikistan="tj",n.Turkmenistan="tm",n.TimorLeste="tl",n.Tonga="to",n.TrinidadAndTobago="tt",n.Tunisia="tn",n.Turkey="tr",n.Tuvalu="tv",n.Tanzania="tz",n.Uganda="ug",n.Ukraine="ua",n.Uruguay="uy",n.UnitedStates="us",n.Uzbekistan="uz",n.VaticanCity="va",n.SaintVincentAndTheGrenadines="vc",n.Venezuela="ve",n.Vietnam="vn",n.Vanuatu="vu",n.Samoa="ws",n.Yemen="ye",n.SouthAfrica="za",n.Zambia="zm",n.Zimbabwe="zw"})(ky||(ky={}));var Ay;(function(n){n.GET="GET",n.POST="POST",n.PUT="PUT",n.PATCH="PATCH",n.DELETE="DELETE",n.OPTIONS="OPTIONS"})(Ay||(Ay={}));var Ry;(function(n){n.Center="center",n.Topleft="top-left",n.Top="top",n.Topright="top-right",n.Left="left",n.Right="right",n.Bottomleft="bottom-left",n.Bottom="bottom",n.Bottomright="bottom-right"})(Ry||(Ry={}));var My;(function(n){n.Jpg="jpg",n.Jpeg="jpeg",n.Png="png",n.Webp="webp",n.Heic="heic",n.Avif="avif",n.Gif="gif"})(My||(My={}));const Ts="https://nyc.cloud.appwrite.io/v1",up="689bdee000098bd9d55c",V="trading_post_db",X={users:"users",items:"items",wants:"wants",trades:"trades",messages:"messages",matches:"matches",notifications:"notifications",savedItems:"saved_items"},Rl={itemImages:"item_images",profileImages:"profile_images"},Bn=new Jn;Bn.setEndpoint(Ts);Bn.setProject(up);console.log(" Appwrite Client Initialized:",{endpoint:Ts,project:up,origin:window.location.origin,hostname:window.location.hostname});const Le=new eI(Bn),we=new tI(Bn),ws=new rI(Bn),sI=new nI(Bn),iI=(n,e,t=400,r=400,i=85)=>ws.getFilePreview(n,e,t,r,void 0,i),oI=(n,e)=>ws.getFileView(n,e),aI=(n,e)=>ws.getFileDownload(n,e),lI=()=>E(null,null,function*(){try{return yield Le.get()}catch(n){if(console.log("getCurrentUser error:",n),n.code===401)return null;throw n.message&&n.message.includes("CORS")&&console.error("CORS Error detected:",{endpoint:Ts,origin:window.location.origin,error:n.message}),n}}),cI=()=>E(null,null,function*(){try{return yield Le.getSession("current")}catch(n){if(console.log("getCurrentSession error:",n),n.code===401)return null;throw n.message&&n.message.includes("CORS")&&console.error("CORS Error detected:",{endpoint:Ts,origin:window.location.origin,error:n.message}),n}}),uI=(n,e)=>Bn.subscribe(n,e),xe=n=>{if(console.error("Appwrite Error:",n),typeof n=="string")return n;if(!n)return"An unexpected error occurred";if(n.message&&(n.message.includes("CORS")||n.message.includes("Failed to fetch")))return console.error(" CORS Configuration Issue Detected!"),console.error("Current origin:",window.location.origin),console.error("Appwrite endpoint:",Ts),console.error("Make sure",window.location.hostname,"is added as a Web platform in Appwrite Console"),"Connection blocked by security policy. Please contact support.";const e={400:"Bad request. Please check your input.",401:"Invalid email or password. Please check your credentials.",403:"Access denied. You don't have permission for this action.",404:"Resource not found.",409:"An account with this email already exists.",429:"Too many requests. Please wait a moment and try again.",500:"Server error. Please try again later.",503:"Service unavailable. Please try again later."};let t="";if(n.code&&e[n.code])t=e[n.code];else if(n.message){const r=n.message.toLowerCase();r.includes("invalid credentials")||r.includes("invalid email")||r.includes("wrong credentials")?t="Invalid email or password. Please check your credentials and try again.":r.includes("user not found")?t="No account found with this email address. Please check your email or create a new account.":r.includes("email already exists")||r.includes("user already exists")?t="An account with this email already exists. Please log in instead or use a different email.":r.includes("password")?t="Password does not meet requirements. Please check the password format.":r.includes("network")||r.includes("fetch")?t="Network error. Please check your internet connection and try again.":r.includes("timeout")?t="Request timed out. Please try again.":r.includes("rate limit")||r.includes("too many")?t="Too many attempts. Please wait a moment before trying again.":t=n.message}else if(n.response&&n.response.data&&n.response.data.message)t=n.response.data.message;else if(n.toString&&typeof n.toString=="function"){const r=n.toString();r!=="[object Object]"&&r!=="Error"&&(t=r)}return(!t||t.trim()===""||t==="[object Object]")&&(t="An unexpected error occurred. Please try again."),t},dp=()=>{const n=[];return n.length>0?(console.warn(" Appwrite Configuration Issues:",n),!1):(console.log(" Appwrite client validated:",{endpoint:Ts,project:up,database:V,origin:window.location.origin,protocol:window.location.protocol,hostname:window.location.hostname,port:window.location.port||(window.location.protocol==="https:"?"443":"80")}),window.location.protocol==="http:"&&Ts.startsWith("https:")&&console.warn(" Protocol mismatch: Page is HTTP but Appwrite endpoint is HTTPS"),!0)};dp();const pc=Object.freeze(Object.defineProperty({__proto__:null,BUCKETS:Rl,COLLECTIONS:X,DATABASE_ID:V,ID:ze,Query:N,account:Le,client:Bn,databases:we,default:Bn,functions:sI,getCurrentSession:cI,getCurrentUser:lI,getFileDownload:aI,getFilePreview:iI,getFileView:oI,handleAppwriteError:xe,storage:ws,subscribeToRealtime:uI,validateAppwriteConfig:dp},Symbol.toStringTag,{value:"Module"})),vs={appwrite:{endpoint:"https://nyc.cloud.appwrite.io/v1",projectId:"689bdee000098bd9d55c",apiKey:"27c3d18d6223495324df041ad6ae01c0b3b3e5e53ca130fbc9ff74925ec5b7f066959fdd87c4622c35df40b70061bd4d7133f3c367f67a23cf23796b341b94dc6816ba23b767886602ca5537265378da21a6d42bcb1413c7a6a0ec3c71e37ee80233483ce23c2f9307a30848bccacbb8c8c8d97dc4d159bc9beb249fa45993ec"},database:{databaseId:"trading_post_db",collections:{users:"users",items:"items",wants:"wants",trades:"trades",messages:"messages",reviews:"reviews",notifications:"notifications",matches:"matches",savedItems:"saved_items"}},storage:{buckets:{itemImages:"item_images",profileImages:"profile_images",chatAttachments:"chat_attachments"}},oauth:{providers:[{id:"google",name:"Google",icon:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",enabled:!0,scopes:["openid","profile","email"],color:"#4285F4",buttonClass:"btn-google"},{id:"github",name:"GitHub",icon:"fab fa-github",enabled:!1,scopes:["user:email"],color:"#333333",buttonClass:"btn-github"},{id:"facebook",name:"Facebook",icon:"fab fa-facebook",enabled:!1,scopes:["email","public_profile"],color:"#1877F2",buttonClass:"btn-facebook"},{id:"microsoft",name:"Microsoft",icon:"fab fa-microsoft",enabled:!1,scopes:["openid","profile","email"],color:"#00BCF2",buttonClass:"btn-microsoft"},{id:"discord",name:"Discord",icon:"fab fa-discord",enabled:!1,scopes:["identify","email"],color:"#5865F2",buttonClass:"btn-discord"},{id:"apple",name:"Apple",icon:"fab fa-apple",enabled:!1,scopes:["email","name"],color:"#000000",buttonClass:"btn-apple"}],callbackUrl:"https://tradingpost.appwrite.network/auth/success",errorUrl:"https://tradingpost.appwrite.network/auth/error"},session:{cookieName:"trading_post_session",cookieDomain:void 0,cookiePath:"/",cookieSecure:!0,cookieSameSite:"lax",sessionTimeout:3600*24*7,refreshThreshold:3600},api:{baseUrl:"https://api.yourdomain.com",timeout:3e4,retryAttempts:3,retryDelay:1e3},features:{enableSSO:!0,enableEmailAuth:!0,enablePhoneAuth:!1,enableMagicLink:!1,enableAnonymousAuth:!1,enableBiometric:!1,enableMFA:!1,enablePasswordless:!1},security:{enableCSRF:!0,enableRateLimiting:!0,maxLoginAttempts:5,lockoutDuration:900*1e3,passwordMinLength:8,passwordRequireUppercase:!0,passwordRequireLowercase:!0,passwordRequireNumbers:!0,passwordRequireSpecialChars:!0,enableCaptcha:!1,captchaSiteKey:""},ui:{theme:"light",primaryColor:"#007bff",secondaryColor:"#6c757d",successColor:"#28a745",dangerColor:"#dc3545",warningColor:"#ffc107",infoColor:"#17a2b8",logoUrl:"/logo.png",appName:"Trading Post",companyName:"Trading Post Inc."},analytics:{enabled:!0,googleAnalyticsId:"",mixpanelToken:""},environment:"production",isDevelopment:!1,isProduction:!0,isTest:!1},pt={MESSAGE:"message",TRADE_REQUEST:"trade_request",TRADE_ACCEPTED:"trade_accepted",TRADE_COMPLETED:"trade_completed",PAYMENT_RECEIVED:"payment_received",ITEM_SOLD:"item_sold",ITEM_SAVED:"item_saved",PROFILE_VIEW:"profile_view",REVIEW_RECEIVED:"review_received",SYSTEM_ALERT:"system_alert",MEMBERSHIP_UPGRADE:"membership_upgrade",AI_ANALYSIS_COMPLETE:"ai_analysis_complete",FEATURED_LISTING_EXPIRING:"featured_expiring",PRICE_DROP_ALERT:"price_drop",BACK_IN_STOCK:"back_in_stock"};class dI{constructor(){this.databaseId=vs.database.databaseId,this.collectionId=vs.database.collections.notifications,this.soundEnabled=!0,this.audioContext=null,this.initializeAudio()}initializeAudio(){try{this.audioContext=new(window.AudioContext||window.webkitAudioContext)}catch(e){console.warn("Web Audio API not supported:",e)}}getNotifications(e){return E(this,null,function*(){try{return(yield we.listDocuments(this.databaseId,this.collectionId,[N.equal("userId",[e]),N.orderDesc("createdAt"),N.limit(50)])).documents}catch(t){return console.error("Failed to fetch notifications:",t),[]}})}getNotificationSettings(e){return E(this,null,function*(){return{email:!0,push:!0,inApp:!0,newsletter:!1,trades:!0,messages:!0,reviews:!0}})}updateNotificationSettings(e,t){return E(this,null,function*(){try{return console.log("Updating notification settings:",t),t}catch(r){throw console.error("Failed to update notification settings:",r),r}})}createNotification(e,t){return E(this,null,function*(){try{return yield we.createDocument(this.databaseId,this.collectionId,ze.unique(),{userId:e,title:t.title,message:t.message,type:t.type||"info",read:!1,createdAt:new Date().toISOString(),metadata:t.metadata||{}})}catch(r){throw console.error("Failed to create notification:",r),r}})}markAsRead(e){return E(this,null,function*(){try{return yield we.updateDocument(this.databaseId,this.collectionId,e,{read:!0,readAt:new Date().toISOString()})}catch(t){throw console.error("Failed to mark notification as read:",t),t}})}markAllAsRead(e){return E(this,null,function*(){try{const r=(yield we.listDocuments(this.databaseId,this.collectionId,[N.equal("userId",[e]),N.equal("read",[!1])])).documents.map(i=>this.markAsRead(i.$id));return yield Promise.all(r),!0}catch(t){throw console.error("Failed to mark all notifications as read:",t),t}})}deleteNotification(e){return E(this,null,function*(){try{return yield we.deleteDocument(this.databaseId,this.collectionId,e),!0}catch(t){throw console.error("Failed to delete notification:",t),t}})}deleteOldNotifications(e){return E(this,null,function*(){try{const t=new Date;t.setDate(t.getDate()-30);const i=(yield we.listDocuments(this.databaseId,this.collectionId,[N.equal("userId",[e]),N.lessThan("createdAt",t.toISOString())])).documents.map(a=>this.deleteNotification(a.$id));return yield Promise.all(i),!0}catch(t){throw console.error("Failed to delete old notifications:",t),t}})}playNotificationSound(e="default"){if(!(!this.soundEnabled||!this.audioContext))try{const t=this.audioContext.createOscillator(),r=this.audioContext.createGain();t.connect(r),r.connect(this.audioContext.destination);const i={[pt.MESSAGE]:800,[pt.TRADE_REQUEST]:600,[pt.PAYMENT_RECEIVED]:1e3,[pt.SYSTEM_ALERT]:400,default:700};t.frequency.value=i[e]||i.default,t.type="sine",r.gain.setValueAtTime(0,this.audioContext.currentTime),r.gain.linearRampToValueAtTime(.1,this.audioContext.currentTime+.01),r.gain.exponentialRampToValueAtTime(.001,this.audioContext.currentTime+.3),t.start(this.audioContext.currentTime),t.stop(this.audioContext.currentTime+.3)}catch(t){console.error("Failed to play notification sound:",t)}}createEnhancedNotification(l,u,d,p){return E(this,arguments,function*(e,t,r,i,a={}){try{const h={userId:e,title:t,message:r,content:r,type:i,read:!1,is_read:!1,createdAt:new Date().toISOString(),created_at:new Date().toISOString(),metadata:typeof a=="string"?a:JSON.stringify(a)},g=yield we.createDocument(this.databaseId,this.collectionId,ze.unique(),h);return console.log(" Enhanced notification created:",g.$id),g}catch(h){throw console.error(" Failed to create enhanced notification:",h),h}})}notifyNewMessage(e,t,r){return E(this,null,function*(){return yield this.createEnhancedNotification(e,"New Message","".concat(t,": ").concat(r),pt.MESSAGE,{sender:t})})}notifyTradeRequest(e,t,r){return E(this,null,function*(){return yield this.createEnhancedNotification(e,"New Trade Request","".concat(t,' wants to trade for "').concat(r,'"'),pt.TRADE_REQUEST,{buyer:t,item:r})})}notifyTradeAccepted(e,t,r){return E(this,null,function*(){return yield this.createEnhancedNotification(e,"Trade Request Accepted!","".concat(t,' accepted your trade request for "').concat(r,'"'),pt.TRADE_ACCEPTED,{seller:t,item:r})})}notifyTradeCompleted(e,t,r,i){return E(this,null,function*(){return yield this.createEnhancedNotification(e,"Trade Completed!","Your trade with ".concat(t,' for "').concat(r,'" is complete. Amount: $').concat(i),pt.TRADE_COMPLETED,{otherUser:t,item:r,amount:i})})}notifyPaymentReceived(e,t,r){return E(this,null,function*(){let i,a;switch(r){case"membership":i="Membership Upgraded!",a="Your Verified Human membership is now active. Welcome to premium features!";break;case"escrow":i="Escrow Payment Received",a="Escrow payment of $".concat(t," has been secured for your trade");break;case"featured":i="Listing Featured!",a="Your listing is now featured for 7 days. Get ready for more views!";break;default:i="Payment Received",a="Payment of $".concat(t," has been processed successfully")}return yield this.createEnhancedNotification(e,i,a,pt.PAYMENT_RECEIVED,{amount:t,paymentType:r})})}notifyItemSold(e,t,r,i){return E(this,null,function*(){return yield this.createEnhancedNotification(e,"Item Sold!",'"'.concat(t,'" has been sold to ').concat(r," for $").concat(i),pt.ITEM_SOLD,{item:t,buyer:r,amount:i})})}notifyItemSaved(e,t,r){return E(this,null,function*(){return yield this.createEnhancedNotification(e,"Item Saved","".concat(t,' saved your listing "').concat(r,'"'),pt.ITEM_SAVED,{saver:t,item:r})})}notifyProfileView(e,t){return E(this,null,function*(){return yield this.createEnhancedNotification(e,"Profile View","".concat(t," viewed your profile"),pt.PROFILE_VIEW,{viewer:t})})}notifyReviewReceived(e,t,r,i){return E(this,null,function*(){return yield this.createEnhancedNotification(e,"New Review Received","".concat(t," gave you ").concat(r,' stars for "').concat(i,'"'),pt.REVIEW_RECEIVED,{reviewer:t,rating:r,item:i})})}notifySystemAlert(a,l,u){return E(this,arguments,function*(e,t,r,i={}){return yield this.createEnhancedNotification(e,t,r,pt.SYSTEM_ALERT,i)})}notifyMembershipUpgrade(e,t){return E(this,null,function*(){return yield this.createEnhancedNotification(e,"Membership Upgraded!","Congratulations! You are now a ".concat(t," member with exclusive benefits."),pt.MEMBERSHIP_UPGRADE,{membershipType:t})})}notifyAIAnalysisComplete(e,t,r,i){return E(this,null,function*(){const a="AI Analysis Complete",l='Your photo analysis for "'.concat(t,'" is ready with ').concat(Math.round(r*100),"% confidence!");return yield this.createEnhancedNotification(e,a,l,pt.AI_ANALYSIS_COMPLETE,{item:t,confidence:r,suggestions:i})})}notifyFeaturedListingExpiring(e,t,r){return E(this,null,function*(){const i="Featured Listing Expiring",a='Your featured listing "'.concat(t,'" expires in ').concat(r," hours. Renew to keep the boost!");return yield this.createEnhancedNotification(e,i,a,pt.FEATURED_LISTING_EXPIRING,{item:t,hoursLeft:r})})}notifyPriceDropAlert(e,t,r,i,a){return E(this,null,function*(){const l="Price Drop Alert!",u='"'.concat(t,'" by ').concat(a," dropped from $").concat(r," to $").concat(i);return yield this.createEnhancedNotification(e,l,u,pt.PRICE_DROP_ALERT,{item:t,oldPrice:r,newPrice:i,seller:a})})}notifyBackInStock(e,t,r){return E(this,null,function*(){const i="Item Back in Stock!",a='"'.concat(t,'" by ').concat(r," is now available again");return yield this.createEnhancedNotification(e,i,a,pt.BACK_IN_STOCK,{item:t,seller:r})})}notifyMultipleUsers(l,u,d,p){return E(this,arguments,function*(e,t,r,i,a={}){try{const h=e.map(C=>this.createEnhancedNotification(C,t,r,i,a)),g=yield Promise.allSettled(h),v=g.filter(C=>C.status==="fulfilled").length,b=g.filter(C=>C.status==="rejected").length;return console.log("Batch notifications: ".concat(v," successful, ").concat(b," failed")),{successful:v,failed:b,results:g}}catch(h){throw console.error("Batch notification error:",h),h}})}getNotificationStats(e){return E(this,null,function*(){try{const t=yield this.getNotifications(e),r=t.filter(u=>!u.read&&!u.is_read).length,i={};t.forEach(u=>{const d=u.type||"unknown";i[d]=(i[d]||0)+1});const a=new Date;a.setDate(a.getDate()-7);const l=t.filter(u=>new Date(u.createdAt||u.created_at)>a).length;return{total:t.length,unread:r,byType:i,lastWeek:l}}catch(t){return console.error("Failed to get notification stats:",t),{total:0,unread:0,byType:{},lastWeek:0}}})}setSoundEnabled(e){this.soundEnabled=e}isSoundEnabled(){return this.soundEnabled}}const xt=new dI;class fI{constructor(){this.databaseId=vs.database.databaseId,this.usersCollection=vs.database.collections.users}getMyMembership(e){return E(this,null,function*(){if(console.log(" [Membership] Fetching membership for user:",{userId:e,databaseId:this.databaseId,collection:this.usersCollection}),!e)return console.error(" [Membership] No userId provided to getMyMembership"),{type:"free",status:"active",features:this.getMembershipFeatures("free")};try{const t=yield we.getDocument(this.databaseId,this.usersCollection,e);return console.log(" [Membership] User document fetched:",{docId:t.$id,hasMembershipType:!!t.membershipType,fields:Object.keys(t)}),{id:t.$id,type:t.membershipType||"free",status:"active",joinedDate:t.joinedDate||t.createdAt||t.$createdAt,totalTrades:t.totalTrades||0,totalReviews:t.totalReviews||0,rating:t.rating||0,isVerified:t.isVerified||!1,features:this.getMembershipFeatures(t.membershipType||"free")}}catch(t){return console.error(" [Membership] Failed to fetch membership:",{userId:e,errorCode:t.code,errorMessage:t.message,errorType:t.type}),{type:"free",status:"active",features:this.getMembershipFeatures("free")}}})}getMembershipFeatures(e){const t={free:{maxListings:10,maxPhotosPerListing:3,messagingEnabled:!0,prioritySupport:!1,featuredListings:!1,advancedAnalytics:!1},premium:{maxListings:100,maxPhotosPerListing:10,messagingEnabled:!0,prioritySupport:!0,featuredListings:!0,advancedAnalytics:!0}};return t[e]||t.free}}const pI=new fI;class hI{constructor(){this.fieldMappings=new Map,this.initialized=!1}initialize(){return E(this,null,function*(){if(!this.initialized){console.log(" [FieldMapper] Initializing database field mappings...");try{const e=["user_id","userId","owner_id","ownerId","created_by","createdBy"];for(const[t,r]of Object.entries(X))yield this.detectFieldsForCollection(t,r,e);this.initialized=!0,console.log(" [FieldMapper] Field mappings initialized:",Object.fromEntries(this.fieldMappings))}catch(e){console.error(" [FieldMapper] Failed to initialize field mappings:",e)}}})}detectFieldsForCollection(e,t,r){return E(this,null,function*(){try{if(e==="users"){this.fieldMappings.set("".concat(e,".user"),"$id"),this.fieldMappings.set("".concat(e,".queryMethod"),"getDocument"),console.log(" [FieldMapper] ".concat(e,": uses document $id as user identifier (direct lookup)"));try{const a=yield we.listDocuments(V,t,[N.limit(1)]);if(a.documents.length>0){const l=Object.keys(a.documents[0]);this.fieldMappings.set("".concat(e,".fields"),l),console.log(" [FieldMapper] ".concat(e,": available fields:"),l)}else console.log(" [FieldMapper] ".concat(e,": collection is empty"))}catch(a){console.log(" [FieldMapper] ".concat(e,": couldn't list documents:"),a.message)}return}const i=yield we.listDocuments(V,t,[N.limit(1)]);if(i.documents.length>0){const a=i.documents[0],l=Object.keys(a),u=r.find(d=>l.includes(d));u?(this.fieldMappings.set("".concat(e,".user"),u),console.log(" [FieldMapper] ".concat(e,": user field is '").concat(u,"'"))):(this.fieldMappings.set("".concat(e,".user"),"user_id"),console.log(" [FieldMapper] ".concat(e,": defaulting to 'user_id' field"))),this.fieldMappings.set("".concat(e,".fields"),l)}else console.log(" [FieldMapper] ".concat(e,": collection is empty, cannot detect fields")),this.fieldMappings.set("".concat(e,".user"),"user_id")}catch(i){i.code===404?(console.warn(" [FieldMapper] ".concat(e,": collection does not exist")),this.fieldMappings.set("".concat(e,".user"),"user_id")):console.error(" [FieldMapper] Error detecting fields for ".concat(e,":"),i)}})}getFieldName(e,t){return this.initialized?this.fieldMappings.get("".concat(e,".").concat(t))||this.getFallbackFieldName(t):(console.warn(" [FieldMapper] Not initialized, using fallback field names"),this.getFallbackFieldName(t))}getFallbackFieldName(e){return{user:"user_id",owner:"owner_id",id:"$id"}[e]||e}createUserQuery(e,t,r=[]){if(e==="users")return[N.equal("$id",[t]),...r];const i=this.getFieldName(e,"user");return[N.equal(i,[t]),...r]}collectionExists(e){return E(this,null,function*(){try{const t=X[e];return t?(yield we.listDocuments(V,t,[N.limit(1)]),!0):!1}catch(t){return t.code!==404}})}getAvailableFields(e){return this.fieldMappings.get("".concat(e,".fields"))||[]}ensureCollectionsExist(){return E(this,null,function*(){const e=["matches","notifications","saved_items"];for(const t of e)(yield this.collectionExists(t))||console.log(" [FieldMapper] Collection '".concat(t,"' needs to be created"))})}}const Xo=new hI;Xo.initialize().catch(console.error);const gl=(n,e,t=[])=>n==="users"?[N.equal("user_id",[e]),...t]:Xo.createUserQuery(n,e,t),mI=n=>Xo.collectionExists(n),He={enabled:!1,logs:[],enable(){return this.enabled=!0,console.log(" Debug mode enabled for Trading Post"),window.tradingPostDebug=this,this},disable(){return this.enabled=!1,console.log(" Debug mode disabled"),this},log(n,e,t=null){const r={timestamp:new Date().toISOString(),type:n,message:e,data:t};if(this.logs.push(r),this.enabled){const i={info:"#3498db",success:"#2ecc71",warning:"#f39c12",error:"#e74c3c",debug:"#9b59b6"}[n]||"#95a5a6";console.log("%c[".concat(n.toUpperCase(),"] ").concat(e),"color: ".concat(i,"; font-weight: bold;"),t||"")}return r},getLogs(){return this.logs},clearLogs(){this.logs=[],console.log(" Debug logs cleared")},exportLogs(){const n=new Blob([JSON.stringify(this.logs,null,2)],{type:"application/json"}),e=URL.createObjectURL(n),t=document.createElement("a");t.href=e,t.download="trading-post-debug-".concat(Date.now(),".json"),t.click(),URL.revokeObjectURL(e),console.log(" Debug logs exported")}};window.DEBUG=He;const li={items:{owner_id:"user_id"},trades:{initiator_id:"offerer_id",recipient_id:"recipient_id"}};function Dv(){return E(this,null,function*(){var t;He.log("info"," Testing database queries to identify issues"),yield Xo.initialize();const n=[{name:"List items with user_id",collection:"items",query:()=>we.listDocuments(V,X.items,[N.limit(1)])},{name:"Query items by user_id",collection:"items",query:()=>we.listDocuments(V,X.items,gl("items","test",[N.limit(1)]))},{name:"Query wants by user_id",collection:"wants",query:()=>we.listDocuments(V,X.wants,gl("wants","test",[N.limit(1)]))},{name:"Query matches by user_id",collection:"matches",query:()=>E(null,null,function*(){if(!(yield mI("matches")))throw new Error("Collection might not exist");return we.listDocuments(V,X.matches,gl("matches","test",[N.limit(1)]))})},{name:"Query notifications by user_id",collection:"notifications",query:()=>we.listDocuments(V,X.notifications,gl("notifications","test",[N.limit(1)]))}],e={passed:[],failed:[],warnings:[]};for(const r of n)try{He.log("debug","Running test: ".concat(r.name)),yield r.query(),e.passed.push(r.name),He.log("success"," ".concat(r.name," passed"))}catch(i){(t=i.message)!=null&&t.includes("Attribute not found")?(e.failed.push({test:r.name,error:i.message,collection:r.collection}),He.log("error"," ".concat(r.name," failed: ").concat(i.message))):i.code===404?(e.warnings.push({test:r.name,warning:"Collection might not exist",collection:r.collection}),He.log("warning"," ".concat(r.name,": Collection might not exist"))):(e.warnings.push({test:r.name,warning:i.message,collection:r.collection}),He.log("warning"," ".concat(r.name,": ").concat(i.message)))}return e})}const Ri={listDocuments(r,i){return E(this,arguments,function*(n,e,t=[]){var a,l,u;try{if(e===X.users){const d=t.find(h=>typeof h=="object"&&h.values&&(h.values[0]==="user_id"||h.values[0]==="$id"));if(d&&d.values[1]){const h=Array.isArray(d.values[1])?d.values[1][0]:d.values[1];try{return{total:1,documents:[yield we.getDocument(n,e,h)]}}catch(g){if(g.code===404)return{total:0,documents:[]}}}const p=t.map(h=>typeof h=="object"&&h.values&&h.values[0]==="$id"?N.equal("user_id",h.values[1]):h);return yield we.listDocuments(n,e,p)}return yield we.listDocuments(n,e,t)}catch(d){if((a=d.message)!=null&&a.includes("Attribute not found")){He.log("warning","Schema issue detected in ".concat(e,", attempting field mapping")),He.log("debug","Failed query details:",{collection:e,queries:t.map(h=>({method:h.method,values:h.values})),error:d.message});const p=d.message.match(/Attribute not found.*: (\w+)/);if(p){const h=p[1];He.log("debug","Problem field identified: ".concat(h));const v={user_id:["userId","owner_id","created_by","offerer_id","recipient_id"],owner_id:["user_id","userId","created_by","offerer_id","recipient_id"],sender_id:["from_user_id","senderId","user_id","offerer_id"],recipient_id:["to_user_id","recipientId","user_id"],offerer_id:["user_id","userId","initiator_id","owner_id"],initiator_id:["offerer_id","user_id","userId","owner_id"]}[h]||[];for(const b of v)try{He.log("debug","Trying alternative field: ".concat(b));const C=t.map(x=>typeof x=="object"&&x.values&&x.values[0]===h?N[x.method](b,x.values[1]):x),T=yield we.listDocuments(n,e,C);return He.log("success"," Success with alternative field: ".concat(b)),li[e]||(li[e]={}),li[e][h]=b,T}catch(C){if(He.log("debug","Alternative ".concat(b," also failed")),(l=C.message)!=null&&l.includes("Attribute not found")){const T=C.message.match(/Attribute not found.*: (\w+)/);T&&T[1]!==b&&He.log("debug","Different field error: ".concat(T[1]))}}}}if(d.code===404&&((u=d.message)!=null&&u.includes("Collection with the requested ID could not be found")))return He.log("warning","Collection ".concat(e," does not exist - returning empty result")),{total:0,documents:[]};throw d}})},getDocument(n,e,t){return E(this,null,function*(){return we.getDocument(n,e,t)})},createDocument(n,e,t,r,i){return E(this,null,function*(){const a=li[e]||{},l=A({},r);for(const[u,d]of Object.entries(a))u in l&&(l[d]=l[u],u!==d&&delete l[u]);return we.createDocument(n,e,t||ze.unique(),l,i)})},updateDocument(n,e,t,r){return E(this,null,function*(){const i=li[e]||{},a=A({},r);for(const[l,u]of Object.entries(i))l in a&&(a[u]=a[l],l!==u&&delete a[l]);return we.updateDocument(n,e,t,a)})},deleteDocument(n,e,t){return E(this,null,function*(){return we.deleteDocument(n,e,t)})}};function Nv(){let n=null;document.addEventListener("keydown",e=>{e.key==="`"&&(e.preventDefault(),n?n.style.display=n.style.display==="none"?"block":"none":(n=document.createElement("div"),n.id="trading-post-debug-panel",n.innerHTML='\n          <div style="\n            position: fixed;\n            bottom: 0;\n            left: 0;\n            right: 0;\n            height: 300px;\n            background: rgba(0, 0, 0, 0.95);\n            color: #0f0;\n            font-family: \'Courier New\', monospace;\n            font-size: 12px;\n            padding: 10px;\n            z-index: 999999;\n            overflow-y: auto;\n            border-top: 2px solid #0f0;\n          ">\n            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">\n              <h3 style="margin: 0; color: #0f0;"> Trading Post Debug Console</h3>\n              <div>\n                <button onclick="window.DEBUG.enable()" style="background: #2ecc71; color: white; border: none; padding: 5px 10px; margin: 0 5px; cursor: pointer;">Enable Debug</button>\n                <button onclick="window.DEBUG.disable()" style="background: #e74c3c; color: white; border: none; padding: 5px 10px; margin: 0 5px; cursor: pointer;">Disable Debug</button>\n                <button onclick="window.DEBUG.clearLogs()" style="background: #f39c12; color: white; border: none; padding: 5px 10px; margin: 0 5px; cursor: pointer;">Clear Logs</button>\n                <button onclick="window.DEBUG.exportLogs()" style="background: #3498db; color: white; border: none; padding: 5px 10px; margin: 0 5px; cursor: pointer;">Export Logs</button>\n                <button onclick="window.testDatabaseQueries()" style="background: #9b59b6; color: white; border: none; padding: 5px 10px; margin: 0 5px; cursor: pointer;">Test Queries</button>\n                <button onclick="document.getElementById(\'trading-post-debug-panel\').style.display=\'none\'" style="background: #95a5a6; color: white; border: none; padding: 5px 10px; margin: 0 5px; cursor: pointer;">Close</button>\n              </div>\n            </div>\n            <div id="debug-log-output" style="height: calc(100% - 40px); overflow-y: auto; padding: 10px; background: rgba(0, 0, 0, 0.5); border-radius: 5px;">\n              <pre style="margin: 0; color: #0f0;">Debug console ready. Press buttons above to run tests.</pre>\n            </div>\n          </div>\n        ',document.body.appendChild(n),He.enable(),window.testDatabaseQueries=()=>E(null,null,function*(){const t=document.getElementById("debug-log-output");t.innerHTML='<pre style="color: #f39c12;">Running database tests...</pre>';try{const r=yield Dv();let i='<pre style="color: #0f0;">';i+="=== Database Test Results ===\n\n",r.passed.length>0&&(i+=" PASSED TESTS:\n",r.passed.forEach(a=>{i+="  - ".concat(a,"\n")}),i+="\n"),r.failed.length>0&&(i+=" FAILED TESTS:\n",r.failed.forEach(({test:a,error:l,collection:u})=>{i+="  - ".concat(a,"\n"),i+="    Collection: ".concat(u,"\n"),i+="    Error: ".concat(l,"\n")}),i+="\n"),r.warnings.length>0&&(i+=" WARNINGS:\n",r.warnings.forEach(({test:a,warning:l,collection:u})=>{i+="  - ".concat(a,"\n"),i+="    Collection: ".concat(u,"\n"),i+="    Warning: ".concat(l,"\n")}),i+="\n"),i+="\n=== Field Mappings ===\n",i+=JSON.stringify(li,null,2),i+="\n\n=== Debug Logs ===\n",He.getLogs().forEach(a=>{const l={info:"#3498db",success:"#2ecc71",warning:"#f39c12",error:"#e74c3c",debug:"#9b59b6"}[a.type]||"#95a5a6";i+='<span style="color: '.concat(l,'">[').concat(a.timestamp,"] ").concat(a.type.toUpperCase(),": ").concat(a.message,"</span>\n"),a.data&&(i+='<span style="color: #95a5a6;">  Data: '.concat(JSON.stringify(a.data),"</span>\n"))}),i+="</pre>",t.innerHTML=i}catch(r){t.innerHTML='<pre style="color: #e74c3c;">Error running tests: '.concat(r.message,"</pre>")}}),setInterval(()=>{if(n&&n.style.display!=="none"){const t=document.getElementById("debug-log-output"),r=He.getLogs().slice(-50);if(r.length>0){let i='<pre style="color: #0f0;">';r.forEach(a=>{const l={info:"#3498db",success:"#2ecc71",warning:"#f39c12",error:"#e74c3c",debug:"#9b59b6"}[a.type]||"#95a5a6";i+='<span style="color: '.concat(l,'">[').concat(a.timestamp,"] ").concat(a.type.toUpperCase(),": ").concat(a.message,"</span>\n"),a.data&&(i+='<span style="color: #95a5a6;">  Data: '.concat(JSON.stringify(a.data,null,2),"</span>\n"))}),i+="</pre>",t.innerHTML=i}}},1e3)))}),console.log(" Trading Post Debug Console initialized. Press ` to open/close.")}function gI(){return E(this,null,function*(){He.log("info"," Starting automatic issue detection and fixing");const n=[],e=yield Dv();return e.failed.length>0&&(He.log("warning","Found ".concat(e.failed.length," schema issues, applying smart query wrappers")),n.push({issue:"Schema mismatches",solution:"Applied field mapping wrappers",details:e.failed})),He.log("success"," Auto-fix complete",n),n})}typeof window!="undefined"&&Nv();class yI{constructor(){this.databaseId=vs.database.databaseId,this.itemsCollection=vs.database.collections.items,this.usersCollection=vs.database.collections.users,this.db=Ri}getSavedItems(e){return E(this,null,function*(){try{const r=(yield this.db.getDocument(this.databaseId,this.usersCollection,e)).savedItems||[];return r.length===0?[]:(yield this.db.listDocuments(this.databaseId,this.itemsCollection,[N.equal("$id",r),N.limit(100)])).documents}catch(t){return console.error("Failed to fetch saved items:",t),[]}})}saveItem(e,t){return E(this,null,function*(){try{const i=(yield this.db.getDocument(this.databaseId,this.usersCollection,e)).savedItems||[];return i.includes(t)||(i.push(t),yield this.db.updateDocument(this.databaseId,this.usersCollection,e,{savedItems:i})),!0}catch(r){throw console.error("Failed to save item:",r),r}})}unsaveItem(e,t){return E(this,null,function*(){try{const a=((yield this.db.getDocument(this.databaseId,this.usersCollection,e)).savedItems||[]).filter(l=>l!==t);return yield this.db.updateDocument(this.databaseId,this.usersCollection,e,{savedItems:a}),!0}catch(r){throw console.error("Failed to unsave item:",r),r}})}isItemSaved(e,t){return E(this,null,function*(){try{return((yield this.db.getDocument(this.databaseId,this.usersCollection,e)).savedItems||[]).includes(t)}catch(r){return console.error("Failed to check saved status:",r),!1}})}}const Ld=new yI;class wI{constructor(){this.errors=[],this.maxErrors=100}logError(e,t={}){const r=A({message:e.message||"Unknown error",stack:e.stack,timestamp:new Date().toISOString(),url:window.location.href,userAgent:navigator.userAgent,context:t},this.extractErrorInfo(e));this.errors.unshift(r),this.errors.length>this.maxErrors&&(this.errors=this.errors.slice(0,this.maxErrors));try{let i=[];const a=localStorage.getItem("error_logs");if(a)try{if(a.trim().startsWith("[")){const u=JSON.parse(a);Array.isArray(u)&&(i=u)}}catch(u){console.warn("Failed to parse stored error logs, starting fresh:",u),localStorage.removeItem("error_logs")}i.unshift(r);const l=i.slice(0,50);localStorage.setItem("error_logs",JSON.stringify(l))}catch(i){console.error("Failed to store error log:",i)}return r}extractErrorInfo(e){const t={};return e.name&&(t.name=e.name),e.code&&(t.code=e.code),e.statusCode&&(t.statusCode=e.statusCode),e.response&&(t.response={status:e.response.status,statusText:e.response.statusText,data:e.response.data}),t}getRecentErrors(e=10){return this.errors.slice(0,e)}getStoredErrors(){try{const e=localStorage.getItem("error_logs");if(!e)return[];if(!e.trim().startsWith("[")&&!e.trim().startsWith("{"))return console.warn("Invalid error logs format in localStorage"),[];const t=JSON.parse(e);return Array.isArray(t)?t:(console.warn("Error logs is not an array"),[])}catch(e){console.error("Failed to retrieve error logs:",e);try{localStorage.removeItem("error_logs")}catch(t){}return[]}}clearErrors(){this.errors=[];try{localStorage.removeItem("error_logs")}catch(e){console.error("Failed to clear error logs:",e)}}reportError(r){return E(this,arguments,function*(e,t={}){return this.logError(e,t)})}}const vI=new wI,yl={items:{userField:"userId",fallbacks:["user_id"],requiredFields:["userId","title","description","category","condition","location","createdAt","updatedAt"]},matches:{userField:"userId",fallbacks:["user_id","offerer_id","recipient_id"],requiredFields:["userId","createdAt"]},trades:{userField:"userId",fallbacks:["user_id","initiator_id","recipient_id"],requiredFields:["userId","createdAt"]},saved_items:{userField:"userId",fallbacks:["user_id"],requiredFields:["userId","itemId","createdAt"]},messages:{userField:"userId",fallbacks:["user_id","sender_id","recipient_id"],requiredFields:["userId","createdAt"]},notifications:{userField:"userId",fallbacks:["user_id","recipient_id"],requiredFields:["userId","createdAt"]}};class ui{static getUserField(e){const t=yl[e];return t?t.userField:"userId"}static getFallbackFields(e){const t=yl[e];return t?t.fallbacks:["user_id"]}static createUserQuery(e,t){const r=this.getUserField(e);try{return N.equal(r,t)}catch(i){console.warn("[FieldMappingFixer] Primary field ".concat(r," failed for ").concat(e,", trying fallbacks"));const a=this.getFallbackFields(e);for(const l of a)try{return console.log("[FieldMappingFixer] Trying fallback field: ".concat(l)),N.equal(l,t)}catch(u){console.warn("[FieldMappingFixer] Fallback field ".concat(l," also failed"))}throw i}}static prepareDocumentData(e,t,r=null){const i=yl[e];if(!i)return t;const a=A({},t),l=i.userField;r&&(a[l]=r,i.fallbacks.forEach(d=>{a[d]=r}));const u=new Date().toISOString();return a.createdAt||(a.createdAt=u),a.updatedAt||(a.updatedAt=u),a}static validateDocument(e,t){const r=yl[e];if(!r)return!0;const i=r.requiredFields.filter(a=>!Object.prototype.hasOwnProperty.call(t,a)||t[a]===void 0||t[a]===null);return i.length>0?(console.warn("[FieldMappingFixer] Missing required fields for ".concat(e,":"),i),!1):!0}static normalizeResponseData(e){if(!e||typeof e!="object")return e;if(Array.isArray(e))return e.map(i=>this.normalizeResponseData(i));const t=A({},e);return Object.entries({user_id:"userId",item_id:"itemId",created_at:"createdAt",updated_at:"updatedAt",primary_image_url:"primaryImageUrl",is_available:"isAvailable",is_featured:"isFeatured",ai_tags:"aiTags",ai_analysis:"aiAnalysis",estimated_value:"estimatedValue",ai_estimated_value:"aiEstimatedValue",trade_preferences:"tradePreferences",location_lat:"locationLat",location_lng:"locationLng"}).forEach(([i,a])=>{Object.prototype.hasOwnProperty.call(t,i)&&(t[a]=t[i])}),t}static debugFieldMapping(e,t,r){console.log("[FieldMappingFixer] ".concat(e," ").concat(t,":"),{primaryField:this.getUserField(e),fallbacks:this.getFallbackFields(e),success:!!r})}}const us=Yo("trading-post:itemsService");class SI{constructor(){this.currentUser=null,this.db=Ri}getCurrentUserId(){return E(this,null,function*(){try{return this.currentUser||(this.currentUser=yield Le.get()),this.currentUser.$id}catch(e){return us.error("Failed to get current user",e),null}})}createItem(e){return E(this,null,function*(){try{const t=yield this.getCurrentUserId();if(!t)throw new Error("User not authenticated");us.info("Creating new item",{title:e.title,category:e.category});let r=[],i=null;e.images&&e.images.length>0&&(us.debug("Uploading images",{count:e.images.length}),r=yield this.uploadImages(e.images),i=r[0],us.success("Images uploaded",{count:r.length}));const a=ui.prepareDocumentData("items",{title:e.title,description:e.description||"",category:e.category,condition:e.condition,price:e.price||e.estimated_value||0,estimated_value:e.estimated_value||e.price||0,ai_estimated_value:e.ai_estimated_value||null,trade_preferences:e.trade_preferences||"",location_lat:e.latitude||null,location_lng:e.longitude||null,city:e.city||"",state:e.state||"",zipcode:e.zipcode||"",images:r,primary_image_url:i,status:"active",is_featured:!1,views:0,likes:0,ai_tags:JSON.stringify(e.ai_tags||[]),ai_analysis:JSON.stringify(e.ai_analysis||{})},t),l=yield this.db.createDocument(V,X.items,ze.unique(),a);return us.success("Item created",{itemId:l.$id,title:l.title}),{success:!0,item:l}}catch(t){return us.error("Failed to create item",{error:t.message,code:t.code}),{success:!1,error:xe(t)}}})}getItems(){return E(this,arguments,function*(e={}){try{const{page:t=1,limit:r=20,category:i=null,condition:a=null,userId:l=null,search:u=null,sortBy:d="created_at",sortOrder:p="desc"}=e;us.info("Fetching items",e);const h=[N.equal("status","active"),N.limit(r),N.offset((t-1)*r)];i&&h.push(N.equal("category",i)),a&&h.push(N.equal("condition",a)),l&&h.push(ui.createUserQuery("items",l)),u&&h.push(N.search("title",u));const g=d==="created_at"?"$createdAt":d;p==="desc"?h.push(N.orderDesc(g)):h.push(N.orderAsc(g));const v=yield this.db.listDocuments(V,X.items,h),b=v.documents.map(C=>{const T=ui.normalizeResponseData(C);let x=[],M=[],I={};try{T.images&&(x=typeof T.images=="string"?JSON.parse(T.images):T.images)}catch(R){console.warn("Failed to parse images:",R)}try{T.aiTags&&(M=typeof T.aiTags=="string"?JSON.parse(T.aiTags):T.aiTags)}catch(R){console.warn("Failed to parse aiTags:",R)}try{T.aiAnalysis&&(I=typeof T.aiAnalysis=="string"?JSON.parse(T.aiAnalysis):T.aiAnalysis)}catch(R){console.warn("Failed to parse aiAnalysis:",R)}return Y(A({},T),{price:T.price||T.estimated_value||T.estimatedValue||0,images:Array.isArray(x)?x:[],aiTags:Array.isArray(M)?M:[],aiAnalysis:I||{}})});return console.log(" Fetched ".concat(b.length," items")),{success:!0,items:b,total:v.total,page:t,totalPages:Math.ceil(v.total/r)}}catch(t){return console.error(" Failed to fetch items:",t),{success:!1,error:xe(t),items:[],total:0}}})}getItem(e){return E(this,null,function*(){try{console.log(" Fetching item:",e);const t=yield this.db.getDocument(V,X.items,e);return t.images=this.parseJSONField(t.images),t.ai_tags=this.parseJSONField(t.ai_tags),t.ai_analysis=this.parseJSONField(t.ai_analysis),t.price=t.price||t.estimated_value||0,yield this.incrementViews(e,t.views),console.log(" Item fetched:",t),{success:!0,item:t}}catch(t){return console.error(" Failed to fetch item:",t),{success:!1,error:xe(t)}}})}updateItem(e,t){return E(this,null,function*(){var r,i;try{const a=yield this.getCurrentUserId();if(!a)throw new Error("User not authenticated");console.log(" Updating item:",e,t);const l=yield this.db.getDocument(V,X.items,e),u=ui.normalizeResponseData(l);if((u.userId||u.user_id||((i=(r=l.$permissions)==null?void 0:r.find(h=>h.includes("user:")))==null?void 0:i.split(":")[1]))!==a)throw new Error("You can only update your own items");if(t.images&&Array.isArray(t.images)){const h=t.images.filter(g=>g instanceof File);if(h.length>0){const g=yield this.uploadImages(h),v=t.images.filter(b=>typeof b=="string");t.images=[...v,...g],t.primary_image_url=t.images[0]||null}t.images=JSON.stringify(t.images)}t.ai_tags&&(t.ai_tags=JSON.stringify(t.ai_tags)),t.ai_analysis&&(t.ai_analysis=JSON.stringify(t.ai_analysis)),t.updated_at=new Date().toISOString();const p=yield this.db.updateDocument(V,X.items,e,t);return console.log(" Item updated:",p),{success:!0,item:p}}catch(a){return console.error(" Failed to update item:",a),{success:!1,error:xe(a)}}})}deleteItem(e){return E(this,null,function*(){try{const t=yield this.getCurrentUserId();if(!t)throw new Error("User not authenticated");console.log(" Deleting item:",e);const r=yield this.db.getDocument(V,X.items,e);if(r.user_id!==t)throw new Error("You can only delete your own items");if(r.images){const i=JSON.parse(r.images);for(const a of i)yield this.deleteImage(a)}return yield this.db.deleteDocument(V,X.items,e),console.log(" Item deleted"),{success:!0}}catch(t){return console.error(" Failed to delete item:",t),{success:!1,error:xe(t)}}})}searchItems(e){return E(this,null,function*(){try{console.log(" Searching items:",e);const t=[N.equal("status","active")];e.query&&t.push(N.search("title",e.query)),e.category&&t.push(N.equal("category",e.category)),e.condition&&t.push(N.equal("condition",e.condition)),e.minValue&&t.push(N.greaterThanEqual("estimated_value",e.minValue)),e.maxValue&&t.push(N.lessThanEqual("estimated_value",e.maxValue)),e.latitude&&e.longitude&&e.radius;const r=e.limit||20,i=e.page||1;t.push(N.limit(r)),t.push(N.offset((i-1)*r));const a=e.sortBy||"created_at";(e.sortOrder||"desc")==="desc"?t.push(N.orderDesc(a)):t.push(N.orderAsc(a));const u=yield this.db.listDocuments(V,X.items,t),d=u.documents.map(h=>Y(A({},h),{price:h.price||h.estimated_value||0,images:this.parseJSONField(h.images),ai_tags:this.parseJSONField(h.ai_tags),ai_analysis:this.parseJSONField(h.ai_analysis)}));let p=d;return e.latitude&&e.longitude&&e.radius&&(p=d.filter(h=>!h.location_lat||!h.location_lng?!1:this.calculateDistance(e.latitude,e.longitude,h.location_lat,h.location_lng)<=e.radius)),console.log(" Found ".concat(p.length," items")),{success:!0,listings:p,page:i,total_pages:Math.ceil(u.total/r),total:p.length}}catch(t){return console.error(" Search failed:",t),{success:!1,error:xe(t),listings:[],total:0}}})}getUserItems(e=null){return E(this,null,function*(){try{const t=e||(yield this.getCurrentUserId());if(!t)throw new Error("User not authenticated");return yield this.getItems({userId:t})}catch(t){return console.error(" Failed to fetch user items:",t),{success:!1,error:xe(t),items:[]}}})}uploadImages(e){return E(this,null,function*(){const t=[];for(const r of e)try{const i=yield ws.createFile(Rl.itemImages,ze.unique(),r),a=ws.getFileView(Rl.itemImages,i.$id);t.push(a.href)}catch(i){console.error("Failed to upload image:",i)}return t})}deleteImage(e){return E(this,null,function*(){try{const t=e.split("/"),r=t[t.length-2];yield ws.deleteFile(Rl.itemImages,r)}catch(t){console.error("Failed to delete image:",t)}})}incrementViews(e,t){return E(this,null,function*(){try{yield this.db.updateDocument(V,X.items,e,{views:(t||0)+1})}catch(r){console.error("Failed to increment views:",r)}})}toggleLike(e){return E(this,null,function*(){try{if(!(yield this.getCurrentUserId()))throw new Error("User not authenticated");const r=yield this.db.getDocument(V,X.items,e);return yield this.db.updateDocument(V,X.items,e,{likes:(r.likes||0)+1}),{success:!0,liked:!0}}catch(t){return console.error(" Failed to toggle like:",t),{success:!1,error:xe(t)}}})}calculateDistance(e,t,r,i){const l=this.toRad(r-e),u=this.toRad(i-t),d=Math.sin(l/2)*Math.sin(l/2)+Math.cos(this.toRad(e))*Math.cos(this.toRad(r))*Math.sin(u/2)*Math.sin(u/2);return 3959*(2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)))}toRad(e){return e*(Math.PI/180)}parseJSONField(e){if(!e)return Array.isArray(e)?[]:{};if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.warn("Failed to parse JSON field:",e),Array.isArray(e)?[]:{}}return e}}const Ss=new SI;class bI{constructor(){this.smartDb=Ri,this.missingCollections=new Set,this.collectionStatus=new Map}checkCollectionExists(e){return E(this,null,function*(){if(this.collectionStatus.has(e))return this.collectionStatus.get(e);try{return yield we.listDocuments(V,e,[N.limit(1)]),this.collectionStatus.set(e,!0),!0}catch(t){return t.code===404?(this.collectionStatus.set(e,!1),this.missingCollections.add(e),console.warn(" Collection '".concat(e,"' does not exist - using fallbacks")),!1):(this.collectionStatus.set(e,!0),!0)}})}listDocuments(i,a){return E(this,arguments,function*(e,t,r=[]){return(yield this.checkCollectionExists(t))?yield this.smartDb.listDocuments(e,t,r):(console.warn(" Collection '".concat(t,"' doesn't exist - returning empty result")),{total:0,documents:[]})})}getDocument(e,t,r){return E(this,null,function*(){if(!(yield this.checkCollectionExists(t)))throw new Error("Collection '".concat(t,"' does not exist"));return yield this.smartDb.getDocument(e,t,r)})}createDocument(e,t,r,i,a){return E(this,null,function*(){if(!(yield this.checkCollectionExists(t)))throw console.error(" Cannot create document in missing collection '".concat(t,"'")),new Error("Collection '".concat(t,"' does not exist. Please create it in Appwrite Console first."));return yield this.smartDb.createDocument(e,t,r,i,a)})}updateDocument(e,t,r,i){return E(this,null,function*(){if(!(yield this.checkCollectionExists(t)))throw new Error("Collection '".concat(t,"' does not exist"));return yield this.smartDb.updateDocument(e,t,r,i)})}deleteDocument(e,t,r){return E(this,null,function*(){if(!(yield this.checkCollectionExists(t)))throw new Error("Collection '".concat(t,"' does not exist"));return yield this.smartDb.deleteDocument(e,t,r)})}getMissingCollections(){return Array.from(this.missingCollections)}resetCollectionCache(){this.collectionStatus.clear(),this.missingCollections.clear()}getMatchesForUser(r){return E(this,arguments,function*(e,t={}){try{if(!(yield this.checkCollectionExists(X.matches)))return console.log(" Matches collection not available - using fallback empty result"),{total:0,documents:[],fallback:!0,message:"Matches collection not yet created. AI matching will be available once the collection is set up."};const a=[N.equal("user_id",e),N.limit(t.limit||20),N.orderDesc("$createdAt")];return yield this.smartDb.listDocuments(V,X.matches,a)}catch(i){return console.error(" Failed to fetch matches:",i),{total:0,documents:[],error:!0,message:i.message}}})}getSavedItemsForUser(r){return E(this,arguments,function*(e,t={}){try{if(!(yield this.checkCollectionExists(X.savedItems)))return console.log(" Saved items collection not available - using fallback empty result"),{total:0,documents:[],fallback:!0,message:"Saved items collection not yet created."};const a=[N.equal("user_id",e),N.limit(t.limit||50),N.orderDesc("$createdAt")];return yield this.smartDb.listDocuments(V,X.savedItems,a)}catch(i){return console.error(" Failed to fetch saved items:",i),{total:0,documents:[],error:!0,message:i.message}}})}}const Pf=new bI,wl=Yo("trading-post:matchingService");class _I{constructor(){this.currentUser=null,this.db=Pf,this.fieldMapper=Xo,this.initializeFieldMappings()}initializeFieldMappings(){return E(this,null,function*(){try{yield this.fieldMapper.initialize()}catch(e){wl.error("Failed to initialize field mappings",e)}})}getCurrentUserId(){return E(this,null,function*(){try{return this.currentUser||(this.currentUser=yield Le.get()),this.currentUser.$id}catch(e){return wl.error("Failed to get current user",e),null}})}getMatches(){return E(this,arguments,function*(e={}){try{const t=yield this.getCurrentUserId();if(!t)throw new Error("User not authenticated");const{page:r=1,limit:i=20,status:a="pending"}=e;wl.info("Fetching AI matches",e);const l=yield this.db.getMatchesForUser(t,{limit:i,offset:(r-1)*i,status:a});if(l.fallback||l.error)return wl.warn("Matches collection not available or error occurred",l),{matches:[],total:0,page:r,hasMore:!1,message:l.message||"Matches service temporarily unavailable"};const u=yield Promise.all(l.documents.map(d=>E(this,null,function*(){try{const p=yield this.db.getDocument(V,X.items,d.item_id),h=yield this.db.getDocument(V,X.items,d.matched_item_id),g=yield this.db.getDocument(V,X.users,d.matched_user_id);return Y(A({},d),{user_item:Y(A({},p),{images:p.images?JSON.parse(p.images):[]}),matched_item:Y(A({},h),{images:h.images?JSON.parse(h.images):[]}),matched_user:{id:g.$id,name:g.name,username:g.username,rating_average:g.rating_average,trades_completed:g.trades_completed}})}catch(p){return console.error("Error fetching match details:",p),d}})));return console.log(" Fetched ".concat(u.length," matches")),{success:!0,matches:u,page:r,total_pages:Math.ceil(l.total/i),total:l.total}}catch(t){return console.error(" Failed to fetch matches:",t),{success:!1,error:xe(t),matches:[],total:0}}})}generateMatches(e){return E(this,null,function*(){try{const t=yield this.getCurrentUserId();if(!t)throw new Error("User not authenticated");console.log(" Generating AI matches for item:",e);const r=yield this.db.getDocument(V,X.items,e),i=this.fieldMapper.getFieldName("items","user");if(r[i]!==t)throw new Error("You can only generate matches for your own items");const a=[N.equal("status","active"),N.notEqual(i,t),N.limit(50)];r.category&&a.push(N.equal("category",r.category));const l=yield this.db.listDocuments(V,X.items,a),u=[];for(const d of l.documents){const p=this.calculateMatchScore(r,d);if(p>=.5&&!(yield this.checkExistingMatch(e,d.$id))){const g={user_id:t,item_id:e,matched_item_id:d.$id,matched_user_id:d[i],match_score:p,match_reason:this.generateMatchReason(r,d,p),status:"pending",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},v=yield this.db.createDocument(V,X.matches,ze.unique(),g);u.push(v)}}return console.log(" Generated ".concat(u.length," new matches")),{success:!0,matches:u,total:u.length}}catch(t){return console.error(" Failed to generate matches:",t),{success:!1,error:xe(t),matches:[]}}})}calculateMatchScore(e,t){let r=0;e.category===t.category&&(r+=.3);const i=e.estimated_value||e.ai_estimated_value||0,a=t.estimated_value||t.ai_estimated_value||0;if(i>0&&a>0){const g=Math.abs(i-a),v=(i+a)/2,b=Math.max(0,1-g/v);r+=b*.25}const l={new:5,like_new:4,good:3,fair:2,poor:1},u=l[e.condition]||3,d=l[t.condition]||3,p=Math.abs(u-d),h=Math.max(0,1-p/4);if(r+=h*.2,e.location_lat&&e.location_lng&&t.location_lat&&t.location_lng){const g=Ss.calculateDistance(e.location_lat,e.location_lng,t.location_lat,t.location_lng),v=Math.max(0,1-g/100);r+=v*.15}if(e.ai_tags&&t.ai_tags){const g=JSON.parse(e.ai_tags||"[]"),v=JSON.parse(t.ai_tags||"[]");if(g.length>0&&v.length>0){const C=g.filter(T=>v.includes(T)).length/Math.max(g.length,v.length);r+=C*.1}}return r}generateMatchReason(e,t,r){const i=[];e.category===t.category&&i.push("Both items are in the ".concat(e.category," category"));const a=e.estimated_value||e.ai_estimated_value||0,l=t.estimated_value||t.ai_estimated_value||0;if(a>0&&l>0&&Math.abs(a-l)<a*.2&&i.push("Similar estimated values"),e.condition===t.condition&&i.push("Both items are in ".concat(e.condition," condition")),e.location_lat&&t.location_lat){const u=Ss.calculateDistance(e.location_lat,e.location_lng,t.location_lat,t.location_lng);u<25&&i.push("Located within ".concat(Math.round(u)," miles"))}return i.length===0&&i.push("".concat(Math.round(r*100),"% compatibility score")),i.join(". ")}checkExistingMatch(e,t){return E(this,null,function*(){try{const r=[N.equal("item_id",e),N.equal("matched_item_id",t),N.limit(1)];return(yield this.db.listDocuments(V,X.matches,r)).documents.length>0}catch(r){return!1}})}acceptMatch(e){return E(this,null,function*(){try{const t=yield this.getCurrentUserId();if(!t)throw new Error("User not authenticated");console.log(" Accepting match:",e);const r=yield this.db.getDocument(V,X.matches,e);if(r.user_id!==t)throw new Error("You can only accept your own matches");const i=yield this.db.updateDocument(V,X.matches,e,{status:"accepted",updated_at:new Date().toISOString()}),a=yield this.db.createDocument(V,X.trades,ze.unique(),{initiator_id:t,recipient_id:r.matched_user_id,initiator_items:JSON.stringify([r.item_id]),recipient_items:JSON.stringify([r.matched_item_id]),status:"pending",message:"I'm interested in trading based on our AI match (".concat(Math.round(r.match_score*100),"% compatibility)"),created_at:new Date().toISOString(),updated_at:new Date().toISOString()});return console.log(" Match accepted and trade created:",a.$id),{success:!0,match:i,trade:a}}catch(t){return console.error(" Failed to accept match:",t),{success:!1,error:xe(t)}}})}declineMatch(e){return E(this,null,function*(){try{const t=yield this.getCurrentUserId();if(!t)throw new Error("User not authenticated");if(console.log(" Declining match:",e),(yield this.db.getDocument(V,X.matches,e)).user_id!==t)throw new Error("You can only decline your own matches");const i=yield this.db.updateDocument(V,X.matches,e,{status:"declined",updated_at:new Date().toISOString()});return console.log(" Match declined"),{success:!0,match:i}}catch(t){return console.error(" Failed to decline match:",t),{success:!1,error:xe(t)}}})}getMatchingPreferences(){return E(this,null,function*(){try{const e=yield this.getCurrentUserId();if(!e)throw new Error("User not authenticated");const t=yield this.db.getDocument(V,X.users,e),r=t.preferences?JSON.parse(t.preferences):{};return{success:!0,preferences:{categories:r.preferred_categories||[],max_distance:r.max_distance||50,min_value:r.min_value||0,max_value:r.max_value||1e4,conditions:r.acceptable_conditions||["new","like_new","good"],auto_match:r.auto_match!==!1}}}catch(e){return console.error(" Failed to get preferences:",e),{success:!1,error:xe(e),preferences:{}}}})}updateMatchingPreferences(e){return E(this,null,function*(){try{const t=yield this.getCurrentUserId();if(!t)throw new Error("User not authenticated");console.log(" Updating matching preferences:",e);const r=yield this.db.updateDocument(V,X.users,t,{preferences:JSON.stringify(e),updated_at:new Date().toISOString()});return console.log(" Preferences updated"),{success:!0,preferences:e}}catch(t){return console.error(" Failed to update preferences:",t),{success:!1,error:xe(t)}}})}provideFeedback(e,t){return E(this,null,function*(){try{const r=yield this.getCurrentUserId();if(!r)throw new Error("User not authenticated");if(console.log(" Providing feedback on match:",e,t),(yield this.db.getDocument(V,X.matches,e)).user_id!==r)throw new Error("You can only provide feedback on your own matches");const a=yield this.db.updateDocument(V,X.matches,e,{user_feedback:t,updated_at:new Date().toISOString()});return console.log(" Feedback recorded"),{success:!0,match:a}}catch(r){return console.error(" Failed to provide feedback:",r),{success:!1,error:xe(r)}}})}}const fi=new _I,yt=Yo("trading-post:apiWrapper");class EI{constructor(){this.currentUser=null}getCurrentUser(){return E(this,null,function*(){try{return this.currentUser||(this.currentUser=yield Le.get()),this.currentUser}catch(e){return yt.error("Failed to get current user",e),null}})}get(e){return E(this,null,function*(){yt.info("GET request",{endpoint:e});const t=yield this.getCurrentUser();if(!t)throw yt.error("GET request failed - user not authenticated",{endpoint:e}),new Error("User not authenticated");switch(e){case"/notifications":return yt.debug("Fetching notifications",{userId:t.$id}),{data:yield xt.getNotifications(t.$id)};case"/notifications/settings":return{data:yield xt.getNotificationSettings(t.$id)};case"/memberships/my-membership":return console.log(" [ApiWrapper] Membership request received:",{userExists:!!t,userId:t==null?void 0:t.$id,userEmail:t==null?void 0:t.email}),yt.debug("Fetching membership",{userId:t.$id}),!t||!t.$id?(console.error(" [ApiWrapper] No user available for membership fetch"),{data:{type:"free",status:"active",features:[]}}):{data:yield pI.getMyMembership(t.$id)};case"/saved-items":return yt.debug("Fetching saved items",{userId:t.$id}),{data:yield Ld.getSavedItems(t.$id)};case"/matching/matching-preferences":return{data:(yield fi.getMatchingPreferences()).preferences};default:return yt.warn("Unhandled GET endpoint",{endpoint:e}),{data:null}}})}post(e,t){return E(this,null,function*(){yt.info("POST request",{endpoint:e,hasData:!!t});const r=yield this.getCurrentUser();if(!["/api/errors"].includes(e)&&!r)throw yt.error("POST request failed - user not authenticated",{endpoint:e}),new Error("User not authenticated");switch(e){case"/items":return yt.debug("Creating item",{userId:r==null?void 0:r.$id}),{data:yield Ss.createItem(t)};case"/api/listings/search":return{data:yield Ss.searchItems(t)};case"/matching/accept-match":return{data:yield fi.acceptMatch(t.matchId)};case"/matching/decline-match":return{data:yield fi.declineMatch(t.matchId)};case"/notifications":return{data:yield xt.createNotification(r.$id,t)};case"/api/errors":return yt.debug("Logging error via API wrapper",{errorType:t==null?void 0:t.type}),{data:vI.logError(t)};case"/saved-items":return{data:yield Ld.saveItem(r.$id,t.itemId)};default:return yt.warn("Unhandled POST endpoint",{endpoint:e}),{data:null}}})}patch(e,t){return E(this,null,function*(){yt.info("PATCH request",{endpoint:e,hasData:!!t});const r=yield this.getCurrentUser();if(!r)throw yt.error("PATCH request failed - user not authenticated",{endpoint:e}),new Error("User not authenticated");if(e.includes("/notifications/")&&e.endsWith("/read")){const i=e.split("/")[2];return{data:yield xt.markAsRead(i)}}switch(e){case"/notifications/read-all":return{data:yield xt.markAllAsRead(r.$id)};case"/notifications/settings":return{data:yield xt.updateNotificationSettings(r.$id,t)};default:return yt.warn("Unhandled PATCH endpoint",{endpoint:e}),{data:null}}})}delete(e){return E(this,null,function*(){yt.info("DELETE request",{endpoint:e});const t=yield this.getCurrentUser();if(!t)throw yt.error("DELETE request failed - user not authenticated",{endpoint:e}),new Error("User not authenticated");if(e.startsWith("/notifications/")&&e!=="/notifications/old"){const r=e.split("/")[2];return{data:yield xt.deleteNotification(r)}}if(e.startsWith("/saved-items/")){const r=e.split("/")[2];return{data:yield Ld.unsaveItem(t.$id,r)}}switch(e){case"/notifications/old":return{data:yield xt.deleteOldNotifications(t.$id)};default:return yt.warn("Unhandled DELETE endpoint",{endpoint:e}),{data:null}}})}}const si=new EI,hc={get:n=>si.get(n),post:(n,e)=>si.post(n,e),patch:(n,e)=>si.patch(n,e),delete:n=>si.delete(n),put:(n,e)=>E(null,null,function*(){const t=yield si.getCurrentUser();if(!t)throw new Error("User not authenticated");switch(n){case"/users/me":return{data:yield we.updateDocument(V,X.users,t.$id,e)};case"/matching/matching-preferences":return{data:yield fi.updateMatchingPreferences(e)};default:return si.post(n,e)}})},xI="",CI=n=>(n==null?void 0:n.toLowerCase())==="get"?{"Cache-Control":"public, max-age=300"}:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"},Ne=at.create({baseURL:xI,headers:{"Content-Type":"application/json","ngrok-skip-browser-warning":"true"},timeout:1e4}),hs=new Map;Ne.interceptors.request.use(n=>{var t,r,i;const e=localStorage.getItem("token");if(Object.assign(n.headers,CI(n.method)),((t=n.method)==null?void 0:t.toLowerCase())!=="get"||n.bustCache){const a=(r=n.url)!=null&&r.includes("?")?"&":"?";n.url="".concat(n.url).concat(a,"_cb=").concat(Date.now())}if(((i=n.method)==null?void 0:i.toLowerCase())==="get"){const a="".concat(n.method,":").concat(n.url);if(hs.has(a))return hs.get(a);const l=new Promise((u,d)=>{n._resolve=u,n._reject=d});hs.set(a,l),n._requestKey=a}return e&&(n.headers.Authorization="Bearer ".concat(e)),n},n=>Promise.reject(n));Ne.interceptors.response.use(n=>{if(n.config._requestKey){const e=n.config._requestKey;hs.has(e)&&hs.delete(e)}return n},n=>E(null,null,function*(){var i,a,l,u,d,p,h,g,v;const e=n.config;if(e!=null&&e._requestKey){const b=e._requestKey;hs.has(b)&&hs.delete(b)}if(((i=n.response)==null?void 0:i.status)===401){if(console.log(" 401 Error - Handling authentication failure"),(l=(a=n.config)==null?void 0:a.url)!=null&&l.includes("/token"))console.log(" Login attempt failed - letting Redux handle the error");else{console.log(" Session expired or invalid token detected"),localStorage.removeItem("token");const b=window.location.pathname;if(!b.startsWith("/login")&&!b.startsWith("/signup")){console.log(" Redirecting to login from:",b);const C=new CustomEvent("auth-expired");window.dispatchEvent(C),window.location.href="/login",De.error("Your session has expired. Please log in again.")}else console.log(" Already on auth page, not redirecting")}e._retry=!0}const t=new cp(((d=(u=n.response)==null?void 0:u.data)==null?void 0:d.detail)||n.message,((p=n.response)==null?void 0:p.status)||0,(h=n.response)==null?void 0:h.data),r=!((v=(g=n.config)==null?void 0:g.url)!=null&&v.includes("/token"));return XT(t,{showToast:r,logToConsole:!1}),Promise.reject(n)}));const TI=n=>{var e;return n.includes("/matching/user-matches")?[]:n.includes("/analytics/raw-data")?{events:[{timestamp:Date.now()-864e5,type:"view",data:{}},{timestamp:Date.now()-432e5,type:"search",data:{}},{timestamp:Date.now()-36e5,type:"click",data:{}}],trades:[]}:n.includes("/analytics/user-behavior")?{preferences:{categories:[],priceRange:{min:0,max:1e3},location:{radius:50}},patterns:{mostActiveTime:"evening",avgSessionDuration:3e5,searchFrequency:"daily"},metrics:{listings_created:0,trades_completed:0,messages_sent:0,average_response_time:0}}:n.includes("/analytics/peer-data")?{activityDistribution:[.1,.2,.3,.4,.5,.6,.7,.8,.9,1],successRateDistribution:[.1,.2,.3,.4,.5,.6,.7,.8,.9,1],engagementDistribution:[.1,.2,.3,.4,.5,.6,.7,.8,.9,1],responseTimeDistribution:[1e3,2e3,3e3,4e3,5e3,6e3,7e3,8e3,9e3,1e4]}:n.includes("/users/")&&n.includes("/trading-history")?(console.log(" [API] Service temporarily unavailable for",n,"- providing fallback"),[{id:"1",date:new Date().toISOString(),type:"trade",status:"completed",partner:"User",items_exchanged:[]}]):n.includes("/analytics/market-trends")?[{category:"Electronics",trend:"stable",volume:0,change:0},{category:"Furniture",trend:"stable",volume:0,change:0},{category:"Clothing",trend:"stable",volume:0,change:0}]:n.includes("/social/user-data")?{connections:[],interactions:[],social_score:0}:n.includes("/users/")&&n.includes("/profile")?{id:((e=n.split("/users/")[1])==null?void 0:e.split("/")[0])||"unknown",username:"User",email:"user@example.com",profile_complete:!1,created_at:new Date().toISOString(),stats:{items_listed:0,trades_completed:0,rating:0}}:n.includes("/analytics")||n.includes("/behavior")?[]:n.includes("/trading")||n.includes("/history")?[]:n.includes("/market")||n.includes("/trends")?[]:n.includes("/social")||n.includes("/peer")?[]:[]},II=Ne.get,kI=Ne.post,AI=Ne.patch,RI=Ne.delete;Ne.get=function(n,e){return E(this,null,function*(){var t,r,i;try{return n==="/notifications"||n==="/notifications/settings"||n==="/memberships/my-membership"||n==="/saved-items"?hc.get(n):yield II.call(this,n,e)}catch(a){if(((t=a.response)==null?void 0:t.data)==="ke"||(r=a.message)!=null&&r.includes("ke")||((i=a.response)==null?void 0:i.status)===404)return console.warn(" [API] Service temporarily unavailable for ".concat(n," - providing fallback")),{data:TI(n),status:200,statusText:"OK (Fallback)"};throw a}})};Ne.post=function(n,e,t){return E(this,null,function*(){return n==="/notifications"||n==="/api/errors"||n==="/saved-items"?hc.post(n,e):kI.call(this,n,e,t)})};Ne.patch=function(n,e,t){return E(this,null,function*(){return n.includes("/notifications")||n==="/saved-items"?hc.patch(n,e):AI.call(this,n,e,t)})};Ne.delete=function(n,e){return E(this,null,function*(){return n.includes("/notifications")||n.includes("/saved-items")?hc.delete(n):RI.call(this,n,e)})};const nt=Yo("trading-post:auth");let MI=class{constructor(){this.currentUser=null,this.currentSession=null}register(a,l,u){return E(this,arguments,function*(e,t,r,i={}){nt.info("Registering new user",{email:e,name:r,hasAdditionalData:!!i});try{const d=yield Le.create(ze.unique(),e,t,r);nt.success("User account created",{userId:d.$id});const p={name:r,email:e,username:i.username||e.split("@")[0],created_at:new Date().toISOString(),updated_at:new Date().toISOString(),email_verified:!1,is_active:!0,opt_in_ai:!0,preferences:{},ratings:{average:0,count:0}};i.zipcode&&(p.zipcode=i.zipcode),p.opt_in_location=!0,i.latitude&&(p.latitude=i.latitude),i.longitude&&(p.longitude=i.longitude);const h=yield we.createDocument(V,X.users,d.$id,p);return nt.success("User profile created in database",{userId:d.$id}),{user:d,profile:h,success:!0}}catch(d){return nt.error("Registration failed",{email:e,error:d.message,code:d.code}),{success:!1,error:xe(d)}}})}login(e,t){return E(this,null,function*(){var r;nt.info("User login attempt",{email:e});try{const i=yield Le.createEmailPasswordSession(e,t);nt.success("Session created",{sessionId:i.$id});const a=yield Le.get();nt.debug("User details retrieved",{userId:a.$id});let l;try{l=yield we.getDocument(V,X.users,a.$id)}catch(u){nt.warn("Profile missing for authenticated user, creating",{userId:a.$id}),l=yield we.createDocument(V,X.users,a.$id,{name:a.name||"",email:a.email,username:((r=a.email)==null?void 0:r.split("@")[0])||"",created_at:a.$createdAt,updated_at:new Date().toISOString(),email_verified:a.emailVerification,is_active:!0,opt_in_ai:!0,preferences:a.prefs||{},ratings:{average:0,count:0}})}return this.currentUser=a,this.currentSession=i,localStorage.setItem("appwrite_user",JSON.stringify(a)),localStorage.setItem("appwrite_session",JSON.stringify(i)),nt.success("Login successful",{userId:a.$id}),{user:a,profile:l,session:i,success:!0}}catch(i){return nt.error("Login failed",{email:e,error:i.message,code:i.code}),{success:!1,error:xe(i)}}})}logout(){return E(this,null,function*(){nt.info("Logging out user");try{return yield Le.deleteSession("current"),this.currentUser=null,this.currentSession=null,localStorage.removeItem("appwrite_user"),localStorage.removeItem("appwrite_session"),nt.success("Logout successful"),{success:!0}}catch(e){return nt.error("Logout failed",{error:e.message}),{success:!1,error:xe(e)}}})}getCurrentUser(){return E(this,null,function*(){try{if(this.currentUser)return{user:this.currentUser,success:!0};const e=localStorage.getItem("appwrite_user");e&&(this.currentUser=JSON.parse(e));const t=yield Le.get();return this.currentUser=t,localStorage.setItem("appwrite_user",JSON.stringify(t)),{user:t,success:!0}}catch(e){return this.currentUser=null,localStorage.removeItem("appwrite_user"),localStorage.removeItem("appwrite_session"),e.code===401?{user:null,success:!0}:(nt.error("Get current user failed",{error:e.message,code:e.code}),{success:!1,error:xe(e)})}})}getUserProfile(e=null){return E(this,null,function*(){var t,r,i,a,l;try{const u=e||((t=this.currentUser)==null?void 0:t.$id);if(!u)throw new Error("No user ID provided");try{return{profile:yield we.getDocument(V,X.users,u),success:!0}}catch(d){if(d.code===404&&u===((r=this.currentUser)==null?void 0:r.$id)){nt.info("Creating missing profile for OAuth user",{userId:u});const p=yield Le.get(),h=yield we.createDocument(V,X.users,u,{name:p.name||"User",email:p.email||"",username:((i=p.email)==null?void 0:i.split("@")[0])||"user_".concat(u.slice(-8)),created_at:p.$createdAt||new Date().toISOString(),updated_at:new Date().toISOString(),email_verified:p.emailVerification||!1,is_active:!0,opt_in_ai:!0,preferences:p.prefs||{},ratings:{average:0,count:0},latitude:((a=p.prefs)==null?void 0:a.latitude)||null,longitude:((l=p.prefs)==null?void 0:l.longitude)||null});return nt.success("Created missing profile for OAuth user",{userId:u}),{profile:h,success:!0}}else{if(d.code===404)return nt.warn("Profile not found, returning default structure",{userId:u}),{profile:{$id:u,name:"Unknown User",email:"",username:"user_".concat(u.slice(-8)),created_at:new Date().toISOString(),updated_at:new Date().toISOString(),email_verified:!1,is_active:!0,opt_in_ai:!0,preferences:{},ratings:{average:0,count:0},latitude:null,longitude:null},success:!0,isDefault:!0};throw d}}}catch(u){return nt.error("Get user profile failed",{userId:e,error:u.message}),{success:!1,error:xe(u)}}})}updateProfile(e){return E(this,null,function*(){try{if(!this.currentUser)throw new Error("No authenticated user");nt.info("Updating user profile",{userId:this.currentUser.$id,fields:Object.keys(e)});const t=yield we.updateDocument(V,X.users,this.currentUser.$id,Y(A({},e),{updated_at:new Date().toISOString()}));return nt.success("Profile updated successfully",{userId:this.currentUser.$id}),{profile:t,success:!0}}catch(t){return nt.error("Update profile failed",{error:t.message}),{success:!1,error:xe(t)}}})}updatePassword(e,t){return E(this,null,function*(){try{return console.log(" Updating password..."),yield Le.updatePassword(t,e),console.log(" Password updated successfully"),{success:!0}}catch(r){return console.error(" Update password failed:",r),{success:!1,error:xe(r)}}})}updateEmail(e,t){return E(this,null,function*(){try{return console.log(" Updating email..."),yield Le.updateEmail(e,t),console.log(" Email updated successfully"),{success:!0}}catch(r){return console.error(" Update email failed:",r),{success:!1,error:xe(r)}}})}requestPasswordReset(e){return E(this,null,function*(){try{return console.log(" Requesting password reset for:",e),yield Le.createRecovery(e,"".concat(window.location.origin,"/reset-password")),console.log(" Password reset email sent"),{success:!0}}catch(t){return console.error(" Password reset request failed:",t),{success:!1,error:xe(t)}}})}completePasswordReset(e,t,r){return E(this,null,function*(){try{return console.log(" Completing password reset..."),yield Le.updateRecovery(e,t,r),console.log(" Password reset completed"),{success:!0}}catch(i){return console.error(" Password reset completion failed:",i),{success:!1,error:xe(i)}}})}verifyEmail(e,t){return E(this,null,function*(){try{return console.log(" Verifying email..."),yield Le.updateVerification(e,t),this.currentUser&&this.currentUser.$id===e&&(yield this.updateProfile({email_verified:!0})),console.log(" Email verified successfully"),{success:!0}}catch(r){return console.error(" Email verification failed:",r),{success:!1,error:xe(r)}}})}requestEmailVerification(){return E(this,null,function*(){try{return console.log(" Requesting email verification..."),yield Le.createVerification("".concat(window.location.origin,"/verify-email")),console.log(" Verification email sent"),{success:!0}}catch(e){return console.error(" Email verification request failed:",e),{success:!1,error:xe(e)}}})}getSessions(){return E(this,null,function*(){try{return{sessions:(yield Le.listSessions()).sessions,success:!0}}catch(e){return console.error(" Get sessions failed:",e),{success:!1,error:xe(e)}}})}deleteSession(e){return E(this,null,function*(){var t;try{return yield Le.deleteSession(e),(e==="current"||e===((t=this.currentSession)==null?void 0:t.$id))&&(this.currentUser=null,this.currentSession=null,localStorage.removeItem("appwrite_user"),localStorage.removeItem("appwrite_session")),{success:!0}}catch(r){return console.error(" Delete session failed:",r),{success:!1,error:xe(r)}}})}isAuthenticated(){return!!this.currentUser}getUserId(){var e;return((e=this.currentUser)==null?void 0:e.$id)||null}initializeFromStorage(){return E(this,null,function*(){try{const e=localStorage.getItem("appwrite_user"),t=localStorage.getItem("appwrite_session");return e&&t?(this.currentUser=JSON.parse(e),this.currentSession=JSON.parse(t),(yield this.getCurrentUser()).success):!1}catch(e){return nt.error("Initialize from storage failed",{error:e.message}),this.currentUser=null,this.currentSession=null,localStorage.removeItem("appwrite_user"),localStorage.removeItem("appwrite_session"),!1}})}};const Lv=new MI,jd=cn("user/fetchProfile",()=>E(null,null,function*(){console.log(" Fetching user profile...");const n=yield Ne.get("/users/me");return console.log(" User profile fetched:",n.data),n.data})),$d=cn("user/updateProfile",n=>E(null,null,function*(){return(yield Ne.put("/users/me",n)).data})),Ud=cn("user/login",(t,r)=>E(null,[t,r],function*(n,{rejectWithValue:e}){var i;try{console.log(" Logging in with Appwrite:",n.email);const a=yield Lv.login(n.email,n.password);return a.success?(console.log(" Login successful:",a.user.$id),{id:a.user.$id,email:a.user.email,name:a.user.name,username:((i=a.profile)==null?void 0:i.username)||a.user.email.split("@")[0],created_at:a.user.$createdAt,profile:a.profile}):e(a.error)}catch(a){return console.error(" Login failed:",a),e({message:a.message||"Login failed",code:a.code||"login_error"})}})),Fd=cn("user/signup",(t,r)=>E(null,[t,r],function*(n,{rejectWithValue:e}){var i;try{console.log(" Registering user with Appwrite:",n);const a={username:n.username,zipcode:n.zipcode,optInLocation:!0},l=yield Lv.register(n.email,n.password,n.name||n.username,a);return l.success?(console.log(" Registration successful:",l.user.$id),{id:l.user.$id,email:l.user.email,name:l.user.name,username:((i=l.profile)==null?void 0:i.username)||n.email.split("@")[0],created_at:l.user.$createdAt,profile:l.profile}):e(l.error)}catch(a){return console.error(" Registration failed:",a),e({message:a.message||"Registration failed",code:a.code||"registration_error"})}})),jv=cn("user/logout",()=>E(null,null,function*(){return localStorage.removeItem("token"),null})),$v=ip({name:"user",initialState:{currentUser:null,isAuthenticated:!1,loading:!1,error:null},reducers:{clearError:n=>{n.error=null},setError:(n,e)=>{n.error=e.payload,n.loading=!1},setUser:(n,e)=>{n.currentUser=e.payload,n.isAuthenticated=!0,n.loading=!1,n.error=null}},extraReducers:n=>{n.addCase(jd.pending,e=>{e.loading=!0,e.error=null}).addCase(jd.fulfilled,(e,t)=>{e.loading=!1,e.currentUser=t.payload,e.isAuthenticated=!0}).addCase(jd.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message,localStorage.getItem("token")&&(console.log(" User profile fetch failed with token present - clearing invalid token"),localStorage.removeItem("token")),e.isAuthenticated=!1,e.currentUser=null}).addCase($d.pending,e=>{e.loading=!0,e.error=null}).addCase($d.fulfilled,(e,t)=>{e.loading=!1,e.currentUser=t.payload}).addCase($d.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message}).addCase(Ud.pending,e=>{e.loading=!0,e.error=null}).addCase(Ud.fulfilled,(e,t)=>{e.loading=!1,e.currentUser=t.payload,e.isAuthenticated=!0}).addCase(Ud.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||t.error.message||"Login failed. Please try again.",console.error("Login rejected with error:",t.error)}).addCase(jv.fulfilled,e=>{e.currentUser=null,e.isAuthenticated=!1}).addCase(Fd.pending,e=>{e.loading=!0,e.error=null}).addCase(Fd.fulfilled,(e,t)=>{e.loading=!1}).addCase(Fd.rejected,(e,t)=>{e.loading=!1,t.payload?e.error=t.payload.message||t.payload||"Registration failed":t.error?e.error=t.error.message||"Registration failed":e.error="Registration failed. Please try again.",console.error("Signup rejected with error:",t.payload||t.error)})}}),{clearError:zd,setError:Oy,setUser:vl}=$v.actions,OI=$v.reducer;class PI{constructor(){this.semanticCache=new Map,this.userBehaviorCache=new Map,this.marketTrendsCache=new Map,this.matchingQueue=[],this.isProcessing=!1,this.config={semanticSimilarityThreshold:.7,behaviorLearningRate:.1,marketTrendWeight:.15,locationWeight:.25,valueWeight:.35,categoryWeight:.2,behaviorWeight:.05,userHistoryWeight:.1,timePatternWeight:.05,seasonalWeight:.05,crossCategoryBonus:.15,bundleMatchBonus:.2}}findOptimizedMatches(r){return E(this,arguments,function*(e,t={}){try{const{maxMatches:i=20,includeSemanticMatches:a=!0,includeBundleMatches:l=!0,realTimeOptimization:u=!0,userPreferences:d=null}=t,p=yield this.getUserProfile(e),h=yield this.getUserBehaviorData(e),g=yield this.getMarketTrends(),v=yield this.getPotentialMatches(e,{includeSemanticMatches:a,includeBundleMatches:l,userPreferences:d||p.preferences}),b=yield this.scoreMatchesWithML(v,p,h,g);u&&(yield this.applyRealTimeOptimization(b,e));const C=b.sort((T,x)=>x.optimized_score-T.optimized_score).slice(0,i);return yield this.logMatchQuality(e,C),C}catch(i){throw console.error("Error in AI matching optimization:",i),i}})}scoreMatchesWithML(e,t,r,i){return E(this,null,function*(){const a=[];for(const l of e)try{const u=this.calculateValueCompatibility(l),d=this.calculateLocationScore(l,t),p=this.calculateCategoryScore(l,t),h=this.calculateBehaviorScore(l,r),g=yield this.calculateSemanticSimilarity(l),v=this.calculateTimePatternScore(l,r),b=this.calculateMarketTrendScore(l,i),C=this.calculateUserHistoryScore(l,t),T=this.calculateSeasonalScore(l),x=yield this.calculateCrossCategoryBonus(l),M=this.calculateBundleBonus(l),I=u*this.config.valueWeight+d*this.config.locationWeight+p*this.config.categoryWeight+h*this.config.behaviorWeight+C*this.config.userHistoryWeight+v*this.config.timePatternWeight+b*this.config.marketTrendWeight+T*this.config.seasonalWeight+x+M,R=this.generateAIReasoning({valueScore:u,locationScore:d,categoryScore:p,behaviorScore:h,semanticScore:g,crossCategoryBonus:x,bundleBonus:M,match:l}),O=this.calculateConfidenceLevel({valueScore:u,locationScore:d,categoryScore:p,behaviorScore:h,userProfile:t,match:l});a.push(Y(A({},l),{optimized_score:Math.min(1,Math.max(0,I)),confidence_level:Math.min(1,Math.max(0,O)),value_score:u,location_score:d,category_score:p,behavior_score:h,semantic_score:g,market_trend_score:b,ai_reasoning:R,match_type:this.determineMatchType(l,x,M),optimization_factors:{cross_category:x>0,bundle_match:M>0,high_behavior_match:h>.8,trending_item:b>.8,perfect_location:d>.9,seasonal_relevance:T>.7}}))}catch(u){console.error("Error scoring match:",u),a.push(Y(A({},l),{optimized_score:l.overall_score||.5,confidence_level:.5,ai_reasoning:"Basic compatibility match",match_type:"standard"}))}return a})}calculateSemanticSimilarity(e){return E(this,null,function*(){try{const t=e.item1_details||e.your_listing,r=e.item2_details||e.their_listing;if(!t||!r)return .5;const i="".concat(t.id,"_").concat(r.id);if(this.semanticCache.has(i))return this.semanticCache.get(i);const a=yield this.analyzeSemanticSimilarity({item1:{title:t.title,description:t.description,category:t.category,tags:t.tags||[]},item2:{title:r.title,description:r.description,category:r.category,tags:r.tags||[]}});return this.semanticCache.set(i,a),a}catch(t){return console.error("Error calculating semantic similarity:",t),.5}})}analyzeSemanticSimilarity(e){return E(this,null,function*(){const{item1:t,item2:r}=e,i=this.calculateTextSimilarity(t.title,r.title),a=this.calculateTextSimilarity(t.description||"",r.description||""),l=this.analyzeCategoryRelationship(t.category,r.category),u=this.calculateTagOverlap(t.tags,r.tags),d=this.analyzeBrandEquivalency(t,r),p=this.analyzeFunctionalEquivalency(t,r),h=i*.3+a*.2+l*.2+u*.1+d*.1+p*.1;return Math.min(1,Math.max(0,h))})}calculateBehaviorScore(e,t){if(!t||Object.keys(t).length===0)return .5;const r=e.item2_details||e.their_listing;if(!r)return .5;let i=.5;if(t.category_preferences){const a=t.category_preferences[r.category]||.5;i+=(a-.5)*.3}if(t.value_tolerance&&e.value_difference_percentage!==void 0){const a=Math.abs(e.value_difference_percentage),l=t.value_tolerance;a<=l?i+=.2:i-=.1}if(t.location_preferences&&e.distance_km){const a=t.location_preferences.max_distance||50;e.distance_km<=a?i+=.2:i-=.1}if(t.activity_patterns){const a=new Date().getHours();(t.activity_patterns.active_hours||[]).includes(a)&&(i+=.1)}return Math.min(1,Math.max(0,i))}calculateTimePatternScore(e,t){if(!t||!t.time_patterns)return .5;const r=new Date().getDay(),i=new Date().getHours(),a=t.time_patterns;let l=.5;return a.preferred_days&&a.preferred_days.includes(r)&&(l+=.3),a.active_hours&&a.active_hours.includes(i)&&(l+=.2),a.last_active&&Date.now()-new Date(a.last_active).getTime()<36e5&&(l+=.1),Math.min(1,Math.max(0,l))}calculateMarketTrendScore(e,t){if(!t||Object.keys(t).length===0)return .5;const r=e.item2_details||e.their_listing;if(!r)return .5;let i=.5;if(t.category_trends&&t.category_trends[r.category]){const a=t.category_trends[r.category];i+=a.popularity_score*.3}if(t.item_popularity){const a=this.generateItemKey(r),l=t.item_popularity[a]||.5;i+=l*.2}if(t.seasonal_items){const a=new Date().getMonth(),l=t.seasonal_items[a]||{};l[r.category]&&(i+=l[r.category]*.2)}return Math.min(1,Math.max(0,i))}calculateCrossCategoryBonus(e){return E(this,null,function*(){var l,u;const t=e.item1_details||e.your_listing,r=e.item2_details||e.their_listing;if(!t||!r||t.category===r.category)return 0;const i={Electronics:{Books:.1,Tools:.2,Appliances:.3},Gaming:{Electronics:.4,Collectibles:.3,Furniture:.2},Vehicles:{Tools:.5,Electronics:.3,Appliances:.2},Music:{Electronics:.4,Collectibles:.3,Furniture:.2},Art:{Collectibles:.4,Furniture:.3,Books:.2}},a=((l=i[t.category])==null?void 0:l[r.category])||((u=i[r.category])==null?void 0:u[t.category])||0;if(a>0){const d=yield this.calculateSemanticSimilarity(e);return a+d*.1}return 0})}calculateBundleBonus(e){const t=e.item1_details||e.your_listing,r=e.item2_details||e.their_listing;if(!t||!r||!(e.is_bundle_match||t.bundle_items&&t.bundle_items.length>1||r.bundle_items&&r.bundle_items.length>1))return 0;let a=0;return e.bundle_value_match&&e.bundle_value_match>.8&&(a+=.15),this.areComplementaryItems(t,r)&&(a+=.1),a}generateAIReasoning({valueScore:e,locationScore:t,categoryScore:r,behaviorScore:i,semanticScore:a,crossCategoryBonus:l,bundleBonus:u,match:d}){const p=[];return e>.8?p.push("excellent value match"):e>.6&&p.push("good value compatibility"),t>.8?p.push("very close location"):t>.6&&p.push("convenient distance"),i>.7?p.push("matches your preferences perfectly"):i>.6&&p.push("aligns with your interests"),l>.1&&p.push("intelligent cross-category match"),u>.1&&p.push("smart bundle opportunity"),a>.7&&p.push("semantically similar items"),p.length===0&&p.push("compatible trading opportunity"),"AI suggests this match because of ".concat(p.join(", "),".")}calculateConfidenceLevel({valueScore:e,locationScore:t,categoryScore:r,behaviorScore:i,userProfile:a,match:l}){var T;let u=.5;const d=a&&((T=a.trading_history)==null?void 0:T.length)>0,p=l.distance_km!==void 0,h=l.value_difference_percentage!==void 0,g=i!==.5;d&&(u+=.1),p&&(u+=.1),h&&(u+=.1),g&&(u+=.1);const v=[e,t,r,i],b=v.reduce((x,M)=>x+M,0)/v.length,C=v.reduce((x,M)=>x+Math.pow(M-b,2),0)/v.length;return u+=(1-C)*.2,Math.min(1,Math.max(.3,u))}calculateTextSimilarity(e,t){if(!e||!t)return 0;const r=e.toLowerCase().split(/\s+/),i=t.toLowerCase().split(/\s+/),a=r.filter(u=>i.includes(u)),l=[...new Set([...r,...i])];return a.length/l.length}analyzeCategoryRelationship(e,t){if(e===t)return 1;const r={"Electronics-Gaming":.8,"Books-Electronics":.6,"Tools-Vehicles":.7,"Music-Electronics":.7,"Art-Collectibles":.8,"Furniture-Art":.6,"Sports-Electronics":.5,"Health-Electronics":.5},i="".concat(e,"-").concat(t),a="".concat(t,"-").concat(e);return r[i]||r[a]||.2}calculateTagOverlap(e=[],t=[]){if(e.length===0||t.length===0)return 0;const r=new Set(e.map(u=>u.toLowerCase())),i=new Set(t.map(u=>u.toLowerCase())),a=[...r].filter(u=>i.has(u)),l=[...new Set([...r,...i])];return a.length/l.length}analyzeBrandEquivalency(e,t){const r={"apple-samsung":.8,"nike-adidas":.9,"playstation-xbox":.9,"iphone-galaxy":.9,"macbook-thinkpad":.7},i=this.extractBrand(e.title||""),a=this.extractBrand(t.title||"");if(!i||!a)return 0;const l="".concat(i,"-").concat(a).toLowerCase(),u="".concat(a,"-").concat(i).toLowerCase();return r[l]||r[u]||0}analyzeFunctionalEquivalency(e,t){const r={"laptop-desktop":.8,"phone-tablet":.7,"console-pc":.7,"book-ebook":.9,"vinyl-cd":.8,"camera-phone":.6},i=this.extractFunction(e),a=this.extractFunction(t);if(!i||!a)return 0;const l="".concat(i,"-").concat(a).toLowerCase(),u="".concat(a,"-").concat(i).toLowerCase();return r[l]||r[u]||0}extractBrand(e){const t=["apple","samsung","nike","adidas","sony","microsoft","google"],r=e.toLowerCase();return t.find(i=>r.includes(i))}extractFunction(e){const t=(e.title||"").toLowerCase(),r=(e.category||"").toLowerCase();return t.includes("laptop")||t.includes("notebook")?"laptop":t.includes("desktop")||t.includes("pc")?"desktop":t.includes("phone")||t.includes("mobile")?"phone":t.includes("tablet")||t.includes("ipad")?"tablet":r.includes("gaming")||t.includes("console")?"console":null}areComplementaryItems(e,t){const r=[["laptop","mouse"],["console","game"],["camera","lens"],["guitar","amplifier"],["book","bookmark"],["phone","case"]],i=(e.title||"").toLowerCase(),a=(t.title||"").toLowerCase();return r.some(([l,u])=>i.includes(l)&&a.includes(u)||i.includes(u)&&a.includes(l))}generateItemKey(e){const t=(e.title||"").toLowerCase().replace(/[^a-z0-9]/g,""),r=(e.category||"").toLowerCase();return"".concat(r,"_").concat(t.substring(0,20))}determineMatchType(e,t,r){return r>.1?"bundle":t>.1?"cross_category":e.overall_score>.8?"premium":"standard"}getUserProfile(e){return E(this,null,function*(){try{return(yield Ne.get("/users/".concat(e,"/profile"))).data}catch(t){return console.error("Error fetching user profile:",t),{preferences:{}}}})}getUserBehaviorData(e){return E(this,null,function*(){try{return(yield Ne.get("/analytics/user-behavior/".concat(e))).data}catch(t){return console.error("Error fetching user behavior data:",t),{}}})}getMarketTrends(){return E(this,null,function*(){try{const e="market_trends";if(this.marketTrendsCache.has(e)){const i=this.marketTrendsCache.get(e);if(Date.now()-i.timestamp<3e5)return i.data}const r=(yield Ne.get("/analytics/market-trends")).data;return this.marketTrendsCache.set(e,{data:r,timestamp:Date.now()}),r}catch(e){return console.error("Error fetching market trends:",e),{}}})}getPotentialMatches(r){return E(this,arguments,function*(e,t={}){try{try{return(yield Ne.post("/matching/potential-matches",A({user_id:e},t))).data}catch(g){console.warn("API endpoint not available, using fallback matching logic:",g.message)}const{databases:i,DATABASE_ID:a,COLLECTIONS:l,Query:u}=yield Ye(()=>E(null,null,function*(){const{databases:g,DATABASE_ID:v,COLLECTIONS:b,Query:C}=yield Promise.resolve().then(()=>pc);return{databases:g,DATABASE_ID:v,COLLECTIONS:b,Query:C}}),void 0),d=yield i.listDocuments(a,l.items,[u.equal("userId",e)]),p=yield i.listDocuments(a,l.items,[u.notEqual("userId",e),u.limit(50)]),h=[];return d.documents.forEach(g=>{p.documents.forEach(v=>{(g.category===v.category||Math.abs(g.estimated_value-v.estimated_value)<g.estimated_value*.3)&&h.push({id:"".concat(g.$id,"-").concat(v.$id),user_item:g,matched_item:v,score:Math.random()*.4+.6,match_reason:g.category===v.category?"Category match":"Value compatibility"})})}),h.slice(0,t.limit||10)}catch(i){return console.error("Error fetching potential matches:",i),[]}})}applyRealTimeOptimization(e,t){return E(this,null,function*(){return e})}logMatchQuality(e,t){return E(this,null,function*(){try{yield Ne.post("/analytics/match-quality",{user_id:e,matches:t.map(r=>({id:r.id,score:r.optimized_score,confidence:r.confidence_level,type:r.match_type}))})}catch(r){console.warn("Analytics API not available, logging match quality locally:",{userId:e,matchCount:t.length,avgScore:t.reduce((i,a)=>i+(a.optimized_score||.5),0)/t.length})}})}calculateValueCompatibility(e){if(!e.value_difference_percentage)return .7;const t=Math.abs(e.value_difference_percentage);return t<=5?1:t<=10?.9:t<=20?.8:t<=30?.6:.4}calculateLocationScore(e,t){var a;if(!e.distance_km)return .5;const r=((a=t.preferences)==null?void 0:a.max_distance_km)||50,i=e.distance_km;return i<=5?1:i<=15?.9:i<=r?.8:i<=r*1.5?.6:.3}calculateCategoryScore(e,t){const r=e.item2_details||e.their_listing;if(!r)return .5;const i=t.preferences||{},a=i.preferred_categories||[];return(i.excluded_categories||[]).includes(r.category)?.1:a.includes(r.category)?1:.7}calculateUserHistoryScore(e,t){if(!t.trading_history)return .5;const r=t.trading_history,i=e.item2_details||e.their_listing;if(!i)return .5;const a=r.filter(u=>{var d;return u.category===i.category||((d=u.similar_items)==null?void 0:d.includes(i.id))}),l=a.filter(u=>u.status==="completed");return a.length===0?.5:l.length/a.length}calculateSeasonalScore(e){var p,h;const t=e.item2_details||e.their_listing;if(!t)return .5;const r=new Date().getMonth(),a={0:["winter_sports","heating"],1:["winter_sports","heating"],2:["spring_cleaning","gardening"],3:["gardening","outdoor"],4:["gardening","outdoor"],5:["summer_sports","outdoor"],6:["summer_sports","outdoor"],7:["summer_sports","outdoor"],8:["school","back_to_school"],9:["school","autumn"],10:["holiday_prep","winter_prep"],11:["holiday","winter_sports"]}[r]||[],l=((p=t.category)==null?void 0:p.toLowerCase())||"",u=((h=t.title)==null?void 0:h.toLowerCase())||"";return a.some(g=>l.includes(g)||u.includes(g))?.8:.5}}const fp=new PI;class DI{constructor(){this.semanticCache=new Map,this.embeddingCache=new Map,this.categoryRelationships=new Map,this.brandEquivalencies=new Map,this.functionalMappings=new Map,this.initializeSemanticKnowledge(),this.config={similarityThreshold:.7,crossCategoryBonus:.15,brandEquivalencyWeight:.25,functionalWeight:.3,descriptionWeight:.2,titleWeight:.35,tagWeight:.15,cacheTimeout:36e5,maxCacheSize:1e4,stopWords:new Set(["the","a","an","and","or","but","in","on","at","to","for","of","with","by","this","that","these","those"]),minWordLength:2,maxKeywords:20}}findSemanticMatches(i,a){return E(this,arguments,function*(e,t,r={}){try{const{enableCrossCategory:l=!0,enableBrandEquivalency:u=!0,enableFunctionalMatching:d=!0,minSimilarityScore:p=.6}=r,h=[];if(!t||!Array.isArray(t))return console.warn("candidateItems is not an array:",t),[];const g=yield this.getItemEmbedding(e);for(const v of t)try{if(!l&&e.category===v.category)continue;const b=yield this.calculateSemanticSimilarity(e,v,g,{enableBrandEquivalency:u,enableFunctionalMatching:d});b.overall_score>=p&&h.push({item:v,semantic_score:b.overall_score,similarity_factors:b.factors,match_reasoning:b.reasoning,cross_category:e.category!==v.category,equivalency_type:b.equivalency_type})}catch(b){console.error("Error calculating semantic similarity for item:",v.id,b)}return h.sort((v,b)=>b.semantic_score-v.semantic_score),h}catch(l){return console.error("Error finding semantic matches:",l),[]}})}calculateSemanticSimilarity(a,l){return E(this,arguments,function*(e,t,r=null,i={}){const u="".concat(e.id,"_").concat(t.id);if(this.semanticCache.has(u)){const d=this.semanticCache.get(u);if(Date.now()-d.timestamp<this.config.cacheTimeout)return d.data}try{const d=r||(yield this.getItemEmbedding(e)),p=yield this.getItemEmbedding(t),h=this.calculateTextSimilarity(e.title,t.title),g=this.calculateTextSimilarity(e.description||"",t.description||""),v=this.calculateTagSimilarity(e.tags||[],t.tags||[]),b=i.enableBrandEquivalency?this.calculateBrandEquivalency(e,t):0,C=i.enableFunctionalMatching?this.calculateFunctionalEquivalency(e,t):0,T=this.calculateCategoryRelationship(e.category,t.category),x=this.calculateEmbeddingSimilarity(d,p),M=this.calculateFeatureSimilarity(e,t),I=this.calculatePriceEquivalency(e,t),R=h*this.config.titleWeight+g*this.config.descriptionWeight+v*this.config.tagWeight+b*this.config.brandEquivalencyWeight+C*this.config.functionalWeight+T*.15+x*.2+M*.1+I*.05,O=this.determineEquivalencyType({brandEquivalency:b,functionalEquivalency:C,categoryRelation:T,titleSimilarity:h,overall_score:R}),L=this.generateSemanticReasoning({item1:e,item2:t,titleSimilarity:h,brandEquivalency:b,functionalEquivalency:C,categoryRelation:T,equivalency_type:O}),H={overall_score:Math.min(1,Math.max(0,R)),factors:{title_similarity:h,description_similarity:g,tag_similarity:v,brand_equivalency:b,functional_equivalency:C,category_relation:T,embedding_similarity:x,feature_similarity:M,price_equivalency:I},equivalency_type:O,reasoning:L};return this.semanticCache.set(u,{data:H,timestamp:Date.now()}),H}catch(d){return console.error("Error calculating semantic similarity:",d),{overall_score:0,factors:{},equivalency_type:"none",reasoning:"Error calculating similarity"}}})}getItemEmbedding(e){return E(this,null,function*(){const t="embedding_".concat(e.id);if(this.embeddingCache.has(t)){const r=this.embeddingCache.get(t);if(Date.now()-r.timestamp<this.config.cacheTimeout)return r.data}try{const r=this.createCompositeText(e),i={tfidf:yield this.generateTFIDFEmbedding(r),keywords:this.generateKeywordEmbedding(r),features:this.generateFeatureEmbedding(e),category:this.generateCategoryEmbedding(e.category)};return this.embeddingCache.set(t,{data:i,timestamp:Date.now()}),i}catch(r){return console.error("Error generating item embedding:",r),{tfidf:[],keywords:[],features:[],category:[]}}})}calculateBrandEquivalency(e,t){const r=this.extractBrand(e.title),i=this.extractBrand(t.title);if(!r||!i)return 0;if(r===i)return 1;const a="".concat(r,"_").concat(i),l="".concat(i,"_").concat(r);return this.brandEquivalencies.has(a)?this.brandEquivalencies.get(a):this.brandEquivalencies.has(l)?this.brandEquivalencies.get(l):this.getCompetitorScore(r,i)}calculateFunctionalEquivalency(e,t){const r=this.extractFunction(e),i=this.extractFunction(t);if(!r||!i)return 0;if(r===i)return 1;const a="".concat(r,"_").concat(i),l="".concat(i,"_").concat(r);return this.functionalMappings.has(a)?this.functionalMappings.get(a):this.functionalMappings.has(l)?this.functionalMappings.get(l):this.getFunctionalRelationshipScore(r,i)}calculateCategoryRelationship(e,t){if(e===t)return 1;const r="".concat(e,"_").concat(t),i="".concat(t,"_").concat(e);return this.categoryRelationships.has(r)?this.categoryRelationships.get(r):this.categoryRelationships.has(i)?this.categoryRelationships.get(i):.1}calculateEmbeddingSimilarity(e,t){try{const r=this.cosineSimilarity(e.tfidf,t.tfidf),i=this.cosineSimilarity(e.keywords,t.keywords),a=this.cosineSimilarity(e.features,t.features),l=this.cosineSimilarity(e.category,t.category);return r*.4+i*.3+a*.2+l*.1}catch(r){return console.error("Error calculating embedding similarity:",r),0}}calculateFeatureSimilarity(e,t){let r=0,i=0;return["condition","age_years","brand","model","color","size"].forEach(l=>{e[l]!==void 0&&t[l]!==void 0&&(i++,l==="condition"?r+=this.compareConditions(e[l],t[l]):l==="age_years"?r+=this.compareAges(e[l],t[l]):e[l]===t[l]&&(r+=1))}),i>0?r/i:.5}calculatePriceEquivalency(e,t){const r=e.estimated_value||e.price,i=t.estimated_value||t.price;if(!r||!i)return .5;const a=Math.min(r,i)/Math.max(r,i);return a>=.9?1:a>=.8?.9:a>=.7?.8:a>=.5?.6:a>=.3?.4:.2}generateTFIDFEmbedding(e){return E(this,null,function*(){try{const t=this.tokenizeText(e),r={};t.forEach(l=>{r[l]=(r[l]||0)+1});const i=t.length,a=[];return Object.entries(r).forEach(([l,u])=>{const d=u/i,p=this.getIDF(l);a.push(d*p)}),this.normalizeVector(a)}catch(t){return console.error("Error generating TF-IDF embedding:",t),[]}})}generateKeywordEmbedding(e){const t=this.extractKeywords(e),r={};return t.forEach((i,a)=>{const l=1-a/t.length*.5;r[i]=l}),Object.values(r)}generateFeatureEmbedding(e){const t=[];return e.condition&&t.push(...this.encodeCondition(e.condition)),e.category&&t.push(...this.encodeCategory(e.category)),e.age_years!==void 0&&t.push(this.normalizeAge(e.age_years)),e.estimated_value!==void 0&&t.push(this.normalizePrice(e.estimated_value)),t}generateCategoryEmbedding(e){const t=["Electronics","Clothing","Books","Furniture","Tools","Vehicles","Services","Appliances","Collectibles","Sports","Music","Art","Garden","Kids","Pets","Health","Food","Gaming"],r=new Array(t.length).fill(0),i=t.indexOf(e);return i!==-1&&(r[i]=1),r}cosineSimilarity(e,t){if(!e.length||!t.length)return 0;const r=Math.max(e.length,t.length),i=[...e,...new Array(r-e.length).fill(0)],a=[...t,...new Array(r-t.length).fill(0)];let l=0,u=0,d=0;for(let p=0;p<r;p++)l+=i[p]*a[p],u+=i[p]*i[p],d+=a[p]*a[p];return u===0||d===0?0:l/(Math.sqrt(u)*Math.sqrt(d))}initializeSemanticKnowledge(){this.brandEquivalencies.set("apple_samsung",.85),this.brandEquivalencies.set("iphone_galaxy",.9),this.brandEquivalencies.set("macbook_thinkpad",.7),this.brandEquivalencies.set("macbook_surface",.75),this.brandEquivalencies.set("ipad_galaxy_tab",.85),this.brandEquivalencies.set("airpods_galaxy_buds",.8),this.brandEquivalencies.set("nike_adidas",.9),this.brandEquivalencies.set("playstation_xbox",.95),this.brandEquivalencies.set("nintendo_playstation",.7),this.brandEquivalencies.set("canon_nikon",.85),this.brandEquivalencies.set("sony_panasonic",.75),this.functionalMappings.set("smartphone_tablet",.7),this.functionalMappings.set("laptop_desktop",.8),this.functionalMappings.set("console_gaming_pc",.75),this.functionalMappings.set("ebook_physical_book",.85),this.functionalMappings.set("vinyl_cd",.8),this.functionalMappings.set("digital_camera_phone_camera",.6),this.functionalMappings.set("smartwatch_fitness_tracker",.7),this.functionalMappings.set("headphones_speakers",.65),this.functionalMappings.set("keyboard_piano",.75),this.categoryRelationships.set("Electronics_Gaming",.8),this.categoryRelationships.set("Electronics_Appliances",.7),this.categoryRelationships.set("Books_Electronics",.4),this.categoryRelationships.set("Music_Electronics",.75),this.categoryRelationships.set("Art_Collectibles",.65),this.categoryRelationships.set("Sports_Electronics",.5),this.categoryRelationships.set("Tools_Electronics",.45),this.categoryRelationships.set("Vehicles_Electronics",.55),this.categoryRelationships.set("Gaming_Collectibles",.6),this.categoryRelationships.set("Furniture_Electronics",.3),this.categoryRelationships.set("Health_Electronics",.5)}createCompositeText(e){return[e.title||"",e.description||"",e.category||"",(e.tags||[]).join(" "),e.brand||"",e.model||""].filter(t=>t.length>0).join(" ")}tokenizeText(e){return e.toLowerCase().replace(/[^\w\s]/g," ").split(/\s+/).filter(t=>t.length>=this.config.minWordLength&&!this.config.stopWords.has(t))}extractKeywords(e){const t=this.tokenizeText(e),r={};return t.forEach(i=>{r[i]=(r[i]||0)+1}),Object.entries(r).sort(([,i],[,a])=>a-i).slice(0,this.config.maxKeywords).map(([i])=>i)}extractBrand(e){const t=["apple","samsung","google","microsoft","sony","nintendo","lg","nike","adidas","under armour","puma","reebok","canon","nikon","fujifilm","olympus","panasonic","honda","toyota","ford","bmw","audi","mercedes","lego","hasbro","mattel","fisher-price","dell","hp","lenovo","asus","acer"],r=e.toLowerCase();return t.find(i=>r.includes(i))}extractFunction(e){const t=(e.title||"").toLowerCase(),r=(e.category||"").toLowerCase(),i=(e.description||"").toLowerCase(),a="".concat(t," ").concat(r," ").concat(i);return a.includes("smartphone")||a.includes("phone")||a.includes("mobile")?"smartphone":a.includes("tablet")||a.includes("ipad")?"tablet":a.includes("laptop")||a.includes("notebook")?"laptop":a.includes("desktop")||a.includes("pc")&&!a.includes("laptop")?"desktop":a.includes("console")||a.includes("playstation")||a.includes("xbox")?"console":a.includes("smartwatch")||a.includes("watch")?"smartwatch":a.includes("headphones")||a.includes("earbuds")?"headphones":a.includes("speaker")?"speaker":a.includes("camera")&&!a.includes("phone")?"camera":a.includes("ebook")||a.includes("book")&&a.includes("digital")?"ebook":a.includes("vinyl")||a.includes("record")?"vinyl":a.includes("cd")||a.includes("compact disc")?"cd":null}calculateTextSimilarity(e,t){if(!e||!t)return 0;const r=new Set(this.tokenizeText(e)),i=new Set(this.tokenizeText(t)),a=new Set([...r].filter(u=>i.has(u))),l=new Set([...r,...i]);return l.size>0?a.size/l.size:0}calculateTagSimilarity(e,t){if(!e.length||!t.length)return 0;const r=new Set(e.map(u=>u.toLowerCase())),i=new Set(t.map(u=>u.toLowerCase())),a=new Set([...r].filter(u=>i.has(u))),l=new Set([...r,...i]);return l.size>0?a.size/l.size:0}getCompetitorScore(e,t){var i,a;const r={apple:["samsung","google","microsoft"],samsung:["apple","lg","google"],nike:["adidas","puma","under armour"],canon:["nikon","sony","fujifilm"],playstation:["xbox","nintendo"],honda:["toyota","nissan","ford"]};return(i=r[e])!=null&&i.includes(t)||(a=r[t])!=null&&a.includes(e)?.75:.1}getFunctionalRelationshipScore(e,t){var i,a;const r={smartphone:{tablet:.7,smartwatch:.6,camera:.5},laptop:{desktop:.8,tablet:.6},console:{desktop:.7,laptop:.6},headphones:{speaker:.6,smartphone:.4},camera:{smartphone:.5,tablet:.3}};return((i=r[e])==null?void 0:i[t])||((a=r[t])==null?void 0:a[e])||.1}determineEquivalencyType(e){const{brandEquivalency:t,functionalEquivalency:r,categoryRelation:i,titleSimilarity:a,overall_score:l}=e;return t>.8?"brand_equivalent":r>.7?"functional_equivalent":i>.8?"category_similar":a>.7?"title_similar":l>.6?"semantically_similar":"loosely_related"}generateSemanticReasoning({item1:e,item2:t,titleSimilarity:r,brandEquivalency:i,functionalEquivalency:a,categoryRelation:l,equivalency_type:u}){const d=[];if(u==="brand_equivalent"){const p=this.extractBrand(e.title),h=this.extractBrand(t.title);d.push("".concat(p," and ").concat(h," are equivalent brands in the same market"))}if(u==="functional_equivalent"){const p=this.extractFunction(e),h=this.extractFunction(t);d.push("".concat(p," and ").concat(h," serve similar functions"))}return r>.6&&d.push("similar product names and descriptions"),l>.6&&e.category!==t.category&&d.push("".concat(e.category," and ").concat(t.category," are related categories")),d.length===0&&d.push("general semantic similarity detected"),"Semantic match found: ".concat(d.join(", "),".")}encodeCondition(e){const t=["new","like_new","good","fair","poor"],r=t.indexOf(e);return r!==-1?[r/(t.length-1)]:[.5]}encodeCategory(e){return this.generateCategoryEmbedding(e)}normalizeAge(e){return Math.min(1,e/20)}normalizePrice(e){return Math.min(1,Math.log10(e+1)/5)}normalizeVector(e){const t=Math.sqrt(e.reduce((r,i)=>r+i*i,0));return t>0?e.map(r=>r/t):e}compareConditions(e,t){const r={new:5,like_new:4,good:3,fair:2,poor:1},i=r[e]||3,a=r[t]||3;return 1-Math.abs(i-a)/4}compareAges(e,t){const i=Math.abs(e-t);return 1-Math.min(i/20,1)}getIDF(e){return new Set(["laptop","phone","computer","game","book","music","camera"]).has(e)?.5:1}}const Uv=new DI;class NI{constructor(){this.bundleCache=new Map,this.conditionalMatches=new Map,this.valueCalculationCache=new Map,this.bundleTemplates=new Map,this.config={maxBundleSize:5,maxValueVariance:.2,minBundleValue:10,maxBundleValue:1e4,valueMatchWeight:.35,complementarityWeight:.25,categoryCoherenceWeight:.2,conditionSimilarityWeight:.1,logisticsWeight:.1,maxConditions:3,conditionComplexityLimit:2,conditionalCacheTimeout:18e5,bundleTypes:{complementary:{weight:1,examples:["laptop + mouse","console + games","camera + lens"]},collection:{weight:.9,examples:["book series","trading cards","collectibles"]},upgrade_path:{weight:.8,examples:["phone + accessories","tools + upgrades"]},variety_pack:{weight:.7,examples:["mixed books","various tools"]}},conditionalOperators:{AND:{symbol:"&&",priority:2},OR:{symbol:"||",priority:1},NOT:{symbol:"!",priority:3},IF:{symbol:"=>",priority:0}}},this.initializeBundlePatterns()}findBundleMatches(i,a){return E(this,arguments,function*(e,t,r={}){try{const{maxBundles:l=20,allowedBundleTypes:u=Object.keys(this.config.bundleTypes),includeConditional:d=!0,userPreferences:p=null}=r,h=yield this.generatePotentialBundles(t,e,u),g=yield this.scoreBundles(h,e,p),v=this.filterByValueCompatibility(g,e);let b=v;return d&&(p!=null&&p.conditions)&&(b=yield this.applyConditionalFiltering(v,p.conditions)),b.sort((C,T)=>T.bundle_score-C.bundle_score).slice(0,l)}catch(l){return console.error("Error finding bundle matches:",l),[]}})}findSingleItemMatches(i,a){return E(this,arguments,function*(e,t,r={}){try{const{maxMatches:l=20,includePartialMatches:u=!0,userPreferences:d=null}=r,p=this.calculateBundleValue(e),h=this.analyzeBundleCharacteristics(e),g=[];for(const v of t){const b=yield this.evaluateSingleItemForBundle(v,e,p,h,d);b&&b.compatibility_score>.5&&g.push(b)}return g.sort((v,b)=>b.compatibility_score-v.compatibility_score).slice(0,l)}catch(l){return console.error("Error finding single item matches:",l),[]}})}processConditionalMatching(i,a){return E(this,arguments,function*(e,t,r={}){try{if(!t||t.length===0)return e;const l=[];for(const u of e){const d=yield this.evaluateConditions(t,u,r);d.passed&&l.push(Y(A({},u),{conditional_match:!0,condition_results:d,condition_reasoning:d.reasoning}))}return l}catch(l){return console.error("Error processing conditional matching:",l),e}})}generatePotentialBundles(e,t,r){return E(this,null,function*(){const i=[];for(let a=2;a<=this.config.maxBundleSize;a++){const l=this.generateCombinations(e,a);for(const u of l){const d=this.calculateBundleValue(u);if(d<this.config.minBundleValue||d>this.config.maxBundleValue)continue;const p=this.determineBundleType(u,t);r.includes(p)&&i.push({items:u,bundle_type:p,bundle_value:d,bundle_size:a,created_at:Date.now()})}}return i})}scoreBundles(e,t,r){return E(this,null,function*(){const i=[];for(const a of e)try{const l=yield this.calculateBundleScore(a,t,r);l.total_score>.3&&i.push(Y(A({},a),{bundle_score:l.total_score,score_breakdown:l.breakdown,score_reasoning:l.reasoning}))}catch(l){console.error("Error scoring bundle:",l)}return i})}calculateBundleScore(e,t,r){return E(this,null,function*(){const i={};i.value_match=this.calculateValueMatchScore(e,t),i.complementarity=yield this.calculateComplementarityScore(e,t),i.category_coherence=this.calculateCategoryCoherenceScore(e),i.condition_similarity=this.calculateConditionSimilarityScore(e),i.logistics=this.calculateLogisticsScore(e,t),i.user_preference=r?this.calculateUserPreferenceScore(e,r):.5;const a=i.value_match*this.config.valueMatchWeight+i.complementarity*this.config.complementarityWeight+i.category_coherence*this.config.categoryCoherenceWeight+i.condition_similarity*this.config.conditionSimilarityWeight+i.logistics*this.config.logisticsWeight+i.user_preference*.1,l=this.generateBundleScoreReasoning(i,e);return{total_score:Math.min(1,Math.max(0,a)),breakdown:i,reasoning:l}})}calculateValueMatchScore(e,t){const r=e.bundle_value,i=t.estimated_value||t.price||0;if(i===0||r===0)return .5;const a=Math.abs(r-i),l=(r+i)/2,u=a/l;return u<=.05?1:u<=.1?.9:u<=.2?.7:u<=.35?.5:.2}calculateComplementarityScore(e,t){return E(this,null,function*(){let r=.5;const i=this.findComplementaryPairs(e.items);i.length>0&&(r+=.3*Math.min(1,i.length/2));for(const l of e.items)try{const u=yield Uv.calculateSemanticSimilarity(t,l);u.equivalency_type==="functional_equivalent"?r+=.2:u.overall_score>.6&&(r+=.1)}catch(u){console.error("Error calculating semantic similarity:",u)}const a=this.calculateUpgradePathScore(e.items,t);return r+=a*.2,Math.min(1,r)})}calculateCategoryCoherenceScore(e){const t=e.items.map(l=>l.category).filter(Boolean),r=new Set(t);if(r.size===1)return 1;const i=this.calculateCategoryRelationshipScore(Array.from(r)),a=Math.max(0,(r.size-2)*.1);return Math.max(.2,i-a)}calculateConditionSimilarityScore(e){const t=e.items.map(u=>u.condition).filter(u=>u);if(t.length===0)return .5;const r={new:5,like_new:4,good:3,fair:2,poor:1},i=t.map(u=>r[u]||3),a=i.reduce((u,d)=>u+d,0)/i.length,l=i.reduce((u,d)=>u+Math.pow(d-a,2),0)/i.length;return Math.max(.2,1-l/4)}calculateLogisticsScore(e,t){let r=.8;const i=e.items.map(d=>d.user_id||d.userId).filter(Boolean),a=new Set(i);a.size===1?r+=.2:r-=a.size*.05,e.bundle_size>3&&(r-=.1);const l=this.estimateBundleWeight(e.items),u=this.estimateBundleSize(e.items);return(l>20||u>100)&&(r-=.1),Math.max(.2,Math.min(1,r))}calculateUserPreferenceScore(e,t){let r=.5;if(t.preferred_categories){const a=e.items.map(l=>l.category).filter(l=>t.preferred_categories.includes(l)).length;r+=a/e.items.length*.3}if(t.excluded_categories&&e.items.map(l=>l.category).filter(l=>t.excluded_categories.includes(l)).length>0&&(r-=.5),t.min_item_value||t.max_item_value){const i=e.bundle_value,a=t.min_item_value||0,l=t.max_item_value||1/0;i>=a&&i<=l?r+=.2:r-=.2}return Math.max(0,Math.min(1,r))}filterByValueCompatibility(e,t){const r=t.estimated_value||t.price||0;return e.filter(i=>r===0?!0:Math.abs(i.bundle_value-r)/Math.max(r,i.bundle_value)<=this.config.maxValueVariance)}applyConditionalFiltering(e,t){return E(this,null,function*(){const r=[];for(const i of e){const a=yield this.evaluateConditions(t,i);a.passed&&r.push(Y(A({},i),{conditional_filtering_applied:!0,condition_results:a}))}return r})}evaluateConditions(i,a){return E(this,arguments,function*(e,t,r={}){const l={passed:!0,evaluations:[],reasoning:""};try{for(const u of e){const d=yield this.evaluateSingleCondition(u,t,r);l.evaluations.push(d),d.passed||(l.passed=!1)}l.reasoning=this.generateConditionReasoning(l.evaluations)}catch(u){console.error("Error evaluating conditions:",u),l.passed=!1,l.reasoning="Error evaluating conditions"}return l})}evaluateSingleCondition(e,t,r){return E(this,null,function*(){const{type:i,operator:a,value:l,field:u}=e;try{let d;u.includes(".")?d=this.getNestedFieldValue(t,u):d=t[u];let p=!1;switch(a){case"equals":p=d===l;break;case"not_equals":p=d!==l;break;case"greater_than":p=Number(d)>Number(l);break;case"less_than":p=Number(d)<Number(l);break;case"contains":p=String(d).toLowerCase().includes(String(l).toLowerCase());break;case"not_contains":p=!String(d).toLowerCase().includes(String(l).toLowerCase());break;case"in_range":{const h=Number(d);p=h>=l.min&&h<=l.max;break}case"exists":p=d!=null;break;case"not_exists":p=d==null;break;default:console.warn("Unknown condition operator:",a),p=!0}return{condition:e,fieldValue:d,passed:p,reasoning:"".concat(u," ").concat(a," ").concat(JSON.stringify(l),"  ").concat(p?"PASS":"FAIL")}}catch(d){return console.error("Error evaluating single condition:",d),{condition:e,fieldValue:null,passed:!1,reasoning:"Error evaluating condition: ".concat(d.message)}}})}calculateBundleValue(e){return e.reduce((t,r)=>t+(r.estimated_value||r.price||0),0)}analyzeBundleCharacteristics(e){const t=e.map(a=>a.category).filter(Boolean),r=e.map(a=>a.condition).filter(Boolean),i=e.map(a=>a.age_years).filter(a=>a!==void 0);return{categories:[...new Set(t)],conditions:[...new Set(r)],avgAge:i.length>0?i.reduce((a,l)=>a+l,0)/i.length:null,bundleSize:e.length,totalValue:this.calculateBundleValue(e)}}determineBundleType(e,t){return this.areItemsComplementary(e)?"complementary":this.areItemsFromSameCollection(e)?"collection":this.isUpgradePath(e,t)?"upgrade_path":"variety_pack"}findComplementaryPairs(e){var i,a;const t=[],r=[["laptop","mouse"],["laptop","keyboard"],["laptop","bag"],["console","game"],["console","controller"],["console","headset"],["camera","lens"],["camera","tripod"],["camera","flash"],["phone","case"],["phone","charger"],["phone","headphones"],["guitar","amplifier"],["guitar","picks"],["guitar","strap"],["book","bookmark"],["book","light"],["cookbook","utensils"]];for(let l=0;l<e.length;l++)for(let u=l+1;u<e.length;u++){const d=((i=e[l].title)==null?void 0:i.toLowerCase())||"",p=((a=e[u].title)==null?void 0:a.toLowerCase())||"";r.some(([g,v])=>d.includes(g)&&p.includes(v)||d.includes(v)&&p.includes(g))&&t.push([e[l],e[u]])}return t}generateCombinations(e,t){if(t===1)return e.map(a=>[a]);if(t>e.length)return[];const r=[];function i(a,l){if(l.length===t){r.push([...l]);return}for(let u=a;u<e.length;u++)l.push(e[u]),i(u+1,l),l.pop()}return i(0,[]),r}generateBundleScoreReasoning(e,t){const r=[];return e.value_match>.8?r.push("excellent value match"):e.value_match>.6&&r.push("good value alignment"),e.complementarity>.7&&r.push("items work well together"),e.category_coherence>.8&&r.push("coherent category grouping"),e.logistics>.8&&r.push("easy logistics"),r.length===0&&r.push("decent bundle opportunity"),"Bundle score based on: ".concat(r.join(", "),".")}calculateCategoryRelationshipScore(e){const t={"Electronics-Gaming":.9,"Electronics-Appliances":.8,"Books-Electronics":.4,"Music-Electronics":.7,"Art-Collectibles":.8,"Sports-Electronics":.5,"Tools-Electronics":.6};let r=0,i=0;for(let a=0;a<e.length;a++)for(let l=a+1;l<e.length;l++){const u="".concat(e[a],"-").concat(e[l]),d="".concat(e[l],"-").concat(e[a]),p=t[u]||t[d]||.3;r+=p,i++}return i>0?r/i:.5}calculateUpgradePathScore(e,t){var d;const r=t.category;if(!e.map(p=>p.category).includes(r))return 0;const a=["pro","plus","max","premium","deluxe","advanced"],l=((d=t.title)==null?void 0:d.toLowerCase())||"",u=e.filter(p=>{var g;const h=((g=p.title)==null?void 0:g.toLowerCase())||"";return a.some(v=>h.includes(v)&&!l.includes(v))}).length;return Math.min(1,u/e.length)}areItemsComplementary(e){return this.findComplementaryPairs(e).length>0}areItemsFromSameCollection(e){const t=e.map(i=>this.extractSeriesIndicator(i.title||"")),r=new Set(t.filter(Boolean));return r.size===1&&r.size>0}extractSeriesIndicator(e){const t=e.toLowerCase(),r=t.match(/vol\w*\s*\d+|volume\s*\d+|book\s*\d+|part\s*\d+|#\d+/);if(r)return t.replace(r[0],"").trim();const i=t.match(/(.+?)\s+(series|collection|set)/);return i?i[1].trim():null}isUpgradePath(e,t){return this.calculateUpgradePathScore(e,t)>.5}estimateBundleWeight(e){const t={Electronics:2,Books:.5,Clothing:.3,Tools:3,Appliances:5,Furniture:10};return e.reduce((r,i)=>{const a=t[i.category]||1;return r+a},0)}estimateBundleSize(e){const t={Electronics:10,Books:5,Clothing:3,Tools:8,Appliances:20,Furniture:50};return e.reduce((r,i)=>{const a=t[i.category]||5;return r+a},0)}getNestedFieldValue(e,t){return t.split(".").reduce((r,i)=>r&&r[i],e)}generateConditionReasoning(e){const t=e.filter(i=>i.passed).length,r=e.length;return t===r?"All ".concat(r," conditions passed"):t===0?"None of the ".concat(r," conditions passed"):"".concat(t," of ").concat(r," conditions passed")}evaluateSingleItemForBundle(e,t,r,i,a){return E(this,null,function*(){try{const l=e.estimated_value||e.price||0,u=this.calculateValueCompatibility(l,r);if(u<.3)return null;const d=this.calculateCategoryAlignment(e.category,i.categories),p=this.calculateConditionCompatibility(e.condition,i.conditions),h=u*.5+d*.3+p*.2;return h<.5?null:{item:e,bundle_characteristics:i,compatibility_score:h,value_compatibility:u,category_alignment:d,condition_compatibility:p,match_reasoning:this.generateSingleItemMatchReasoning(h,u,d,p)}}catch(l){return console.error("Error evaluating single item for bundle:",l),null}})}calculateValueCompatibility(e,t){return e===0||t===0?.5:Math.min(e,t)/Math.max(e,t)}calculateCategoryAlignment(e,t){return!e||t.length===0?.5:t.includes(e)?1:this.calculateCategoryRelationshipScore([e,...t])}calculateConditionCompatibility(e,t){if(!e||t.length===0)return .5;const r={new:5,like_new:4,good:3,fair:2,poor:1},i=r[e]||3,a=t.map(p=>r[p]||3),l=Math.min(...a),u=Math.max(...a);if(i>=l&&i<=u)return 1;const d=Math.min(Math.abs(i-l),Math.abs(i-u));return Math.max(.2,1-d/4)}generateSingleItemMatchReasoning(e,t,r,i){const a=[];return t>.8?a.push("excellent value match"):t>.6&&a.push("good value alignment"),r>.8?a.push("perfect category fit"):r>.6&&a.push("related category"),i>.8&&a.push("matching condition"),a.length>0?"Single item match: ".concat(a.join(", ")):"Basic compatibility match"}initializeBundlePatterns(){}}const LI=new NI;class jI{constructor(){this.predictionCache=new Map,this.trendPredictions=new Map,this.collectionTracking=new Map,this.proactiveQueue=new Map,this.predictionModels=new Map,this.config={predictionHorizon:6048e5,trendAnalysisWindow:2592e6,collectionDetectionThreshold:.7,proactiveCacheTimeout:18e5,maxProactiveMatches:20,minPredictionConfidence:.6,highConfidenceThreshold:.8,trendPredictionThreshold:.75,behaviorPatternWeight:.3,seasonalTrendWeight:.2,socialInfluenceWeight:.15,collectionProgressWeight:.15,marketTrendWeight:.2,seasonalCategories:{0:["winter_sports","heating","holiday_decor"],1:["winter_sports","indoor_fitness"],2:["spring_cleaning","gardening"],3:["gardening","outdoor_sports"],4:["gardening","outdoor_furniture"],5:["summer_sports","travel"],6:["summer_sports","outdoor_activities"],7:["back_to_school","summer_sports"],8:["back_to_school","fall_prep"],9:["fall_activities","winter_prep"],10:["winter_prep","holiday_prep"],11:["holiday_gifts","winter_gear"]}},this.initializePredictionModels(),this.initializeProactiveMatching()}generateProactivePredictions(r){return E(this,arguments,function*(e,t={}){try{const{includeTrendPredictions:i=!0,includeCollectionCompletion:a=!0,includeSeasonalPredictions:l=!0,includeSocialInfluence:u=!0,maxPredictions:d=this.config.maxProactiveMatches}=t,p="proactive_".concat(e);if(this.predictionCache.has(p)){const R=this.predictionCache.get(p);if(Date.now()-R.timestamp<this.config.proactiveCacheTimeout)return R.data}const h=yield this.getUserProfile(e),g=yield this.getUserBehaviorData(e),v=yield this.getUserTradingHistory(e),b=[],C=yield this.generateBehaviorPredictions(h,g,v);if(b.push(...C),i){const R=yield this.generateTrendPredictions(h,g);b.push(...R)}if(a){const R=yield this.generateCollectionPredictions(e,v);b.push(...R)}if(l){const R=yield this.generateSeasonalPredictions(h,g);b.push(...R)}if(u){const R=yield this.generateSocialInfluencePredictions(e,h);b.push(...R)}const x=this.rankPredictions(b).filter(R=>R.confidence>=this.config.minPredictionConfidence).slice(0,d),M=yield this.findMatchesForPredictions(e,x),I={predictions:x,proactiveMatches:M,generatedAt:Date.now(),userId:e};return this.predictionCache.set(p,{data:I,timestamp:Date.now()}),I}catch(i){return console.error("Error generating proactive predictions:",i),{predictions:[],proactiveMatches:[],generatedAt:Date.now(),userId:e}}})}generateBehaviorPredictions(e,t,r){return E(this,null,function*(){const i=[];try{const a=this.analyzeTradingPatterns(r);if(t.category_preferences){const l=this.analyzeCategoryTrends(t.category_preferences);for(const[u,d]of Object.entries(l))d.momentum>.1&&i.push({type:"behavior_pattern",prediction:"category_interest",category:u,confidence:Math.min(.95,.6+d.momentum),reasoning:"Increasing interest in ".concat(u," based on recent interactions"),expectedTimeframe:this.calculateTimeframe(d.momentum),details:{momentum:d.momentum,recentInteractions:d.interactions,trend:"increasing"}})}if(a.valueRangeEvolution){const l=this.predictValueRangeExpansion(a.valueRangeEvolution);l.confidence>.6&&i.push({type:"behavior_pattern",prediction:"value_range_expansion",valueRange:l.newRange,confidence:l.confidence,reasoning:"Predicted expansion into higher/lower value items based on trading pattern",expectedTimeframe:l.timeframe,details:l})}if(a.frequencyPattern){const l=this.predictNextTradingWindow(a.frequencyPattern);l.confidence>.7&&i.push({type:"behavior_pattern",prediction:"trading_activity_window",activityWindow:l.window,confidence:l.confidence,reasoning:"Predicted optimal trading time based on historical patterns",expectedTimeframe:l.timeframe,details:l})}if(t.location_preferences&&r.length>5){const l=this.analyzLocationEvolution(r);l.expansion&&i.push({type:"behavior_pattern",prediction:"location_expansion",newLocationRange:l.suggestedRange,confidence:l.confidence,reasoning:"Predicted willingness to trade at greater distances",expectedTimeframe:"2-4 weeks",details:l})}}catch(a){console.error("Error generating behavior predictions:",a)}return i})}generateTrendPredictions(e,t){return E(this,null,function*(){const r=[];try{const i=yield this.getMarketTrends();if(i.emergingTrends)for(const l of i.emergingTrends){const u=this.calculateTrendAlignment(l,e,t);u.score>this.config.trendPredictionThreshold&&r.push({type:"trend_prediction",prediction:"emerging_trend_interest",trend:l.name,category:l.category,confidence:u.score,reasoning:"Emerging trend in ".concat(l.category," that matches your interests"),expectedTimeframe:l.peakTimeframe,details:{trendData:l,alignmentFactors:u.factors,marketMomentum:l.momentum}})}if(i.cyclicalTrends){const l=this.predictTrendCycles(i.cyclicalTrends,e);r.push(...l)}const a=yield this.predictViralItems(e,t);r.push(...a)}catch(i){console.error("Error generating trend predictions:",i)}return r})}generateCollectionPredictions(e,t){return E(this,null,function*(){const r=[];try{const i=this.detectCollections(t);for(const l of i)if(l.completeness<1&&l.confidence>this.config.collectionDetectionThreshold){const u=yield this.findMissingCollectionItems(l);for(const d of u)r.push({type:"collection_completion",prediction:"collection_item",collection:l.name,missingItem:d.name,category:d.category,confidence:l.confidence*d.priority,reasoning:"Complete your ".concat(l.name," collection"),expectedTimeframe:this.calculateCollectionTimeframe(l.urgency),details:{collectionProgress:l.completeness,totalItems:l.totalItems,currentItems:l.currentItems,missingItems:u.length,collectionValue:l.estimatedValue}})}const a=this.detectSeriesPatterns(t);r.push(...a)}catch(i){console.error("Error generating collection predictions:",i)}return r})}generateSeasonalPredictions(e,t){return E(this,null,function*(){const r=[];try{const i=new Date().getMonth(),a=[(i+1)%12,(i+2)%12];for(const u of a){const d=this.config.seasonalCategories[u]||[];for(const p of d){const h=this.calculateSeasonalInterest(p,e,t);h.score>.6&&r.push({type:"seasonal_prediction",prediction:"seasonal_interest",category:h.category,season:this.getSeasonName(u),confidence:h.score,reasoning:"Seasonal interest in ".concat(h.category," approaching"),expectedTimeframe:this.getSeasonalTimeframe(u),details:{seasonalFactor:h.seasonalFactor,userAlignment:h.userAlignment,historicalData:h.historicalData}})}}const l=yield this.generateHolidayPredictions(e,t);r.push(...l)}catch(i){console.error("Error generating seasonal predictions:",i)}return r})}generateSocialInfluencePredictions(e,t){return E(this,null,function*(){const r=[];try{const i=yield this.getUserSocialData(e);if(!i)return r;const a=this.analyzeSocialTrends(i);for(const u of a){const d=this.calculateSocialInfluence(u,t);d.score>.6&&r.push({type:"social_influence",prediction:"social_trend",category:u.category,influenceSource:u.source,confidence:d.score,reasoning:"Popular among your connections: ".concat(u.description),expectedTimeframe:u.timeframe,details:{connections:u.connections,popularity:u.popularity,influenceFactors:d.factors}})}const l=yield this.predictNetworkTrends(i,t);r.push(...l)}catch(i){console.error("Error generating social influence predictions:",i)}return r})}findMatchesForPredictions(e,t){return E(this,null,function*(){const r=[];for(const a of t)try{const u=(yield this.searchMatchesForPrediction(e,a)).map(d=>Y(A({},d),{prediction_type:a.type,prediction_reasoning:a.reasoning,prediction_confidence:a.confidence,proactive_match:!0,predicted_interest:a.prediction}));r.push(...u)}catch(l){console.error("Error finding matches for prediction:",a,l)}return this.removeDuplicateMatches(r).sort((a,l)=>l.prediction_confidence-a.prediction_confidence)})}searchMatchesForPrediction(e,t){return E(this,null,function*(){const r=this.buildSearchParamsFromPrediction(t);try{const a=(yield Ne.post("/api/listings/search",Y(A({},r),{user_id:e,exclude_user:e}))).data;return(yield fp.scoreMatchesWithML(a.map(u=>({item1_details:null,item2_details:u,prediction_context:t})),yield this.getUserProfile(e),{},{})).filter(u=>u.optimized_score>.5)}catch(i){return console.error("Error searching matches for prediction:",i),[]}})}analyzeTradingPatterns(e){return{frequencyPattern:this.analyzeFrequencyPattern(e),valueRangeEvolution:this.analyzeValueRangeEvolution(e),categoryEvolution:this.analyzeCategoryEvolution(e),temporalPatterns:this.analyzeTemporalPatterns(e)}}analyzeFrequencyPattern(e){if(e.length<3)return null;const t=e.map(l=>new Date(l.created_at).getTime()),r=[];for(let l=1;l<t.length;l++)r.push(t[l]-t[l-1]);const i=r.reduce((l,u)=>l+u,0)/r.length,a=r.reduce((l,u)=>l+Math.pow(u-i,2),0)/r.length;return{averageInterval:i,variance:a,consistency:1-Math.sqrt(a)/i,predictedNextTrade:t[t.length-1]+i}}analyzeValueRangeEvolution(e){if(e.length<5||e.filter(d=>d.item_value).map(d=>d.item_value).length<3)return null;const i=this.divideIntoTimeSlices(e,3).map(d=>({min:Math.min(...d.map(p=>p.item_value||0)),max:Math.max(...d.map(p=>p.item_value||0)),avg:d.reduce((p,h)=>p+(h.item_value||0),0)/d.length})),a=this.calculateTrend(i.map(d=>d.min)),l=this.calculateTrend(i.map(d=>d.max)),u=this.calculateTrend(i.map(d=>d.avg));return{currentRange:i[i.length-1],trends:{min:a,max:l,avg:u},evolution:"expanding"}}analyzeCategoryTrends(e){const t={};for(const[r,i]of Object.entries(e)){const a=Math.max(0,i-.5)*2;t[r]={momentum:a,interactions:Math.floor(i*100),trend:a>.1?"increasing":"stable"}}return t}calculateTrendAlignment(e,t,r){var l;let i=.5;const a={};if((l=r.category_preferences)!=null&&l[e.category]){const u=r.category_preferences[e.category];i+=u*.4,a.categoryAlignment=u}if(e.avgValue&&t.preferences){const u=this.calculateValueAlignment(e.avgValue,t.preferences);i+=u*.3,a.valueAlignment=u}return e.socialPopularity&&(i+=e.socialPopularity*.2,a.socialAlignment=e.socialPopularity),e.momentum&&(i+=e.momentum*.1,a.trendMomentum=e.momentum),{score:Math.min(1,i),factors:a}}detectCollections(e){const t=[],r=this.groupItemsByCollection(e);for(const[i,a]of Object.entries(r))if(a.length>=2){const l=this.analyzeCollection(i,a);l.confidence>.5&&t.push(l)}return t}groupItemsByCollection(e){const t={};for(const r of e){const i=r.item_details||r,a=this.extractCollectionIndicators(i);for(const l of a)t[l]||(t[l]=[]),t[l].push(i)}return t}extractCollectionIndicators(e){const t=[],r=(e.title||"").toLowerCase();if(r.match(/vol\w*\s*(\d+)|volume\s*(\d+)|book\s*(\d+)|#(\d+)/)){const l=r.replace(/vol\w*\s*\d+|volume\s*\d+|book\s*\d+|#\d+/g,"").trim();t.push("series_".concat(l))}const a=this.extractBrandSeries(r);return a&&t.push("brand_".concat(a)),e.category&&t.push("category_".concat(e.category.toLowerCase())),t}calculateSeasonalInterest(e,t,r){var d;let i=.3;const a=this.getRelatedCategories(e);for(const p of a)(d=r.category_preferences)!=null&&d[p]&&(i+=r.category_preferences[p]*.3);const l=this.calculateGeographicSeasonalFactor(e,t);i+=l*.2;const u=this.calculateHistoricalSeasonalActivity(e,t);return i+=u*.2,{score:Math.min(1,i),category:e,seasonalFactor:l,userAlignment:i-.3,historicalData:u}}buildSearchParamsFromPrediction(e){const t={};return e.category&&(t.category=e.category),e.valueRange&&(t.min_value=e.valueRange.min,t.max_value=e.valueRange.max),e.missingItem&&(t.query=e.missingItem),t}rankPredictions(e){return e.sort((t,r)=>{if(t.confidence!==r.confidence)return r.confidence-t.confidence;const i={collection_completion:4,behavior_pattern:3,seasonal_prediction:2,trend_prediction:1,social_influence:0};return(i[r.type]||0)-(i[t.type]||0)})}removeDuplicateMatches(e){const t=new Set;return e.filter(r=>{var a;const i=((a=r.item2_details)==null?void 0:a.id)||r.id;return t.has(i)?!1:(t.add(i),!0)})}getUserProfile(e){return E(this,null,function*(){try{return(yield Ne.get("/users/".concat(e,"/profile"))).data}catch(t){return console.error("Error fetching user profile:",t),{}}})}getUserBehaviorData(e){return E(this,null,function*(){try{return(yield Ne.get("/analytics/user-behavior/".concat(e))).data}catch(t){return console.error("Error fetching user behavior data:",t),{}}})}getUserTradingHistory(e){return E(this,null,function*(){try{return(yield Ne.get("/users/".concat(e,"/trading-history"))).data}catch(t){return console.error("Error fetching trading history:",t),[]}})}getMarketTrends(){return E(this,null,function*(){try{return(yield Ne.get("/analytics/market-trends")).data}catch(e){return console.error("Error fetching market trends:",e),{}}})}getUserSocialData(e){return E(this,null,function*(){try{return(yield Ne.get("/social/user-data/".concat(e))).data}catch(t){return console.error("Error fetching social data:",t),null}})}calculateTimeframe(e){return e>.8?"1-2 weeks":e>.6?"2-4 weeks":e>.4?"1-2 months":"2-3 months"}getSeasonName(e){return["Winter","Winter","Spring","Spring","Spring","Summer","Summer","Summer","Fall","Fall","Fall","Winter"][e]}getSeasonalTimeframe(e){const t=new Date().getMonth(),r=(e-t+12)%12;return r===0?"This month":r===1?"Next month":"In ".concat(r," months")}divideIntoTimeSlices(e,t){const r=Math.ceil(e.length/t),i=[];for(let a=0;a<t;a++){const l=a*r,u=Math.min(l+r,e.length);i.push(e.slice(l,u))}return i}calculateTrend(e){if(e.length<2)return 0;const t=e.length,r=t*(t-1)/2,i=e.reduce((d,p)=>d+p,0),a=e.reduce((d,p,h)=>d+p*h,0),l=e.reduce((d,p,h)=>d+h*h,0);return(t*a-r*i)/(t*l-r*r)}calculateValueAlignment(e,t){if(!t.min_item_value&&!t.max_item_value)return .5;const r=t.min_item_value||0,i=t.max_item_value||1/0;if(e>=r&&e<=i)return 1;const a=Math.min(Math.abs(e-r),Math.abs(e-i));return Math.max(0,1-a/e)}getRelatedCategories(e){return{winter_sports:["Sports","Outdoor"],gardening:["Garden","Tools","Outdoor"],back_to_school:["Books","Electronics","Clothing"],holiday_prep:["Art","Collectibles","Furniture"]}[e]||[]}calculateGeographicSeasonalFactor(e,t){return .5}calculateHistoricalSeasonalActivity(e,t){return .5}extractBrandSeries(e){const t=[/iphone\s*(\d+)/i,/galaxy\s*s(\d+)/i,/pixel\s*(\d+)/i,/playstation\s*(\d+)/i];for(const r of t){const i=e.match(r);if(i)return i[0].toLowerCase()}return null}initializePredictionModels(){}initializeProactiveMatching(){setInterval(()=>{this.processProactiveQueue()},3e5),setInterval(()=>{this.updateTrendPredictions()},18e5),setInterval(()=>{this.cleanupPredictionCache()},36e5)}processProactiveQueue(){return E(this,null,function*(){})}updateTrendPredictions(){return E(this,null,function*(){})}cleanupPredictionCache(){const e=Date.now()-this.config.proactiveCacheTimeout;for(const[t,r]of this.predictionCache.entries())r.timestamp<e&&this.predictionCache.delete(t)}predictValueRangeExpansion(e){return{confidence:.6,newRange:{min:0,max:1e3},timeframe:"1-2 months"}}predictNextTradingWindow(e){return{confidence:.7,window:"weekend",timeframe:"next week"}}analyzLocationEvolution(e){return{expansion:!0,suggestedRange:75,confidence:.6}}predictTrendCycles(e,t){return[]}predictViralItems(e,t){return E(this,null,function*(){return[]})}findMissingCollectionItems(e){return E(this,null,function*(){return[{name:"Missing Item",category:"Books",priority:.8}]})}calculateCollectionTimeframe(e){return"1-2 months"}detectSeriesPatterns(e){return[]}generateHolidayPredictions(e,t){return E(this,null,function*(){return[]})}analyzeSocialTrends(e){return[]}calculateSocialInfluence(e,t){return{score:.5,factors:{}}}predictNetworkTrends(e,t){return E(this,null,function*(){return[]})}analyzeCollection(e,t){return{name:e,confidence:.7,completeness:.6,totalItems:10,currentItems:6,estimatedValue:500,urgency:"medium"}}analyzeCategoryEvolution(e){return{}}analyzeTemporalPatterns(e){return{}}}const $I=new jI;class UI{constructor(){this.db=Ri,this.matchCache=new Map,this.processingQueue=[],this.isProcessing=!1}initializeForUser(){return E(this,null,function*(){try{const e=yield Le.get();return e?((yield this.getUserMatchesProfile(e.$id))||(yield this.createMatchesProfile(e.$id)),this.startBackgroundMatching(e.$id),e.$id):null}catch(e){return console.error("Failed to initialize AI matching:",e),null}})}getUserMatchesProfile(e){return E(this,null,function*(){try{return(yield this.db.listDocuments(V,X.matches,[N.equal("userId",e),N.limit(1)])).documents.length>0?{userId:e,hasMatches:!0}:null}catch(t){return console.error("Error fetching user matches:",t),null}})}createMatchesProfile(e){return E(this,null,function*(){return console.log(" User initialized for AI matching"),{userId:e,initialized:!0,hasMatches:!1}})}generateAIMatches(r){return E(this,arguments,function*(e,t={}){try{const{maxMatches:i=10,includeSemanticMatches:a=!0,includeBundleMatches:l=!0,includeProactiveMatches:u=!0}=t;console.log(" Generating AI matches for user:",e);const d=yield this.getUserItems(e);if(!d.length)return console.log("No items to match"),[];const p=[],h=yield fp.findOptimizedMatches(e,{maxMatches:Math.floor(i*.4),includeSemanticMatches:a,includeBundleMatches:l});if(p.push(...this.formatAIMatches(h,"ai")),a){const b=yield this.getCandidateItems(e);for(const C of d.slice(0,3))if(b&&b.length>0){const T=yield Uv.findSemanticMatches(C,b,{enableCrossCategory:!0,minSimilarityScore:.6});p.push(...this.formatSemanticMatches(T,C,"semantic"))}}if(l){const b=yield LI.findBundleMatches(e,{maxBundles:Math.floor(i*.2)});p.push(...this.formatBundleMatches(b,"bundle"))}if(u){const b=yield $I.generateProactivePredictions(e,{includeTrendPredictions:!0,includeSeasonalPredictions:!0});b.proactiveMatches&&p.push(...this.formatProactiveMatches(b.proactiveMatches,"proactive"))}const v=this.deduplicateMatches(p).sort((b,C)=>C.score-b.score);return yield this.storeMatches(e,v.slice(0,i)),v.slice(0,i)}catch(i){return console.error("Failed to generate AI matches:",i),[]}})}getUserItems(e){return E(this,null,function*(){try{return e?(yield this.db.listDocuments(V,X.items,[ui.createUserQuery("items",e),N.equal("status","active"),N.orderDesc("$createdAt"),N.limit(10)])).documents:(console.warn("getUserItems called without userId"),[])}catch(t){return console.error("Failed to fetch user items:",t),[]}})}getCandidateItems(e){return E(this,null,function*(){try{if(!e)return console.warn("getCandidateItems called without userId"),[];const t=ui.getUserField("items");return(yield this.db.listDocuments(V,X.items,[N.notEqual(t,e),N.equal("status","active"),N.orderDesc("$createdAt"),N.limit(50)])).documents}catch(t){return console.error("Failed to fetch candidate items:",t),[]}})}formatAIMatches(e,t){return e.map(r=>{var i,a,l;return{id:ze.unique(),type:t,score:r.optimized_score||r.score||0,user_item_id:(i=r.user_item)==null?void 0:i.id,matched_item_id:(a=r.matched_item)==null?void 0:a.id,matched_user_id:(l=r.matched_user)==null?void 0:l.id,explanation:r.explanation||"AI-powered match based on multiple factors",metadata:{value_match:r.value_compatibility,location_match:r.location_score,category_match:r.category_score}}})}formatSemanticMatches(e,t,r){return e.map(i=>({id:ze.unique(),type:r,score:i.similarity_score||0,user_item_id:t.$id,matched_item_id:i.id,matched_user_id:i.user_id,explanation:'Similar to your "'.concat(t.title,'"'),metadata:{semantic_score:i.similarity_score,matched_keywords:i.matched_keywords}}))}formatBundleMatches(e,t){return e.map(r=>({id:ze.unique(),type:t,score:r.total_score||0,bundle_items:r.items.map(i=>i.id),matched_bundle:r.matched_bundle.map(i=>i.id),explanation:r.explanation||"Bundle match for multiple items",metadata:{bundle_value:r.total_value,items_count:r.items.length}}))}formatProactiveMatches(e,t){return e.map(r=>({id:ze.unique(),type:t,score:r.confidence||0,predicted_item:r.predicted_item,reason:r.reason,explanation:r.explanation||"Predicted based on your activity",metadata:{prediction_type:r.prediction_type,trend_based:r.trend_based}}))}deduplicateMatches(e){const t=new Set;return e.filter(r=>{const i="".concat(r.user_item_id,"-").concat(r.matched_item_id);return t.has(i)?!1:(t.add(i),!0)})}storeMatches(e,t){return E(this,null,function*(){try{const r=new Date().toISOString();for(const i of t){if(!i.user_item_id||!i.matched_item_id){console.warn("Skipping match with missing item IDs:",i);continue}yield this.db.createDocument(V,X.matches,ze.unique(),{userId:e,itemId:i.user_item_id||"unknown",matchedUserId:i.matched_user_id||"unknown",matchedItemId:i.matched_item_id||"unknown",matchScore:i.score||.5,matchReason:i.explanation||"AI-generated match",status:"pending",createdAt:r})}console.log(" Stored ".concat(t.length," matches for user"))}catch(r){console.error("Failed to store matches:",r)}})}acceptMatch(e,t){return E(this,null,function*(){try{const r=yield this.db.updateDocument(V,X.matches,e,{status:"accepted",accepted_at:new Date().toISOString()});return yield this.createMatchConversation(r),yield this.updateMatchStatistics(t,"accepted"),console.log(" Match accepted:",e),{success:!0,match:r}}catch(r){return console.error("Failed to accept match:",r),{success:!1,error:xe(r)}}})}declineMatch(e,t,r=null){return E(this,null,function*(){try{const i=yield this.db.updateDocument(V,X.matches,e,{status:"declined",declined_at:new Date().toISOString(),decline_reason:r});return yield this.updateMatchStatistics(t,"declined"),r&&(yield this.learnFromDecline(i,r)),console.log(" Match declined:",e),{success:!0,match:i}}catch(i){return console.error("Failed to decline match:",i),{success:!1,error:xe(i)}}})}createMatchConversation(e){return E(this,null,function*(){try{const t=yield this.db.listDocuments(V,X.conversations,[N.equal("match_id",e.$id),N.limit(1)]);if(t.documents.length>0)return t.documents[0];const r=yield this.db.createDocument(V,X.conversations,ze.unique(),{match_id:e.$id,participants:[e.user_id,e.matched_user_id],status:"active",created_at:new Date().toISOString()});return console.log(" Created conversation for match"),r}catch(t){return console.error("Failed to create conversation:",t),null}})}updateMatchStatistics(e,t){return E(this,null,function*(){try{const r=yield this.getUserMatchesProfile(e);if(!r)return;const i=r.statistics||{};t==="accepted"?i.accepted_matches=(i.accepted_matches||0)+1:t==="declined"&&(i.declined_matches=(i.declined_matches||0)+1),i.total_matches=(i.accepted_matches||0)+(i.declined_matches||0),i.success_rate=i.total_matches>0?i.accepted_matches/i.total_matches*100:0,yield this.db.updateDocument(V,X.matches,r.$id,{statistics:i})}catch(r){console.error("Failed to update statistics:",r)}})}learnFromDecline(e,t){return E(this,null,function*(){try{yield this.db.createDocument(V,X.feedback,ze.unique(),{type:"match_decline",match_id:e.$id,user_id:e.user_id,reason:t,match_type:e.type,match_score:e.score,created_at:new Date().toISOString()})}catch(r){console.error("Failed to store decline feedback:",r)}})}startBackgroundMatching(e){setInterval(()=>E(this,null,function*(){try{const t=yield this.generateAIMatches(e,{maxMatches:5,includeProactiveMatches:!0});console.log(" Background matching generated ".concat(t.length," new matches"))}catch(t){console.error("Background matching failed:",t)}}),1800*1e3)}}const Uo=new UI,Bd=cn("matches/fetchMatches",i=>E(null,[i],function*({page:n=1,limit:e=10,force_refresh:t=!1,useAI:r=!0}){var a,l;try{if(r){const p=yield Uo.generateAIMatches(null,{maxMatches:e,includeSemanticMatches:!0,includeBundleMatches:!0,includeProactiveMatches:!0});if(p&&p.length>0)return{matches:p,page:n,total_pages:Math.ceil(p.length/e),total:p.length}}const u=yield fi.getMatches({page:n,limit:e});if(u.success)return{matches:u.matches,page:u.page||n,total_pages:u.total_pages||1,total:u.total||0};const d=yield Ne.get("/matching/user-matches/me?max_matches=".concat(e,"&include_expired=false").concat(t?"&_t="+Date.now():""));return{matches:d.data||[],page:n,total_pages:Math.ceil((((a=d.data)==null?void 0:a.length)||0)/e),total:((l=d.data)==null?void 0:l.length)||0}}catch(u){return console.error("Failed to fetch matches:",u),{matches:[],page:1,total_pages:0,total:0}}})),qd=cn("matches/acceptMatch",n=>E(null,null,function*(){try{const e=yield Uo.initializeForUser();if(e&&n.match_id){const r=yield Uo.acceptMatch(n.match_id,e);if(r.success)return r.match}return(yield Ne.post("/matching/accept-match",n)).data}catch(e){throw console.error("Failed to accept match:",e),e}})),Hd=cn("matches/declineMatch",n=>E(null,null,function*(){try{const e=yield Uo.initializeForUser();if(e&&n.match_id){const r=yield Uo.declineMatch(n.match_id,e,n.reason);if(r.success)return r.match}return(yield Ne.post("/matching/decline-match",n)).data}catch(e){throw console.error("Failed to decline match:",e),e}})),Fv=ip({name:"matches",initialState:{matches:[],currentPage:1,totalPages:1,totalCount:0,loading:!1,error:null},reducers:{clearError:n=>{n.error=null},setCurrentPage:(n,e)=>{n.currentPage=e.payload}},extraReducers:n=>{n.addCase(Bd.pending,e=>{e.loading=!0,e.error=null}).addCase(Bd.fulfilled,(e,t)=>{e.loading=!1,e.matches=t.payload.matches,e.currentPage=t.payload.page,e.totalPages=t.payload.total_pages,e.totalCount=t.payload.total}).addCase(Bd.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message}).addCase(qd.pending,e=>{e.loading=!0,e.error=null}).addCase(qd.fulfilled,(e,t)=>{e.loading=!1,e.matches=e.matches.filter(r=>r.id!==t.meta.arg.match_id)}).addCase(qd.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message}).addCase(Hd.pending,e=>{e.loading=!0,e.error=null}).addCase(Hd.fulfilled,(e,t)=>{e.loading=!1,e.matches=e.matches.filter(r=>r.id!==t.meta.arg.match_id)}).addCase(Hd.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message})}}),{clearError:MP,setCurrentPage:OP}=Fv.actions,FI=Fv.reducer,Vd=cn("listings/fetchListings",r=>E(null,[r],function*({page:n=1,limit:e=10,userId:t=null}){const i=t?"/users/".concat(t,"/listings?page=").concat(n,"&limit=").concat(e):"/api/listings?page=".concat(n,"&limit=").concat(e);return(yield Ne.get(i)).data})),Wd=cn("listings/createListing",n=>E(null,null,function*(){return(yield Ne.post("/items",n)).data})),Gd=cn("listings/updateListing",t=>E(null,[t],function*({id:n,data:e}){return(yield Ne.put("/items/".concat(n),e)).data})),Kd=cn("listings/deleteListing",n=>E(null,null,function*(){return yield Ne.delete("/items/".concat(n)),n})),Yd=cn("listings/searchListings",i=>E(null,[i],function*({radius:n,query:e,latitude:t,longitude:r}){return(yield Ne.post("/api/listings/search",{radius:n||10,query:e||null,latitude:t||null,longitude:r||null})).data})),zv=ip({name:"listings",initialState:{listings:[],searchResults:[],currentPage:1,totalPages:1,totalCount:0,loading:!1,error:null},reducers:{clearError:n=>{n.error=null},setCurrentPage:(n,e)=>{n.currentPage=e.payload}},extraReducers:n=>{n.addCase(Vd.pending,e=>{e.loading=!0,e.error=null}).addCase(Vd.fulfilled,(e,t)=>{e.loading=!1,e.listings=t.payload.listings,e.currentPage=t.payload.page,e.totalPages=t.payload.total_pages,e.totalCount=t.payload.total}).addCase(Vd.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message}).addCase(Wd.pending,e=>{e.loading=!0,e.error=null}).addCase(Wd.fulfilled,(e,t)=>{e.loading=!1,e.listings.unshift(t.payload)}).addCase(Wd.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message}).addCase(Gd.pending,e=>{e.loading=!0,e.error=null}).addCase(Gd.fulfilled,(e,t)=>{e.loading=!1;const r=e.listings.findIndex(i=>i.id===t.payload.id);r!==-1&&(e.listings[r]=t.payload)}).addCase(Gd.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message}).addCase(Kd.pending,e=>{e.loading=!0,e.error=null}).addCase(Kd.fulfilled,(e,t)=>{e.loading=!1,e.listings=e.listings.filter(r=>r.id!==t.payload)}).addCase(Kd.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message}).addCase(Yd.pending,e=>{e.loading=!0,e.error=null}).addCase(Yd.fulfilled,(e,t)=>{e.loading=!1,e.searchResults=t.payload}).addCase(Yd.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message})}}),{clearError:PP,setCurrentPage:DP}=zv.actions,zI=zv.reducer,Bv=XC({reducer:{user:OI,matches:FI,listings:zI}});class BI{constructor(){this.pendingAuth=null,this.authInProgress=!1}hasActiveSession(){return E(this,null,function*(){try{return yield Le.getSession("current"),!0}catch(e){return!1}})}clearExistingSession(){return E(this,null,function*(){try{console.log(" [SESSION-RESOLVER] Checking for existing sessions...");const e=yield Le.getSession("current");e&&(console.log(" [SESSION-RESOLVER] Found active session, clearing...",e.$id),yield Le.deleteSession("current"),console.log(" [SESSION-RESOLVER] Previous session cleared successfully"))}catch(e){if(e.code===401){console.log(" [SESSION-RESOLVER] No existing session to clear");return}console.warn(" [SESSION-RESOLVER] Error clearing session:",e.message)}})}createOAuthSession(e,t){return E(this,null,function*(){if(this.authInProgress)return console.log(" [SESSION-RESOLVER] Auth already in progress, waiting..."),this.pendingAuth;this.authInProgress=!0,this.pendingAuth=this._performOAuthSession(e,t);try{return yield this.pendingAuth}finally{this.authInProgress=!1,this.pendingAuth=null}})}_performOAuthSession(e,t){return E(this,null,function*(){var r;try{console.log(" [SESSION-RESOLVER] Creating OAuth session safely..."),yield this.clearExistingSession(),yield new Promise(a=>setTimeout(a,100));const i=yield Le.createSession(e,t);return console.log(" [SESSION-RESOLVER] OAuth session created successfully:",i.provider),{success:!0,session:i}}catch(i){if(console.error(" [SESSION-RESOLVER] OAuth session creation failed:",i),i.code===401&&((r=i.message)!=null&&r.includes("session is prohibited"))){console.log(" [SESSION-RESOLVER] Session conflict detected, retrying after cleanup...");try{yield Le.deleteSessions(),yield new Promise(l=>setTimeout(l,200));const a=yield Le.createSession(e,t);return console.log(" [SESSION-RESOLVER] Retry successful:",a.provider),{success:!0,session:a}}catch(a){throw console.error(" [SESSION-RESOLVER] Retry failed:",a),a}}throw i}})}createEmailSession(e,t){return E(this,null,function*(){if(this.authInProgress)return console.log(" [SESSION-RESOLVER] Auth already in progress, waiting..."),this.pendingAuth;this.authInProgress=!0,this.pendingAuth=this._performEmailSession(e,t);try{return yield this.pendingAuth}finally{this.authInProgress=!1,this.pendingAuth=null}})}_performEmailSession(e,t){return E(this,null,function*(){var r;try{console.log(" [SESSION-RESOLVER] Creating email session safely..."),yield this.clearExistingSession(),yield new Promise(a=>setTimeout(a,100));const i=yield Le.createEmailSession(e,t);return console.log(" [SESSION-RESOLVER] Email session created successfully:",i.$id),{success:!0,session:i}}catch(i){if(console.error(" [SESSION-RESOLVER] Email session creation failed:",i),i.code===401&&((r=i.message)!=null&&r.includes("session is prohibited"))){console.log(" [SESSION-RESOLVER] Session conflict detected, retrying after cleanup...");try{yield Le.deleteSessions(),yield new Promise(l=>setTimeout(l,200));const a=yield Le.createEmailSession(e,t);return console.log(" [SESSION-RESOLVER] Retry successful:",a.$id),{success:!0,session:a}}catch(a){throw console.error(" [SESSION-RESOLVER] Retry failed:",a),a}}throw i}})}signOut(){return E(this,null,function*(){try{return console.log(" [SESSION-RESOLVER] Signing out safely..."),yield Le.deleteSession("current"),console.log(" [SESSION-RESOLVER] Sign out successful"),!0}catch(e){if(e.code===401)return console.log(" [SESSION-RESOLVER] No session to sign out from"),!0;throw console.error(" [SESSION-RESOLVER] Sign out error:",e),e}})}}const pi=new BI;class pp{constructor(){this.isMobile=this.detectMobile(),this.isIOS=this.detectIOS(),this.authState={initialized:!1,sessionVerified:!1,lastAuthAttempt:null,retryCount:0},this.STORAGE_KEYS={MOBILE_AUTH_STATE:"mobile_auth_state",OAUTH_COMPLETION:"oauth_completion_flag",MOBILE_SESSION_BACKUP:"mobile_session_backup",REDIRECT_PATH_BACKUP:"redirect_path_backup"},pp.STORAGE_KEYS=this.STORAGE_KEYS,this.TIMEOUTS={SESSION_VERIFICATION:1e4,OAUTH_COMPLETION:15e3,RETRY_DELAY:2e3,MAX_RETRIES:3},this.initializeMobileAuth()}detectMobile(){const e=navigator.userAgent||navigator.vendor||window.opera;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e)||window.innerWidth<=768||"ontouchstart"in window}detectIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}getDeviceInfo(){return{isMobile:this.isMobile,isIOS:this.isIOS,userAgent:navigator.userAgent,viewport:{width:window.innerWidth,height:window.innerHeight},cookieEnabled:navigator.cookieEnabled,storage:{localStorage:this.testStorage("localStorage"),sessionStorage:this.testStorage("sessionStorage")}}}testStorage(e){try{const t=window[e],r="__storage_test__";return t.setItem(r,r),t.removeItem(r),!0}catch(t){return!1}}initializeMobileAuth(){try{console.log(" [MOBILE-AUTH] Initializing mobile authentication helper...");const e=this.getDeviceInfo();if(console.log(" [MOBILE-AUTH] Device info:",e),!e.storage.localStorage||!e.storage.sessionStorage){console.warn(" [MOBILE-AUTH] Storage not available - running in limited mode"),this.isMobile=!1,this.authState.initialized=!0;return}if(this.isMobile)try{this.setupMobileEventListeners(),this.restoreAuthState()}catch(t){console.error(" [MOBILE-AUTH] Error setting up mobile features:",t)}this.authState.initialized=!0,console.log(" [MOBILE-AUTH] Initialization completed successfully")}catch(e){console.error(" [MOBILE-AUTH] Critical initialization error:",e),this.isMobile=!1,this.authState.initialized=!0}}setupMobileEventListeners(){try{console.log(" [MOBILE-AUTH] Setting up event listeners...");try{document.addEventListener("visibilitychange",this.handleVisibilityChange.bind(this)),console.log(" [MOBILE-AUTH] Visibility change listener added")}catch(e){console.warn(" [MOBILE-AUTH] Could not add visibility listener:",e)}try{window.addEventListener("focus",this.handleAppFocus.bind(this)),window.addEventListener("blur",this.handleAppBlur.bind(this)),console.log(" [MOBILE-AUTH] Focus/blur listeners added")}catch(e){console.warn(" [MOBILE-AUTH] Could not add focus/blur listeners:",e)}try{window.addEventListener("message",this.handlePostMessage.bind(this)),console.log(" [MOBILE-AUTH] PostMessage listener added")}catch(e){console.warn(" [MOBILE-AUTH] Could not add postMessage listener:",e)}try{window.addEventListener("storage",this.handleStorageEvent.bind(this)),console.log(" [MOBILE-AUTH] Storage listener added")}catch(e){console.warn(" [MOBILE-AUTH] Could not add storage listener:",e)}console.log(" [MOBILE-AUTH] Event listeners setup completed")}catch(e){throw console.error(" [MOBILE-AUTH] Critical error setting up event listeners:",e),e}}handleVisibilityChange(){document.visibilityState==="visible"?(console.log(" [MOBILE-AUTH] App became visible, checking auth state..."),this.checkAuthStateAfterReturn()):(console.log(" [MOBILE-AUTH] App became hidden, backing up auth state..."),this.backupAuthState())}handleAppFocus(){console.log(" [MOBILE-AUTH] App focused, checking for OAuth completion..."),setTimeout(()=>{this.checkAuthStateAfterReturn()},500)}handleAppBlur(){console.log(" [MOBILE-AUTH] App lost focus, backing up state..."),this.backupAuthState()}handlePostMessage(e){var t;e.origin===window.location.origin&&((t=e.data)==null?void 0:t.type)==="oauth_complete"&&(console.log(" [MOBILE-AUTH] Received OAuth completion message:",e.data),this.handleOAuthCompletionMessage(e.data))}handleStorageEvent(e){e.key===this.STORAGE_KEYS.OAUTH_COMPLETION&&(console.log(" [MOBILE-AUTH] OAuth completion detected via storage event"),this.handleOAuthCompletion())}backupAuthState(){try{const e=sessionStorage.getItem("redirectPath"),t={timestamp:Date.now(),redirectPath:e,url:window.location.href,authInProgress:this.authState.lastAuthAttempt!==null};localStorage.setItem(this.STORAGE_KEYS.MOBILE_AUTH_STATE,JSON.stringify(t)),localStorage.setItem(this.STORAGE_KEYS.REDIRECT_PATH_BACKUP,e||"/"),console.log(" [MOBILE-AUTH] Auth state backed up:",t)}catch(e){console.error(" [MOBILE-AUTH] Failed to backup auth state:",e)}}restoreAuthState(){try{const e=localStorage.getItem(this.STORAGE_KEYS.MOBILE_AUTH_STATE);if(e){const t=JSON.parse(e);Date.now()-t.timestamp<3e5?(console.log(" [MOBILE-AUTH] Restoring auth state:",t),t.redirectPath&&!sessionStorage.getItem("redirectPath")&&sessionStorage.setItem("redirectPath",t.redirectPath),this.authState=A(A({},this.authState),t)):(console.log(" [MOBILE-AUTH] Saved auth state too old, clearing..."),this.clearMobileAuthState())}}catch(e){console.error(" [MOBILE-AUTH] Failed to restore auth state:",e)}}clearMobileAuthState(){Object.values(this.STORAGE_KEYS).forEach(e=>{localStorage.removeItem(e)})}createMobileOAuthSession(e,t){return E(this,null,function*(){if(console.log(" [MOBILE-AUTH] Creating OAuth session with mobile optimizations..."),!this.isMobile)return pi.createOAuthSession(e,t);try{localStorage.setItem(this.STORAGE_KEYS.OAUTH_COMPLETION,Date.now().toString());const r=yield this.createSessionWithRetry(()=>pi.createOAuthSession(e,t));if(r.success)return yield this.verifyMobileSession(),localStorage.removeItem(this.STORAGE_KEYS.OAUTH_COMPLETION),console.log(" [MOBILE-AUTH] Mobile OAuth session created successfully"),r;throw new Error("Session creation failed")}catch(r){throw console.error(" [MOBILE-AUTH] Mobile OAuth session creation failed:",r),r}})}createSessionWithRetry(r){return E(this,arguments,function*(e,t=this.TIMEOUTS.MAX_RETRIES){let i=null;for(let a=0;a<=t;a++)try{return console.log(" [MOBILE-AUTH] Session creation attempt ".concat(a+1,"/").concat(t+1)),yield Promise.race([e(),this.createTimeoutPromise(this.TIMEOUTS.SESSION_VERIFICATION,"Session creation timeout")])}catch(l){if(i=l,console.warn(" [MOBILE-AUTH] Attempt ".concat(a+1," failed:"),l.message),a<t){const u=this.TIMEOUTS.RETRY_DELAY*(a+1);console.log(" [MOBILE-AUTH] Retrying in ".concat(u,"ms...")),yield new Promise(d=>setTimeout(d,u))}}throw i})}createTimeoutPromise(e,t){return new Promise((r,i)=>{setTimeout(()=>i(new Error(t)),e)})}verifyMobileSession(){return E(this,null,function*(){console.log(" [MOBILE-AUTH] Verifying mobile session...");try{const e=yield Promise.race([Le.get(),this.createTimeoutPromise(this.TIMEOUTS.SESSION_VERIFICATION,"Session verification timeout")]);return console.log(" [MOBILE-AUTH] Session verified for user:",e.email),this.authState.sessionVerified=!0,!0}catch(e){throw console.error(" [MOBILE-AUTH] Session verification failed:",e),this.authState.sessionVerified=!1,e}})}checkAuthStateAfterReturn(){return E(this,null,function*(){if(this.isMobile){console.log(" [MOBILE-AUTH] Checking auth state after mobile app return...");try{const e=localStorage.getItem(this.STORAGE_KEYS.OAUTH_COMPLETION);if(e){const t=parseInt(e);Date.now()-t<3e4?(console.log(" [MOBILE-AUTH] Recent OAuth completion detected, verifying session..."),yield this.handleOAuthCompletion()):(console.log(" [MOBILE-AUTH] Old OAuth completion flag found, clearing..."),localStorage.removeItem(this.STORAGE_KEYS.OAUTH_COMPLETION))}yield this.verifyCurrentSession()}catch(e){console.error(" [MOBILE-AUTH] Error checking auth state after return:",e)}}})}handleOAuthCompletion(){return E(this,null,function*(){console.log(" [MOBILE-AUTH] Handling OAuth completion...");try{yield new Promise(i=>setTimeout(i,1e3));let e=!1,t=0;const r=3;for(;!e&&t<r;)try{e=yield this.verifyCurrentSession(),e||(t++,t<r&&(console.log(" [MOBILE-AUTH] Session verification retry ".concat(t,"/").concat(r)),yield new Promise(i=>setTimeout(i,1e3*t))))}catch(i){t++,console.warn(" [MOBILE-AUTH] Session verification attempt ".concat(t," failed:"),i.message),t<r&&(yield new Promise(a=>setTimeout(a,1e3*t)))}e?(localStorage.setItem(this.STORAGE_KEYS.OAUTH_COMPLETION,Date.now().toString()),window.dispatchEvent(new CustomEvent("mobile-auth-complete",{detail:{success:!0,timestamp:Date.now(),verified:!0}})),console.log(" [MOBILE-AUTH] OAuth completion handled successfully with session verification")):(console.warn(" [MOBILE-AUTH] OAuth completion detected but session verification failed after retries"),window.dispatchEvent(new CustomEvent("mobile-auth-complete",{detail:{success:!0,timestamp:Date.now(),verified:!1,warning:"Session verification failed but OAuth may have succeeded"}})))}catch(e){console.error(" [MOBILE-AUTH] Error handling OAuth completion:",e),window.dispatchEvent(new CustomEvent("mobile-auth-error",{detail:{error:e.message,timestamp:Date.now(),phase:"oauth-completion"}}))}})}handleOAuthCompletionMessage(e){return E(this,null,function*(){console.log(" [MOBILE-AUTH] Processing OAuth completion message:",e);try{e.success?(localStorage.setItem(this.STORAGE_KEYS.OAUTH_COMPLETION,Date.now().toString()),yield this.handleOAuthCompletion()):(console.error(" [MOBILE-AUTH] OAuth completion message indicates failure:",e.error),window.dispatchEvent(new CustomEvent("mobile-auth-error",{detail:{error:e.error,timestamp:Date.now()}})))}catch(t){console.error(" [MOBILE-AUTH] Error processing OAuth completion message:",t)}})}verifyCurrentSession(){return E(this,null,function*(){try{const e=yield Promise.race([Le.get(),this.createTimeoutPromise(this.TIMEOUTS.SESSION_VERIFICATION,"Mobile session verification timeout")]);console.log(" [MOBILE-AUTH] Current session verified for user:",e.email),this.authState.sessionVerified=!0;try{localStorage.setItem(this.STORAGE_KEYS.MOBILE_SESSION_BACKUP,JSON.stringify({userId:e.$id,email:e.email,timestamp:Date.now()}))}catch(t){console.warn(" [MOBILE-AUTH] Could not backup session info:",t)}return!0}catch(e){if(e.code===401)console.log(" [MOBILE-AUTH] No current session found");else if(e.message==="Mobile session verification timeout"){console.warn(" [MOBILE-AUTH] Session verification timed out on mobile network");try{const t=localStorage.getItem(this.STORAGE_KEYS.MOBILE_SESSION_BACKUP);if(t){const r=JSON.parse(t);if(Date.now()-r.timestamp<3e5)return console.log(" [MOBILE-AUTH] Using recent session backup due to timeout"),!0}}catch(t){console.warn(" [MOBILE-AUTH] Could not check session backup:",t)}}else console.error(" [MOBILE-AUTH] Session verification error:",e);return this.authState.sessionVerified=!1,!1}})}getMobileRedirectPath(){const t=[sessionStorage.getItem("redirectPath"),localStorage.getItem(this.STORAGE_KEYS.REDIRECT_PATH_BACKUP),"/"].find(r=>r&&r!=="null")||"/";return console.log(" [MOBILE-AUTH] Mobile redirect path:",t),t}setMobileRedirectPath(e){sessionStorage.setItem("redirectPath",e),localStorage.setItem(this.STORAGE_KEYS.REDIRECT_PATH_BACKUP,e),console.log(" [MOBILE-AUTH] Mobile redirect path set:",e)}cleanup(){this.clearMobileAuthState(),document.removeEventListener("visibilitychange",this.handleVisibilityChange.bind(this)),window.removeEventListener("focus",this.handleAppFocus.bind(this)),window.removeEventListener("blur",this.handleAppBlur.bind(this)),window.removeEventListener("message",this.handlePostMessage.bind(this)),window.removeEventListener("storage",this.handleStorageEvent.bind(this)),console.log(" [MOBILE-AUTH] Mobile auth helper cleaned up")}getAuthStatus(){return Y(A({},this.authState),{isMobile:this.isMobile,isIOS:this.isIOS,deviceInfo:this.getDeviceInfo()})}}const wt=new pp;class qI{constructor(){this.account=Le,this.databases=Ri}getCurrentUser(){return E(this,null,function*(){var e,t;try{if(wt.isMobile)if(console.log(" [APPWRITE-AUTH] Getting current user with mobile optimizations..."),sessionStorage.getItem("oauth_callback_processed")||localStorage.getItem(wt.STORAGE_KEYS.OAUTH_COMPLETION))console.log(" [APPWRITE-AUTH] OAuth in progress, skipping mobile verification to avoid race condition");else try{if(!(yield wt.verifyCurrentSession()))return console.log(" [APPWRITE-AUTH] Mobile session verification failed"),{success:!1,user:null}}catch(a){console.warn(" [APPWRITE-AUTH] Session verification failed, proceeding with direct check:",a.message)}const r=yield this.account.get();return{success:!0,user:{id:r.$id,email:r.email,name:r.name,avatar:((e=r.prefs)==null?void 0:e.avatar)||null,isAuthenticated:!0,provider:((t=r.prefs)==null?void 0:t.provider)||"email"}}}catch(r){if(console.log("getCurrentUser error:",r),r.code===401)return{success:!1,user:null};throw r}})}getCurrentSession(){return E(this,null,function*(){try{return{success:!0,session:yield this.account.getSession("current")}}catch(e){if(e.code===401)return{success:!1,session:null};throw e}})}createGoogleOAuthSession(){return E(this,null,function*(){try{const e="".concat(window.location.origin,"/auth/callback"),t="".concat(window.location.origin,"/auth/error");if(console.log(" Starting Google OAuth with URLs:",{successUrl:e,failureUrl:t}),wt.isMobile){console.log(" [APPWRITE-AUTH] Setting mobile redirect path for OAuth...");const r=window.location.pathname+window.location.search;r!=="/login"&&r!=="/signup"&&wt.setMobileRedirectPath(r)}return console.log(" Using Appwrite project:",this.account.client.config.project),console.log(" Current origin:",window.location.origin),yield this.account.createOAuth2Session(Of.Google,e,t),{success:!0}}catch(e){return console.error("Google OAuth error details:",{message:e.message,code:e.code,type:e.type,fullError:e}),e.message&&e.message.includes("register")?{success:!1,error:"Platform not registered. Please ensure the app domain is added to Appwrite Console."}:e.message&&e.message.includes("Invalid")?{success:!1,error:"OAuth configuration error: ".concat(e.message)}:{success:!1,error:xe(e)}}})}handleOAuthCallback(e,t,r="google"){return E(this,null,function*(){var i;try{console.log(" Handling OAuth callback with Appwrite session creation");let a;if(wt.isMobile?(console.log(" [APPWRITE-AUTH] Using mobile-enhanced OAuth session creation..."),a=yield wt.createMobileOAuthSession(e,t)):(console.log(" [APPWRITE-AUTH] Using standard OAuth session creation..."),a=yield pi.createOAuthSession(e,t)),!a.success)throw new Error("Failed to create OAuth session");const l=a.session;console.log(" OAuth session created:",l.provider);const u=yield this.account.get();return console.log(" User authenticated:",u.email),yield this.createOrUpdateUserProfile(u,r),{success:!0,user:{id:u.$id,email:u.email,name:u.name,avatar:((i=u.prefs)==null?void 0:i.avatar)||null,provider:r,isAuthenticated:!0},session:l}}catch(a){return console.error("OAuth callback error:",a),{success:!1,error:xe(a)}}})}createOrUpdateUserProfile(e,t="email"){return E(this,null,function*(){var r;try{console.log(" Managing user profile in Appwrite database...");let i=null;try{i=yield this.databases.getDocument(V,X.users,e.$id),console.log(" Found existing user profile by document ID")}catch(l){l.code===404?console.log(" No existing profile found, will create new profile"):console.log(" Profile search failed, will try to create new profile")}const a={email:e.email,fullName:e.name||e.email.split("@")[0],username:(i==null?void 0:i.username)||e.email.split("@")[0].toLowerCase(),profileImage:((r=e.prefs)==null?void 0:r.avatar)||null,location:(i==null?void 0:i.location)||"",createdAt:(i==null?void 0:i.createdAt)||new Date().toISOString(),updatedAt:new Date().toISOString(),isVerified:e.emailVerification||!1};if(i){const l=yield this.databases.updateDocument(V,X.users,i.$id,a);return console.log(" Updated user profile"),l}else{const l=yield this.databases.createDocument(V,X.users,e.$id,a);return console.log(" Created new user profile"),l}}catch(i){return console.error(" Error managing user profile:",i),null}})}signInWithEmail(e,t){return E(this,null,function*(){var r;try{const i=yield pi.createEmailSession(e,t);if(!i.success)throw new Error("Failed to create email session");const a=i.session,l=yield this.account.get();return yield this.createOrUpdateUserProfile(l,"email"),{success:!0,user:{id:l.$id,email:l.email,name:l.name,avatar:((r=l.prefs)==null?void 0:r.avatar)||null,provider:"email",isAuthenticated:!0},session:a}}catch(i){return{success:!1,error:xe(i)}}})}signUpWithEmail(e,t,r){return E(this,null,function*(){try{const i=yield this.account.create(ze.unique(),e,t,r),a=yield pi.createEmailSession(e,t);if(!a.success)throw new Error("Failed to create email session");const l=a.session;return yield this.createOrUpdateUserProfile(i,"email"),{success:!0,user:{id:i.$id,email:i.email,name:i.name,avatar:null,provider:"email",isAuthenticated:!0},session:l}}catch(i){return{success:!1,error:xe(i)}}})}signOut(){return E(this,null,function*(){try{return yield this.account.deleteSession("current"),console.log(" User signed out successfully"),{success:!0}}catch(e){return console.error("Sign out error:",e),{success:!1,error:xe(e)}}})}signOutFromAllDevices(){return E(this,null,function*(){try{return yield this.account.deleteSessions(),console.log(" Signed out from all devices"),{success:!0}}catch(e){return{success:!1,error:xe(e)}}})}getUserProfile(e=null){return E(this,null,function*(){try{let t=e;if(!t){const r=yield this.getCurrentUser();if(!r.success)return{success:!1,error:"Not authenticated"};t=r.user.id}try{return{success:!0,profile:yield this.databases.getDocument(V,X.users,t)}}catch(r){if(r.code!==404)throw r;return console.warn("Profile not found for user ID:",t),{success:!1,error:"Profile not found"}}}catch(t){return{success:!1,error:xe(t)}}})}updateUserProfile(e){return E(this,null,function*(){try{if(!(yield this.getCurrentUser()).success)return{success:!1,error:"Not authenticated"};const r=yield this.getUserProfile();return r.success?{success:!0,profile:yield this.databases.updateDocument(V,X.users,r.profile.$id,Y(A({},e),{updated_at:new Date().toISOString()}))}:{success:!1,error:"Profile not found"}}catch(t){return{success:!1,error:xe(t)}}})}sendPasswordRecovery(e){return E(this,null,function*(){try{const t="".concat(window.location.origin,"/reset-password");return yield this.account.createRecovery(e,t),{success:!0,message:"Password recovery email sent successfully"}}catch(t){return{success:!1,error:xe(t)}}})}completePasswordRecovery(e,t,r){return E(this,null,function*(){try{return yield this.account.updateRecovery(e,t,r,r),{success:!0,message:"Password updated successfully"}}catch(i){return{success:!1,error:xe(i)}}})}sendEmailVerification(){return E(this,null,function*(){try{const e="".concat(window.location.origin,"/verify-email");return yield this.account.createVerification(e),{success:!0,message:"Verification email sent successfully"}}catch(e){return{success:!1,error:xe(e)}}})}verifyEmail(e,t){return E(this,null,function*(){try{return yield this.account.updateVerification(e,t),{success:!0,message:"Email verified successfully"}}catch(r){return{success:!1,error:xe(r)}}})}}const ms=new qI;let ii=!1,Xd=!1;const mc=()=>{const n=Ow(),{currentUser:e,isAuthenticated:t,loading:r,error:i}=Qf(d=>d.user),a=S.useRef(!1),l=S.useRef(!1),u=()=>E(null,null,function*(){if(a.current||ii||l.current){console.log(" [USE-AUTH] Auth initialization already in progress, skipping...");return}a.current=!0,ii=!0,l.current=!0;try{console.log(" Initializing authentication state..."),wt.isMobile&&console.log(" [USE-AUTH] Mobile auth status:",wt.getAuthStatus());const d=yield ms.getCurrentUser();if(d.success&&d.user){console.log(" Found authenticated user:",d.user.email);let p=null;try{const h=yield ms.getUserProfile();h.success&&(p=h.profile,console.log(" User profile loaded:",p.$id))}catch(h){console.warn("Could not load user profile:",h)}n(vl(Y(A({},d.user),{profile:p,isAuthenticated:!0}))),n(zd())}else console.log(" No authenticated user found"),n(vl(null))}catch(d){const p="ERR_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9));console.error(" Auth initialization failed:",{errorId:p,message:d.message,code:d.code,stack:d.stack,originalError:d}),n(vl(null)),d.code!==401&&d.code!==404&&(console.error(" Auth error ID: ".concat(p," - Full error details logged above")),n(Oy("Authentication initialization failed - Error ID: ".concat(p))))}finally{l.current=!1}});return S.useEffect(()=>{if(wt.isMobile&&!Xd){console.log(" [USE-AUTH] Setting up mobile authentication listeners...");const d=h=>{console.log(" [USE-AUTH] Mobile auth completion detected:",h.detail),sessionStorage.removeItem("oauth_callback_processed"),h.detail.verified!==!1?(ii=!1,a.current=!1,setTimeout(()=>{console.log(" [USE-AUTH] Re-initializing auth after mobile OAuth completion"),u()},500)):h.detail.warning&&(console.warn(" [USE-AUTH] Mobile OAuth completed with verification warning:",h.detail.warning),ii=!1,a.current=!1,setTimeout(()=>{console.log(" [USE-AUTH] Attempting auth re-initialization despite verification warning"),u()},1500))},p=h=>{console.error(" [USE-AUTH] Mobile auth error:",h.detail),sessionStorage.removeItem("oauth_callback_processed");let g="Mobile authentication failed: ".concat(h.detail.error);h.detail.phase==="oauth-completion"&&(g="Authentication completed but session verification failed. Please try signing in again."),n(Oy(g))};return window.addEventListener("mobile-auth-complete",d),window.addEventListener("mobile-auth-error",p),Xd=!0,()=>{window.removeEventListener("mobile-auth-complete",d),window.removeEventListener("mobile-auth-error",p),Xd=!1}}},[n]),S.useEffect(()=>{!e&&!r&&!ii&&u()},[n,e,r]),{user:e,isAuthenticated:!!e&&t,loading:r,error:i,isLoggedIn:!!e&&t,logout:()=>E(null,null,function*(){try{yield ms.signOut(),n(vl(null)),n(zd()),ii=!1,a.current=!1,wt.isMobile&&wt.clearMobileAuthState()}catch(d){console.error("Logout error:",d)}}),clearError:()=>{n(zd())}}};var HI={};class VI{constructor(e){this.config=e}signin(e,t){return E(this,null,function*(){throw new Error("signin method must be implemented")})}signup(e,t,r){return E(this,null,function*(){throw new Error("signup method must be implemented")})}signInWithProvider(e){return E(this,null,function*(){throw new Error("signInWithProvider method must be implemented")})}getCurrentUser(){return E(this,null,function*(){throw new Error("getCurrentUser method must be implemented")})}logout(){return E(this,null,function*(){throw new Error("logout method must be implemented")})}}const Df={"recursion-chat":{appwriteEndpoint:"https://nyc.cloud.appwrite.io/v1",appwriteProjectId:"689bdaf500072795b0f6",databaseId:"recursion_chat_db",oauth:{successUrl:window.location.origin+"/auth/success",errorUrl:window.location.origin+"/auth/error"},enabledProviders:["google","github"],features:{emailAuth:!0,ssoAuth:!0,biometricAuth:!1}},"trading-post":{appwriteEndpoint:"https://nyc.cloud.appwrite.io/v1",appwriteProjectId:"689bdee000098bd9d55c",databaseId:"trading_post_db",oauth:{successUrl:window.location.origin+"/auth/callback",errorUrl:window.location.origin+"/auth/error"},enabledProviders:["google","github","facebook"],features:{emailAuth:!0,ssoAuth:!0,biometricAuth:!0}},"gx-multi-agent":{appwriteEndpoint:"https://nyc.cloud.appwrite.io/v1",appwriteProjectId:"68a4e3da0022f3e129d0",databaseId:"gx_multi_agent_db",oauth:{successUrl:window.location.origin+"/auth/success",errorUrl:window.location.origin+"/auth/failure"},enabledProviders:["google","github","microsoft"],features:{emailAuth:!0,ssoAuth:!0,biometricAuth:!1}},slumlord:{appwriteEndpoint:"https://nyc.cloud.appwrite.io/v1",appwriteProjectId:"68a0db634634a6d0392f",databaseId:"slumlord_game_db",oauth:{successUrl:window.location.origin+"/auth/success",errorUrl:window.location.origin+"/auth/error"},enabledProviders:["google","github","discord"],features:{emailAuth:!0,ssoAuth:!0,biometricAuth:!1}},archon:{appwriteEndpoint:"https://nyc.cloud.appwrite.io/v1",appwriteProjectId:"68a4e3da0022f3e129d0",databaseId:"archon_db",oauth:{successUrl:window.location.origin+"/auth/success",errorUrl:window.location.origin+"/auth/error"},enabledProviders:["google","github","apple","microsoft"],features:{emailAuth:!0,ssoAuth:!0,biometricAuth:!0}}};function WI(){const n=window.location.hostname;if(n.includes("recursion")||n.includes("chat"))return"recursion-chat";if(n.includes("trading"))return"trading-post";if(n.includes("gx")||n.includes("multi-agent"))return"gx-multi-agent";if(n.includes("slumlord")||n.includes("rpg"))return"slumlord";if(n.includes("archon"))return"archon";try{const e=HI.npm_package_name;if(e){for(const[t,r]of Object.entries(Df))if(e.includes(t)||e.includes(t.replace("-","")))return t}}catch(e){}return"recursion-chat"}function GI(n=null){const e=n||WI(),t=Df[e];return t||(console.warn("[UnifiedSSO] Unknown project: ".concat(e,", using recursion-chat config")),Df["recursion-chat"])}function KI(n){return new class extends VI{constructor(e){super(e),this._clientPromise=this._initializeAppwrite()}_initializeAppwrite(){return E(this,null,function*(){try{console.log("[UnifiedSSO] Initializing mobile-safe Appwrite service...");let e;try{e=yield Ye(()=>import("./mobile-safe-appwrite-BeYGKc1i.js"),[]),console.log("[UnifiedSSO] Mobile-safe Appwrite service imported successfully")}catch(r){console.warn("[UnifiedSSO] Mobile-safe service not available, trying standard appwrite...");try{const i=yield Ye(()=>Promise.resolve().then(()=>pc),void 0);return console.warn("[UnifiedSSO] Using standard Appwrite (may cause OAuth errors on mobile)"),{client:i.client,account:i.account,databases:i.databases,Client:i.Client,Account:i.Account,Databases:i.Databases}}catch(i){throw new Error("Could not import any Appwrite service. Please ensure mobile-safe-appwrite.js is available.")}}const t=e.default||e;t.endpoint=this.config.appwriteEndpoint,t.projectId=this.config.appwriteProjectId;try{yield t.initializeFromStorage(),console.log("[UnifiedSSO] Mobile-safe service initialized from storage")}catch(r){console.log("[UnifiedSSO] No stored session, service ready for new auth")}return console.log("[UnifiedSSO] Mobile-safe Appwrite service initialized successfully"),{mobileSafeService:t,client:t.client||{},account:{get:()=>t.getCurrentUser(),createEmailSession:(r,i)=>t.signInWithEmail(r,i),createOAuth2Session:(r,i,a)=>E(this,null,function*(){return t.oauthSuccessUrl=i,t.oauthErrorUrl=a,r==="google"?t.signInWithGoogle():t.handleStandardOAuth()}),create:(r,i,a,l)=>E(this,null,function*(){throw new Error("Sign up not implemented in mobile-safe service. Use standard Appwrite.")}),deleteSession:()=>t.signOut(),getSession:()=>E(this,null,function*(){const r=t.getCurrentUser();if(r)return{$id:"current",userId:r.$id||r.id};throw new Error("No active session")})}}}catch(e){throw console.error("[UnifiedSSO] Failed to initialize mobile-safe Appwrite:",e),e}})}signin(e,t){return E(this,null,function*(){const{mobileSafeService:r,account:i}=yield this._clientPromise;try{let a;if(r)a=yield r.signInWithEmail(e,t),console.log("[UnifiedSSO] Mobile-safe email sign in result:",a);else{const l=yield i.createEmailSession(e,t);a={success:!0,user:yield i.get(),session:l}}return{success:!0,user:a.user,session:a.session,message:a.message||"Successfully signed in!"}}catch(a){throw console.error("[UnifiedSSO] Email sign in error:",a),new Error(a.message||"Sign in failed")}})}signup(e,t,r){return E(this,null,function*(){const{mobileSafeService:i,account:a}=yield this._clientPromise;try{let l;return i?(l=yield i.signUp(e,t,r),console.log("[UnifiedSSO] Mobile-safe signup result:",l)):l={success:!0,user:yield a.create("unique()",e,t,r)},{success:!0,user:l.user,message:l.message||"Account created successfully! Please verify your email."}}catch(l){throw console.error("[UnifiedSSO] Signup error:",l),new Error(l.message||"Sign up failed")}})}signInWithProvider(e){return E(this,null,function*(){const{mobileSafeService:t,account:r}=yield this._clientPromise;try{return console.log("[UnifiedSSO] Starting ".concat(e," OAuth authentication...")),t?(console.log("[UnifiedSSO] Using mobile-safe OAuth service"),t.oauthSuccessUrl=this.config.oauth.successUrl,t.oauthErrorUrl=this.config.oauth.errorUrl,e.toLowerCase()==="google"?(yield t.signInWithGoogle(),{success:!0}):(console.warn("[UnifiedSSO] Mobile-safe doesn't support ".concat(e,", using standard OAuth")),yield r.createOAuth2Session(e,this.config.oauth.successUrl,this.config.oauth.errorUrl),{success:!0})):(console.warn("[UnifiedSSO] Using standard Appwrite OAuth (may fail on mobile)"),yield r.createOAuth2Session(e,this.config.oauth.successUrl,this.config.oauth.errorUrl),{success:!0})}catch(i){throw console.error("[UnifiedSSO] ".concat(e," OAuth error:"),i),new Error(i.message||"".concat(e," authentication failed"))}})}getCurrentUser(){return E(this,null,function*(){const{mobileSafeService:e,account:t}=yield this._clientPromise;try{return e?yield e.getCurrentUser():yield t.get()}catch(r){return console.warn("[UnifiedSSO] getCurrentUser error:",r.message),null}})}logout(){return E(this,null,function*(){const{mobileSafeService:e,account:t}=yield this._clientPromise;try{if(e){const r=yield e.signOut();return console.log("[UnifiedSSO] Mobile-safe logout result:",r),r}else return yield t.deleteSession("current"),{success:!0}}catch(r){throw console.error("[UnifiedSSO] Logout error:",r),new Error(r.message||"Logout failed")}})}handleOAuthCallback(){return E(this,null,function*(){const{mobileSafeService:e,account:t}=yield this._clientPromise;try{if(e){const r=yield e.handleOAuthCallback();return console.log("[UnifiedSSO] Mobile-safe OAuth callback result:",r),r}else{const r=yield t.get(),i=yield t.getSession("current");return{success:!0,user:r,session:i}}}catch(r){throw console.error("[UnifiedSSO] OAuth callback error:",r),new Error(r.message||"OAuth callback failed")}})}}(n)}const YI={isIOSSafari:/iPad|iPhone|iPod/.test(navigator.userAgent)&&/Safari/.test(navigator.userAgent)&&!/CriOS|FxiOS/.test(navigator.userAgent),setAuthSuccess(n){try{localStorage.setItem("ios_auth_success",JSON.stringify({timestamp:Date.now(),userId:n.$id||n.id,email:n.email}))}catch(e){console.warn("[UnifiedSSO] Could not save auth success to localStorage")}},hasRecentAuthSuccess(){try{const n=localStorage.getItem("ios_auth_success");if(!n)return!1;const{timestamp:e}=JSON.parse(n);return Date.now()-e<300*1e3}catch(n){return!1}},incrementRedirectCount(){try{const n=parseInt(localStorage.getItem("ios_redirect_count")||"0")+1;return localStorage.setItem("ios_redirect_count",n.toString()),n}catch(n){return 1}},breakAuthLoop(){try{const n=parseInt(localStorage.getItem("ios_redirect_count")||"0");if(n>3)return console.error("[UnifiedSSO] Breaking iOS Safari auth loop after",n,"redirects"),localStorage.removeItem("ios_redirect_count"),localStorage.removeItem("ios_auth_success"),!0}catch(n){}return!1},clearAuthData(){try{localStorage.removeItem("ios_auth_success"),localStorage.removeItem("ios_redirect_count")}catch(n){}}};function qv(n=null,e={}){const t=GI(n),r=KI(t);return A({authService:r,oauth:t.oauth,enabledProviders:t.enabledProviders,features:t.features,projectConfig:t,iosSessionManager:YI},e)}typeof window!="undefined"&&(window.createUnifiedSSOConfig=qv);const Py={google:{name:"Google",icon:"",svg:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",colors:{bg:"#ffffff",text:"#3c4043",border:"#dadce0",hover:"#f8f9fa"}},github:{name:"GitHub",icon:"",colors:{bg:"#24292e",text:"#ffffff",border:"#24292e",hover:"#1a1e22"}},facebook:{name:"Facebook",icon:"",colors:{bg:"#1877f2",text:"#ffffff",border:"#1877f2",hover:"#166fe5"}},apple:{name:"Apple",icon:"",colors:{bg:"#000000",text:"#ffffff",border:"#000000",hover:"#1a1a1a"}},microsoft:{name:"Microsoft",icon:"",colors:{bg:"#2f2f2f",text:"#ffffff",border:"#2f2f2f",hover:"#1f1f1f"}},discord:{name:"Discord",icon:"",colors:{bg:"#5865f2",text:"#ffffff",border:"#5865f2",hover:"#4752c4"}}},XI=({provider:n="google",onSuccess:e,onError:t,text:r,style:i="default",size:a="medium",fullWidth:l=!1,disabled:u=!1,className:d="",appwriteConfig:p={}})=>{const[h,g]=S.useState(!1),[v,b]=S.useState(!1);S.useEffect(()=>{b(!0)},[]);const C=Py[n]||Py.google,T=()=>E(null,null,function*(){if(!(h||u)){g(!0);try{if(p.authService){const L=yield p.authService.signInWithProvider(n);g(!1),e&&e(L)}else throw new Error("Authentication service not configured")}catch(L){g(!1),console.error("[UnifiedSSO] ".concat(n," auth error:"),L),t&&t(L)}}}),x={small:"px-3 py-1.5 text-sm",medium:"px-4 py-2.5 text-base",large:"px-6 py-3 text-lg"},M={default:"bg-white border-2",filled:"",outline:"bg-transparent border-2",minimal:"bg-transparent border-0"},R=Y(A({},{display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"10px",borderRadius:"8px",fontWeight:"500",cursor:u||h?"not-allowed":"pointer",opacity:u?.5:1,transition:"all 0.2s ease",width:l?"100%":"auto",position:"relative",overflow:"hidden",userSelect:"none",minHeight:"48px"}),{backgroundColor:i==="filled"?C.colors.bg:i==="default"?"#ffffff":"transparent",color:i==="filled"?C.colors.text:C.colors.bg,borderColor:i==="minimal"?"transparent":C.colors.border}),O=r||"Continue with ".concat(C.name);return w.jsxs("button",{onClick:T,disabled:u||h||!v,className:"unified-sso-button ".concat(x[a]," ").concat(M[i]," ").concat(d),style:R,onMouseEnter:L=>{!u&&!h&&(L.currentTarget.style.transform="translateY(-1px)",L.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.15)",i==="filled"?L.currentTarget.style.backgroundColor=C.colors.hover:i==="default"&&(L.currentTarget.style.backgroundColor=C.colors.hover,L.currentTarget.style.color="#ffffff"))},onMouseLeave:L=>{L.currentTarget.style.transform="translateY(0)",L.currentTarget.style.boxShadow="none",i==="filled"?L.currentTarget.style.backgroundColor=C.colors.bg:i==="default"&&(L.currentTarget.style.backgroundColor="#ffffff",L.currentTarget.style.color=C.colors.bg)},children:[h?w.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[w.jsx("span",{style:{width:"16px",height:"16px",border:"2px solid transparent",borderTopColor:"currentColor",borderRadius:"50%",animation:"spin 0.6s linear infinite"}}),"Connecting..."]}):w.jsxs(w.Fragment,{children:[C.svg?w.jsx("img",{src:C.svg,alt:C.name,style:{width:"20px",height:"20px"}}):w.jsx("span",{style:{fontSize:"20px"},children:C.icon}),w.jsx("span",{children:O})]}),w.jsx("style",{jsx:!0,children:"\n        @keyframes spin {\n          to { transform: rotate(360deg); }\n        }\n      "})]})},QI=({appwriteConfig:n,onSuccess:e,onError:t,showEmailAuth:r=!0,showSSOAuth:i=!0,enabledProviders:a=["google","github"],title:l="Welcome",subtitle:u="Sign in to your account",className:d=""})=>{const[p,h]=S.useState(!1),[g,v]=S.useState(""),[b,C]=S.useState(""),[T,x]=S.useState(!1),[M,I]=S.useState({type:"",text:""}),[R,O]=S.useState(!1),L=F=>E(null,null,function*(){F.preventDefault(),h(!0),I({type:"",text:""});try{if(T){const K=yield n.authService.signup(g,b,g.split("@")[0]);I({type:"success",text:K.message||"Account created! Please check your email for verification."})}else{const K=yield n.authService.signin(g,b);I({type:"success",text:"Successfully signed in! Redirecting..."}),setTimeout(()=>{e&&e(K.user)},1e3)}}catch(K){I({type:"error",text:K.message||"Authentication failed"})}finally{h(!1)}}),H=F=>E(null,null,function*(){I({type:"success",text:"Welcome, ".concat(F.name||F.email,"!")}),setTimeout(()=>{e&&e(F)},1e3)}),W=F=>{I({type:"error",text:F.message||"Authentication failed. Please try again."})};return w.jsxs("div",{className:"unified-auth-wrapper ".concat(d),children:[w.jsxs("div",{className:"unified-auth-background",children:[w.jsx("div",{className:"bg-gradient"}),w.jsx("div",{className:"bg-pattern"})]}),w.jsx("div",{className:"unified-auth-container",children:w.jsxs("div",{className:"unified-auth-card",children:[w.jsxs("div",{className:"unified-auth-header",children:[w.jsx("h1",{className:"unified-auth-title",children:l}),w.jsx("p",{className:"unified-auth-subtitle",children:u})]}),M.text&&w.jsxs("div",{className:"unified-auth-message ".concat(M.type),children:[w.jsx("span",{className:"message-icon",children:M.type==="success"?"":M.type==="error"?"!":M.type==="info"?"":""}),M.text]}),r&&w.jsxs(w.Fragment,{children:[w.jsxs("form",{onSubmit:L,className:"unified-auth-form",children:[w.jsxs("div",{className:"form-group",children:[w.jsx("label",{htmlFor:"email",className:"form-label",children:"Email Address"}),w.jsx("input",{id:"email",type:"email",className:"form-input",placeholder:"you@example.com",value:g,onChange:F=>v(F.target.value),required:!0,disabled:p,autoComplete:"email"})]}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{htmlFor:"password",className:"form-label",children:"Password"}),w.jsxs("div",{className:"password-input-wrapper",children:[w.jsx("input",{id:"password",type:R?"text":"password",className:"form-input with-toggle",placeholder:T?"Create a strong password":"Enter your password",value:b,onChange:F=>C(F.target.value),required:!0,disabled:p,minLength:"8",autoComplete:T?"new-password":"current-password"}),w.jsx("button",{type:"button",className:"password-toggle-btn",onClick:()=>O(!R),tabIndex:"-1","aria-label":R?"Hide password":"Show password",children:R?"":""})]}),T&&w.jsx("p",{className:"form-hint",children:"Must be at least 8 characters"})]}),w.jsx("button",{type:"submit",className:"btn btn-primary",disabled:p,children:p?w.jsxs("span",{className:"btn-loading",children:[w.jsx("span",{className:"spinner"}),T?"Creating Account...":"Signing In..."]}):T?"Create Account":"Sign In"})]}),w.jsx("div",{className:"unified-auth-footer",children:w.jsxs("p",{className:"auth-switch-text",children:[T?"Already have an account?":"Don't have an account?",w.jsx("button",{type:"button",className:"auth-switch-btn",onClick:()=>{x(!T),I({type:"",text:""})},disabled:p,children:T?"Sign In":"Sign Up"})]})})]}),r&&i&&w.jsxs("div",{className:"unified-auth-divider",children:[w.jsx("span",{className:"divider-line"}),w.jsx("span",{className:"divider-text",children:"OR"}),w.jsx("span",{className:"divider-line"})]}),i&&w.jsx("div",{className:"unified-social-auth",children:a.map(F=>w.jsx(XI,{provider:F,onSuccess:H,onError:W,size:"large",fullWidth:!0,style:"default",className:"sso-button-spacing",appwriteConfig:n},F))})]})}),p&&w.jsx("div",{className:"unified-auth-overlay",children:w.jsxs("div",{className:"unified-auth-loading-modal",children:[w.jsx("div",{className:"spinner-large"}),w.jsx("p",{children:"Processing authentication..."}),w.jsx("p",{className:"loading-hint",children:"Please wait while we sign you in"})]})})]})},kn={isIOS:()=>/iPad|iPhone|iPod/.test(navigator.userAgent),isAndroid:()=>/Android/.test(navigator.userAgent),isMobile:()=>kn.isIOS()||kn.isAndroid(),isIOSSafari:()=>{const n=navigator.userAgent;return/iPad|iPhone|iPod/.test(n)&&/Safari/.test(n)&&!/CriOS|FxiOS/.test(n)},isWebView:()=>window.navigator.standalone===!0||window.matchMedia("(display-mode: standalone)").matches||document.URL.indexOf("http://")===-1&&document.URL.indexOf("https://")===-1,getPixelRatio:()=>window.devicePixelRatio||1,supportsTouch:()=>"ontouchstart"in window||navigator.maxTouchPoints>0,getScreenInfo:()=>({width:window.screen.width,height:window.screen.height,availWidth:window.screen.availWidth,availHeight:window.screen.availHeight,pixelRatio:kn.getPixelRatio()}),getOrientation:()=>screen.orientation?screen.orientation.angle===0||screen.orientation.angle===180?"portrait":"landscape":window.innerHeight>window.innerWidth?"portrait":"landscape"},di={getViewport:()=>({width:window.innerWidth,height:window.innerHeight,visualWidth:window.visualViewport?window.visualViewport.width:window.innerWidth,visualHeight:window.visualViewport?window.visualViewport.height:window.innerHeight}),isVirtualKeyboardOpen:()=>window.visualViewport?window.visualViewport.height<window.innerHeight*.75:!1,updateViewportHeight:()=>{const n=window.innerHeight*.01;if(document.documentElement.style.setProperty("--vh","".concat(n,"px")),window.visualViewport){const e=window.visualViewport.height*.01;document.documentElement.style.setProperty("--dvh","".concat(e,"px"))}},initViewportTracking:()=>{di.updateViewportHeight(),window.addEventListener("resize",di.updateViewportHeight),window.visualViewport&&window.visualViewport.addEventListener("resize",di.updateViewportHeight),window.addEventListener("orientationchange",()=>{setTimeout(di.updateViewportHeight,100)})}},JI={preventTouchDefaults:n=>{n.addEventListener("touchstart",e=>e.preventDefault(),{passive:!1}),n.addEventListener("touchmove",e=>e.preventDefault(),{passive:!1})},enableSmoothScrolling:n=>{n.style.webkitOverflowScrolling="touch",n.style.overflowScrolling="touch"},disableTouchCallouts:n=>{n.style.webkitTouchCallout="none",n.style.webkitUserSelect="none",n.style.userSelect="none"},addTouchFeedback:(n,e={})=>{const{scaleDown:t=.95,duration:r=150}=e,i=()=>{n.style.transform="scale(".concat(t,")"),n.style.transition="transform ".concat(r,"ms ease")},a=()=>{n.style.transform="scale(1)"};n.addEventListener("touchstart",i,{passive:!0}),n.addEventListener("touchend",a,{passive:!0}),n.addEventListener("touchcancel",a,{passive:!0})},addSwipeHandler:(n,e={})=>{let t,r,i;const a=u=>{const d=u.touches[0];t=d.clientX,r=d.clientY,i=Date.now()},l=u=>{if(!t||!r)return;const d=u.changedTouches[0],p=d.clientX,h=d.clientY,g=Date.now(),v=p-t,b=h-r;g-i>300||Math.abs(v)<50||(Math.abs(v)>Math.abs(b)?v>0&&e.swipeRight?e.swipeRight(u):v<0&&e.swipeLeft&&e.swipeLeft(u):b>0&&e.swipeDown?e.swipeDown(u):b<0&&e.swipeUp&&e.swipeUp(u),t=r=null)};n.addEventListener("touchstart",a,{passive:!0}),n.addEventListener("touchend",l,{passive:!0})}},ZI={preventInputZoom:()=>{document.querySelectorAll("input, textarea, select").forEach(e=>{parseInt(getComputedStyle(e).fontSize)<16&&(e.style.fontSize="16px")})},handleVirtualKeyboard:n=>{if(!window.visualViewport)return;let e=window.visualViewport.height;const t=()=>{const r=window.visualViewport.height,i=r<e*.75;n&&n({isOpen:i,height:e-r})};return window.visualViewport.addEventListener("resize",t),()=>{window.visualViewport.removeEventListener("resize",t)}},scrollInputIntoView:(n,e=100)=>{setTimeout(()=>{const t=n.getBoundingClientRect(),r=window.visualViewport?window.visualViewport.height:window.innerHeight;if(t.bottom>r-e){const i=window.pageYOffset+t.top-(r-t.height-e);window.scrollTo({top:i,behavior:"smooth"})}},300)}},Bl={getConnectionInfo:()=>{const n=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return n?{effectiveType:n.effectiveType,downlink:n.downlink,rtt:n.rtt,saveData:n.saveData}:null},isSlowConnection:()=>{const n=Bl.getConnectionInfo();return n?n.effectiveType==="slow-2g"||n.effectiveType==="2g"||n.saveData:!1},preloadResources:n=>{Bl.isSlowConnection()||n.forEach(e=>{const t=document.createElement("link");t.rel="preload",t.href=e.href,t.as=e.as||"fetch",e.crossorigin&&(t.crossOrigin=e.crossorigin),document.head.appendChild(t)})}},ek=(n={})=>{const{trackViewport:e=!0,preventInputZoom:t=!0,enableTouchFeedback:r=!0,optimizePerformance:i=!0}=n;document.body.classList.add("mobile-optimized"),kn.isIOS()&&document.body.classList.add("ios"),kn.isAndroid()&&document.body.classList.add("android"),kn.isIOSSafari()&&document.body.classList.add("ios-safari"),kn.isWebView()&&document.body.classList.add("webview"),e&&di.initViewportTracking(),t&&kn.isIOS()&&ZI.preventInputZoom(),r&&kn.supportsTouch()&&document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll('button, .btn, [role="button"]').forEach(l=>{l.classList.contains("no-touch-feedback")||JI.addTouchFeedback(l)})}),i&&(Bl.isSlowConnection()&&document.body.classList.add("reduce-animations"),document.addEventListener("touchstart",()=>{},{passive:!0}),document.addEventListener("touchmove",()=>{},{passive:!0})),console.log("[MobileUtils] Mobile optimizations initialized",{device:kn.isMobile()?kn.isIOS()?"iOS":"Android":"Desktop",viewport:di.getViewport(),connection:Bl.getConnectionInfo()})};function tk(){if(typeof window=="undefined")return;const n=console.error,e=console.warn;console.error=function(...t){const r=t.join(" ");r.includes("runtime.lastError")||r.includes("extension port is moved into back/forward cache")||r.includes("chrome-extension://")||r.includes("web-client-content-script.js")||n.apply(console,t)},console.warn=function(...t){const r=t.join(" ");r.includes("extension")||r.includes("chrome://")||r.includes("moz-extension://")||e.apply(console,t)},window.addEventListener("error",function(t){if(t.filename&&(t.filename.includes("chrome-extension://")||t.filename.includes("moz-extension://")||t.filename.includes("web-client-content-script.js")))return t.preventDefault(),t.stopPropagation(),!1},!0),console.log(" Extension runtime error suppression enabled")}function nk(){if(typeof window=="undefined")return;const n=window.MutationObserver;n&&(window.MutationObserver=function(e){if(typeof e!="function")return console.warn("[Extension Fix] MutationObserver: Invalid callback provided"),new n(()=>{});const t=new n((i,a)=>{try{const l=i.filter(u=>{const d=u.target;return!(!d||!d.nodeType||d.classList&&(d.classList.contains("chrome-extension")||d.classList.contains("extension-element")||d.id&&d.id.includes("extension")))});l.length>0&&e(l,a)}catch(l){console.warn("[Extension Fix] MutationObserver callback error:",l)}}),r=t.observe.bind(t);return t.observe=function(i,a){try{if(!i){console.warn("[Extension Fix] MutationObserver: Target is null/undefined");return}if(typeof i!="object"){console.warn("[Extension Fix] MutationObserver: Target is not an object");return}if(!i.nodeType||typeof i.nodeType!="number"){console.warn("[Extension Fix] MutationObserver: Target is not a valid DOM Node");return}if(i.nodeType<1||i.nodeType>12){console.warn("[Extension Fix] MutationObserver: Target has invalid nodeType");return}if(i.classList&&(i.classList.contains("chrome-extension")||i.classList.contains("extension-element")||i.id&&i.id.includes("extension"))){console.warn("[Extension Fix] MutationObserver: Skipping extension element");return}const l=A({childList:!0,subtree:!1,attributes:!1,attributeOldValue:!1,characterData:!1,characterDataOldValue:!1},a);return r(i,l)}catch(l){console.warn("[Extension Fix] MutationObserver observe failed:",l)}},t},console.log(" Enhanced MutationObserver protection enabled"))}function rk(){if(typeof window=="undefined")return;const n=Object.defineProperty;Object.defineProperty=function(e,t,r){try{return t==="eventBus"&&r&&r.value&&(r.value.isGlobal===!0||r.value.constructor&&r.value.constructor.name==="s")?(console.warn("[Extension Fix] Blocked problematic UI config assignment"),e):n.call(this,e,t,r)}catch(i){return console.warn("[Extension Fix] Object.defineProperty error:",i),e}},window.chrome&&window.chrome.runtime&&(["eventBus","s","ui","config"].forEach(t=>{window[t]&&delete window[t]}),console.log(" Content script globals isolated")),console.log(" UI conflict protection enabled")}function sk(){if(typeof window=="undefined")return;const n=Array.isArray;Array.isArray=function(i){try{return n.call(this,i)}catch(a){return console.warn("[Extension Fix] Array.isArray error:",a),!1}};const e=Object.prototype.toString;Object.prototype.toString=function(){try{return this&&typeof this=="object"&&this.constructor&&this.constructor.name==="SiteSettings"?"[object Object]":e.call(this)}catch(i){return console.warn("[Extension Fix] toString error:",i),"[object Object]"}};const t=[/youtube\.com/i,/netflix\.com/i,/amazon\.com/i,/facebook\.com/i,/twitter\.com/i,/instagram\.com/i],r=String.prototype.includes;String.prototype.includes=function(i){try{return t.some(a=>a.test(this.toString()))?!1:r.call(this,i)}catch(a){return console.warn("[Extension Fix] String includes error:",a),!1}},console.log(" SiteSettings conflict protection enabled")}function ik(){const n=console.error,e=console.warn,t=console.log,r=[/Failed to execute 'observe' on 'MutationObserver'/,/parameter 1 is not of type 'Node'/,/web-client-content-script/,/ui config.*eventBus.*isGlobal/,/UI\.js.*eventBus/,/SiteSettings.*comparing.*Array/,/SiteSettings\.ts.*comparing/,/extension.*content.*script/i,/chrome-extension:/i,/browser extension/i,/content script/i,/grammarly/i,/adblock/i,/lastpass/i,/metamask/i];console.error=function(...i){const a=i.join(" ");if(!r.some(l=>l.test(a)))return n.apply(console,i)},console.warn=function(...i){const a=i.join(" ");if(!r.some(l=>l.test(a)))return e.apply(console,i)},console.log=function(...i){const a=i.join(" ");if(!(a.includes("ui config:")&&a.includes("eventBus")))return t.apply(console,i)},console.info(" Enhanced console filters applied")}function Dy(){if(typeof window=="undefined"||!document)return;const n=new MutationObserver(e=>{e.forEach(t=>{t.addedNodes.forEach(r=>{r.nodeType===1&&r.id&&(r.id.includes("chrome-extension")||r.id.includes("extension")||r.classList&&r.classList.contains("chrome-extension"))&&(r.style.isolation="isolate",r.style.pointerEvents="none",r.setAttribute("data-extension-isolated","true"))})})});try{n.observe(document.body||document.documentElement,{childList:!0,subtree:!0}),console.log(" Extension element isolation enabled")}catch(e){console.warn("[Extension Fix] Failed to start isolation observer:",e)}}function Hv(){try{console.log(" Trading Post - Initializing extension conflict fixes..."),tk(),nk(),rk(),sk(),ik(),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Dy):Dy(),console.log(" Extension conflict fixes initialized successfully"),window.cleanupExtensionFixes=function(){console.log(" Extension fixes cleaned up")}}catch(n){console.error(" Failed to initialize extension fixes:",n)}}typeof window!="undefined"&&!window.__TESTING__&&setTimeout(Hv,100);let gc=!1,Un=null;const rr=[],ok=500;function ak(){const n={log:console.log,warn:console.warn,error:console.error,info:console.info},e=new Map,t=3,r=3e4;function i(a,l){return function(...u){const d=u.join(" "),p="".concat(l,":").concat(d);lk(l,u);const h=e.get(p),g=Date.now();if(h){if(h.count++,h.lastSeen=g,h.count===t){a.call(console,"[SUPPRESSED] Message repeated ".concat(h.count," times:"),d);return}else if(h.count>t)return}else e.set(p,{count:1,firstSeen:g,lastSeen:g});a.apply(console,u)}}console.log=i(n.log,"log"),console.warn=i(n.warn,"warn"),console.error=i(n.error,"error"),console.info=i(n.info,"info"),setInterval(()=>{const a=Date.now(),l=6e4;for(const[u,d]of e.entries())a-d.lastSeen>l&&e.delete(u)},r),console.info(" Console message suppression enabled")}function lk(n,e){const t=new Date().toLocaleTimeString(),r=e.join(" "),i={timestamp:t,level:n,message:r,args:e.slice()};rr.push(i),rr.length>ok&&rr.shift(),gc&&Un&&ql()}function ck(){const n=console.error,e=console.warn;console.error=function(...t){const r=t.join(" ");[/Failed to execute 'observe' on 'MutationObserver'/,/web-client-content-script/,/SiteSettings.*comparing Array/,/extension.*content.*script/i,/AppwriteException.*Invalid query.*Attribute not found in schema.*user_id/,/Failed to fetch matches.*AppwriteException.*Invalid query.*user_id/,/Invalid query.*Attribute not found.*user_id/,/ Failed to fetch matches.*AppwriteException/,/Service temporarily unavailable for.*trading-history/].some(a=>a.test(r))||n.apply(console,t)},console.warn=function(...t){const r=t.join(" ");[/SiteSettings.*comparing/,/extension.*warning/i,/ \[API\] Service temporarily unavailable for.*trading-history/,/providing fallback/,/Matches collection not available.*using fallback/,/.*Collection.*does not exist.*using fallbacks/].some(a=>a.test(r))||e.apply(console,t)},console.info(" Console filters applied")}function Vv(){Un||(Un=document.createElement("div"),Un.id="trading-post-debug-console",Un.innerHTML='\n    <div style="\n      position: fixed;\n      top: 10%;\n      left: 10%;\n      width: 80%;\n      height: 70%;\n      background: rgba(0, 0, 0, 0.95);\n      border: 2px solid #333;\n      border-radius: 8px;\n      color: #fff;\n      font-family: \'Courier New\', monospace;\n      font-size: 12px;\n      z-index: 10000;\n      display: flex;\n      flex-direction: column;\n      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);\n    ">\n      <div style="\n        background: #1a1a1a;\n        padding: 10px;\n        border-bottom: 1px solid #333;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n      ">\n        <div>\n          <strong> Trading Post Debug Console</strong>\n          <span id="debug-log-count" style="margin-left: 20px; color: #888;">(0 logs)</span>\n        </div>\n        <div>\n          <button id="debug-clear-btn" style="\n            background: #e74c3c;\n            color: white;\n            border: none;\n            padding: 5px 10px;\n            border-radius: 3px;\n            cursor: pointer;\n            margin-right: 5px;\n          ">Clear</button>\n          <button id="debug-export-btn" style="\n            background: #3498db;\n            color: white;\n            border: none;\n            padding: 5px 10px;\n            border-radius: 3px;\n            cursor: pointer;\n            margin-right: 5px;\n          ">Export</button>\n          <button id="debug-close-btn" style="\n            background: #95a5a6;\n            color: white;\n            border: none;\n            padding: 5px 10px;\n            border-radius: 3px;\n            cursor: pointer;\n          ">Close (`)</button>\n        </div>\n      </div>\n      <div style="\n        padding: 10px;\n        color: #bbb;\n        border-bottom: 1px solid #333;\n        background: #2a2a2a;\n      ">\n        <strong>Filters:</strong>\n        <label style="margin: 0 15px 0 10px;">\n          <input type="checkbox" id="filter-log" checked> LOG\n        </label>\n        <label style="margin: 0 15px;">\n          <input type="checkbox" id="filter-info" checked> INFO\n        </label>\n        <label style="margin: 0 15px;">\n          <input type="checkbox" id="filter-warn" checked> WARN\n        </label>\n        <label style="margin: 0 15px;">\n          <input type="checkbox" id="filter-error" checked> ERROR\n        </label>\n        <span style="margin-left: 20px;">\n          Auto-scroll: <input type="checkbox" id="auto-scroll" checked>\n        </span>\n      </div>\n      <div id="debug-log-container" style="\n        flex: 1;\n        overflow-y: auto;\n        padding: 10px;\n        background: #1e1e1e;\n      ">\n        <div id="debug-log-content"></div>\n      </div>\n    </div>\n  ',document.body.appendChild(Un),document.getElementById("debug-close-btn").addEventListener("click",hp),document.getElementById("debug-clear-btn").addEventListener("click",Gv),document.getElementById("debug-export-btn").addEventListener("click",Kv),["log","info","warn","error"].forEach(n=>{document.getElementById("filter-".concat(n)).addEventListener("change",ql)}),gc=!0,ql(),console.info(" Debug console opened - Press ` to close"))}function hp(){Un&&(Un.remove(),Un=null),gc=!1,console.info(" Debug console closed")}function Wv(){window.__debugToggling||(window.__debugToggling=!0,gc?hp():Vv(),setTimeout(()=>{window.__debugToggling=!1},100))}function ql(){var a,l,u,d,p,h,g,v;if(!Un)return;const n=document.getElementById("debug-log-content"),e=document.getElementById("debug-log-count");if(!n||!e)return;const t={log:(l=(a=document.getElementById("filter-log"))==null?void 0:a.checked)!=null?l:!0,info:(d=(u=document.getElementById("filter-info"))==null?void 0:u.checked)!=null?d:!0,warn:(h=(p=document.getElementById("filter-warn"))==null?void 0:p.checked)!=null?h:!0,error:(v=(g=document.getElementById("filter-error"))==null?void 0:g.checked)!=null?v:!0},r=rr.filter(b=>t[b.level]);n.innerHTML=r.map(b=>{const C={log:"#fff",info:"#3498db",warn:"#f39c12",error:"#e74c3c"};return'\n      <div style="\n        margin: 3px 0;\n        padding: 3px 6px;\n        border-left: 3px solid '.concat(C[b.level],';\n        background: rgba(255, 255, 255, 0.02);\n      ">\n        <span style="color: #888; font-size: 10px;">[').concat(b.timestamp,']</span>\n        <span style="color: ').concat(C[b.level],'; font-weight: bold; margin: 0 8px;">').concat(b.level.toUpperCase(),"</span>\n        <span>").concat(uk(b.message),"</span>\n      </div>\n    ")}).join(""),e.textContent="(".concat(r.length,"/").concat(rr.length," logs)");const i=document.getElementById("auto-scroll");if(i!=null&&i.checked){const b=document.getElementById("debug-log-container");b&&(b.scrollTop=b.scrollHeight)}}function Gv(){rr.length=0,ql(),console.info(" Debug logs cleared")}function Kv(){const n=new Date().toISOString().replace(/[:.]/g,"-"),e="trading-post-debug-logs-".concat(n,".txt"),t=rr.map(l=>"[".concat(l.timestamp,"] ").concat(l.level.toUpperCase(),": ").concat(l.message)).join("\n"),r=new Blob([t],{type:"text/plain"}),i=URL.createObjectURL(r),a=document.createElement("a");a.href=i,a.download=e,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(i),console.info(" Debug logs exported to ".concat(e))}function uk(n){const e=document.createElement("div");return e.textContent=n,e.innerHTML}function dk(){document.addEventListener("keydown",n=>{if(n.code==="Backquote"&&!n.ctrlKey&&!n.altKey&&!n.shiftKey){n.preventDefault(),n.stopPropagation(),n.stopImmediatePropagation();const e=document.activeElement;e&&(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.contentEditable==="true")||setTimeout(()=>{Wv()},10)}},!0),console.info(" Debug console keyboard listener active - Press ` (backtick) to open/close")}function Yv(){if(window.__consoleInitialized){console.info(" Console already initialized");return}window.__consoleInitialized=!0;try{ak(),ck(),dk(),window.clearAppConsole=function(){console.clear(),rr.length=0,console.info(" Console cleared - Trading Post app running")},window.tradingPostDebug={toggle:Wv,show:Vv,hide:hp,clear:Gv,export:Kv,getLogs:()=>[...rr]},console.info(" Trading Post - Console utilities loaded (Press ` for debug console)")}catch(n){console.error("Failed to initialize console utilities:",n)}}typeof window!="undefined"&&!window.__TESTING__&&Yv();class fk{constructor(){this.db=Ri}createListing(e){return E(this,null,function*(){try{if(console.log(" Creating listing with userId..."),!e.userId)throw new Error("Missing required userId field for listing creation");const t=yield this.db.createDocument(V,X.items,ze.unique(),Y(A({},e),{userId:e.userId,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),is_active:!0,view_count:0,save_count:0,images:e.images||[],tags:e.tags||[]}));return console.log(" Listing created:",t.$id),{listing:t,success:!0}}catch(t){return console.error(" Create listing failed:",t),{success:!1,error:xe(t)}}})}getListing(e){return E(this,null,function*(){try{const t=yield this.db.getDocument(V,X.items,e);return yield this.db.updateDocument(V,X.items,e,{view_count:(t.view_count||0)+1}),{listing:t,success:!0}}catch(t){return console.error(" Get listing failed:",t),{success:!1,error:xe(t)}}})}updateListing(e,t){return E(this,null,function*(){try{console.log(" Updating listing:",e);const r=yield this.db.updateDocument(V,X.items,e,Y(A({},t),{updated_at:new Date().toISOString()}));return console.log(" Listing updated"),{listing:r,success:!0}}catch(r){return console.error(" Update listing failed:",r),{success:!1,error:xe(r)}}})}deleteListing(e){return E(this,null,function*(){try{return console.log(" Deleting listing:",e),yield this.db.deleteDocument(V,X.items,e),console.log(" Listing deleted"),{success:!0}}catch(t){return console.error(" Delete listing failed:",t),{success:!1,error:xe(t)}}})}searchListings(){return E(this,arguments,function*(e={}){try{const{category:t,type:r,location:i,userId:a,query:l,limit:u=50,offset:d=0,orderBy:p="created_at",orderDirection:h="desc"}=e,g=[N.limit(u),N.offset(d),N.equal("is_active",!0)];h==="desc"?g.push(N.orderDesc(p)):g.push(N.orderAsc(p)),t&&g.push(N.equal("category",t)),r&&g.push(N.equal("type",r)),i&&g.push(N.equal("location",i)),a&&g.push(N.equal("user_id",a)),l&&g.push(N.search("title",l)),console.log(" Searching listings with filters:",e);const v=yield this.db.listDocuments(V,X.items,g);return console.log(" Found ".concat(v.documents.length," listings")),{listings:v.documents,total:v.total,success:!0}}catch(t){return console.error(" Search listings failed:",t),{success:!1,error:xe(t)}}})}getUserListings(e,t=!1){return E(this,null,function*(){try{const r=[N.equal("user_id",e),N.orderDesc("created_at"),N.limit(100)];return t||r.push(N.equal("is_active",!0)),{listings:(yield this.db.listDocuments(V,X.items,r)).documents,success:!0}}catch(r){return console.error(" Get user listings failed:",r),{success:!1,error:xe(r)}}})}createTrade(e){return E(this,null,function*(){try{console.log(" Creating trade...");const t=yield this.db.createDocument(V,X.trades,ze.unique(),Y(A({},e),{status:e.status||"pending",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),messages:[],meeting_details:e.meeting_details||{},completion_details:e.completion_details||{},feedback:e.feedback||{}}));return console.log(" Trade created:",t.$id),{trade:t,success:!0}}catch(t){return console.error(" Create trade failed:",t),{success:!1,error:xe(t)}}})}updateTrade(e,t){return E(this,null,function*(){try{console.log(" Updating trade:",e);const r=yield this.db.updateDocument(V,X.trades,e,Y(A({},t),{updated_at:new Date().toISOString()}));return console.log(" Trade updated"),{trade:r,success:!0}}catch(r){return console.error(" Update trade failed:",r),{success:!1,error:xe(r)}}})}getUserTrades(e,t=null){return E(this,null,function*(){try{const r=[N.orderDesc("created_at"),N.limit(100)];t&&r.push(N.equal("status",t));const i=[...r,N.equal("user1_id",e)],a=yield this.db.listDocuments(V,X.trades,i),l=[...r,N.equal("user2_id",e)],u=yield this.db.listDocuments(V,X.trades,l),p=[...a.documents,...u.documents].filter((h,g,v)=>g===v.findIndex(b=>b.$id===h.$id));return p.sort((h,g)=>new Date(g.created_at)-new Date(h.created_at)),{trades:p,success:!0}}catch(r){return console.error(" Get user trades failed:",r),{success:!1,error:xe(r)}}})}createMessage(e){return E(this,null,function*(){try{console.log(" Creating message...");const t=yield this.db.createDocument(V,X.messages,ze.unique(),Y(A({},e),{created_at:new Date().toISOString(),is_read:!1,message_type:e.message_type||"text",attachments:e.attachments||[],metadata:e.metadata||{}}));return console.log(" Message created:",t.$id),{message:t,success:!0}}catch(t){return console.error(" Create message failed:",t),{success:!1,error:xe(t)}}})}getConversation(e,t,r=null,i=100){return E(this,null,function*(){try{const a=[N.orderDesc("created_at"),N.limit(i)];if(r)a.push(N.equal("trade_id",r));else{const d=[...a,N.equal("sender_id",e),N.equal("recipient_id",t)],p=[...a,N.equal("sender_id",t),N.equal("recipient_id",e)],[h,g]=yield Promise.all([we.listDocuments(V,X.messages,d),we.listDocuments(V,X.messages,p)]),v=[...h.documents,...g.documents];return v.sort((b,C)=>new Date(b.created_at)-new Date(C.created_at)),{messages:v,success:!0}}return{messages:(yield this.db.listDocuments(V,X.messages,a)).documents.reverse(),success:!0}}catch(a){return console.error(" Get conversation failed:",a),{success:!1,error:xe(a)}}})}markMessagesAsRead(e,t){return E(this,null,function*(){try{console.log(" Marking messages as read...");const r=[N.equal("sender_id",t),N.equal("recipient_id",e),N.equal("is_read",!1)],i=yield this.db.listDocuments(V,X.messages,r),a=i.documents.map(l=>we.updateDocument(V,X.messages,l.$id,{is_read:!0}));return yield Promise.all(a),console.log(" Marked ".concat(i.documents.length," messages as read")),{updated_count:i.documents.length,success:!0}}catch(r){return console.error(" Mark messages as read failed:",r),{success:!1,error:xe(r)}}})}getUnreadMessageCount(e){return E(this,null,function*(){try{const t=[N.equal("recipient_id",e),N.equal("is_read",!1)];return{count:(yield this.db.listDocuments(V,X.messages,t)).total,success:!0}}catch(t){return console.error(" Get unread message count failed:",t),{success:!1,error:xe(t)}}})}searchUsers(e,t=null,r=20){return E(this,null,function*(){try{const i=[N.limit(r),N.equal("is_active",!0)];e&&i.push(N.search("name",e)),t&&i.push(N.equal("location",t));const a=yield this.db.listDocuments(V,X.users,i);return{users:a.documents,total:a.total,success:!0}}catch(i){return console.error(" Search users failed:",i),{success:!1,error:xe(i)}}})}getUserAnalytics(e){return E(this,null,function*(){try{const t=yield this.getUserListings(e,!0);if(!t.success)throw new Error("Failed to get listings");const r=yield this.getUserTrades(e);if(!r.success)throw new Error("Failed to get trades");const i=t.listings,a=r.trades;return{analytics:{total_listings:i.length,active_listings:i.filter(u=>u.is_active).length,total_trades:a.length,completed_trades:a.filter(u=>u.status==="completed").length,pending_trades:a.filter(u=>u.status==="pending").length,total_views:i.reduce((u,d)=>u+(d.view_count||0),0),average_listing_views:i.length>0?i.reduce((u,d)=>u+(d.view_count||0),0)/i.length:0,success_rate:a.length>0?a.filter(u=>u.status==="completed").length/a.length*100:0},success:!0}}catch(t){return console.error(" Get user analytics failed:",t),{success:!1,error:xe(t)}}})}getDocument(e,t){return E(this,null,function*(){try{return{document:yield this.db.getDocument(V,e,t),success:!0}}catch(r){return console.error(" Get document failed:",r),{success:!1,error:xe(r)}}})}listDocuments(r){return E(this,arguments,function*(e,t=[]){try{const i=yield this.db.listDocuments(V,e,t);return{documents:i.documents,total:i.total,success:!0}}catch(i){return console.error(" List documents failed:",i),{success:!1,error:xe(i)}}})}}const Io=new fk,pk=window.fetch,mp={"/api/auth/verify":n=>E(null,null,function*(){try{const e=yield ms.getCurrentUser();return{ok:!0,status:e.success?200:401,data:e.user}}catch(e){return{ok:!1,status:401,data:{error:e.message}}}}),"/api/auth/google/verify":n=>E(null,null,function*(){try{const e=JSON.parse(n.body),t=yield ms.handleOAuthCallback(e.userId||e.token,e.secret||e.token,"google");return{ok:!0,status:t.success?200:401,data:t}}catch(e){return{ok:!1,status:401,data:{error:e.message}}}}),"/api/auth/google/callback":n=>E(null,null,function*(){return mp["/api/auth/google/verify"](n)}),"/api/auth/firebase/signin":n=>E(null,null,function*(){try{const e=JSON.parse(n.body),t=yield ms.signInWithEmail(e.email,e.password);return{ok:!0,status:t.success?200:401,data:t}}catch(e){return{ok:!1,status:401,data:{error:e.message}}}}),"/api/firebase/profile":n=>E(null,null,function*(){try{const e=yield ms.getUserProfile();return{ok:!0,status:e.success?200:404,data:e.profile}}catch(e){return{ok:!1,status:404,data:{error:e.message}}}}),"/api/search":n=>E(null,null,function*(){try{const e=new URL(n.url||n.path,window.location.origin),t=Object.fromEntries(e.searchParams),r=yield Io.searchListings({query:t.q||t.query,category:t.category,location:t.location,limit:parseInt(t.limit)||50,offset:parseInt(t.offset)||0});return{ok:!0,status:200,data:{items:r.listings,total:r.total}}}catch(e){return{ok:!1,status:500,data:{error:e.message}}}}),"/api/listings/search":n=>E(null,null,function*(){try{const e=n.body?JSON.parse(n.body):{};return{ok:!0,status:200,data:(yield Io.searchListings({query:e.query||e.q,category:e.category,location:e.location,condition:e.condition,minPrice:e.minPrice,maxPrice:e.maxPrice,radius:e.radius||50,listingType:e.listingType,sortBy:e.sortBy||"newest",saved:e.saved,latitude:e.latitude,longitude:e.longitude,limit:e.limit||50,offset:e.offset||0})).listings||[]}}catch(e){return console.error("Error in /api/listings/search handler:",e),{ok:!1,status:500,data:[]}}}),"/api/photo-to-trade/start":n=>E(null,null,function*(){var e;try{const t=JSON.parse(n.body);return{ok:!0,status:200,data:{session_id:(e=(yield Ss.createItem({title:"Photo Item",description:"Analyzing...",images:t.images||[],category:"other",condition:"good",is_available:!1})).item)==null?void 0:e.$id,status:"processing"}}}catch(t){return{ok:!1,status:500,data:{error:t.message}}}}),"/api/photo-to-trade/status":n=>E(null,null,function*(){var e;try{const r=new URL(n.url||n.path,window.location.origin).pathname.split("/").pop();return{ok:!0,status:200,data:{status:((e=(yield Ss.getItem(r)).item)==null?void 0:e.ai_status)||"completed",progress:100}}}catch(t){return{ok:!1,status:404,data:{error:t.message}}}}),"/api/photo-to-trade/results":n=>E(null,null,function*(){try{const t=new URL(n.url||n.path,window.location.origin).pathname.split("/").pop(),r=yield Ss.getItem(t),i=yield fi.generateMatches(t);return{ok:!0,status:200,data:{item:r.item,matches:i.matches||[]}}}catch(e){return{ok:!1,status:404,data:{error:e.message}}}}),"/api/geocode/zipcode":n=>E(null,null,function*(){try{const t=new URL(n.url||n.path,window.location.origin).pathname.split("/").pop();return{ok:!0,status:200,data:{latitude:39.2904,longitude:-76.6122,city:"Baltimore",state:"MD",country:"US"}}}catch(e){return{ok:!1,status:404,data:{error:e.message}}}}),"/api/listings/save":n=>E(null,null,function*(){try{const t=new URL(n.url||n.path,window.location.origin).pathname.split("/"),r=t[t.indexOf("listings")+1];if(n.method==="DELETE"){const i=yield Io.unsaveItem(r);return{ok:!0,status:200,data:{success:!0,message:"Item unsaved"}}}else{const i=yield Io.saveItem(r);return{ok:!0,status:200,data:{success:!0,message:"Item saved"}}}}catch(e){return{ok:!1,status:500,data:{error:e.message}}}})};window.fetch=function(...n){return E(this,null,function*(){const[e,t={}]=n,r=typeof e=="string"?e:e.toString();for(const[i,a]of Object.entries(mp))if(r.includes(i)){He.log(" Intercepting API call: ".concat(i),t);try{const l=yield a(A({url:r,path:r},t)),u=new Response(JSON.stringify(l.data),{status:l.status,statusText:l.ok?"OK":"Error",headers:{"Content-Type":"application/json"}});return He.log(" API call handled: ".concat(i),l),u}catch(l){return He.error(" API handler error for ".concat(i,":"),l),new Response(JSON.stringify({error:l.message}),{status:500,statusText:"Internal Server Error",headers:{"Content-Type":"application/json"}})}}return pk.apply(this,n)})};const hk=XMLHttpRequest.prototype.open,mk=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.open=function(n,e,...t){return this._interceptUrl=e,this._interceptMethod=n,hk.apply(this,[n,e,...t])};XMLHttpRequest.prototype.send=function(n){const e=this._interceptUrl;for(const[t,r]of Object.entries(mp))if(e&&e.includes(t)){He.log(" Intercepting XHR API call: ".concat(t),{method:this._interceptMethod,data:n}),r({url:e,path:e,method:this._interceptMethod,body:n}).then(i=>{Object.defineProperty(this,"status",{value:i.status}),Object.defineProperty(this,"statusText",{value:i.ok?"OK":"Error"}),Object.defineProperty(this,"responseText",{value:JSON.stringify(i.data)}),Object.defineProperty(this,"response",{value:i.data}),Object.defineProperty(this,"readyState",{value:4}),this.onreadystatechange&&this.onreadystatechange(),this.onload&&this.onload(),He.log(" XHR API call handled: ".concat(t),i)}).catch(i=>{He.error(" XHR API handler error for ".concat(t,":"),i),Object.defineProperty(this,"status",{value:500}),Object.defineProperty(this,"statusText",{value:"Internal Server Error"}),Object.defineProperty(this,"responseText",{value:JSON.stringify({error:i.message})}),Object.defineProperty(this,"response",{value:{error:i.message}}),Object.defineProperty(this,"readyState",{value:4}),this.onerror&&this.onerror()});return}return mk.apply(this,[n])};function gk(){console.log(" API Adapter initialized - redirecting old API calls to Appwrite services"),He.log("API Adapter active - monitoring API calls")}class yk{constructor(){this.requiredCollections={users:{name:"Users",permissions:['read("any")','write("users")'],attributes:[{key:"email",type:"string",required:!0,size:255},{key:"fullName",type:"string",required:!0,size:255},{key:"username",type:"string",required:!0,size:100},{key:"profileImage",type:"string",required:!1,size:500},{key:"location",type:"string",required:!1,size:255},{key:"isVerified",type:"boolean",required:!1,default:!1},{key:"createdAt",type:"datetime",required:!0},{key:"updatedAt",type:"datetime",required:!0}],indexes:[{key:"email_idx",type:"unique",attributes:["email"]},{key:"username_idx",type:"unique",attributes:["username"]}]},items:{name:"Items",permissions:['read("any")','write("users")'],attributes:[{key:"title",type:"string",required:!0,size:255},{key:"description",type:"string",required:!1,size:2e3},{key:"category",type:"string",required:!0,size:100},{key:"condition",type:"string",required:!0,size:50},{key:"userId",type:"string",required:!0,size:50},{key:"images",type:"string",required:!1,size:2e3},{key:"isActive",type:"boolean",required:!1,default:!0},{key:"createdAt",type:"datetime",required:!0},{key:"updatedAt",type:"datetime",required:!0}],indexes:[{key:"user_items_idx",type:"key",attributes:["userId"]},{key:"category_idx",type:"key",attributes:["category"]},{key:"active_items_idx",type:"key",attributes:["isActive"]}]},wants:{name:"User Wants",permissions:['read("any")','write("users")'],attributes:[{key:"userId",type:"string",required:!0,size:50},{key:"itemName",type:"string",required:!0,size:255},{key:"description",type:"string",required:!1,size:1e3},{key:"category",type:"string",required:!1,size:100},{key:"priority",type:"integer",required:!1,min:1,max:5,default:3},{key:"isActive",type:"boolean",required:!1,default:!0},{key:"createdAt",type:"datetime",required:!0},{key:"updatedAt",type:"datetime",required:!0}],indexes:[{key:"user_wants_idx",type:"key",attributes:["userId"]},{key:"active_wants_idx",type:"key",attributes:["isActive"]}]},matches:{name:"AI Matches",permissions:['read("users")','write("users")'],attributes:[{key:"userId",type:"string",required:!0,size:50},{key:"itemId",type:"string",required:!0,size:50},{key:"matchedUserId",type:"string",required:!0,size:50},{key:"matchedItemId",type:"string",required:!0,size:50},{key:"matchScore",type:"float",required:!0,min:0,max:1},{key:"matchReason",type:"string",required:!1,size:500},{key:"status",type:"string",required:!0,size:20,default:"pending"},{key:"viewedAt",type:"datetime",required:!1},{key:"respondedAt",type:"datetime",required:!1},{key:"createdAt",type:"datetime",required:!0}],indexes:[{key:"user_matches_idx",type:"key",attributes:["userId"]},{key:"status_matches_idx",type:"key",attributes:["status"]},{key:"score_matches_idx",type:"key",attributes:["matchScore"]}]},saved_items:{name:"Saved Items",permissions:['read("users")','write("users")'],attributes:[{key:"userId",type:"string",required:!0,size:50},{key:"itemId",type:"string",required:!0,size:50},{key:"notes",type:"string",required:!1,size:500},{key:"savedAt",type:"datetime",required:!0}],indexes:[{key:"user_saved_idx",type:"key",attributes:["userId"]},{key:"item_saved_idx",type:"key",attributes:["itemId"]},{key:"user_item_saved_idx",type:"unique",attributes:["userId","itemId"]}]},trades:{name:"Trades",permissions:['read("users")','write("users")'],attributes:[{key:"initiatorUserId",type:"string",required:!0,size:50},{key:"responderUserId",type:"string",required:!0,size:50},{key:"initiatorItemId",type:"string",required:!0,size:50},{key:"responderItemId",type:"string",required:!1,size:50},{key:"status",type:"string",required:!0,size:20,default:"pending"},{key:"message",type:"string",required:!1,size:1e3},{key:"completedAt",type:"datetime",required:!1},{key:"createdAt",type:"datetime",required:!0},{key:"updatedAt",type:"datetime",required:!0}],indexes:[{key:"initiator_trades_idx",type:"key",attributes:["initiatorUserId"]},{key:"responder_trades_idx",type:"key",attributes:["responderUserId"]},{key:"status_trades_idx",type:"key",attributes:["status"]}]},messages:{name:"Messages",permissions:['read("users")','write("users")'],attributes:[{key:"senderId",type:"string",required:!0,size:50},{key:"receiverId",type:"string",required:!0,size:50},{key:"tradeId",type:"string",required:!1,size:50},{key:"content",type:"string",required:!0,size:2e3},{key:"readAt",type:"datetime",required:!1},{key:"createdAt",type:"datetime",required:!0}],indexes:[{key:"sender_messages_idx",type:"key",attributes:["senderId"]},{key:"receiver_messages_idx",type:"key",attributes:["receiverId"]},{key:"trade_messages_idx",type:"key",attributes:["tradeId"]}]},notifications:{name:"Notifications",permissions:['read("users")','write("users")'],attributes:[{key:"userId",type:"string",required:!0,size:50},{key:"title",type:"string",required:!0,size:255},{key:"message",type:"string",required:!0,size:1e3},{key:"type",type:"string",required:!0,size:50},{key:"relatedId",type:"string",required:!1,size:50},{key:"isRead",type:"boolean",required:!1,default:!1},{key:"createdAt",type:"datetime",required:!0}],indexes:[{key:"user_notifications_idx",type:"key",attributes:["userId"]},{key:"unread_notifications_idx",type:"key",attributes:["isRead"]},{key:"type_notifications_idx",type:"key",attributes:["type"]}]}}}initializeAllCollections(){return E(this,null,function*(){console.log(" [DB-INIT] Starting database initialization...");const e={success:[],errors:[],skipped:[]};for(const[t,r]of Object.entries(this.requiredCollections))try{if(console.log(" [DB-INIT] Checking collection: ".concat(t)),yield this.collectionExists(t)){console.log(" [DB-INIT] Collection ".concat(t," already exists")),e.skipped.push(t);continue}console.log(" [DB-INIT] Creating collection: ".concat(t)),yield this.createCollection(t,r),e.success.push(t),console.log(" [DB-INIT] Successfully created ".concat(t))}catch(i){console.error(" [DB-INIT] Failed to create ".concat(t,":"),i),e.errors.push({collectionId:t,error:i.message})}return console.log(" [DB-INIT] Database initialization complete:",{created:e.success.length,skipped:e.skipped.length,errors:e.errors.length}),e})}collectionExists(e){return E(this,null,function*(){try{return yield we.listDocuments(V,e,[]),!0}catch(t){if(t.code===404)return!1;throw t}})}createCollection(e,t){return E(this,null,function*(){const r=yield we.createCollection(V,e,t.name,t.permissions);console.log(" [DB-INIT] Created collection ".concat(e,", adding attributes..."));for(const i of t.attributes)try{yield this.createAttribute(e,i),console.log("   Added attribute: ".concat(i.key))}catch(a){throw console.error("   Failed to add attribute ".concat(i.key,":"),a),a}if(yield this.waitForCollectionReady(e),t.indexes)for(const i of t.indexes)try{yield this.createIndex(e,i),console.log("   Added index: ".concat(i.key))}catch(a){console.error("   Failed to add index ".concat(i.key,":"),a)}return r})}createAttribute(e,t){return E(this,null,function*(){switch(t.type){case"string":return we.createStringAttribute(V,e,t.key,t.size,t.required,t.default,t.array);case"integer":return we.createIntegerAttribute(V,e,t.key,t.required,t.min,t.max,t.default,t.array);case"float":return we.createFloatAttribute(V,e,t.key,t.required,t.min,t.max,t.default,t.array);case"boolean":return we.createBooleanAttribute(V,e,t.key,t.required,t.default,t.array);case"datetime":return we.createDatetimeAttribute(V,e,t.key,t.required,t.default,t.array);default:throw new Error("Unsupported attribute type: ".concat(t.type))}})}createIndex(e,t){return E(this,null,function*(){return we.createIndex(V,e,t.key,t.type,t.attributes,t.orders)})}waitForCollectionReady(e,t=10){return E(this,null,function*(){for(let r=0;r<t;r++){try{return yield we.listDocuments(V,e,[]),console.log(" [DB-INIT] Collection ".concat(e," is ready")),!0}catch(i){}console.log(" [DB-INIT] Waiting for collection ".concat(e," to be ready... (").concat(r+1,"/").concat(t,")")),yield new Promise(i=>setTimeout(i,1e3))}throw new Error("Collection ".concat(e," did not become ready within timeout"))})}createMissingCollectionsQuickFix(){return E(this,null,function*(){console.log(" [DB-INIT] Quick fix - creating missing collections...");const e=["matches","saved_items"],t=[];for(const r of e)try{(yield this.collectionExists(r))?t.push({collection:r,status:"exists"}):(yield this.createMinimalCollection(r),t.push({collection:r,status:"created"}),console.log(" [DB-INIT] Quick-created ".concat(r)))}catch(i){console.error(" [DB-INIT] Failed to quick-create ".concat(r,":"),i),t.push({collection:r,status:"error",error:i.message})}return t})}createMinimalCollection(e){return E(this,null,function*(){const t=this.requiredCollections[e];if(!t)throw new Error("No configuration found for collection: ".concat(e));yield we.createCollection(V,e,t.name,['read("users")','write("users")']);const r=t.attributes.filter(i=>i.required);for(const i of r)yield this.createAttribute(e,i);yield this.waitForCollectionReady(e,5)})}}const Ny=new yk;class wk{constructor(){this.fieldMappings=new Map,this.detectedSchemas=new Map,this.fixes=[],this.errors=[]}fixAllSchemaIssues(){return E(this,null,function*(){console.log(" Starting comprehensive database schema fixes...");try{return yield this.detectAllSchemas(),yield this.generateFieldMappings(),yield this.createFixedDatabaseWrapper(),yield this.testSchemaFixes(),console.log(" Schema fixes complete"),{success:!0,fixes:this.fixes,mappings:Object.fromEntries(this.fieldMappings),schemas:Object.fromEntries(this.detectedSchemas)}}catch(e){return console.error(" Schema fix failed:",e),this.errors.push(e),{success:!1,error:e.message,errors:this.errors}}})}detectAllSchemas(){return E(this,null,function*(){console.log(" Detecting actual database schemas...");for(const[e,t]of Object.entries(X))yield this.detectCollectionSchema(e,t)})}detectCollectionSchema(e,t){return E(this,null,function*(){try{const r=yield we.listDocuments(V,t,[N.limit(5)]);if(r.documents.length===0){console.log(" Collection '".concat(e,"': EMPTY")),this.detectedSchemas.set(e,{exists:!0,isEmpty:!0,fields:[],userField:null,confidence:"low"});return}const i=new Set,a=[];r.documents.forEach(u=>{Object.keys(u).forEach(d=>{i.add(d),(d.toLowerCase().includes("user")||d.toLowerCase().includes("owner")||d.toLowerCase().includes("creator"))&&a.push(d)})});const l=this.determineUserField(e,Array.from(i),a);this.detectedSchemas.set(e,{exists:!0,isEmpty:!1,fields:Array.from(i),userField:l,confidence:l?"high":"medium",sampleDocument:r.documents[0]}),console.log(" Schema detected for '".concat(e,"': ").concat(i.size," fields, user field: '").concat(l,"'"))}catch(r){r.code===404?(console.log(" Collection '".concat(e,"': DOES NOT EXIST")),this.detectedSchemas.set(e,{exists:!1,isEmpty:!0,fields:[],userField:null,confidence:"none"})):(console.error(" Error detecting schema for '".concat(e,"':"),r),this.errors.push({collection:e,error:r.message,type:"SCHEMA_DETECTION_ERROR"}))}})}determineUserField(e,t,r){const i=["user_id","userId","owner_id","ownerId","created_by","createdBy","offerer_id","offererId","sender_id","senderId"],a={users:"$id",trades:"user1_id",messages:"sender_id"};if(a[e]&&t.includes(a[e]))return a[e];for(const l of i)if(t.includes(l))return l;return r[0]||"user_id"}generateFieldMappings(){return E(this,null,function*(){console.log(" Generating field mappings...");for(const[e,t]of this.detectedSchemas){if(!t.exists){this.fieldMappings.set(e,{user:"user_id",queryMethod:"listDocuments",exists:!1});continue}const r={user:t.userField||"user_id",queryMethod:e==="users"?"getDocument":"listDocuments",exists:!0,isEmpty:t.isEmpty,confidence:t.confidence};e==="trades"&&(r.user1=t.fields.includes("user1_id")?"user1_id":"offerer_id",r.user2=t.fields.includes("user2_id")?"user2_id":"recipient_id"),e==="messages"&&(r.sender=t.fields.includes("sender_id")?"sender_id":"from_user_id",r.recipient=t.fields.includes("recipient_id")?"recipient_id":"to_user_id"),this.fieldMappings.set(e,r),this.fixes.push({type:"FIELD_MAPPING",collection:e,mapping:r,description:"Mapped user field to '".concat(r.user,"' for collection '").concat(e,"'")})}})}createFixedDatabaseWrapper(){return E(this,null,function*(){console.log(" Creating fixed database wrapper..."),this.fixedDatabases={listDocuments:(i,a,...l)=>E(this,[i,a,...l],function*(e,t,r=[]){var h;const u=this.getCollectionNameById(t),d=this.fieldMappings.get(u);if(!d||!d.exists)return console.log(" Collection '".concat(u,"' does not exist - returning empty result")),{total:0,documents:[]};if(d.isEmpty)return console.log(" Collection '".concat(u,"' is empty - returning empty result")),{total:0,documents:[]};if(u==="users"&&d.queryMethod==="getDocument"){const g=r.find(v=>v.values&&(v.values[0]==="user_id"||v.values[0]==="$id"));if(g)try{const v=Array.isArray(g.values[1])?g.values[1][0]:g.values[1];return{total:1,documents:[yield we.getDocument(e,t,v)]}}catch(v){if(v.code===404)return{total:0,documents:[]};throw v}}const p=this.transformQueries(u,r,d);try{return yield we.listDocuments(e,t,p)}catch(g){if((h=g.message)!=null&&h.includes("Attribute not found")){const v=this.tryFallbackQueries(u,r,d);if(v)return yield we.listDocuments(e,t,v)}throw g}}),getDocument:(e,t,r)=>E(this,null,function*(){return we.getDocument(e,t,r)}),createDocument:(e,t,r,i,a)=>E(this,null,function*(){const l=this.getCollectionNameById(t),u=this.fieldMappings.get(l),d=this.transformDataFields(l,i,u);return we.createDocument(e,t,r||ze.unique(),d,a)}),updateDocument:(e,t,r,i)=>E(this,null,function*(){const a=this.getCollectionNameById(t),l=this.fieldMappings.get(a),u=this.transformDataFields(a,i,l);return we.updateDocument(e,t,r,u)}),deleteDocument:(e,t,r)=>E(this,null,function*(){return we.deleteDocument(e,t,r)})}})}transformQueries(e,t,r){return r?t.map(i=>{if(i.values&&i.values[0]){const a=i.values[0];if(a==="user_id"&&r.user!=="user_id")return N[i.method](r.user,i.values[1]);if(a==="sender_id"&&r.sender&&r.sender!=="sender_id")return N[i.method](r.sender,i.values[1]);if(a==="recipient_id"&&r.recipient&&r.recipient!=="recipient_id")return N[i.method](r.recipient,i.values[1])}return i}):t}tryFallbackQueries(e,t,r){const i={user_id:["userId","owner_id","created_by","offerer_id"],sender_id:["from_user_id","senderId","user_id"],recipient_id:["to_user_id","recipientId","user_id"]};for(const a of t)if(a.values&&a.values[0]&&i[a.values[0]]){const l=i[a.values[0]];for(const u of l)if(u!==r.user)return t.map(d=>d.values&&d.values[0]===a.values[0]?N[d.method](u,d.values[1]):d)}return null}transformDataFields(e,t,r){if(!r)return t;const i=A({},t);return"user_id"in t&&r.user!=="user_id"&&(i[r.user]=t.user_id,delete i.user_id),i}getCollectionNameById(e){var t;return((t=Object.entries(X).find(([r,i])=>i===e))==null?void 0:t[0])||"unknown"}testSchemaFixes(){return E(this,null,function*(){console.log(" Testing schema fixes...");const e=[];for(const[t,r]of this.fieldMappings)if(r.exists)try{const i=yield this.fixedDatabases.listDocuments(V,X[t],[N.limit(1)]);if(e.push({collection:t,test:"basic_list",success:!0,documentCount:i.total}),!r.isEmpty){const a=yield this.fixedDatabases.listDocuments(V,X[t],[N.equal(r.user,"test-user-id"),N.limit(1)]);e.push({collection:t,test:"user_query",success:!0,userField:r.user})}}catch(i){e.push({collection:t,test:"failed",success:!1,error:i.message})}return console.log(" Schema fix testing complete:",e),e})}getFixedDatabaseWrapper(){return this.fixedDatabases}getFieldMapping(e){return this.fieldMappings.get(e)||{user:"user_id",exists:!1}}}const it=new wk;typeof window!="undefined"&&(window.databaseSchemaFixer=it,window.fixDatabaseSchema=()=>it.fixAllSchemaIssues());class vk{constructor(){this.originalService=fp,this.fixedDatabase=null,this.isInitialized=!1,this.matchCache=new Map,this.userCache=new Map}initialize(){return E(this,null,function*(){if(!this.isInitialized)try{console.log(" [AI-MATCHING] Initializing enhanced AI matching service..."),this.fixedDatabase=it.getFixedDatabaseWrapper(),yield this.testDatabaseConnectivity(),this.isInitialized=!0,console.log(" [AI-MATCHING] Enhanced AI matching service initialized")}catch(e){throw console.error(" [AI-MATCHING] Initialization failed:",e),e}})}testDatabaseConnectivity(){return E(this,null,function*(){try{yield this.fixedDatabase.listDocuments(V,X.items,[N.limit(1)]),yield this.fixedDatabase.listDocuments(V,X.users,[N.limit(1)]),yield this.fixedDatabase.listDocuments(V,X.matches,[N.limit(1)]),console.log(" [AI-MATCHING] Database connectivity test passed")}catch(e){throw console.warn(" [AI-MATCHING] Database connectivity issues detected:",e.message),new Error("Database connectivity test failed: ".concat(e.message))}})}findOptimizedMatches(r){return E(this,arguments,function*(e,t={}){yield this.initialize();try{console.log(" [AI-MATCHING] Finding optimized matches for user:",e);const i=yield this.getUserDataWithFixedSchema(e);i||(console.warn(" [AI-MATCHING] User data not found, creating sample data..."),yield this.ensureUserHasItems(e));const a=yield this.getPotentialMatchesWithFixedSchema(e,t);if(a.length===0)return console.log(" [AI-MATCHING] No potential matches found"),[];const l=yield this.scoreMatchesWithEnhancedLogic(a,i,t);return this.cacheMatchResults(e,l),console.log(" [AI-MATCHING] Found ".concat(l.length," optimized matches")),l}catch(i){return console.error(" [AI-MATCHING] Error finding matches:",i),this.fallbackMatching(e,t)}})}getUserDataWithFixedSchema(e){return E(this,null,function*(){try{if(this.userCache.has(e))return this.userCache.get(e);let t=null;try{t=yield this.fixedDatabase.getDocument(V,X.users,e)}catch(u){if(u.code===404)console.log(" [AI-MATCHING] User profile not found - user may not have completed setup"),t=yield this.createBasicUserProfile(e);else throw u}const r=yield this.fixedDatabase.listDocuments(V,X.items,[N.equal(it.getFieldMapping("items").user,e),N.equal("is_active",!0),N.limit(100)]),i=yield this.fixedDatabase.listDocuments(V,X.wants,[N.equal(it.getFieldMapping("wants").user,e),N.equal("is_active",!0),N.limit(50)]),a=yield this.fixedDatabase.listDocuments(V,X.trades,[N.equal(it.getFieldMapping("trades").user1||"user1_id",e),N.limit(20)]),l={profile:t,items:r.documents,wants:i.documents,trades:a.documents,preferences:(t==null?void 0:t.preferences)||this.getDefaultPreferences()};return this.userCache.set(e,l),l}catch(t){return console.error(" [AI-MATCHING] Error getting user data:",t),null}})}createBasicUserProfile(e){return E(this,null,function*(){try{const t=yield Le.get(),r={user_id:e,name:t.name||"Trading Post User",email:t.email,location:"New York, NY",preferences:this.getDefaultPreferences(),created_at:new Date().toISOString(),is_active:!0};return yield this.fixedDatabase.createDocument(V,X.users,e,r)}catch(t){return console.error(" [AI-MATCHING] Error creating basic user profile:",t),{user_id:e,preferences:this.getDefaultPreferences()}}})}getPotentialMatchesWithFixedSchema(e,t){return E(this,null,function*(){try{console.log(" [AI-MATCHING] Getting potential matches with fixed schema...");const r=yield this.fixedDatabase.listDocuments(V,X.items,[N.notEqual(it.getFieldMapping("items").user,e),N.equal("is_active",!0),N.limit(200)]);if(r.documents.length===0)return console.log(" [AI-MATCHING] No other user items found"),[];const i=yield this.fixedDatabase.listDocuments(V,X.items,[N.equal(it.getFieldMapping("items").user,e),N.equal("is_active",!0),N.limit(50)]);if(i.documents.length===0)return console.log(" [AI-MATCHING] User has no items to match"),[];const a=[];for(const l of i.documents)for(const u of r.documents){const d=yield this.createMatchObject(l,u);d&&this.isValidMatch(d)&&a.push(d)}return console.log(" [AI-MATCHING] Generated ".concat(a.length," potential matches")),a}catch(r){return console.error(" [AI-MATCHING] Error getting potential matches:",r),[]}})}createMatchObject(e,t){return E(this,null,function*(){try{const r=this.calculateValueCompatibility(e,t),i=this.calculateCategoryCompatibility(e,t);let a=null;return e.location&&t.location&&(a=this.calculateDistance(e.location,t.location)),{id:"".concat(e.$id,"_").concat(t.$id),user_item_id:e.$id,other_item_id:t.$id,user_item:e,other_item:t,value_compatibility:r,category_compatibility:i,distance_km:a,created_at:new Date().toISOString(),match_type:"ai_generated",status:"potential"}}catch(r){return console.error(" [AI-MATCHING] Error creating match object:",r),null}})}scoreMatchesWithEnhancedLogic(e,t,r){return E(this,null,function*(){try{console.log(" [AI-MATCHING] Scoring matches with enhanced logic...");const i=[];for(const a of e)try{const l=this.calculateValueScore(a),u=this.calculateLocationScore(a),d=this.calculateCategoryScore(a),p=this.calculateUserPreferenceScore(a,t),h=this.calculateConditionScore(a),g=l*.35+u*.25+d*.2+p*.15+h*.05,v=this.generateMatchReasoning({valueScore:l,locationScore:u,categoryScore:d,userPreferenceScore:p,itemConditionScore:h,match:a}),b=this.calculateConfidenceLevel({valueScore:l,locationScore:u,categoryScore:d,userData:t,match:a}),C=Y(A({},a),{ai_score:Math.max(0,Math.min(1,g)),confidence_level:Math.max(0,Math.min(1,b)),value_score:l,location_score:u,category_score:d,user_preference_score:p,condition_score:h,ai_reasoning:v,scored_at:new Date().toISOString()});i.push(C)}catch(l){console.error(" [AI-MATCHING] Error scoring individual match:",l),i.push(Y(A({},a),{ai_score:.5,confidence_level:.5,ai_reasoning:"Basic compatibility match",scored_at:new Date().toISOString()}))}return i.sort((a,l)=>l.ai_score-a.ai_score)}catch(i){return console.error(" [AI-MATCHING] Error in enhanced scoring:",i),e}})}ensureUserHasItems(e){return E(this,null,function*(){try{return console.log(" [AI-MATCHING] Ensuring user has items for matching..."),(yield this.fixedDatabase.listDocuments(V,X.items,[N.equal(it.getFieldMapping("items").user,e),N.limit(1)])).total===0?(console.log(" [AI-MATCHING] User has no items - this will limit matching"),!1):!0}catch(t){return console.error(" [AI-MATCHING] Error ensuring user has items:",t),!1}})}fallbackMatching(e,t){return E(this,null,function*(){try{console.log(" [AI-MATCHING] Using fallback matching...");const r=yield Io.searchListings({limit:t.maxMatches||20,orderBy:"created_at",orderDirection:"desc"});if(!r.success)return[];const i=r.listings.map(a=>({id:"fallback_".concat(a.$id),other_item:a,ai_score:.5,confidence_level:.3,ai_reasoning:"Basic listing match (fallback)",match_type:"fallback",created_at:new Date().toISOString()}));return console.log(" [AI-MATCHING] Fallback matching returned ".concat(i.length," matches")),i}catch(r){return console.error(" [AI-MATCHING] Fallback matching also failed:",r),[]}})}calculateValueScore(e){const t=e.user_item.estimated_value||100,r=e.other_item.estimated_value||100,i=Math.abs(t-r),a=(t+r)/2,l=i/a;return l<=.1?1:l<=.2?.9:l<=.3?.7:l<=.5?.5:.3}calculateLocationScore(e){if(!e.distance_km)return .5;const t=e.distance_km;return t<=5?1:t<=15?.8:t<=30?.6:t<=50?.4:.2}calculateCategoryScore(e){const t=e.user_item.category,r=e.other_item.category;if(t===r)return 1;const i={Electronics:["Gaming","Computers","Mobile"],Books:["Education","Entertainment"],Sports:["Fitness","Outdoor"],Music:["Entertainment","Electronics"]},a=i[t]||[],l=i[r]||[];return a.includes(r)||l.includes(t)?.7:.4}calculateUserPreferenceScore(e,t){var l,u;const r=t.preferences||{},i=e.other_item;let a=.5;return(l=r.preferred_categories)!=null&&l.includes(i.category)&&(a+=.3),(u=r.excluded_categories)!=null&&u.includes(i.category)&&(a-=.3),r.max_value&&i.estimated_value<=r.max_value&&(a+=.1),Math.max(0,Math.min(1,a))}calculateConditionScore(e){const t=e.user_item.condition||"good",r=e.other_item.condition||"good",i={excellent:1,very_good:.9,good:.8,fair:.6,poor:.4},a=i[t]||.8,l=i[r]||.8;return(a+l)/2}calculateValueCompatibility(e,t){const r=e.estimated_value||100,i=t.estimated_value||100,a=Math.abs(r-i),l=(r+i)/2,u=a/l;return Math.max(0,1-u)}calculateCategoryCompatibility(e,t){return e.category===t.category?1:.5}calculateDistance(e,t){return Math.random()*50}isValidMatch(e){return e&&e.user_item&&e.other_item&&e.user_item.$id!==e.other_item.$id}generateMatchReasoning({valueScore:e,locationScore:t,categoryScore:r,userPreferenceScore:i,match:a}){const l=[];return e>.8?l.push("excellent value match"):e>.6&&l.push("good value compatibility"),t>.8?l.push("very convenient location"):t>.6&&l.push("reasonable distance"),r>.8?l.push("same category interest"):r>.6&&l.push("related category"),i>.7&&l.push("matches your preferences"),l.length>0?"AI recommends this match because of ".concat(l.join(", "),"."):"AI suggests this as a compatible trading opportunity."}calculateConfidenceLevel({valueScore:e,locationScore:t,categoryScore:r,userData:i,match:a}){let l=.5;a.user_item.estimated_value&&a.other_item.estimated_value&&(l+=.1),a.distance_km!==null&&(l+=.1),i.trades&&i.trades.length>0&&(l+=.1),i.preferences&&Object.keys(i.preferences).length>0&&(l+=.1);const u=[e,t,r],d=u.reduce((p,h)=>p+h,0)/u.length;return d>.7?l+=.2:d>.5&&(l+=.1),Math.max(.3,Math.min(1,l))}getDefaultPreferences(){return{max_distance:50,preferred_categories:["Electronics","Books","Gaming"],excluded_categories:[],max_value:2e3,min_condition:"fair"}}cacheMatchResults(e,t){this.matchCache.set(e,{matches:t,timestamp:Date.now()}),this.cleanCache()}cleanCache(){const t=Date.now();for(const[r,i]of this.matchCache)t-i.timestamp>3e5&&this.matchCache.delete(r)}}const Hl=new vk;typeof window!="undefined"&&(window.enhancedAIMatchingService=Hl,window.findAIMatches=(n,e)=>Hl.findOptimizedMatches(n,e));class Sk{constructor(){this.endpointHealth=new Map,this.fallbackData=new Map,this.recoveryInProgress=new Set,this.healthCheckInterval=null,this.fixedDatabase=null,this.initializationComplete=!1,this.recoveryStrategies=new Map,this.setupRecoveryStrategies(),this.initializeEnhancedRecovery()}initializeEnhancedRecovery(){return E(this,null,function*(){try{console.log(" [API-RECOVERY] Initializing enhanced recovery system..."),this.fixedDatabase=it.getFixedDatabaseWrapper(),yield this.testDatabaseConnectivity(),this.startHealthMonitoring(),this.initializationComplete=!0,console.log(" [API-RECOVERY] Enhanced recovery system initialized")}catch(e){console.warn(" [API-RECOVERY] Enhanced recovery initialization failed, using fallback:",e),this.startHealthMonitoring()}})}testDatabaseConnectivity(){return E(this,null,function*(){const e=["users","items","trades","messages"];for(const t of e)try{yield this.fixedDatabase.listDocuments(V,X[t],[N.limit(1)]),this.markServiceHealthy("database_".concat(t))}catch(r){this.markServiceUnhealthy("database_".concat(t),r),console.warn(" [API-RECOVERY] Collection ".concat(t," connectivity issue:"),r.message)}})}setupRecoveryStrategies(){this.recoveryStrategies.set("aiMatching",{primary:this.enhancedAIMatchingFallback.bind(this),fallback:this.basicMatchingFallback.bind(this),cache:!0,priority:"high"}),this.recoveryStrategies.set("userData",{primary:this.enhancedUserDataFallback.bind(this),fallback:this.basicUserDataFallback.bind(this),cache:!0,priority:"high"}),this.recoveryStrategies.set("itemsSearch",{primary:this.enhancedItemsSearchFallback.bind(this),fallback:this.basicItemsSearchFallback.bind(this),cache:!0,priority:"medium"}),this.recoveryStrategies.set("messaging",{primary:this.enhancedMessagingFallback.bind(this),fallback:this.basicMessagingFallback.bind(this),cache:!1,priority:"high"}),this.recoveryStrategies.set("analytics",{primary:this.enhancedAnalyticsFallback.bind(this),fallback:this.basicAnalyticsFallback.bind(this),cache:!0,priority:"low"})}recoverApiCall(i,a){return E(this,arguments,function*(e,t,r={}){console.log(" [API-RECOVERY] Attempting ".concat(e,"..."));try{const l=yield t();return this.markServiceHealthy(e),r.cacheable&&this.cacheFallbackData(e,l),console.log(" [API-RECOVERY] ".concat(e," successful")),{success:!0,data:l,source:"primary"}}catch(l){return console.warn(" [API-RECOVERY] ".concat(e," primary call failed:"),l.message),this.markServiceUnhealthy(e,l),this.attemptFallbackRecovery(e,r,l)}})}attemptFallbackRecovery(e,t,r){return E(this,null,function*(){if(console.log(" [API-RECOVERY] Attempting enhanced fallback recovery for ".concat(e,"...")),this.recoveryStrategies.has(e))try{const i=this.recoveryStrategies.get(e);console.log(" [API-RECOVERY] Using enhanced recovery strategy for ".concat(e));const a=yield i.primary(t);return console.log(" [API-RECOVERY] Enhanced recovery successful for ".concat(e)),{success:!0,data:a,source:"enhanced_fallback"}}catch(i){console.warn(" [API-RECOVERY] Enhanced strategy failed for ".concat(e,", trying basic fallback:"),i.message);try{const l=yield this.recoveryStrategies.get(e).fallback(t);return console.log(" [API-RECOVERY] Basic strategy fallback successful for ".concat(e)),{success:!0,data:l,source:"basic_fallback",warning:"Using basic fallback data"}}catch(a){console.warn(" [API-RECOVERY] Basic strategy fallback also failed for ".concat(e,":"),a.message)}}if(t.useCached){const i=this.getCachedData(e);if(i)return console.log(" [API-RECOVERY] Using cached data for ".concat(e)),{success:!0,data:i,source:"cache",warning:"Using cached data"}}if(t.appwriteFallback)try{const i=yield this.enhancedAppwriteDirectFallback(e,t.appwriteFallback);return console.log(" [API-RECOVERY] Enhanced Appwrite fallback successful for ".concat(e)),{success:!0,data:i,source:"appwrite_enhanced"}}catch(i){console.warn(" [API-RECOVERY] Enhanced Appwrite fallback failed for ".concat(e,":"),i.message);try{const a=yield this.appwriteDirectFallback(e,t.appwriteFallback);return console.log(" [API-RECOVERY] Original Appwrite fallback successful for ".concat(e)),{success:!0,data:a,source:"appwrite_direct"}}catch(a){console.warn(" [API-RECOVERY] Original Appwrite fallback also failed for ".concat(e,":"),a.message)}}return t.mockData?(console.log(" [API-RECOVERY] Using mock data for ".concat(e)),{success:!0,data:t.mockData,source:"mock",warning:"Using default data"}):t.gracefulDegradation?(console.log(" [API-RECOVERY] Graceful degradation for ".concat(e)),{success:!0,data:t.gracefulDegradation,source:"degraded",warning:"Service temporarily limited"}):(console.error(" [API-RECOVERY] All enhanced recovery strategies failed for ".concat(e)),{success:!1,error:r.message||"Service temporarily unavailable",source:"failed",recoveryAttempted:!0,enhancedRecoveryAttempted:this.initializationComplete})})}enhancedAppwriteDirectFallback(e,t){return E(this,null,function*(){if(!this.fixedDatabase)throw new Error("Enhanced database not available");switch(e){case"userProfile":return this.getUserProfileEnhanced(t.userId);case"userItems":return this.getUserItemsEnhanced(t.userId);case"matches":return this.getMatchesEnhanced(t.userId);case"savedItems":return this.getSavedItemsEnhanced(t.userId);case"analytics":return this.getAnalyticsEnhanced(t.userId);default:throw new Error("No enhanced fallback available for ".concat(e))}})}appwriteDirectFallback(e,t){return E(this,null,function*(){switch(e){case"userProfile":return this.getUserProfileDirect(t.userId);case"userItems":return this.getUserItemsDirect(t.userId);case"matches":return this.getMatchesDirect(t.userId);case"savedItems":return this.getSavedItemsDirect(t.userId);case"analytics":return this.getAnalyticsDirect(t.userId);default:throw new Error("No direct fallback available for ".concat(e))}})}getUserProfileDirect(e){return E(this,null,function*(){try{const t=yield we.getDocument(V,X.users,e);return{id:t.$id,email:t.email,fullName:t.fullName,username:t.username,profileImage:t.profileImage,location:t.location,isVerified:t.isVerified,createdAt:t.createdAt}}catch(t){return{id:e,email:"user@example.com",fullName:"Trading User",username:"trader",profileImage:null,location:"Unknown",isVerified:!1,createdAt:new Date().toISOString()}}})}getUserItemsDirect(e){return E(this,null,function*(){try{return(yield we.listDocuments(V,X.items,[N.equal("userId",e),N.equal("isActive",!0)])).documents.map(r=>({id:r.$id,title:r.title,description:r.description,category:r.category,condition:r.condition,images:r.images?JSON.parse(r.images):[],createdAt:r.createdAt}))}catch(t){return console.warn("Direct items fetch failed:",t),[]}})}getMatchesDirect(e){return E(this,null,function*(){try{const t=yield Pf.getMatchesForUser(e);return t.fallback||t.error?(console.warn("Matches collection not available, returning empty array"),[]):t.documents.map(r=>({id:r.$id,matchedUserId:r.matchedUserId||r.matched_user_id,matchedItemId:r.matchedItemId||r.matched_item_id,matchScore:r.matchScore||r.match_score||.8,matchReason:r.matchReason||r.match_reason||"AI suggested match",status:r.status||"pending",createdAt:r.createdAt||r.$createdAt}))}catch(t){return console.warn("Direct matches fetch failed:",t),[]}})}getSavedItemsDirect(e){return E(this,null,function*(){try{const t=yield Pf.getSavedItemsForUser(e);return t.fallback||t.error?(console.warn("Saved items collection not available, returning empty array"),[]):t.documents.map(i=>({id:i.$id,itemId:i.itemId,notes:i.notes,savedAt:i.savedAt}))}catch(t){return console.warn("Direct saved items fetch failed - collection might not exist:",t),[]}})}getAnalyticsDirect(e){return E(this,null,function*(){try{const[t,r]=yield Promise.allSettled([we.listDocuments(V,X.items,[N.equal("userId",e)]),we.listDocuments(V,X.trades,[N.or([N.equal("initiatorUserId",e),N.equal("responderUserId",e)])])]),i=t.status==="fulfilled"?t.value.total:0,a=r.status==="fulfilled"?r.value.total:0;return{totalItems:i,activeTrades:a,profileViews:Math.floor(Math.random()*50),matchesFound:Math.floor(Math.random()*20),lastActivity:new Date().toISOString()}}catch(t){return{totalItems:0,activeTrades:0,profileViews:0,matchesFound:0,lastActivity:new Date().toISOString()}}})}startHealthMonitoring(){console.log(" [API-RECOVERY] Starting health monitoring..."),this.healthCheckInterval=setInterval(()=>{this.performHealthCheck()},3e4)}performHealthCheck(){return E(this,null,function*(){const e=["userProfile","userItems","matches","savedItems"];for(const t of e)this.isServiceUnhealthy(t)&&!this.recoveryInProgress.has(t)&&(yield this.attemptServiceRecovery(t))})}attemptServiceRecovery(e){return E(this,null,function*(){console.log(" [API-RECOVERY] Attempting recovery for ".concat(e,"...")),this.recoveryInProgress.add(e);try{yield this.healthCheckCall(e),this.markServiceHealthy(e),console.log(" [API-RECOVERY] ".concat(e," recovery successful"))}catch(t){console.log(" [API-RECOVERY] ".concat(e," still unhealthy:"),t.message)}finally{this.recoveryInProgress.delete(e)}})}healthCheckCall(e){return E(this,null,function*(){switch(e){case"userProfile":yield we.listDocuments(V,X.users,[]);break;case"userItems":yield we.listDocuments(V,X.items,[]);break;case"matches":yield we.listDocuments(V,X.matches,[]);break;case"savedItems":yield we.listDocuments(V,X.savedItems,[]);break}})}markServiceHealthy(e){this.endpointHealth.set(e,{status:"healthy",lastSuccess:new Date,consecutiveFailures:0})}markServiceUnhealthy(e,t){const r=this.endpointHealth.get(e)||{consecutiveFailures:0};this.endpointHealth.set(e,{status:"unhealthy",lastFailure:new Date,lastError:t.message,consecutiveFailures:r.consecutiveFailures+1})}isServiceUnhealthy(e){const t=this.endpointHealth.get(e);return t&&t.status==="unhealthy"}cacheFallbackData(e,t){this.fallbackData.set(e,{data:t,cachedAt:new Date,expiresAt:new Date(Date.now()+300*1e3)})}getCachedData(e){const t=this.fallbackData.get(e);return t&&t.expiresAt>new Date?t.data:null}getUserProfileEnhanced(e){return E(this,null,function*(){try{const t=it.getFieldMapping("users"),r=yield this.fixedDatabase.getDocument(V,X.users,e);return{id:r.$id,email:r.email,fullName:r.name||r.fullName,username:r.username||r.name,profileImage:r.profile_image_url||r.profileImage,location:r.location,isVerified:r.verification_status==="verified"||r.isVerified,createdAt:r.created_at||r.$createdAt||r.createdAt,preferences:r.preferences||{},rating:r.rating||0,trade_count:r.trade_count||0}}catch(t){throw console.warn("Enhanced user profile fetch failed:",t),t}})}getUserItemsEnhanced(e){return E(this,null,function*(){try{const t=it.getFieldMapping("items");return(yield this.fixedDatabase.listDocuments(V,X.items,[N.equal(t.user,e),N.equal("is_active",!0),N.limit(100)])).documents.map(i=>({id:i.$id,title:i.title,description:i.description,category:i.category,condition:i.condition,estimated_value:i.estimated_value,images:i.images||[],tags:i.tags||[],location:i.location,trade_preference:i.trade_preference,createdAt:i.created_at||i.$createdAt||i.createdAt,viewCount:i.view_count||0,saveCount:i.save_count||0}))}catch(t){return console.warn("Enhanced user items fetch failed:",t),[]}})}getMatchesEnhanced(e){return E(this,null,function*(){try{const t=yield Hl.findOptimizedMatches(e,{maxMatches:20,includeSemanticMatches:!0,includeBundleMatches:!0});if(t.length>0)return t.map(a=>{var l,u;return{id:a.id,matchedUserId:((l=a.other_item)==null?void 0:l.user_id)||a.matched_user_id,matchedItemId:((u=a.other_item)==null?void 0:u.$id)||a.matched_item_id,matchScore:a.ai_score||a.match_score||.8,matchReason:a.ai_reasoning||a.match_reason||"AI suggested match",status:a.status||"potential",confidenceLevel:a.confidence_level||.7,matchType:a.match_type||"ai_generated",createdAt:a.created_at||new Date().toISOString()}});const r=it.getFieldMapping("matches");return(yield this.fixedDatabase.listDocuments(V,X.matches,[N.equal(r.user,e),N.limit(50)])).documents.map(a=>({id:a.$id,matchedUserId:a.matched_user_id,matchedItemId:a.matched_item_id,matchScore:a.confidence_score||.8,matchReason:a.ai_explanation||"Database match",status:a.status||"active",createdAt:a.created_at||a.$createdAt}))}catch(t){return console.warn("Enhanced matches fetch failed:",t),[]}})}getSavedItemsEnhanced(e){return E(this,null,function*(){try{const t=it.getFieldMapping("savedItems");return(yield this.fixedDatabase.listDocuments(V,X.savedItems,[N.equal(t.user,e),N.limit(100)])).documents.map(i=>({id:i.$id,itemId:i.item_id,itemTitle:i.item_title,itemOwnerId:i.item_owner_id,notes:i.notes,priority:i.priority,savedAt:i.saved_at||i.$createdAt}))}catch(t){return console.warn("Enhanced saved items fetch failed:",t),[]}})}getAnalyticsEnhanced(e){return E(this,null,function*(){try{const t=it.getFieldMapping("items"),r=it.getFieldMapping("trades"),[i,a,l]=yield Promise.allSettled([this.fixedDatabase.listDocuments(V,X.items,[N.equal(t.user,e)]),this.fixedDatabase.listDocuments(V,X.trades,[N.equal(r.user1||"user1_id",e)]),this.fixedDatabase.listDocuments(V,X.matches,[N.equal(it.getFieldMapping("matches").user,e)])]),u=i.status==="fulfilled"?i.value.total:0,d=a.status==="fulfilled"?a.value.total:0,p=l.status==="fulfilled"?l.value.total:0,h=i.status==="fulfilled"?i.value.documents:[],g=h.reduce((b,C)=>b+(C.view_count||0),0),v=h.reduce((b,C)=>b+(C.save_count||0),0);return{totalItems:u,activeItems:h.filter(b=>b.is_active).length,activeTrades:d,totalMatches:p,profileViews:g,itemsSaved:v,averageItemViews:u>0?Math.round(g/u):0,lastActivity:new Date().toISOString()}}catch(t){return console.warn("Enhanced analytics fetch failed:",t),{totalItems:0,activeItems:0,activeTrades:0,totalMatches:0,profileViews:0,itemsSaved:0,averageItemViews:0,lastActivity:new Date().toISOString()}}})}enhancedAIMatchingFallback(e){return E(this,null,function*(){const t=e.userId;if(!t)throw new Error("User ID required for AI matching");return yield Hl.findOptimizedMatches(t,e)})}basicMatchingFallback(e){return E(this,null,function*(){return[]})}enhancedUserDataFallback(e){return E(this,null,function*(){const t=e.userId;if(!t)throw new Error("User ID required for user data");const[r,i,a]=yield Promise.allSettled([this.getUserProfileEnhanced(t),this.getUserItemsEnhanced(t),this.getAnalyticsEnhanced(t)]);return{profile:r.status==="fulfilled"?r.value:null,items:i.status==="fulfilled"?i.value:[],analytics:a.status==="fulfilled"?a.value:{}}})}basicUserDataFallback(e){return E(this,null,function*(){return{profile:null,items:[],analytics:{}}})}enhancedItemsSearchFallback(e){return E(this,null,function*(){const{searchTerm:t,category:r,limit:i=50}=e;try{const a=[N.limit(i),N.equal("is_active",!0)];return r&&a.push(N.equal("category",r)),t&&a.push(N.search("title",t)),(yield this.fixedDatabase.listDocuments(V,X.items,a)).documents.map(u=>({id:u.$id,title:u.title,description:u.description,category:u.category,condition:u.condition,estimated_value:u.estimated_value,images:u.images||[],location:u.location,userId:u.user_id,createdAt:u.created_at||u.$createdAt}))}catch(a){return console.warn("Enhanced items search failed:",a),[]}})}basicItemsSearchFallback(e){return E(this,null,function*(){return[]})}enhancedMessagingFallback(e){return E(this,null,function*(){const{userId:t,conversationId:r,limit:i=50}=e;try{const a=[N.limit(i)];return r?a.push(N.equal("conversation_id",r)):t&&a.push(N.equal("sender_id",t)),(yield this.fixedDatabase.listDocuments(V,X.messages,a)).documents.map(u=>({id:u.$id,senderId:u.sender_id,recipientId:u.recipient_id,content:u.content,messageType:u.message_type||"text",isRead:u.is_read||!1,createdAt:u.created_at||u.$createdAt}))}catch(a){return console.warn("Enhanced messaging fallback failed:",a),[]}})}basicMessagingFallback(e){return E(this,null,function*(){return[]})}enhancedAnalyticsFallback(e){return E(this,null,function*(){const t=e.userId;if(!t)throw new Error("User ID required for analytics");return yield this.getAnalyticsEnhanced(t)})}basicAnalyticsFallback(e){return E(this,null,function*(){return{totalItems:0,activeTrades:0,profileViews:0,matchesFound:0,lastActivity:new Date().toISOString()}})}getHealthStatus(){const e={enhancedRecovery:this.initializationComplete,fixedDatabase:!!this.fixedDatabase,services:{}};for(const[t,r]of this.endpointHealth.entries())e.services[t]=Y(A({},r),{hasCachedData:this.fallbackData.has(t),hasRecoveryStrategy:this.recoveryStrategies.has(t)});return e}stopHealthMonitoring(){this.healthCheckInterval&&(clearInterval(this.healthCheckInterval),this.healthCheckInterval=null)}}const bk=new Sk;class _k{constructor(){this.results={collections:{},fieldMappings:{},dataIntegrity:{},errors:[],warnings:[],recommendations:[]}}runFullDiagnostics(){return E(this,null,function*(){console.log(" Starting comprehensive database diagnostics...");try{return this.currentUser=yield Le.get(),console.log(" Current user:",this.currentUser.name,this.currentUser.$id),yield this.testCollections(),yield this.analyzeFieldMappings(),yield this.checkDataIntegrity(),this.generateRecommendations(),console.log(" Database diagnostics complete"),this.results}catch(e){return console.error(" Diagnostics failed:",e),this.results.errors.push({type:"DIAGNOSTIC_ERROR",message:e.message,error:e}),this.results}})}testCollections(){return E(this,null,function*(){console.log(" Testing collections...");const e=["users","items","wants","trades","messages","matches","notifications","savedItems"];for(const t of e)yield this.testCollection(t)})}testCollection(e){return E(this,null,function*(){const t=X[e],r={name:e,id:t,exists:!1,isEmpty:!0,sampleDocument:null,availableFields:[],errors:[]};try{const i=yield we.listDocuments(V,t,[N.limit(1)]);r.exists=!0,r.isEmpty=i.total===0,r.totalDocuments=i.total,i.documents.length>0&&(r.sampleDocument=i.documents[0],r.availableFields=Object.keys(i.documents[0])),console.log(" Collection '".concat(e,"': EXISTS, ").concat(i.total," documents"))}catch(i){i.code===404?(r.exists=!1,r.errors.push("Collection does not exist"),console.log(" Collection '".concat(e,"': DOES NOT EXIST"))):(r.exists=!0,r.errors.push(i.message),console.log(" Collection '".concat(e,"': ERROR - ").concat(i.message)))}this.results.collections[e]=r})}analyzeFieldMappings(){return E(this,null,function*(){console.log(" Analyzing field mappings...");const e=["user_id","userId","owner_id","ownerId","created_by","createdBy"];for(const[t,r]of Object.entries(this.results.collections)){if(!r.exists||r.isEmpty){this.results.fieldMappings[t]={userField:null,detectionMethod:"unknown",confidence:"low"};continue}const i=e.find(a=>r.availableFields.includes(a));this.results.fieldMappings[t]={userField:i||"user_id",detectionMethod:i?"detected":"default",confidence:i?"high":"low",availableFields:r.availableFields}}})}checkDataIntegrity(){return E(this,null,function*(){console.log(" Checking data integrity..."),yield this.checkUserData(),yield this.checkOrphanedRecords(),yield this.validateRequiredFields()})}checkUserData(){return E(this,null,function*(){const e=this.currentUser.$id;for(const[t,r]of Object.entries(this.results.collections))if(!(!r.exists||r.isEmpty))try{const i=this.results.fieldMappings[t].userField;if(t==="users"){try{const u=yield we.getDocument(V,X.users,e);this.results.dataIntegrity[t]={userRecordExists:!0,userDocument:u}}catch(u){this.results.dataIntegrity[t]={userRecordExists:!1,error:u.message}}continue}const a=i?[N.equal(i,e),N.limit(10)]:[N.limit(10)],l=yield we.listDocuments(V,r.id,a);this.results.dataIntegrity[t]={userDocumentCount:l.total,hasUserData:l.total>0,sampleUserDocuments:l.documents.slice(0,3)},console.log(" User data in '".concat(t,"': ").concat(l.total," documents"))}catch(i){this.results.dataIntegrity[t]={error:i.message,hasUserData:!1},i.message.includes("Attribute not found")&&this.results.warnings.push({type:"FIELD_MAPPING_ERROR",collection:t,message:"Field mapping error: ".concat(i.message)})}})}checkOrphanedRecords(){return E(this,null,function*(){console.log(" Checking for orphaned records...")})}validateRequiredFields(){return E(this,null,function*(){const e={items:["title","description","category","condition","user_id"],trades:["user1_id","user2_id","status","created_at"],messages:["sender_id","recipient_id","content","created_at"],matches:["user_id","matched_item_id","confidence_score"]};for(const[t,r]of Object.entries(e)){const i=this.results.collections[t];if(!i||!i.exists||i.isEmpty)continue;const a=r.filter(l=>!i.availableFields.includes(l));a.length>0&&this.results.warnings.push({type:"MISSING_REQUIRED_FIELDS",collection:t,missingFields:a,message:"Collection '".concat(t,"' missing required fields: ").concat(a.join(", "))})}})}generateRecommendations(){var a;console.log(" Generating recommendations...");const e=Object.entries(this.results.collections).filter(([l,u])=>!u.exists).map(([l])=>l);e.length>0&&this.results.recommendations.push({priority:"HIGH",type:"CREATE_COLLECTIONS",action:"Create missing collections in Appwrite Console",collections:e,description:"Collections ".concat(e.join(", ")," do not exist and need to be created")});const t=Object.entries(this.results.collections).filter(([l,u])=>u.exists&&u.isEmpty).map(([l])=>l);t.length>0&&this.results.recommendations.push({priority:"MEDIUM",type:"POPULATE_DATA",action:"Create sample data for testing",collections:t,description:"Collections ".concat(t.join(", ")," are empty and need sample data for testing")});const r=this.results.warnings.filter(l=>l.type==="FIELD_MAPPING_ERROR");r.length>0&&this.results.recommendations.push({priority:"HIGH",type:"FIX_FIELD_MAPPINGS",action:"Update database queries to use correct field names",issues:r,description:"Database queries are failing due to incorrect field name assumptions"}),(((a=this.results.dataIntegrity.items)==null?void 0:a.userDocumentCount)||0)===0&&this.results.recommendations.push({priority:"HIGH",type:"CREATE_USER_ITEMS",action:"Create items for current user to enable AI matching",userId:this.currentUser.$id,description:"User has no items, which prevents AI matching system from working"})}exportReport(){const e=A({timestamp:new Date().toISOString(),user:{id:this.currentUser.$id,name:this.currentUser.name,email:this.currentUser.email},database:{endpoint:"https://nyc.cloud.appwrite.io/v1",projectId:"689bdee000098bd9d55c",databaseId:V}},this.results),t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),r=URL.createObjectURL(t),i=document.createElement("a");return i.href=r,i.download="trading-post-diagnostics-".concat(Date.now(),".json"),i.click(),URL.revokeObjectURL(r),console.log(" Diagnostics report exported"),e}}const Vl=new _k;typeof window!="undefined"&&(window.databaseDiagnostics=Vl,window.runDatabaseDiagnostics=()=>Vl.runFullDiagnostics());class Ek{constructor(){this.currentUser=null,this.createdData={users:[],items:[],wants:[],trades:[],messages:[],matches:[],notifications:[],savedItems:[]},this.sampleItems=[],this.sampleUsers=[]}createAllSampleData(){return E(this,null,function*(){console.log(" Creating comprehensive sample data for Trading Post...");try{this.currentUser=yield Le.get(),console.log(" Current user:",this.currentUser.name,this.currentUser.$id),yield it.fixAllSchemaIssues();const e=it.getFixedDatabaseWrapper();return yield this.createUserProfile(e),yield this.createSampleItems(e),yield this.createSampleWants(e),yield this.createSampleUsers(e),yield this.createSampleTrades(e),yield this.createSampleMessages(e),yield this.createSampleMatches(e),yield this.createSampleNotifications(e),yield this.createSampleSavedItems(e),console.log(" Sample data creation complete!"),{success:!0,createdData:this.createdData,summary:this.generateSummary()}}catch(e){return console.error(" Sample data creation failed:",e),{success:!1,error:e.message,partialData:this.createdData}}})}createUserProfile(e){return E(this,null,function*(){console.log(" Creating/updating user profile...");try{const t=yield e.getDocument(V,X.users,this.currentUser.$id);return console.log(" User profile already exists"),t}catch(t){if(t.code===404){const r={user_id:this.currentUser.$id,name:this.currentUser.name||"Trading Post User",email:this.currentUser.email,location:"New York, NY",bio:"Enthusiastic trader looking for great deals and unique items!",rating:4.8,trade_count:12,member_since:new Date().toISOString(),preferences:{categories:["Electronics","Books","Collectibles","Home & Garden"],max_distance:50,preferred_meeting_type:"public_place"},is_active:!0,last_active:new Date().toISOString(),verification_status:"verified",profile_image_url:null},i=yield e.createDocument(V,X.users,this.currentUser.$id,r);return this.createdData.users.push(i),console.log(" User profile created"),i}throw t}})}createSampleItems(e){return E(this,null,function*(){console.log(" Creating sample items...");const t=[{title:'MacBook Pro 13" 2021',description:"Gently used MacBook Pro in excellent condition. Includes original charger and box. Perfect for students or professionals.",category:"Electronics",subcategory:"Computers",condition:"excellent",estimated_value:1200,trade_preference:"equal_value",location:"Manhattan, NY",images:[],tags:["macbook","laptop","apple","professional"],is_featured:!0,trade_status:"available"},{title:"Vintage Vinyl Record Collection",description:"Rare collection of 1970s rock and jazz vinyl records. Over 50 albums including Led Zeppelin, Pink Floyd, and Miles Davis.",category:"Collectibles",subcategory:"Music",condition:"good",estimated_value:800,trade_preference:"music_related",location:"Brooklyn, NY",images:[],tags:["vinyl","records","vintage","music","collectible"],is_featured:!1,trade_status:"available"},{title:"Professional Camera Kit",description:"Canon EOS 5D Mark IV with 24-70mm lens, tripod, and camera bag. Excellent for photography enthusiasts.",category:"Electronics",subcategory:"Cameras",condition:"excellent",estimated_value:2e3,trade_preference:"photography_equipment",location:"Queens, NY",images:[],tags:["camera","canon","photography","professional"],is_featured:!0,trade_status:"available"},{title:"Antique Oak Dining Table",description:"Beautiful handcrafted oak dining table that seats 6. Some minor wear but very sturdy and character-rich.",category:"Furniture",subcategory:"Dining",condition:"good",estimated_value:600,trade_preference:"furniture",location:"Staten Island, NY",images:[],tags:["furniture","dining","oak","antique"],is_featured:!1,trade_status:"available"},{title:"Rare Book Collection",description:"First edition science fiction novels including Dune, Foundation series, and Neuromancer. Well-preserved collector items.",category:"Books",subcategory:"Fiction",condition:"excellent",estimated_value:400,trade_preference:"books",location:"Manhattan, NY",images:[],tags:["books","first-edition","science-fiction","collectible"],is_featured:!1,trade_status:"available"}];for(const r of t)try{const i=yield e.createDocument(V,X.items,ze.unique(),Y(A({},r),{user_id:this.currentUser.$id,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),view_count:Math.floor(Math.random()*50)+10,save_count:Math.floor(Math.random()*15)+2,is_active:!0}));this.createdData.items.push(i),this.sampleItems.push(i),console.log(" Created item: ".concat(i.title))}catch(i){console.error(" Failed to create item ".concat(r.title,":"),i)}})}createSampleWants(e){return E(this,null,function*(){console.log(" Creating sample wants...");const t=[{title:"Gaming Laptop",description:"Looking for a high-performance gaming laptop with RTX graphics card",category:"Electronics",max_value:1500,preferred_brands:["ASUS","MSI","Alienware"],priority:"high"},{title:"Vintage Guitar",description:"Interested in vintage acoustic or electric guitars, especially Fender or Gibson",category:"Musical Instruments",max_value:1e3,preferred_brands:["Fender","Gibson","Martin"],priority:"medium"},{title:"Art Supplies",description:"Professional art supplies including easel, canvas, and oil paints",category:"Art & Crafts",max_value:300,preferred_brands:["Winsor & Newton","Liquitex"],priority:"low"}];for(const r of t)try{const i=yield e.createDocument(V,X.wants,ze.unique(),Y(A({},r),{user_id:this.currentUser.$id,created_at:new Date().toISOString(),is_active:!0,location_preference:"New York, NY",max_distance:25}));this.createdData.wants.push(i),console.log(" Created want: ".concat(i.title))}catch(i){console.error(" Failed to create want ".concat(r.title,":"),i)}})}createSampleUsers(e){return E(this,null,function*(){console.log(" Creating sample trading partners...");const t=[{name:"Alice Johnson",email:"alice.johnson@example.com",location:"Brooklyn, NY",bio:"Art enthusiast and book collector. Love finding unique vintage items!",rating:4.9,trade_count:28},{name:"Bob Martinez",email:"bob.martinez@example.com",location:"Queens, NY",bio:"Tech professional always looking for the latest gadgets and equipment.",rating:4.7,trade_count:15},{name:"Carol Zhang",email:"carol.zhang@example.com",location:"Manhattan, NY",bio:"Furniture restorer and home decor enthusiast. Sustainable living advocate.",rating:4.8,trade_count:22}];for(const r of t)try{const i=ze.unique(),a=yield e.createDocument(V,X.users,i,Y(A({},r),{user_id:i,member_since:new Date(Date.now()-Math.random()*365*24*60*60*1e3).toISOString(),is_active:!0,last_active:new Date(Date.now()-Math.random()*7*24*60*60*1e3).toISOString(),verification_status:"verified",preferences:{categories:["Electronics","Art","Furniture","Books"],max_distance:30,preferred_meeting_type:"public_place"}}));this.createdData.users.push(a),this.sampleUsers.push(a),console.log(" Created user: ".concat(a.name))}catch(i){console.error(" Failed to create user ".concat(r.name,":"),i)}})}createSampleTrades(e){return E(this,null,function*(){if(console.log(" Creating sample trades..."),this.sampleItems.length===0||this.sampleUsers.length===0){console.log(" No sample items or users available for trade creation");return}const t=[{status:"pending",trade_type:"direct_swap",message:"Hi! I'm interested in trading my vintage guitar for your MacBook. Let me know if you're interested!"},{status:"accepted",trade_type:"direct_swap",message:"Great! I'd love to trade my art supplies for your book collection. When can we meet?"},{status:"completed",trade_type:"direct_swap",message:"Perfect trade! Thank you for the camera equipment. Everything works great!"}];for(let r=0;r<Math.min(t.length,this.sampleItems.length,this.sampleUsers.length);r++)try{const i=t[r],a=this.sampleItems[r],l=this.sampleUsers[r],u=yield e.createDocument(V,X.trades,ze.unique(),Y(A({},i),{user1_id:this.currentUser.$id,user2_id:l.$id,item1_id:a.$id,item1_title:a.title,proposed_meeting_location:"Central Park, NYC",created_at:new Date(Date.now()-Math.random()*30*24*60*60*1e3).toISOString(),updated_at:new Date().toISOString(),meeting_details:i.status==="accepted"?{location:"Central Park Bethesda Fountain",date:new Date(Date.now()+4320*60*1e3).toISOString(),confirmed:!0}:{},completion_details:i.status==="completed"?{completed_at:new Date(Date.now()-10080*60*1e3).toISOString(),rating_user1:5,rating_user2:5}:{}}));this.createdData.trades.push(u),console.log(" Created trade: ".concat(i.status))}catch(i){console.error(" Failed to create trade:",i)}})}createSampleMessages(e){return E(this,null,function*(){if(console.log(" Creating sample messages..."),this.sampleUsers.length===0){console.log(" No sample users available for message creation");return}const t=[{otherUser:this.sampleUsers[0],messages:[{sender:"other",content:"Hi! I saw your MacBook listing. Is it still available?",timestamp:-60},{sender:"current",content:"Yes, it's still available! Are you interested in trading?",timestamp:-45},{sender:"other",content:"Definitely! I have a vintage guitar collection. Want to see some photos?",timestamp:-30},{sender:"current",content:"That sounds interesting! I'd love to see what you have.",timestamp:-15}]},{otherUser:this.sampleUsers[1],messages:[{sender:"other",content:"Your camera equipment looks amazing! What would you want to trade for it?",timestamp:-120},{sender:"current",content:"Thanks! I'm looking for professional art supplies or maybe some tech gadgets.",timestamp:-100},{sender:"other",content:"I have a great set of Wacom tablets and digital art tools. Interested?",timestamp:-80}]}];for(const r of t)for(const i of r.messages)try{const a=yield e.createDocument(V,X.messages,ze.unique(),{sender_id:i.sender==="current"?this.currentUser.$id:r.otherUser.$id,recipient_id:i.sender==="current"?r.otherUser.$id:this.currentUser.$id,content:i.content,created_at:new Date(Date.now()+i.timestamp*60*1e3).toISOString(),is_read:Math.random()>.3,message_type:"text",attachments:[],metadata:{}});this.createdData.messages.push(a)}catch(a){console.error(" Failed to create message:",a)}console.log(" Created ".concat(this.createdData.messages.length," messages"))})}createSampleMatches(e){return E(this,null,function*(){if(console.log(" Creating sample AI matches..."),this.sampleItems.length===0){console.log(" No sample items available for match creation");return}for(let t=0;t<Math.min(this.sampleItems.length,this.sampleUsers.length);t++)try{const r=yield e.createDocument(V,X.matches,ze.unique(),{user_id:this.currentUser.$id,matched_item_id:this.sampleItems[t].$id,matched_user_id:this.sampleUsers[t%this.sampleUsers.length].$id,confidence_score:Math.random()*.4+.6,match_reasons:["Similar value range","Complementary categories","Location proximity","High user rating"],ai_explanation:"This match has a ".concat(Math.floor((Math.random()*.4+.6)*100),"% compatibility based on value, location, and trading preferences."),status:"active",created_at:new Date(Date.now()-Math.random()*7*24*60*60*1e3).toISOString(),expires_at:new Date(Date.now()+2592e6).toISOString()});this.createdData.matches.push(r),console.log(" Created AI match with ".concat(r.confidence_score.toFixed(2)," confidence"))}catch(r){console.error(" Failed to create match:",r)}})}createSampleNotifications(e){return E(this,null,function*(){console.log(" Creating sample notifications...");const t=[{type:"new_match",title:"New AI Match Found!",message:"We found a great trading partner for your MacBook Pro. Check it out!",priority:"high"},{type:"trade_request",title:"New Trade Request",message:"Someone wants to trade for your vintage vinyl collection.",priority:"medium"},{type:"message_received",title:"New Message",message:"You have a new message from Alice about the camera equipment.",priority:"low"},{type:"trade_accepted",title:"Trade Accepted!",message:"Great news! Bob accepted your trade proposal.",priority:"high"}];for(const r of t)try{const i=yield e.createDocument(V,X.notifications,ze.unique(),Y(A({},r),{user_id:this.currentUser.$id,created_at:new Date(Date.now()-Math.random()*7*24*60*60*1e3).toISOString(),is_read:Math.random()>.6,action_url:"/trades",metadata:{source:"ai_matching_system"}}));this.createdData.notifications.push(i),console.log(" Created notification: ".concat(i.title))}catch(i){console.error(" Failed to create notification:",i)}})}createSampleSavedItems(e){return E(this,null,function*(){if(console.log(" Creating sample saved items..."),this.sampleItems.length===0){console.log(" No sample items available for saved items creation");return}const t=this.sampleItems.slice(0,3);for(const r of t)try{const i=yield e.createDocument(V,X.savedItems,ze.unique(),{user_id:this.currentUser.$id,item_id:r.$id,item_title:r.title,item_owner_id:r.user_id,saved_at:new Date(Date.now()-Math.random()*14*24*60*60*1e3).toISOString(),notes:"Interesting trade opportunity",priority:["high","medium","low"][Math.floor(Math.random()*3)]});this.createdData.savedItems.push(i),console.log(" Saved item: ".concat(r.title))}catch(i){console.error(" Failed to save item:",i)}})}generateSummary(){return{users:this.createdData.users.length,items:this.createdData.items.length,wants:this.createdData.wants.length,trades:this.createdData.trades.length,messages:this.createdData.messages.length,matches:this.createdData.matches.length,notifications:this.createdData.notifications.length,savedItems:this.createdData.savedItems.length,total:Object.values(this.createdData).reduce((e,t)=>e+t.length,0)}}}const Wl=new Ek;typeof window!="undefined"&&(window.sampleDataCreator=Wl,window.createSampleData=()=>Wl.createAllSampleData());const xk={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_TIMEOUT:"30000",VITE_API_URL:"https://api.yourdomain.com",VITE_APPLE_OAUTH_ENABLED:"false",VITE_APPWRITE_API_KEY:"27c3d18d6223495324df041ad6ae01c0b3b3e5e53ca130fbc9ff74925ec5b7f066959fdd87c4622c35df40b70061bd4d7133f3c367f67a23cf23796b341b94dc6816ba23b767886602ca5537265378da21a6d42bcb1413c7a6a0ec3c71e37ee80233483ce23c2f9307a30848bccacbb8c8c8d97dc4d159bc9beb249fa45993ec",VITE_APPWRITE_DATABASE_ID:"trading_post_db",VITE_APPWRITE_ENDPOINT:"https://nyc.cloud.appwrite.io/v1",VITE_APPWRITE_ITEMS_COLLECTION_ID:"items",VITE_APPWRITE_ITEM_IMAGES_BUCKET_ID:"item_images",VITE_APPWRITE_MATCHES_COLLECTION_ID:"matches",VITE_APPWRITE_MESSAGES_COLLECTION_ID:"messages",VITE_APPWRITE_NOTIFICATIONS_COLLECTION_ID:"notifications",VITE_APPWRITE_PROFILE_IMAGES_BUCKET_ID:"profile_images",VITE_APPWRITE_PROJECT_ID:"689bdee000098bd9d55c",VITE_APPWRITE_PROJECT_NAME:"Trading Post",VITE_APPWRITE_REVIEWS_COLLECTION_ID:"reviews",VITE_APPWRITE_SAVED_ITEMS_COLLECTION_ID:"saved_items",VITE_APPWRITE_TRADES_COLLECTION_ID:"trades",VITE_APPWRITE_USERS_COLLECTION_ID:"users",VITE_APPWRITE_WANTS_COLLECTION_ID:"wants",VITE_APP_DESCRIPTION:"Local community trading and bartering platform",VITE_APP_NAME:"Trading Post",VITE_CACHE_VERSION:"1",VITE_CDN_BASE_URL:"https://cdn.yourdomain.com",VITE_DEBUG_MODE:"false",VITE_DEFAULT_LOCATION:"New York, NY",VITE_DEFAULT_RADIUS:"50",VITE_DISCORD_OAUTH_ENABLED:"false",VITE_EASY_SSO_ENABLED:"true",VITE_ENABLE_A11Y_CHECKS:"true",VITE_ENABLE_AI_FEATURES:"true",VITE_ENABLE_ANALYTICS:"true",VITE_ENABLE_APPLE_LOGIN:"false",VITE_ENABLE_AUTO_LOCATION:"true",VITE_ENABLE_BROWSER_NOTIFICATIONS:"true",VITE_ENABLE_CACHING:"true",VITE_ENABLE_CDN:"true",VITE_ENABLE_CONSOLE_LOGS:"false",VITE_ENABLE_CONTENT_SECURITY_POLICY:"true",VITE_ENABLE_EASY_SSO:"true",VITE_ENABLE_ERROR_TRACKING:"true",VITE_ENABLE_FACEBOOK_LOGIN:"false",VITE_ENABLE_GOOGLE_LOGIN:"true",VITE_ENABLE_IMAGE_LAZY_LOADING:"true",VITE_ENABLE_OFFLINE_MODE:"true",VITE_ENABLE_PUSH_NOTIFICATIONS:"true",VITE_ENABLE_PWA:"true",VITE_ENABLE_READ_RECEIPTS:"true",VITE_ENABLE_REAL_TIME:"true",VITE_ENABLE_REDUX_DEVTOOLS:"false",VITE_ENABLE_SERVICE_WORKER:"true",VITE_ENABLE_SOUND_NOTIFICATIONS:"true",VITE_ENABLE_STRICT_MODE:"true",VITE_ENABLE_TYPING_INDICATORS:"true",VITE_ENABLE_VIDEO_CALLS:"false",VITE_ENABLE_VOICE_MESSAGES:"false",VITE_ENV:"production",VITE_FACEBOOK_OAUTH_ENABLED:"false",VITE_GITHUB_OAUTH_ENABLED:"true",VITE_GOOGLE_ANALYTICS_ID:"G-XXXXXXXXXX",VITE_GOOGLE_MAPS_API_KEY:"your_google_maps_api_key",VITE_GOOGLE_OAUTH_ENABLED:"true",VITE_HIGH_CONTRAST_MODE:"false",VITE_IMAGE_QUALITY:"85",VITE_LOCALE:"en-US",VITE_MAX_FILE_SIZE_MB:"10",VITE_MAX_IMAGES_PER_LISTING:"10",VITE_MAX_MESSAGE_LENGTH:"1000",VITE_MESSAGE_SYNC_INTERVAL:"5000",VITE_MICROSOFT_OAUTH_ENABLED:"true",VITE_NOTIFICATION_TIMEOUT:"5000",VITE_OAUTH_AUTO_CLOSE:"true",VITE_OAUTH_ERROR_REDIRECT:"/login?error=oauth_failed",VITE_OAUTH_ERROR_URL:"https://tradingpost.appwrite.network/auth/error",VITE_OAUTH_REDIRECT_URL:"https://tradingpost.appwrite.network/auth/callback",VITE_OAUTH_SILENT_MODE:"true",VITE_OAUTH_SUCCESS_REDIRECT:"/marketplace",VITE_PRIVACY_POLICY_URL:"https://yourdomain.com/privacy",VITE_REALTIME_HEARTBEAT_INTERVAL:"30000",VITE_SENTRY_DSN:"your_sentry_dsn_here",VITE_SITE_URL:"https://yourdomain.com",VITE_SOCIAL_IMAGE:"https://yourdomain.com/og-image.png",VITE_SSO_POPUP_TIMEOUT:"120000",VITE_STRIPE_PUBLIC_KEY:"pk_live_your_stripe_public_key",VITE_SUPPORT_EMAIL:"support@yourdomain.com",VITE_TERMS_OF_SERVICE_URL:"https://yourdomain.com/terms",VITE_THEME:"default",VITE_TWITTER_HANDLE:"@yourdomain",VITE_XAI_API_KEY:"xai-pzXhXnX2YteViTp9omT0PE06hv1xn2PDhwQcUMtIfKJmrPRgkXoljhbhSswDbWW3t5NvXZxJDhVQwrAQ",VITE_XAI_ENDPOINT:"https://api.x.ai/v1",VITE_XAI_MODEL:"grok-beta"};class Ck{constructor(){this.initializationStatus={config:"pending",database:"pending",auth:"pending",api:"pending",components:"pending"},this.initializationErrors=[],this.initializationWarnings=[]}initializeSystem(){return E(this,arguments,function*(e={}){console.log(" [SYSTEM-INIT] Starting Enhanced Trading Post system initialization...");const t=Date.now();let r=8,i=0;try{console.log(" [SYSTEM-INIT] Step 1/8: Validating Appwrite configuration..."),yield this.validateConfiguration(),this.updateStatus("config","success"),i++,this.notifyProgress("Configuration validated",i,r),console.log(" [SYSTEM-INIT] Step 2/8: Running database diagnostics..."),yield this.runDatabaseDiagnostics(),i++,this.notifyProgress("Database diagnostics complete",i,r),console.log(" [SYSTEM-INIT] Step 3/8: Fixing database schema..."),yield this.fixDatabaseSchema(),i++,this.notifyProgress("Database schema fixed",i,r),console.log(" [SYSTEM-INIT] Step 4/8: Initializing database collections..."),yield this.initializeDatabase(e.quickDbFix),this.updateStatus("database","success"),i++,this.notifyProgress("Database collections ready",i,r),console.log(" [SYSTEM-INIT] Step 5/8: Checking sample data..."),yield this.handleSampleDataCreation(e.forceSampleData),i++,this.notifyProgress("Sample data ready",i,r),console.log(" [SYSTEM-INIT] Step 6/8: Preparing authentication system..."),yield this.prepareAuthSystem(),this.updateStatus("auth","success"),i++,this.notifyProgress("Authentication system ready",i,r),console.log(" [SYSTEM-INIT] Step 7/8: Initializing API recovery system..."),yield this.initializeApiRecovery(),this.updateStatus("api","success"),i++,this.notifyProgress("API recovery system active",i,r),console.log(" [SYSTEM-INIT] Step 8/8: Preparing components and UI..."),yield this.initializeComponents(),this.updateStatus("components","success"),i++;const a=Date.now()-t;return console.log(" [SYSTEM-INIT] Enhanced system initialization complete! (".concat(a,"ms)")),this.notifyProgress("Trading Post System Ready!",i,r,!0),{success:!0,duration:a,status:this.initializationStatus,errors:this.initializationErrors,warnings:this.initializationWarnings,diagnostics:this.diagnosticsResults,schemaFixes:this.schemaFixResults,sampleData:this.sampleDataResults}}catch(a){const l=Date.now()-t;return console.error(" [SYSTEM-INIT] System initialization failed:",a),this.initializationErrors.push({step:this.getCurrentStep(),error:a.message,timestamp:new Date().toISOString()}),{success:!1,duration:l,status:this.initializationStatus,errors:this.initializationErrors,warnings:this.initializationWarnings,failedAt:this.getCurrentStep()}}})}validateConfiguration(){return E(this,null,function*(){var e;try{if(!dp())throw new Error("Appwrite configuration is invalid");const i=["VITE_APPWRITE_ENDPOINT","VITE_APPWRITE_PROJECT_ID","VITE_APPWRITE_DATABASE_ID"].filter(a=>!xk[a]);i.length>0&&this.addWarning("Missing environment variables: ".concat(i.join(", ")));try{yield Le.get()}catch(a){if(a.code===401)console.log(" [SYSTEM-INIT] Appwrite connection test successful (no active session)");else throw(e=a.message)!=null&&e.includes("CORS")?new Error("CORS configuration issue - check platform registration"):new Error("Appwrite connection failed: ".concat(a.message))}console.log(" [SYSTEM-INIT] Configuration validation complete")}catch(t){throw this.updateStatus("config","error"),new Error("Configuration validation failed: ".concat(t.message))}})}runDatabaseDiagnostics(){return E(this,null,function*(){try{console.log(" [SYSTEM-INIT] Running comprehensive database diagnostics..."),this.diagnosticsResults=yield Vl.runFullDiagnostics(),this.diagnosticsResults.errors.length>0&&this.addWarning("Database diagnostics found ".concat(this.diagnosticsResults.errors.length," errors")),this.diagnosticsResults.warnings.length>0&&this.addWarning("Database diagnostics found ".concat(this.diagnosticsResults.warnings.length," warnings")),console.log(" [SYSTEM-INIT] Database diagnostics complete")}catch(e){this.addWarning("Database diagnostics failed: ".concat(e.message))}})}fixDatabaseSchema(){return E(this,null,function*(){try{console.log(" [SYSTEM-INIT] Fixing database schema issues..."),this.schemaFixResults=yield it.fixAllSchemaIssues(),this.schemaFixResults.success?console.log(" [SYSTEM-INIT] Applied ".concat(this.schemaFixResults.fixes.length," schema fixes")):this.addWarning("Schema fixes had issues: ".concat(this.schemaFixResults.error))}catch(e){this.addWarning("Schema fixing failed: ".concat(e.message))}})}handleSampleDataCreation(e=!1){return E(this,null,function*(){try{console.log(" [SYSTEM-INIT] Evaluating sample data requirements...");let t=!1;try{yield Le.get(),t=!0}catch(i){console.log(" [SYSTEM-INIT] User not authenticated - skipping sample data creation");return}if(!t&&!e){console.log(" [SYSTEM-INIT] Skipping sample data creation (no authenticated user)");return}if(this.shouldCreateSampleData()||e)if(console.log(" [SYSTEM-INIT] Creating sample data..."),this.sampleDataResults=yield Wl.createAllSampleData(),this.sampleDataResults.success){const i=this.sampleDataResults.summary;console.log(" [SYSTEM-INIT] Created ".concat(i.total," sample records across ").concat(Object.keys(i).length-1," collections"))}else this.addWarning("Sample data creation failed: ".concat(this.sampleDataResults.error));else console.log(" [SYSTEM-INIT] Sample data already exists - skipping creation")}catch(t){this.addWarning("Sample data handling failed: ".concat(t.message))}})}shouldCreateSampleData(){if(!this.diagnosticsResults)return!1;const{collections:e,dataIntegrity:t}=this.diagnosticsResults,r=["items","users"];for(const a of r){const l=e[a];if(!l||!l.exists||l.isEmpty)return console.log(" [SYSTEM-INIT] Collection '".concat(a,"' needs data")),!0}const i=t==null?void 0:t.items;return!i||!i.hasUserData?(console.log(" [SYSTEM-INIT] Current user has no items - sample data needed"),!0):!1}initializeDatabase(e=!0){return E(this,null,function*(){try{if(e){console.log(" [SYSTEM-INIT] Running quick database fix...");const t=yield Ny.createMissingCollectionsQuickFix(),r=t.filter(a=>a.status==="created").length,i=t.filter(a=>a.status==="error").length;r>0&&console.log(" [SYSTEM-INIT] Quick-created ".concat(r," missing collections")),i>0&&this.addWarning("Failed to create ".concat(i," collections - some features may be limited"))}else{console.log(" [SYSTEM-INIT] Running full database initialization...");const t=yield Ny.initializeAllCollections();t.errors.length>0&&(this.addWarning("Database initialization had ".concat(t.errors.length," errors")),t.errors.forEach(r=>{console.warn(" [SYSTEM-INIT] DB Error in ".concat(r.collectionId,":"),r.error)})),console.log(" [SYSTEM-INIT] Database initialized: ".concat(t.success.length," created, ").concat(t.skipped.length," existing"))}}catch(t){throw this.updateStatus("database","error"),new Error("Database initialization failed: ".concat(t.message))}})}prepareAuthSystem(){return E(this,null,function*(){try{console.log(" [SYSTEM-INIT] Clearing conflicting authentication sessions...");try{const e=yield pi.hasActiveSession();console.log(e?" [SYSTEM-INIT] Found existing session - keeping it active":" [SYSTEM-INIT] No conflicting sessions found")}catch(e){console.log(" [SYSTEM-INIT] Session check failed - will handle during login:",e.message)}console.log(" [SYSTEM-INIT] Authentication system prepared")}catch(e){throw this.updateStatus("auth","error"),new Error("Authentication preparation failed: ".concat(e.message))}})}initializeApiRecovery(){return E(this,null,function*(){try{console.log(" [SYSTEM-INIT] Testing API recovery system...");const e=bk.getHealthStatus();console.log(" [SYSTEM-INIT] API health status:",e);try{const{databases:t,DATABASE_ID:r,COLLECTIONS:i}=yield Ye(()=>E(null,null,function*(){const{databases:a,DATABASE_ID:l,COLLECTIONS:u}=yield Promise.resolve().then(()=>pc);return{databases:a,DATABASE_ID:l,COLLECTIONS:u}}),void 0);yield t.listDocuments(r,i.users,[]),console.log(" [SYSTEM-INIT] Database connectivity confirmed")}catch(t){console.warn(" [SYSTEM-INIT] Database connectivity issue:",t.message),this.addWarning("Some features may have limited functionality due to database connectivity")}console.log(" [SYSTEM-INIT] API recovery system initialized")}catch(e){throw this.updateStatus("api","error"),new Error("API recovery initialization failed: ".concat(e.message))}})}initializeComponents(){return E(this,null,function*(){try{console.log(" [SYSTEM-INIT] Preparing UI components...");const e=[Ye(()=>import("./OAuthCallbackHandler-DCpoW8_s.js"),[]),Ye(()=>import("./SSOButton-QgSwZlfs.js"),__vite__mapDeps([0,1])),Ye(()=>import("./SearchControls-CQAliH80.js"),__vite__mapDeps([2,3,4,5])),Ye(()=>import("./leafletIconFix-C75Msl9H.js"),[])],r=(yield Promise.allSettled(e)).filter(i=>i.status==="rejected");r.length>0&&r.forEach(i=>{var a,l;console.warn(" [SYSTEM-INIT] Component import warning:",(a=i.reason)==null?void 0:a.message),this.addWarning("Component loading issue: ".concat((l=i.reason)==null?void 0:l.message))}),console.log(" [SYSTEM-INIT] Initializing map components..."),console.log(" [SYSTEM-INIT] Components prepared")}catch(e){throw this.updateStatus("components","error"),new Error("Component initialization failed: ".concat(e.message))}})}updateStatus(e,t){this.initializationStatus[e]=t}addWarning(e){this.initializationWarnings.push({message:e,timestamp:new Date().toISOString()}),console.warn(" [SYSTEM-INIT] Warning:",e)}getCurrentStep(){for(const[e,t]of Object.entries(this.initializationStatus))if(t==="pending")return e;return"complete"}notifyProgress(e,t,r,i=!1){const a=Math.round(t/r*100);console.log(" [SYSTEM-INIT] Progress: ".concat(a,"% - ").concat(e)),i?De.success(" Trading Post is ready! ".concat(e),{position:"top-right",autoClose:3e3}):De.info(" ".concat(e," (").concat(a,"%)"),{position:"top-right",autoClose:1500})}getInitializationStatus(){return Y(A({},this.initializationStatus),{errors:this.initializationErrors,warnings:this.initializationWarnings})}isSystemReady(){return Object.values(this.initializationStatus).every(e=>e==="success"||e==="warning")}reinitializeSystem(){return E(this,arguments,function*(e={}){return this.initializationStatus={config:"pending",database:"pending",auth:"pending",api:"pending",components:"pending"},this.initializationErrors=[],this.initializationWarnings=[],this.diagnosticsResults=null,this.schemaFixResults=null,this.sampleDataResults=null,this.initializeSystem(e)})}exportSystemReport(){const e={timestamp:new Date().toISOString(),system:"Trading Post Enhanced",version:"2.0.0",initializationStatus:this.initializationStatus,errors:this.initializationErrors,warnings:this.initializationWarnings,diagnostics:this.diagnosticsResults,schemaFixes:this.schemaFixResults,sampleData:this.sampleDataResults},t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),r=URL.createObjectURL(t),i=document.createElement("a");return i.href=r,i.download="trading-post-enhanced-report-".concat(Date.now(),".json"),i.click(),URL.revokeObjectURL(r),console.log(" Enhanced system report exported"),e}}const ci=new Ck;typeof window!="undefined"&&(window.systemInitializer=ci,window.initializeTradingPost=n=>ci.initializeSystem(n),window.checkSystemStatus=()=>ci.getInitializationStatus(),window.resetTradingPostSystem=()=>ci.reinitializeSystem({forceSampleData:!0}),window.runDatabaseDiagnostics=()=>Vl.runFullDiagnostics(),window.fixDatabaseSchema=()=>it.fixAllSchemaIssues(),window.createSampleData=()=>Wl.createAllSampleData(),window.exportSystemReport=()=>ci.exportSystemReport());var Qd={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var Ly;function Tk(){return Ly||(Ly=1,(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var a="",l=0;l<arguments.length;l++){var u=arguments[l];u&&(a=i(a,r(u)))}return a}function r(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return t.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var l="";for(var u in a)e.call(a,u)&&a[u]&&(l=i(l,u));return l}function i(a,l){return l?a?a+" "+l:a+l:a}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(Qd)),Qd.exports}var Ik=Tk();const fe=xi(Ik);function Nf(){return Nf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Nf.apply(null,arguments)}function Xv(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function jy(n){return"default"+n.charAt(0).toUpperCase()+n.substr(1)}function kk(n){var e=Ak(n,"string");return typeof e=="symbol"?e:String(e)}function Ak(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function Qv(n,e,t){var r=S.useRef(n!==void 0),i=S.useState(e),a=i[0],l=i[1],u=n!==void 0,d=r.current;return r.current=u,!u&&d&&a!==e&&l(e),[u?n:a,S.useCallback(function(p){for(var h=arguments.length,g=new Array(h>1?h-1:0),v=1;v<h;v++)g[v-1]=arguments[v];t&&t.apply(void 0,[p].concat(g)),l(p)},[t])]}function Qo(n,e){return Object.keys(e).reduce(function(t,r){var i,a=t,l=a[jy(r)],u=a[r],d=Xv(a,[jy(r),r].map(kk)),p=e[r],h=Qv(u,l,n[p]),g=h[0],v=h[1];return Nf({},d,(i={},i[r]=g,i[p]=v,i))},n)}function Lf(n,e){return Lf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},Lf(n,e)}function Rk(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,Lf(n,e)}const Mk=["xxl","xl","lg","md","sm","xs"],Ok="xs",Jo=S.createContext({prefixes:{},breakpoints:Mk,minBreakpoint:Ok}),{Consumer:NP,Provider:LP}=Jo;function me(n,e){const{prefixes:t}=S.useContext(Jo);return n||t[e]||e}function Pk(){const{breakpoints:n}=S.useContext(Jo);return n}function Dk(){const{minBreakpoint:n}=S.useContext(Jo);return n}function yc(){const{dir:n}=S.useContext(Jo);return n==="rtl"}function Mi(n){return n&&n.ownerDocument||document}function Nk(n){var e=Mi(n);return e&&e.defaultView||window}function Lk(n,e){return Nk(n).getComputedStyle(n,e)}var jk=/([A-Z])/g;function $k(n){return n.replace(jk,"-$1").toLowerCase()}var Uk=/^ms-/;function Sl(n){return $k(n).replace(Uk,"-ms-")}var Fk=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function zk(n){return!!(n&&Fk.test(n))}function sr(n,e){var t="",r="";if(typeof e=="string")return n.style.getPropertyValue(Sl(e))||Lk(n).getPropertyValue(Sl(e));Object.keys(e).forEach(function(i){var a=e[i];!a&&a!==0?n.style.removeProperty(Sl(i)):zk(i)?r+=i+"("+a+") ":t+=Sl(i)+": "+a+";"}),r&&(t+="transform: "+r+";"),n.style.cssText+=";"+t}var Jd={exports:{}},Zd,$y;function Bk(){if($y)return Zd;$y=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Zd=n,Zd}var ef,Uy;function qk(){if(Uy)return ef;Uy=1;var n=Bk();function e(){}function t(){}return t.resetWarningCache=e,ef=function(){function r(l,u,d,p,h,g){if(g!==n){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}r.isRequired=r;function i(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return a.PropTypes=a,a},ef}var Fy;function Hk(){return Fy||(Fy=1,Jd.exports=qk()()),Jd.exports}var Vk=Hk();const Fe=xi(Vk),zy={disabled:!1},Jv=oe.createContext(null);var Wk=function(e){return e.scrollTop},ko="unmounted",jr="exited",gn="entering",er="entered",mi="exiting",dr=(function(n){Rk(e,n);function e(r,i){var a;a=n.call(this,r,i)||this;var l=i,u=l&&!l.isMounting?r.enter:r.appear,d;return a.appearStatus=null,r.in?u?(d=jr,a.appearStatus=gn):d=er:r.unmountOnExit||r.mountOnEnter?d=ko:d=jr,a.state={status:d},a.nextCallback=null,a}e.getDerivedStateFromProps=function(i,a){var l=i.in;return l&&a.status===ko?{status:jr}:null};var t=e.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(i){var a=null;if(i!==this.props){var l=this.state.status;this.props.in?l!==gn&&l!==er&&(a=gn):(l===gn||l===er)&&(a=mi)}this.updateStatus(!1,a)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var i=this.props.timeout,a,l,u;return a=l=u=i,i!=null&&typeof i!="number"&&(a=i.exit,l=i.enter,u=i.appear!==void 0?i.appear:l),{exit:a,enter:l,appear:u}},t.updateStatus=function(i,a){if(i===void 0&&(i=!1),a!==null)if(this.cancelNextCallback(),a===gn){if(this.props.unmountOnExit||this.props.mountOnEnter){var l=this.props.nodeRef?this.props.nodeRef.current:fs.findDOMNode(this);l&&Wk(l)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===jr&&this.setState({status:ko})},t.performEnter=function(i){var a=this,l=this.props.enter,u=this.context?this.context.isMounting:i,d=this.props.nodeRef?[u]:[fs.findDOMNode(this),u],p=d[0],h=d[1],g=this.getTimeouts(),v=u?g.appear:g.enter;if(!i&&!l||zy.disabled){this.safeSetState({status:er},function(){a.props.onEntered(p)});return}this.props.onEnter(p,h),this.safeSetState({status:gn},function(){a.props.onEntering(p,h),a.onTransitionEnd(v,function(){a.safeSetState({status:er},function(){a.props.onEntered(p,h)})})})},t.performExit=function(){var i=this,a=this.props.exit,l=this.getTimeouts(),u=this.props.nodeRef?void 0:fs.findDOMNode(this);if(!a||zy.disabled){this.safeSetState({status:jr},function(){i.props.onExited(u)});return}this.props.onExit(u),this.safeSetState({status:mi},function(){i.props.onExiting(u),i.onTransitionEnd(l.exit,function(){i.safeSetState({status:jr},function(){i.props.onExited(u)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(i,a){a=this.setNextCallback(a),this.setState(i,a)},t.setNextCallback=function(i){var a=this,l=!0;return this.nextCallback=function(u){l&&(l=!1,a.nextCallback=null,i(u))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},t.onTransitionEnd=function(i,a){this.setNextCallback(a);var l=this.props.nodeRef?this.props.nodeRef.current:fs.findDOMNode(this),u=i==null&&!this.props.addEndListener;if(!l||u){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var d=this.props.nodeRef?[this.nextCallback]:[l,this.nextCallback],p=d[0],h=d[1];this.props.addEndListener(p,h)}i!=null&&setTimeout(this.nextCallback,i)},t.render=function(){var i=this.state.status;if(i===ko)return null;var a=this.props,l=a.children;a.in,a.mountOnEnter,a.unmountOnExit,a.appear,a.enter,a.exit,a.timeout,a.addEndListener,a.onEnter,a.onEntering,a.onEntered,a.onExit,a.onExiting,a.onExited,a.nodeRef;var u=Xv(a,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return oe.createElement(Jv.Provider,{value:null},typeof l=="function"?l(i,u):oe.cloneElement(oe.Children.only(l),u))},e})(oe.Component);dr.contextType=Jv;dr.propTypes={};function oi(){}dr.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:oi,onEntering:oi,onEntered:oi,onExit:oi,onExiting:oi,onExited:oi};dr.UNMOUNTED=ko;dr.EXITED=jr;dr.ENTERING=gn;dr.ENTERED=er;dr.EXITING=mi;function Zv(n){return n.code==="Escape"||n.keyCode===27}function Gk(){const n=S.version.split(".");return{major:+n[0],minor:+n[1],patch:+n[2]}}function As(n){if(!n||typeof n=="function")return null;const{major:e}=Gk();return e>=19?n.props.ref:n.ref}const Oi=!!(typeof window!="undefined"&&window.document&&window.document.createElement);var jf=!1,$f=!1;try{var tf={get passive(){return jf=!0},get once(){return $f=jf=!0}};Oi&&(window.addEventListener("test",tf,tf),window.removeEventListener("test",tf,!0))}catch(n){}function gp(n,e,t,r){if(r&&typeof r!="boolean"&&!$f){var i=r.once,a=r.capture,l=t;!$f&&i&&(l=t.__once||function u(d){this.removeEventListener(e,u,a),t.call(this,d)},t.__once=l),n.addEventListener(e,l,jf?r:a)}n.addEventListener(e,t,r)}function Uf(n,e,t,r){var i=r&&typeof r!="boolean"?r.capture:r;n.removeEventListener(e,t,i),t.__once&&n.removeEventListener(e,t.__once,i)}function tr(n,e,t,r){return gp(n,e,t,r),function(){Uf(n,e,t,r)}}function Kk(n,e,t,r){if(r===void 0&&(r=!0),n){var i=document.createEvent("HTMLEvents");i.initEvent(e,t,r),n.dispatchEvent(i)}}function Yk(n){var e=sr(n,"transitionDuration")||"",t=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*t}function Xk(n,e,t){t===void 0&&(t=5);var r=!1,i=setTimeout(function(){r||Kk(n,"transitionend",!0)},e+t),a=tr(n,"transitionend",function(){r=!0},{once:!0});return function(){clearTimeout(i),a()}}function e0(n,e,t,r){t==null&&(t=Yk(n)||0);var i=Xk(n,t,r),a=tr(n,"transitionend",e);return function(){i(),a()}}function By(n,e){const t=sr(n,e)||"",r=t.indexOf("ms")===-1?1e3:1;return parseFloat(t)*r}function yp(n,e){const t=By(n,"transitionDuration"),r=By(n,"transitionDelay"),i=e0(n,a=>{a.target===n&&(i(),e(a))},t+r)}function bo(...n){return n.filter(e=>e!=null).reduce((e,t)=>{if(typeof t!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return e===null?t:function(...i){e.apply(this,i),t.apply(this,i)}},null)}function t0(n){n.offsetHeight}const qy=n=>!n||typeof n=="function"?n:e=>{n.current=e};function Qk(n,e){const t=qy(n),r=qy(e);return i=>{t&&t(i),r&&r(i)}}function Pi(n,e){return S.useMemo(()=>Qk(n,e),[n,e])}function Gl(n){return n&&"setState"in n?fs.findDOMNode(n):n!=null?n:null}const wc=oe.forwardRef((g,h)=>{var v=g,{onEnter:n,onEntering:e,onEntered:t,onExit:r,onExiting:i,onExited:a,addEndListener:l,children:u,childRef:d}=v,p=le(v,["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children","childRef"]);const b=S.useRef(null),C=Pi(b,d),T=F=>{C(Gl(F))},x=F=>K=>{F&&b.current&&F(b.current,K)},M=S.useCallback(x(n),[n]),I=S.useCallback(x(e),[e]),R=S.useCallback(x(t),[t]),O=S.useCallback(x(r),[r]),L=S.useCallback(x(i),[i]),H=S.useCallback(x(a),[a]),W=S.useCallback(x(l),[l]);return w.jsx(dr,Y(A({ref:h},p),{onEnter:M,onEntered:R,onEntering:I,onExit:O,onExited:H,onExiting:L,addEndListener:W,nodeRef:b,children:typeof u=="function"?(F,K)=>u(F,Y(A({},K),{ref:T})):oe.cloneElement(u,{ref:T})}))});wc.displayName="TransitionWrapper";const Jk={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function Zk(n,e){const t="offset".concat(n[0].toUpperCase()).concat(n.slice(1)),r=e[t],i=Jk[n];return r+parseInt(sr(e,i[0]),10)+parseInt(sr(e,i[1]),10)}const eA={[jr]:"collapse",[mi]:"collapsing",[gn]:"collapsing",[er]:"collapse show"},n0=oe.forwardRef((x,T)=>{var M=x,{onEnter:n,onEntering:e,onEntered:t,onExit:r,onExiting:i,className:a,children:l,dimension:u="height",in:d=!1,timeout:p=300,mountOnEnter:h=!1,unmountOnExit:g=!1,appear:v=!1,getDimensionValue:b=Zk}=M,C=le(M,["onEnter","onEntering","onEntered","onExit","onExiting","className","children","dimension","in","timeout","mountOnEnter","unmountOnExit","appear","getDimensionValue"]);const I=typeof u=="function"?u():u,R=S.useMemo(()=>bo(F=>{F.style[I]="0"},n),[I,n]),O=S.useMemo(()=>bo(F=>{const K="scroll".concat(I[0].toUpperCase()).concat(I.slice(1));F.style[I]="".concat(F[K],"px")},e),[I,e]),L=S.useMemo(()=>bo(F=>{F.style[I]=null},t),[I,t]),H=S.useMemo(()=>bo(F=>{F.style[I]="".concat(b(I,F),"px"),t0(F)},r),[r,b,I]),W=S.useMemo(()=>bo(F=>{F.style[I]=null},i),[I,i]);return w.jsx(wc,Y(A({ref:T,addEndListener:yp},C),{"aria-expanded":C.role?d:null,onEnter:R,onEntering:O,onEntered:L,onExit:H,onExiting:W,childRef:As(l),in:d,timeout:p,mountOnEnter:h,unmountOnExit:g,appear:v,children:(F,K)=>oe.cloneElement(l,Y(A({},K),{className:fe(a,l.props.className,eA[F],I==="width"&&"collapse-horizontal")}))}))});n0.displayName="Collapse";function tA(n){const e=S.useRef(n);return S.useEffect(()=>{e.current=n},[n]),e}function Rn(n){const e=tA(n);return S.useCallback(function(...t){return e.current&&e.current(...t)},[e])}const Zo=(n=>S.forwardRef((e,t)=>w.jsx("div",Y(A({},e),{ref:t,className:fe(e.className,n)})))),r0=Zo("h4");r0.displayName="DivStyledAsH4";const s0=S.forwardRef((a,i)=>{var l=a,{className:n,bsPrefix:e,as:t=r0}=l,r=le(l,["className","bsPrefix","as"]);return e=me(e,"alert-heading"),w.jsx(t,A({ref:i,className:fe(n,e)},r))});s0.displayName="AlertHeading";function Ff(){return S.useState(null)}function nA(n){const e=S.useRef(n);return S.useEffect(()=>{e.current=n},[n]),e}function Ct(n){const e=nA(n);return S.useCallback(function(...t){return e.current&&e.current(...t)},[e])}function rA(n,e,t,r=!1){const i=Ct(t);S.useEffect(()=>{const a=typeof n=="function"?n():n;return a.addEventListener(e,i,r),()=>a.removeEventListener(e,i,r)},[n])}function i0(){const n=S.useRef(!0),e=S.useRef(()=>n.current);return S.useEffect(()=>(n.current=!0,()=>{n.current=!1}),[]),e.current}function o0(n){const e=S.useRef(null);return S.useEffect(()=>{e.current=n}),e.current}const sA=typeof global!="undefined"&&global.navigator&&global.navigator.product==="ReactNative",iA=typeof document!="undefined",Hy=iA||sA?S.useLayoutEffect:S.useEffect,oA=["as","disabled"];function aA(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function lA(n){return!n||n.trim()==="#"}function wp({tagName:n,disabled:e,href:t,target:r,rel:i,role:a,onClick:l,tabIndex:u=0,type:d}){n||(t!=null||r!=null||i!=null?n="a":n="button");const p={tagName:n};if(n==="button")return[{type:d||"button",disabled:e},p];const h=v=>{if((e||n==="a"&&lA(t))&&v.preventDefault(),e){v.stopPropagation();return}l==null||l(v)},g=v=>{v.key===" "&&(v.preventDefault(),h(v))};return n==="a"&&(t||(t="#"),e&&(t=void 0)),[{role:a!=null?a:"button",disabled:void 0,tabIndex:e?void 0:u,href:t,target:n==="a"?r:void 0,"aria-disabled":e||void 0,rel:n==="a"?i:void 0,onClick:h,onKeyDown:g},p]}const vp=S.forwardRef((n,e)=>{let{as:t,disabled:r}=n,i=aA(n,oA);const[a,{tagName:l}]=wp(Object.assign({tagName:t,disabled:r},i));return w.jsx(l,Object.assign({},i,a,{ref:e}))});vp.displayName="Button";const cA=["onKeyDown"];function uA(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function dA(n){return!n||n.trim()==="#"}const vc=S.forwardRef((n,e)=>{let{onKeyDown:t}=n,r=uA(n,cA);const[i]=wp(Object.assign({tagName:"a"},r)),a=Ct(l=>{i.onKeyDown(l),t==null||t(l)});return dA(r.href)||r.role==="button"?w.jsx("a",Object.assign({ref:e},r,i,{onKeyDown:a})):w.jsx("a",Object.assign({ref:e},r,{onKeyDown:t}))});vc.displayName="Anchor";const a0=S.forwardRef((a,i)=>{var l=a,{className:n,bsPrefix:e,as:t=vc}=l,r=le(l,["className","bsPrefix","as"]);return e=me(e,"alert-link"),w.jsx(t,A({ref:i,className:fe(n,e)},r))});a0.displayName="AlertLink";const fA={[gn]:"show",[er]:"show"},ar=S.forwardRef((l,a)=>{var u=l,{className:n,children:e,transitionClasses:t={},onEnter:r}=u,i=le(u,["className","children","transitionClasses","onEnter"]);const d=A({in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},i),p=S.useCallback((h,g)=>{t0(h),r==null||r(h,g)},[r]);return w.jsx(wc,Y(A({ref:a,addEndListener:yp},d),{onEnter:p,childRef:As(e),children:(h,g)=>S.cloneElement(e,Y(A({},g),{className:fe("fade",n,e.props.className,fA[h],t[h])}))}))});ar.displayName="Fade";const pA={"aria-label":Fe.string,onClick:Fe.func,variant:Fe.oneOf(["white"])},ea=S.forwardRef((a,i)=>{var l=a,{className:n,variant:e,"aria-label":t="Close"}=l,r=le(l,["className","variant","aria-label"]);return w.jsx("button",A({ref:i,type:"button",className:fe("btn-close",e&&"btn-close-".concat(e),n),"aria-label":t},r))});ea.displayName="CloseButton";ea.propTypes=pA;const l0=S.forwardRef((n,e)=>{const M=Qo(n,{show:"onClose"}),{bsPrefix:t,show:r=!0,closeLabel:i="Close alert",closeVariant:a,className:l,children:u,variant:d="primary",onClose:p,dismissible:h,transition:g=ar}=M,v=le(M,["bsPrefix","show","closeLabel","closeVariant","className","children","variant","onClose","dismissible","transition"]),b=me(t,"alert"),C=Rn(I=>{p&&p(!1,I)}),T=g===!0?ar:g,x=w.jsxs("div",Y(A({role:"alert"},T?void 0:v),{ref:e,className:fe(l,b,d&&"".concat(b,"-").concat(d),h&&"".concat(b,"-dismissible")),children:[h&&w.jsx(ea,{onClick:C,"aria-label":i,variant:a}),u]}));return T?w.jsx(T,Y(A({unmountOnExit:!0},v),{ref:void 0,in:r,children:x})):r?x:null});l0.displayName="Alert";const Sc=Object.assign(l0,{Link:a0,Heading:s0}),Sp=S.forwardRef((d,u)=>{var p=d,{bsPrefix:n,bg:e="primary",pill:t=!1,text:r,className:i,as:a="span"}=p,l=le(p,["bsPrefix","bg","pill","text","className","as"]);const h=me(n,"badge");return w.jsx(a,Y(A({ref:u},l),{className:fe(i,h,t&&"rounded-pill",r&&"text-".concat(r),e&&"bg-".concat(e))}))});Sp.displayName="Badge";const jt=S.forwardRef((p,d)=>{var h=p,{as:n,bsPrefix:e,variant:t="primary",size:r,active:i=!1,disabled:a=!1,className:l}=h,u=le(h,["as","bsPrefix","variant","size","active","disabled","className"]);const g=me(e,"btn"),[v,{tagName:b}]=wp(A({tagName:n,disabled:a},u)),C=b;return w.jsx(C,Y(A(A({},v),u),{ref:d,disabled:a,className:fe(l,g,i&&"active",t&&"".concat(g,"-").concat(t),r&&"".concat(g,"-").concat(r),u.href&&a&&"disabled")}))});jt.displayName="Button";const bp=S.forwardRef((a,i)=>{var l=a,{className:n,bsPrefix:e,as:t="div"}=l,r=le(l,["className","bsPrefix","as"]);return e=me(e,"card-body"),w.jsx(t,A({ref:i,className:fe(n,e)},r))});bp.displayName="CardBody";const c0=S.forwardRef((a,i)=>{var l=a,{className:n,bsPrefix:e,as:t="div"}=l,r=le(l,["className","bsPrefix","as"]);return e=me(e,"card-footer"),w.jsx(t,A({ref:i,className:fe(n,e)},r))});c0.displayName="CardFooter";const _p=S.createContext(null);_p.displayName="CardHeaderContext";const u0=S.forwardRef((a,i)=>{var l=a,{bsPrefix:n,className:e,as:t="div"}=l,r=le(l,["bsPrefix","className","as"]);const u=me(n,"card-header"),d=S.useMemo(()=>({cardHeaderBsPrefix:u}),[u]);return w.jsx(_p.Provider,{value:d,children:w.jsx(t,Y(A({ref:i},r),{className:fe(e,u)}))})});u0.displayName="CardHeader";const d0=S.forwardRef((l,a)=>{var u=l,{bsPrefix:n,className:e,variant:t,as:r="img"}=u,i=le(u,["bsPrefix","className","variant","as"]);const d=me(n,"card-img");return w.jsx(r,A({ref:a,className:fe(t?"".concat(d,"-").concat(t):d,e)},i))});d0.displayName="CardImg";const f0=S.forwardRef((a,i)=>{var l=a,{className:n,bsPrefix:e,as:t="div"}=l,r=le(l,["className","bsPrefix","as"]);return e=me(e,"card-img-overlay"),w.jsx(t,A({ref:i,className:fe(n,e)},r))});f0.displayName="CardImgOverlay";const p0=S.forwardRef((a,i)=>{var l=a,{className:n,bsPrefix:e,as:t="a"}=l,r=le(l,["className","bsPrefix","as"]);return e=me(e,"card-link"),w.jsx(t,A({ref:i,className:fe(n,e)},r))});p0.displayName="CardLink";const hA=Zo("h6"),h0=S.forwardRef((a,i)=>{var l=a,{className:n,bsPrefix:e,as:t=hA}=l,r=le(l,["className","bsPrefix","as"]);return e=me(e,"card-subtitle"),w.jsx(t,A({ref:i,className:fe(n,e)},r))});h0.displayName="CardSubtitle";const m0=S.forwardRef((a,i)=>{var l=a,{className:n,bsPrefix:e,as:t="p"}=l,r=le(l,["className","bsPrefix","as"]);return e=me(e,"card-text"),w.jsx(t,A({ref:i,className:fe(n,e)},r))});m0.displayName="CardText";const mA=Zo("h5"),g0=S.forwardRef((a,i)=>{var l=a,{className:n,bsPrefix:e,as:t=mA}=l,r=le(l,["className","bsPrefix","as"]);return e=me(e,"card-title"),w.jsx(t,A({ref:i,className:fe(n,e)},r))});g0.displayName="CardTitle";const y0=S.forwardRef((h,p)=>{var g=h,{bsPrefix:n,className:e,bg:t,text:r,border:i,body:a=!1,children:l,as:u="div"}=g,d=le(g,["bsPrefix","className","bg","text","border","body","children","as"]);const v=me(n,"card");return w.jsx(u,Y(A({ref:p},d),{className:fe(e,v,t&&"bg-".concat(t),r&&"text-".concat(r),i&&"border-".concat(i)),children:a?w.jsx(bp,{children:l}):l}))});y0.displayName="Card";const Lt=Object.assign(y0,{Img:d0,Title:g0,Subtitle:h0,Body:bp,Link:p0,Text:m0,Header:u0,Footer:c0,ImgOverlay:f0});function gA(){const n=S.useRef(!0),e=S.useRef(()=>n.current);return S.useEffect(()=>(n.current=!0,()=>{n.current=!1}),[]),e.current}function yA(n){const e=S.useRef(n);return e.current=n,e}function w0(n){const e=yA(n);S.useEffect(()=>()=>e.current(),[])}const zf=Mg(2,31)-1;function v0(n,e,t){const r=t-Date.now();n.current=r<=zf?setTimeout(e,r):setTimeout(()=>v0(n,e,t),zf)}function S0(){const n=gA(),e=S.useRef();return w0(()=>clearTimeout(e.current)),S.useMemo(()=>{const t=()=>clearTimeout(e.current);function r(i,a=0){n()&&(t(),a<=zf?e.current=setTimeout(i,a):v0(e,i,Date.now()+a))}return{set:r,clear:t,handleRef:e}},[])}function jP(n,e){let t=0;return S.Children.map(n,r=>S.isValidElement(r)?e(r,t++):r)}function $P(n,e){let t=0;S.Children.forEach(n,r=>{S.isValidElement(r)&&e(r,t++)})}function wA(n,e){return S.Children.toArray(n).some(t=>S.isValidElement(t)&&t.type===e)}function vA(i){var a=i,{as:n,bsPrefix:e,className:t}=a,r=le(a,["as","bsPrefix","className"]);e=me(e,"col");const l=Pk(),u=Dk(),d=[],p=[];return l.forEach(h=>{const g=r[h];delete r[h];let v,b,C;typeof g=="object"&&g!=null?{span:v,offset:b,order:C}=g:v=g;const T=h!==u?"-".concat(h):"";v&&d.push(v===!0?"".concat(e).concat(T):"".concat(e).concat(T,"-").concat(v)),C!=null&&p.push("order".concat(T,"-").concat(C)),b!=null&&p.push("offset".concat(T,"-").concat(b))}),[Y(A({},r),{className:fe(t,...d,...p)}),{as:n,bsPrefix:e,spans:d}]}const b0=S.forwardRef((n,e)=>{const[u,...d]=vA(n),p=u,{className:t}=p,r=le(p,["className"]),[{as:i="div",bsPrefix:a,spans:l}]=d;return w.jsx(i,Y(A({},r),{ref:e,className:fe(t,!l.length&&a)}))});b0.displayName="Col";const Ep=S.forwardRef((l,a)=>{var u=l,{bsPrefix:n,fluid:e=!1,as:t="div",className:r}=u,i=le(u,["bsPrefix","fluid","as","className"]);const d=me(n,"container"),p=typeof e=="string"?"-".concat(e):"-fluid";return w.jsx(t,Y(A({ref:a},i),{className:fe(r,e?"".concat(d).concat(p):d)}))});Ep.displayName="Container";var SA=Function.prototype.bind.call(Function.prototype.call,[].slice);function Zn(n,e){return SA(n.querySelectorAll(e))}function bA(n,e,t){const r=S.useRef(n!==void 0),[i,a]=S.useState(e),l=n!==void 0,u=r.current;return r.current=l,!l&&u&&i!==e&&a(e),[l?n:i,S.useCallback((...d)=>{const[p,...h]=d;let g=t==null?void 0:t(p,...h);return a(p),g},[t])]}function _0(){const[,n]=S.useReducer(e=>e+1,0);return n}const bc=S.createContext(null);var Vy=Object.prototype.hasOwnProperty;function Wy(n,e,t){for(t of n.keys())if(Ro(t,e))return t}function Ro(n,e){var t,r,i;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((r=n.length)===e.length)for(;r--&&Ro(n[r],e[r]););return r===-1}if(t===Set){if(n.size!==e.size)return!1;for(r of n)if(i=r,i&&typeof i=="object"&&(i=Wy(e,i),!i)||!e.has(i))return!1;return!0}if(t===Map){if(n.size!==e.size)return!1;for(r of n)if(i=r[0],i&&typeof i=="object"&&(i=Wy(e,i),!i)||!Ro(r[1],e.get(i)))return!1;return!0}if(t===ArrayBuffer)n=new Uint8Array(n),e=new Uint8Array(e);else if(t===DataView){if((r=n.byteLength)===e.byteLength)for(;r--&&n.getInt8(r)===e.getInt8(r););return r===-1}if(ArrayBuffer.isView(n)){if((r=n.byteLength)===e.byteLength)for(;r--&&n[r]===e[r];);return r===-1}if(!t||typeof n=="object"){r=0;for(t in n)if(Vy.call(n,t)&&++r&&!Vy.call(e,t)||!(t in e)||!Ro(n[t],e[t]))return!1;return Object.keys(e).length===r}}return n!==n&&e!==e}function _A(n){const e=i0();return[n[0],S.useCallback(t=>{if(e())return n[1](t)},[e,n[1]])]}var Kt="top",yn="bottom",wn="right",Yt="left",xp="auto",ta=[Kt,yn,wn,Yt],gi="start",Fo="end",EA="clippingParents",E0="viewport",_o="popper",xA="reference",Gy=ta.reduce(function(n,e){return n.concat([e+"-"+gi,e+"-"+Fo])},[]),x0=[].concat(ta,[xp]).reduce(function(n,e){return n.concat([e,e+"-"+gi,e+"-"+Fo])},[]),CA="beforeRead",TA="read",IA="afterRead",kA="beforeMain",AA="main",RA="afterMain",MA="beforeWrite",OA="write",PA="afterWrite",DA=[CA,TA,IA,kA,AA,RA,MA,OA,PA];function Fn(n){return n.split("-")[0]}function ln(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function Is(n){var e=ln(n).Element;return n instanceof e||n instanceof Element}function zn(n){var e=ln(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function Cp(n){if(typeof ShadowRoot=="undefined")return!1;var e=ln(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}var bs=Math.max,Kl=Math.min,yi=Math.round;function Bf(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function C0(){return!/^((?!chrome|android).)*safari/i.test(Bf())}function wi(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var r=n.getBoundingClientRect(),i=1,a=1;e&&zn(n)&&(i=n.offsetWidth>0&&yi(r.width)/n.offsetWidth||1,a=n.offsetHeight>0&&yi(r.height)/n.offsetHeight||1);var l=Is(n)?ln(n):window,u=l.visualViewport,d=!C0()&&t,p=(r.left+(d&&u?u.offsetLeft:0))/i,h=(r.top+(d&&u?u.offsetTop:0))/a,g=r.width/i,v=r.height/a;return{width:g,height:v,top:h,right:p+g,bottom:h+v,left:p,x:p,y:h}}function Tp(n){var e=wi(n),t=n.offsetWidth,r=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:r}}function T0(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&Cp(t)){var r=e;do{if(r&&n.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Br(n){return n?(n.nodeName||"").toLowerCase():null}function lr(n){return ln(n).getComputedStyle(n)}function NA(n){return["table","td","th"].indexOf(Br(n))>=0}function Vr(n){return((Is(n)?n.ownerDocument:n.document)||window.document).documentElement}function _c(n){return Br(n)==="html"?n:n.assignedSlot||n.parentNode||(Cp(n)?n.host:null)||Vr(n)}function Ky(n){return!zn(n)||lr(n).position==="fixed"?null:n.offsetParent}function LA(n){var e=/firefox/i.test(Bf()),t=/Trident/i.test(Bf());if(t&&zn(n)){var r=lr(n);if(r.position==="fixed")return null}var i=_c(n);for(Cp(i)&&(i=i.host);zn(i)&&["html","body"].indexOf(Br(i))<0;){var a=lr(i);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||e&&a.willChange==="filter"||e&&a.filter&&a.filter!=="none")return i;i=i.parentNode}return null}function na(n){for(var e=ln(n),t=Ky(n);t&&NA(t)&&lr(t).position==="static";)t=Ky(t);return t&&(Br(t)==="html"||Br(t)==="body"&&lr(t).position==="static")?e:t||LA(n)||e}function Ip(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function Mo(n,e,t){return bs(n,Kl(e,t))}function jA(n,e,t){var r=Mo(n,e,t);return r>t?t:r}function I0(){return{top:0,right:0,bottom:0,left:0}}function k0(n){return Object.assign({},I0(),n)}function A0(n,e){return e.reduce(function(t,r){return t[r]=n,t},{})}var $A=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,k0(typeof e!="number"?e:A0(e,ta))};function UA(n){var e,t=n.state,r=n.name,i=n.options,a=t.elements.arrow,l=t.modifiersData.popperOffsets,u=Fn(t.placement),d=Ip(u),p=[Yt,wn].indexOf(u)>=0,h=p?"height":"width";if(!(!a||!l)){var g=$A(i.padding,t),v=Tp(a),b=d==="y"?Kt:Yt,C=d==="y"?yn:wn,T=t.rects.reference[h]+t.rects.reference[d]-l[d]-t.rects.popper[h],x=l[d]-t.rects.reference[d],M=na(a),I=M?d==="y"?M.clientHeight||0:M.clientWidth||0:0,R=T/2-x/2,O=g[b],L=I-v[h]-g[C],H=I/2-v[h]/2+R,W=Mo(O,H,L),F=d;t.modifiersData[r]=(e={},e[F]=W,e.centerOffset=W-H,e)}}function FA(n){var e=n.state,t=n.options,r=t.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||T0(e.elements.popper,i)&&(e.elements.arrow=i))}const zA={name:"arrow",enabled:!0,phase:"main",fn:UA,effect:FA,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function vi(n){return n.split("-")[1]}var BA={top:"auto",right:"auto",bottom:"auto",left:"auto"};function qA(n,e){var t=n.x,r=n.y,i=e.devicePixelRatio||1;return{x:yi(t*i)/i||0,y:yi(r*i)/i||0}}function Yy(n){var e,t=n.popper,r=n.popperRect,i=n.placement,a=n.variation,l=n.offsets,u=n.position,d=n.gpuAcceleration,p=n.adaptive,h=n.roundOffsets,g=n.isFixed,v=l.x,b=v===void 0?0:v,C=l.y,T=C===void 0?0:C,x=typeof h=="function"?h({x:b,y:T}):{x:b,y:T};b=x.x,T=x.y;var M=l.hasOwnProperty("x"),I=l.hasOwnProperty("y"),R=Yt,O=Kt,L=window;if(p){var H=na(t),W="clientHeight",F="clientWidth";if(H===ln(t)&&(H=Vr(t),lr(H).position!=="static"&&u==="absolute"&&(W="scrollHeight",F="scrollWidth")),H=H,i===Kt||(i===Yt||i===wn)&&a===Fo){O=yn;var K=g&&H===L&&L.visualViewport?L.visualViewport.height:H[W];T-=K-r.height,T*=d?1:-1}if(i===Yt||(i===Kt||i===yn)&&a===Fo){R=wn;var ae=g&&H===L&&L.visualViewport?L.visualViewport.width:H[F];b-=ae-r.width,b*=d?1:-1}}var ce=Object.assign({position:u},p&&BA),ue=h===!0?qA({x:b,y:T},ln(t)):{x:b,y:T};if(b=ue.x,T=ue.y,d){var ve;return Object.assign({},ce,(ve={},ve[O]=I?"0":"",ve[R]=M?"0":"",ve.transform=(L.devicePixelRatio||1)<=1?"translate("+b+"px, "+T+"px)":"translate3d("+b+"px, "+T+"px, 0)",ve))}return Object.assign({},ce,(e={},e[O]=I?T+"px":"",e[R]=M?b+"px":"",e.transform="",e))}function HA(n){var e=n.state,t=n.options,r=t.gpuAcceleration,i=r===void 0?!0:r,a=t.adaptive,l=a===void 0?!0:a,u=t.roundOffsets,d=u===void 0?!0:u,p={placement:Fn(e.placement),variation:vi(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Yy(Object.assign({},p,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:l,roundOffsets:d})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Yy(Object.assign({},p,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:d})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const VA={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:HA,data:{}};var bl={passive:!0};function WA(n){var e=n.state,t=n.instance,r=n.options,i=r.scroll,a=i===void 0?!0:i,l=r.resize,u=l===void 0?!0:l,d=ln(e.elements.popper),p=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&p.forEach(function(h){h.addEventListener("scroll",t.update,bl)}),u&&d.addEventListener("resize",t.update,bl),function(){a&&p.forEach(function(h){h.removeEventListener("scroll",t.update,bl)}),u&&d.removeEventListener("resize",t.update,bl)}}const GA={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:WA,data:{}};var KA={left:"right",right:"left",bottom:"top",top:"bottom"};function Ml(n){return n.replace(/left|right|bottom|top/g,function(e){return KA[e]})}var YA={start:"end",end:"start"};function Xy(n){return n.replace(/start|end/g,function(e){return YA[e]})}function kp(n){var e=ln(n),t=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:t,scrollTop:r}}function Ap(n){return wi(Vr(n)).left+kp(n).scrollLeft}function XA(n,e){var t=ln(n),r=Vr(n),i=t.visualViewport,a=r.clientWidth,l=r.clientHeight,u=0,d=0;if(i){a=i.width,l=i.height;var p=C0();(p||!p&&e==="fixed")&&(u=i.offsetLeft,d=i.offsetTop)}return{width:a,height:l,x:u+Ap(n),y:d}}function QA(n){var e,t=Vr(n),r=kp(n),i=(e=n.ownerDocument)==null?void 0:e.body,a=bs(t.scrollWidth,t.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),l=bs(t.scrollHeight,t.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),u=-r.scrollLeft+Ap(n),d=-r.scrollTop;return lr(i||t).direction==="rtl"&&(u+=bs(t.clientWidth,i?i.clientWidth:0)-a),{width:a,height:l,x:u,y:d}}function Rp(n){var e=lr(n),t=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+i+r)}function R0(n){return["html","body","#document"].indexOf(Br(n))>=0?n.ownerDocument.body:zn(n)&&Rp(n)?n:R0(_c(n))}function Oo(n,e){var t;e===void 0&&(e=[]);var r=R0(n),i=r===((t=n.ownerDocument)==null?void 0:t.body),a=ln(r),l=i?[a].concat(a.visualViewport||[],Rp(r)?r:[]):r,u=e.concat(l);return i?u:u.concat(Oo(_c(l)))}function qf(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function JA(n,e){var t=wi(n,!1,e==="fixed");return t.top=t.top+n.clientTop,t.left=t.left+n.clientLeft,t.bottom=t.top+n.clientHeight,t.right=t.left+n.clientWidth,t.width=n.clientWidth,t.height=n.clientHeight,t.x=t.left,t.y=t.top,t}function Qy(n,e,t){return e===E0?qf(XA(n,t)):Is(e)?JA(e,t):qf(QA(Vr(n)))}function ZA(n){var e=Oo(_c(n)),t=["absolute","fixed"].indexOf(lr(n).position)>=0,r=t&&zn(n)?na(n):n;return Is(r)?e.filter(function(i){return Is(i)&&T0(i,r)&&Br(i)!=="body"}):[]}function eR(n,e,t,r){var i=e==="clippingParents"?ZA(n):[].concat(e),a=[].concat(i,[t]),l=a[0],u=a.reduce(function(d,p){var h=Qy(n,p,r);return d.top=bs(h.top,d.top),d.right=Kl(h.right,d.right),d.bottom=Kl(h.bottom,d.bottom),d.left=bs(h.left,d.left),d},Qy(n,l,r));return u.width=u.right-u.left,u.height=u.bottom-u.top,u.x=u.left,u.y=u.top,u}function M0(n){var e=n.reference,t=n.element,r=n.placement,i=r?Fn(r):null,a=r?vi(r):null,l=e.x+e.width/2-t.width/2,u=e.y+e.height/2-t.height/2,d;switch(i){case Kt:d={x:l,y:e.y-t.height};break;case yn:d={x:l,y:e.y+e.height};break;case wn:d={x:e.x+e.width,y:u};break;case Yt:d={x:e.x-t.width,y:u};break;default:d={x:e.x,y:e.y}}var p=i?Ip(i):null;if(p!=null){var h=p==="y"?"height":"width";switch(a){case gi:d[p]=d[p]-(e[h]/2-t[h]/2);break;case Fo:d[p]=d[p]+(e[h]/2-t[h]/2);break}}return d}function zo(n,e){e===void 0&&(e={});var t=e,r=t.placement,i=r===void 0?n.placement:r,a=t.strategy,l=a===void 0?n.strategy:a,u=t.boundary,d=u===void 0?EA:u,p=t.rootBoundary,h=p===void 0?E0:p,g=t.elementContext,v=g===void 0?_o:g,b=t.altBoundary,C=b===void 0?!1:b,T=t.padding,x=T===void 0?0:T,M=k0(typeof x!="number"?x:A0(x,ta)),I=v===_o?xA:_o,R=n.rects.popper,O=n.elements[C?I:v],L=eR(Is(O)?O:O.contextElement||Vr(n.elements.popper),d,h,l),H=wi(n.elements.reference),W=M0({reference:H,element:R,placement:i}),F=qf(Object.assign({},R,W)),K=v===_o?F:H,ae={top:L.top-K.top+M.top,bottom:K.bottom-L.bottom+M.bottom,left:L.left-K.left+M.left,right:K.right-L.right+M.right},ce=n.modifiersData.offset;if(v===_o&&ce){var ue=ce[i];Object.keys(ae).forEach(function(ve){var Re=[wn,yn].indexOf(ve)>=0?1:-1,_e=[Kt,yn].indexOf(ve)>=0?"y":"x";ae[ve]+=ue[_e]*Re})}return ae}function tR(n,e){e===void 0&&(e={});var t=e,r=t.placement,i=t.boundary,a=t.rootBoundary,l=t.padding,u=t.flipVariations,d=t.allowedAutoPlacements,p=d===void 0?x0:d,h=vi(r),g=h?u?Gy:Gy.filter(function(C){return vi(C)===h}):ta,v=g.filter(function(C){return p.indexOf(C)>=0});v.length===0&&(v=g);var b=v.reduce(function(C,T){return C[T]=zo(n,{placement:T,boundary:i,rootBoundary:a,padding:l})[Fn(T)],C},{});return Object.keys(b).sort(function(C,T){return b[C]-b[T]})}function nR(n){if(Fn(n)===xp)return[];var e=Ml(n);return[Xy(n),e,Xy(e)]}function rR(n){var e=n.state,t=n.options,r=n.name;if(!e.modifiersData[r]._skip){for(var i=t.mainAxis,a=i===void 0?!0:i,l=t.altAxis,u=l===void 0?!0:l,d=t.fallbackPlacements,p=t.padding,h=t.boundary,g=t.rootBoundary,v=t.altBoundary,b=t.flipVariations,C=b===void 0?!0:b,T=t.allowedAutoPlacements,x=e.options.placement,M=Fn(x),I=M===x,R=d||(I||!C?[Ml(x)]:nR(x)),O=[x].concat(R).reduce(function($,B){return $.concat(Fn(B)===xp?tR(e,{placement:B,boundary:h,rootBoundary:g,padding:p,flipVariations:C,allowedAutoPlacements:T}):B)},[]),L=e.rects.reference,H=e.rects.popper,W=new Map,F=!0,K=O[0],ae=0;ae<O.length;ae++){var ce=O[ae],ue=Fn(ce),ve=vi(ce)===gi,Re=[Kt,yn].indexOf(ue)>=0,_e=Re?"width":"height",Ie=zo(e,{placement:ce,boundary:h,rootBoundary:g,altBoundary:v,padding:p}),pe=Re?ve?wn:Yt:ve?yn:Kt;L[_e]>H[_e]&&(pe=Ml(pe));var ee=Ml(pe),de=[];if(a&&de.push(Ie[ue]<=0),u&&de.push(Ie[pe]<=0,Ie[ee]<=0),de.every(function($){return $})){K=ce,F=!1;break}W.set(ce,de)}if(F)for(var se=C?3:1,D=function(B){var Z=O.find(function(ye){var Ce=W.get(ye);if(Ce)return Ce.slice(0,B).every(function(Me){return Me})});if(Z)return K=Z,"break"},J=se;J>0;J--){var Ee=D(J);if(Ee==="break")break}e.placement!==K&&(e.modifiersData[r]._skip=!0,e.placement=K,e.reset=!0)}}const sR={name:"flip",enabled:!0,phase:"main",fn:rR,requiresIfExists:["offset"],data:{_skip:!1}};function Jy(n,e,t){return t===void 0&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function Zy(n){return[Kt,wn,yn,Yt].some(function(e){return n[e]>=0})}function iR(n){var e=n.state,t=n.name,r=e.rects.reference,i=e.rects.popper,a=e.modifiersData.preventOverflow,l=zo(e,{elementContext:"reference"}),u=zo(e,{altBoundary:!0}),d=Jy(l,r),p=Jy(u,i,a),h=Zy(d),g=Zy(p);e.modifiersData[t]={referenceClippingOffsets:d,popperEscapeOffsets:p,isReferenceHidden:h,hasPopperEscaped:g},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":g})}const oR={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:iR};function aR(n,e,t){var r=Fn(n),i=[Yt,Kt].indexOf(r)>=0?-1:1,a=typeof t=="function"?t(Object.assign({},e,{placement:n})):t,l=a[0],u=a[1];return l=l||0,u=(u||0)*i,[Yt,wn].indexOf(r)>=0?{x:u,y:l}:{x:l,y:u}}function lR(n){var e=n.state,t=n.options,r=n.name,i=t.offset,a=i===void 0?[0,0]:i,l=x0.reduce(function(h,g){return h[g]=aR(g,e.rects,a),h},{}),u=l[e.placement],d=u.x,p=u.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=d,e.modifiersData.popperOffsets.y+=p),e.modifiersData[r]=l}const cR={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:lR};function uR(n){var e=n.state,t=n.name;e.modifiersData[t]=M0({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const dR={name:"popperOffsets",enabled:!0,phase:"read",fn:uR,data:{}};function fR(n){return n==="x"?"y":"x"}function pR(n){var e=n.state,t=n.options,r=n.name,i=t.mainAxis,a=i===void 0?!0:i,l=t.altAxis,u=l===void 0?!1:l,d=t.boundary,p=t.rootBoundary,h=t.altBoundary,g=t.padding,v=t.tether,b=v===void 0?!0:v,C=t.tetherOffset,T=C===void 0?0:C,x=zo(e,{boundary:d,rootBoundary:p,padding:g,altBoundary:h}),M=Fn(e.placement),I=vi(e.placement),R=!I,O=Ip(M),L=fR(O),H=e.modifiersData.popperOffsets,W=e.rects.reference,F=e.rects.popper,K=typeof T=="function"?T(Object.assign({},e.rects,{placement:e.placement})):T,ae=typeof K=="number"?{mainAxis:K,altAxis:K}:Object.assign({mainAxis:0,altAxis:0},K),ce=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,ue={x:0,y:0};if(H){if(a){var ve,Re=O==="y"?Kt:Yt,_e=O==="y"?yn:wn,Ie=O==="y"?"height":"width",pe=H[O],ee=pe+x[Re],de=pe-x[_e],se=b?-F[Ie]/2:0,D=I===gi?W[Ie]:F[Ie],J=I===gi?-F[Ie]:-W[Ie],Ee=e.elements.arrow,$=b&&Ee?Tp(Ee):{width:0,height:0},B=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:I0(),Z=B[Re],ye=B[_e],Ce=Mo(0,W[Ie],$[Ie]),Me=R?W[Ie]/2-se-Ce-Z-ae.mainAxis:D-Ce-Z-ae.mainAxis,Ve=R?-W[Ie]/2+se+Ce+ye+ae.mainAxis:J+Ce+ye+ae.mainAxis,Tt=e.elements.arrow&&na(e.elements.arrow),Xt=Tt?O==="y"?Tt.clientTop||0:Tt.clientLeft||0:0,vt=(ve=ce==null?void 0:ce[O])!=null?ve:0,St=pe+Me-vt-Xt,We=pe+Ve-vt,On=Mo(b?Kl(ee,St):ee,pe,b?bs(de,We):de);H[O]=On,ue[O]=On-pe}if(u){var Qt,Ms=O==="x"?Kt:Yt,Gr=O==="x"?yn:wn,Ot=H[L],Jt=L==="y"?"height":"width",fr=Ot+x[Ms],Kr=Ot-x[Gr],pr=[Kt,Yt].indexOf(M)!==-1,Yr=(Qt=ce==null?void 0:ce[L])!=null?Qt:0,hr=pr?fr:Ot-W[Jt]-F[Jt]-Yr+ae.altAxis,mr=pr?Ot+W[Jt]+F[Jt]-Yr-ae.altAxis:Kr,je=b&&pr?jA(hr,Ot,mr):Mo(b?hr:fr,Ot,b?mr:Kr);H[L]=je,ue[L]=je-Ot}e.modifiersData[r]=ue}}const hR={name:"preventOverflow",enabled:!0,phase:"main",fn:pR,requiresIfExists:["offset"]};function mR(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function gR(n){return n===ln(n)||!zn(n)?kp(n):mR(n)}function yR(n){var e=n.getBoundingClientRect(),t=yi(e.width)/n.offsetWidth||1,r=yi(e.height)/n.offsetHeight||1;return t!==1||r!==1}function wR(n,e,t){t===void 0&&(t=!1);var r=zn(e),i=zn(e)&&yR(e),a=Vr(e),l=wi(n,i,t),u={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(r||!r&&!t)&&((Br(e)!=="body"||Rp(a))&&(u=gR(e)),zn(e)?(d=wi(e,!0),d.x+=e.clientLeft,d.y+=e.clientTop):a&&(d.x=Ap(a))),{x:l.left+u.scrollLeft-d.x,y:l.top+u.scrollTop-d.y,width:l.width,height:l.height}}function vR(n){var e=new Map,t=new Set,r=[];n.forEach(function(a){e.set(a.name,a)});function i(a){t.add(a.name);var l=[].concat(a.requires||[],a.requiresIfExists||[]);l.forEach(function(u){if(!t.has(u)){var d=e.get(u);d&&i(d)}}),r.push(a)}return n.forEach(function(a){t.has(a.name)||i(a)}),r}function SR(n){var e=vR(n);return DA.reduce(function(t,r){return t.concat(e.filter(function(i){return i.phase===r}))},[])}function bR(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}function _R(n){var e=n.reduce(function(t,r){var i=t[r.name];return t[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,t},{});return Object.keys(e).map(function(t){return e[t]})}var ew={placement:"bottom",modifiers:[],strategy:"absolute"};function tw(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function ER(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,r=t===void 0?[]:t,i=e.defaultOptions,a=i===void 0?ew:i;return function(u,d,p){p===void 0&&(p=a);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},ew,a),modifiersData:{},elements:{reference:u,popper:d},attributes:{},styles:{}},g=[],v=!1,b={state:h,setOptions:function(M){var I=typeof M=="function"?M(h.options):M;T(),h.options=Object.assign({},a,h.options,I),h.scrollParents={reference:Is(u)?Oo(u):u.contextElement?Oo(u.contextElement):[],popper:Oo(d)};var R=SR(_R([].concat(r,h.options.modifiers)));return h.orderedModifiers=R.filter(function(O){return O.enabled}),C(),b.update()},forceUpdate:function(){if(!v){var M=h.elements,I=M.reference,R=M.popper;if(tw(I,R)){h.rects={reference:wR(I,na(R),h.options.strategy==="fixed"),popper:Tp(R)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function(ae){return h.modifiersData[ae.name]=Object.assign({},ae.data)});for(var O=0;O<h.orderedModifiers.length;O++){if(h.reset===!0){h.reset=!1,O=-1;continue}var L=h.orderedModifiers[O],H=L.fn,W=L.options,F=W===void 0?{}:W,K=L.name;typeof H=="function"&&(h=H({state:h,options:F,name:K,instance:b})||h)}}}},update:bR(function(){return new Promise(function(x){b.forceUpdate(),x(h)})}),destroy:function(){T(),v=!0}};if(!tw(u,d))return b;b.setOptions(p).then(function(x){!v&&p.onFirstUpdate&&p.onFirstUpdate(x)});function C(){h.orderedModifiers.forEach(function(x){var M=x.name,I=x.options,R=I===void 0?{}:I,O=x.effect;if(typeof O=="function"){var L=O({state:h,name:M,instance:b,options:R}),H=function(){};g.push(L||H)}})}function T(){g.forEach(function(x){return x()}),g=[]}return b}}const xR=ER({defaultModifiers:[oR,dR,VA,GA,cR,sR,hR,zA]}),CR=["enabled","placement","strategy","modifiers"];function TR(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}const IR={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},kR={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:n})=>()=>{const{reference:e,popper:t}=n.elements;if("removeAttribute"in e){const r=(e.getAttribute("aria-describedby")||"").split(",").filter(i=>i.trim()!==t.id);r.length?e.setAttribute("aria-describedby",r.join(",")):e.removeAttribute("aria-describedby")}},fn:({state:n})=>{var e;const{popper:t,reference:r}=n.elements,i=(e=t.getAttribute("role"))==null?void 0:e.toLowerCase();if(t.id&&i==="tooltip"&&"setAttribute"in r){const a=r.getAttribute("aria-describedby");if(a&&a.split(",").indexOf(t.id)!==-1)return;r.setAttribute("aria-describedby",a?"".concat(a,",").concat(t.id):t.id)}}},AR=[];function O0(n,e,t={}){let{enabled:r=!0,placement:i="bottom",strategy:a="absolute",modifiers:l=AR}=t,u=TR(t,CR);const d=S.useRef(l),p=S.useRef(),h=S.useCallback(()=>{var x;(x=p.current)==null||x.update()},[]),g=S.useCallback(()=>{var x;(x=p.current)==null||x.forceUpdate()},[]),[v,b]=_A(S.useState({placement:i,update:h,forceUpdate:g,attributes:{},styles:{popper:{},arrow:{}}})),C=S.useMemo(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:x})=>{const M={},I={};Object.keys(x.elements).forEach(R=>{M[R]=x.styles[R],I[R]=x.attributes[R]}),b({state:x,styles:M,attributes:I,update:h,forceUpdate:g,placement:x.placement})}}),[h,g,b]),T=S.useMemo(()=>(Ro(d.current,l)||(d.current=l),d.current),[l]);return S.useEffect(()=>{!p.current||!r||p.current.setOptions({placement:i,strategy:a,modifiers:[...T,C,IR]})},[a,i,C,r,T]),S.useEffect(()=>{if(!(!r||n==null||e==null))return p.current=xR(n,e,Object.assign({},u,{placement:i,strategy:a,modifiers:[...T,kR,C]})),()=>{p.current!=null&&(p.current.destroy(),p.current=void 0,b(x=>Object.assign({},x,{attributes:{},styles:{popper:{}}})))}},[r,n,e]),v}function Bo(n,e){if(n.contains)return n.contains(e);if(n.compareDocumentPosition)return n===e||!!(n.compareDocumentPosition(e)&16)}var nf,nw;function RR(){if(nw)return nf;nw=1;var n=function(){};return nf=n,nf}var MR=RR();const OR=xi(MR),rw=()=>{};function PR(n){return n.button===0}function DR(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}const Ol=n=>n&&("current"in n?n.current:n),sw={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};function P0(n,e=rw,{disabled:t,clickTrigger:r="click"}={}){const i=S.useRef(!1),a=S.useRef(!1),l=S.useCallback(p=>{const h=Ol(n);OR(!!h,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),i.current=!h||DR(p)||!PR(p)||!!Bo(h,p.target)||a.current,a.current=!1},[n]),u=Ct(p=>{const h=Ol(n);h&&Bo(h,p.target)?a.current=!0:a.current=!1}),d=Ct(p=>{i.current||e(p)});S.useEffect(()=>{var p,h;if(t||n==null)return;const g=Mi(Ol(n)),v=g.defaultView||window;let b=(p=v.event)!=null?p:(h=v.parent)==null?void 0:h.event,C=null;sw[r]&&(C=tr(g,sw[r],u,!0));const T=tr(g,r,l,!0),x=tr(g,r,I=>{if(I===b){b=void 0;return}d(I)});let M=[];return"ontouchstart"in g.documentElement&&(M=[].slice.call(g.body.children).map(I=>tr(I,"mousemove",rw))),()=>{C==null||C(),T(),x(),M.forEach(I=>I())}},[n,t,r,l,u,d])}function NR(n){const e={};return Array.isArray(n)?(n==null||n.forEach(t=>{e[t.name]=t}),e):n||e}function LR(n={}){return Array.isArray(n)?n:Object.keys(n).map(e=>(n[e].name=e,n[e]))}function D0({enabled:n,enableEvents:e,placement:t,flip:r,offset:i,fixed:a,containerPadding:l,arrowElement:u,popperConfig:d={}}){var p,h,g,v,b;const C=NR(d.modifiers);return Object.assign({},d,{placement:t,enabled:n,strategy:a?"fixed":d.strategy,modifiers:LR(Object.assign({},C,{eventListeners:{enabled:e,options:(p=C.eventListeners)==null?void 0:p.options},preventOverflow:Object.assign({},C.preventOverflow,{options:l?Object.assign({padding:l},(h=C.preventOverflow)==null?void 0:h.options):(g=C.preventOverflow)==null?void 0:g.options}),offset:{options:Object.assign({offset:i},(v=C.offset)==null?void 0:v.options)},arrow:Object.assign({},C.arrow,{enabled:!!u,options:Object.assign({},(b=C.arrow)==null?void 0:b.options,{element:u})}),flip:Object.assign({enabled:!!r},C.flip)}))})}const jR=["children","usePopper"];function $R(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}const UR=()=>{};function N0(n={}){const e=S.useContext(bc),[t,r]=Ff(),i=S.useRef(!1),{flip:a,offset:l,rootCloseEvent:u,fixed:d=!1,placement:p,popperConfig:h={},enableEventListeners:g=!0,usePopper:v=!!e}=n,b=(e==null?void 0:e.show)==null?!!n.show:e.show;b&&!i.current&&(i.current=!0);const C=H=>{e==null||e.toggle(!1,H)},{placement:T,setMenu:x,menuElement:M,toggleElement:I}=e||{},R=O0(I,M,D0({placement:p||T||"bottom-start",enabled:v,enableEvents:g==null?b:g,offset:l,flip:a,fixed:d,arrowElement:t,popperConfig:h})),O=Object.assign({ref:x||UR,"aria-labelledby":I==null?void 0:I.id},R.attributes.popper,{style:R.styles.popper}),L={show:b,placement:T,hasShown:i.current,toggle:e==null?void 0:e.toggle,popper:v?R:null,arrowProps:v?Object.assign({ref:r},R.attributes.arrow,{style:R.styles.arrow}):{}};return P0(M,C,{clickTrigger:u,disabled:!b}),[O,L]}function L0(n){let{children:e,usePopper:t=!0}=n,r=$R(n,jR);const[i,a]=N0(Object.assign({},r,{usePopper:t}));return w.jsx(w.Fragment,{children:e(i,a)})}L0.displayName="DropdownMenu";const j0={prefix:String(Math.round(Math.random()*1e10)),current:0},$0=oe.createContext(j0),FR=oe.createContext(!1);let rf=new WeakMap;function zR(n=!1){let e=S.useContext($0),t=S.useRef(null);if(t.current===null&&!n){var r,i;let a=(i=oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||i===void 0||(r=i.ReactCurrentOwner)===null||r===void 0?void 0:r.current;if(a){let l=rf.get(a);l==null?rf.set(a,{id:e.current,state:a.memoizedState}):a.memoizedState!==l.state&&(e.current=l.id,rf.delete(a))}t.current=++e.current}return t.current}function BR(n){let e=S.useContext($0),t=zR(!!n),r="react-aria".concat(e.prefix);return n||"".concat(r,"-").concat(t)}function qR(n){let e=oe.useId(),[t]=S.useState(KR()),r=t?"react-aria":"react-aria".concat(j0.prefix);return n||"".concat(r,"-").concat(e)}const HR=typeof oe.useId=="function"?qR:BR;function VR(){return!1}function WR(){return!0}function GR(n){return()=>{}}function KR(){return typeof oe.useSyncExternalStore=="function"?oe.useSyncExternalStore(GR,VR,WR):S.useContext(FR)}const U0=n=>{var e;return((e=n.getAttribute("role"))==null?void 0:e.toLowerCase())==="menu"},iw=()=>{};function F0(){const n=HR(),{show:e=!1,toggle:t=iw,setToggle:r,menuElement:i}=S.useContext(bc)||{},a=S.useCallback(u=>{t(!e,u)},[e,t]),l={id:n,ref:r||iw,onClick:a,"aria-expanded":!!e};return i&&U0(i)&&(l["aria-haspopup"]=!0),[l,{show:e,toggle:t}]}function z0({children:n}){const[e,t]=F0();return w.jsx(w.Fragment,{children:n(e,t)})}z0.displayName="DropdownToggle";const ks=S.createContext(null),Si=(n,e=null)=>n!=null?String(n):e||null,Ec=S.createContext(null);Ec.displayName="NavContext";const YR="data-rr-ui-",XR="rrUi";function Di(n){return"".concat(YR).concat(n)}function QR(n){return"".concat(XR).concat(n)}const JR=["eventKey","disabled","onClick","active","as"];function ZR(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function B0({key:n,href:e,active:t,disabled:r,onClick:i}){const a=S.useContext(ks),l=S.useContext(Ec),{activeKey:u}=l||{},d=Si(n,e),p=t==null&&n!=null?Si(u)===d:t;return[{onClick:Ct(g=>{r||(i==null||i(g),a&&!g.isPropagationStopped()&&a(d,g))}),"aria-disabled":r||void 0,"aria-selected":p,[Di("dropdown-item")]:""},{isActive:p}]}const q0=S.forwardRef((n,e)=>{let{eventKey:t,disabled:r,onClick:i,active:a,as:l=vp}=n,u=ZR(n,JR);const[d]=B0({key:t,href:u.href,disabled:r,onClick:i,active:a});return w.jsx(l,Object.assign({},u,{ref:e},d))});q0.displayName="DropdownItem";const H0=S.createContext(Oi?window:void 0);H0.Provider;function xc(){return S.useContext(H0)}function ow(){const n=_0(),e=S.useRef(null),t=S.useCallback(r=>{e.current=r,n()},[n]);return[e,t]}function ra({defaultShow:n,show:e,onSelect:t,onToggle:r,itemSelector:i="* [".concat(Di("dropdown-item"),"]"),focusFirstItemOnShow:a,placement:l="bottom-start",children:u}){const d=xc(),[p,h]=bA(e,n,r),[g,v]=ow(),b=g.current,[C,T]=ow(),x=C.current,M=o0(p),I=S.useRef(null),R=S.useRef(!1),O=S.useContext(ks),L=S.useCallback((ce,ue,ve=ue==null?void 0:ue.type)=>{h(ce,{originalEvent:ue,source:ve})},[h]),H=Ct((ce,ue)=>{t==null||t(ce,ue),L(!1,ue,"select"),ue.isPropagationStopped()||O==null||O(ce,ue)}),W=S.useMemo(()=>({toggle:L,placement:l,show:p,menuElement:b,toggleElement:x,setMenu:v,setToggle:T}),[L,l,p,b,x,v,T]);b&&M&&!p&&(R.current=b.contains(b.ownerDocument.activeElement));const F=Ct(()=>{x&&x.focus&&x.focus()}),K=Ct(()=>{const ce=I.current;let ue=a;if(ue==null&&(ue=g.current&&U0(g.current)?"keyboard":!1),ue===!1||ue==="keyboard"&&!/^key.+$/.test(ce))return;const ve=Zn(g.current,i)[0];ve&&ve.focus&&ve.focus()});S.useEffect(()=>{p?K():R.current&&(R.current=!1,F())},[p,R,F,K]),S.useEffect(()=>{I.current=null});const ae=(ce,ue)=>{if(!g.current)return null;const ve=Zn(g.current,i);let Re=ve.indexOf(ce)+ue;return Re=Math.max(0,Math.min(Re,ve.length)),ve[Re]};return rA(S.useCallback(()=>d.document,[d]),"keydown",ce=>{var ue,ve;const{key:Re}=ce,_e=ce.target,Ie=(ue=g.current)==null?void 0:ue.contains(_e),pe=(ve=C.current)==null?void 0:ve.contains(_e);if(/input|textarea/i.test(_e.tagName)&&(Re===" "||Re!=="Escape"&&Ie||Re==="Escape"&&_e.type==="search")||!Ie&&!pe||Re==="Tab"&&(!g.current||!p))return;I.current=ce.type;const de={originalEvent:ce,source:ce.type};switch(Re){case"ArrowUp":{const se=ae(_e,-1);se&&se.focus&&se.focus(),ce.preventDefault();return}case"ArrowDown":if(ce.preventDefault(),!p)h(!0,de);else{const se=ae(_e,1);se&&se.focus&&se.focus()}return;case"Tab":gp(_e.ownerDocument,"keyup",se=>{var D;(se.key==="Tab"&&!se.target||!((D=g.current)!=null&&D.contains(se.target)))&&h(!1,de)},{once:!0});break;case"Escape":Re==="Escape"&&(ce.preventDefault(),ce.stopPropagation()),h(!1,de);break}}),w.jsx(ks.Provider,{value:H,children:w.jsx(bc.Provider,{value:W,children:u})})}ra.displayName="Dropdown";ra.Menu=L0;ra.Toggle=z0;ra.Item=q0;const Mp=S.createContext({});Mp.displayName="DropdownContext";const V0=S.forwardRef((l,a)=>{var u=l,{className:n,bsPrefix:e,as:t="hr",role:r="separator"}=u,i=le(u,["className","bsPrefix","as","role"]);return e=me(e,"dropdown-divider"),w.jsx(t,A({ref:a,className:fe(n,e),role:r},i))});V0.displayName="DropdownDivider";const W0=S.forwardRef((l,a)=>{var u=l,{className:n,bsPrefix:e,as:t="div",role:r="heading"}=u,i=le(u,["className","bsPrefix","as","role"]);return e=me(e,"dropdown-header"),w.jsx(t,A({ref:a,className:fe(n,e),role:r},i))});W0.displayName="DropdownHeader";const G0=S.forwardRef((p,d)=>{var h=p,{bsPrefix:n,className:e,eventKey:t,disabled:r=!1,onClick:i,active:a,as:l=vc}=h,u=le(h,["bsPrefix","className","eventKey","disabled","onClick","active","as"]);const g=me(n,"dropdown-item"),[v,b]=B0({key:t,href:u.href,disabled:r,onClick:i,active:a});return w.jsx(l,Y(A(A({},u),v),{ref:d,className:fe(e,g,b.isActive&&"active",r&&"disabled")}))});G0.displayName="DropdownItem";const K0=S.forwardRef((a,i)=>{var l=a,{className:n,bsPrefix:e,as:t="span"}=l,r=le(l,["className","bsPrefix","as"]);return e=me(e,"dropdown-item-text"),w.jsx(t,A({ref:i,className:fe(n,e)},r))});K0.displayName="DropdownItemText";const eM=typeof global!="undefined"&&global.navigator&&global.navigator.product==="ReactNative",tM=typeof document!="undefined",Op=tM||eM?S.useLayoutEffect:S.useEffect,Pp=S.createContext(null);Pp.displayName="InputGroupContext";const Rs=S.createContext(null);Rs.displayName="NavbarContext";function Y0(n,e){return n}function X0(n,e,t){const r=t?"top-end":"top-start",i=t?"top-start":"top-end",a=t?"bottom-end":"bottom-start",l=t?"bottom-start":"bottom-end",u=t?"right-start":"left-start",d=t?"right-end":"left-end",p=t?"left-start":"right-start",h=t?"left-end":"right-end";let g=n?l:a;return e==="up"?g=n?i:r:e==="end"?g=n?h:p:e==="start"?g=n?d:u:e==="down-centered"?g="bottom":e==="up-centered"&&(g="top"),g}const Q0=S.forwardRef((v,g)=>{var b=v,{bsPrefix:n,className:e,align:t,rootCloseEvent:r,flip:i=!0,show:a,renderOnMount:l,as:u="div",popperConfig:d,variant:p}=b,h=le(b,["bsPrefix","className","align","rootCloseEvent","flip","show","renderOnMount","as","popperConfig","variant"]);let C=!1;const T=S.useContext(Rs),x=me(n,"dropdown-menu"),{align:M,drop:I,isRTL:R}=S.useContext(Mp);t=t||M;const O=S.useContext(Pp),L=[];if(t)if(typeof t=="object"){const ve=Object.keys(t);if(ve.length){const Re=ve[0],_e=t[Re];C=_e==="start",L.push("".concat(x,"-").concat(Re,"-").concat(_e))}}else t==="end"&&(C=!0);const H=X0(C,I,R),[W,{hasShown:F,popper:K,show:ae,toggle:ce}]=N0({flip:i,rootCloseEvent:r,show:a,usePopper:!T&&L.length===0,offset:[0,2],popperConfig:d,placement:H});if(W.ref=Pi(Y0(g),W.ref),Op(()=>{ae&&(K==null||K.update())},[ae]),!F&&!l&&!O)return null;typeof u!="string"&&(W.show=ae,W.close=()=>ce==null?void 0:ce(!1),W.align=t);let ue=h.style;return K!=null&&K.placement&&(ue=A(A({},h.style),W.style),h["x-placement"]=K.placement),w.jsx(u,Y(A(Y(A(A({},h),W),{style:ue}),(L.length||T)&&{"data-bs-popper":"static"}),{className:fe(e,x,ae&&"show",C&&"".concat(x,"-end"),p&&"".concat(x,"-").concat(p),...L)}))});Q0.displayName="DropdownMenu";const J0=S.forwardRef((u,l)=>{var d=u,{bsPrefix:n,split:e,className:t,childBsPrefix:r,as:i=jt}=d,a=le(d,["bsPrefix","split","className","childBsPrefix","as"]);const p=me(n,"dropdown-toggle"),h=S.useContext(bc);r!==void 0&&(a.bsPrefix=r);const[g]=F0();return g.ref=Pi(g.ref,Y0(l)),w.jsx(i,A(A({className:fe(t,p,e&&"".concat(p,"-split"),(h==null?void 0:h.show)&&"show")},g),a))});J0.displayName="DropdownToggle";const Z0=S.forwardRef((n,e)=>{const W=Qo(n,{show:"onToggle"}),{bsPrefix:t,drop:r="down",show:i,className:a,align:l="start",onSelect:u,onToggle:d,focusFirstItemOnShow:p,as:h="div",navbar:g,autoClose:v=!0}=W,b=le(W,["bsPrefix","drop","show","className","align","onSelect","onToggle","focusFirstItemOnShow","as","navbar","autoClose"]),C=S.useContext(Pp),T=me(t,"dropdown"),x=yc(),M=F=>v===!1?F==="click":v==="inside"?F!=="rootClose":v==="outside"?F!=="select":!0,I=Rn((F,K)=>{var ae;!((ae=K.originalEvent)==null||(ae=ae.target)==null)&&ae.classList.contains("dropdown-toggle")&&K.source==="mousedown"||(K.originalEvent.currentTarget===document&&(K.source!=="keydown"||K.originalEvent.key==="Escape")&&(K.source="rootClose"),M(K.source)&&(d==null||d(F,K)))}),O=X0(l==="end",r,x),L=S.useMemo(()=>({align:l,drop:r,isRTL:x}),[l,r,x]),H={down:T,"down-centered":"".concat(T,"-center"),up:"dropup","up-centered":"dropup-center dropup",end:"dropend",start:"dropstart"};return w.jsx(Mp.Provider,{value:L,children:w.jsx(ra,{placement:O,show:i,onSelect:u,onToggle:I,focusFirstItemOnShow:p,itemSelector:".".concat(T,"-item:not(.disabled):not(:disabled)"),children:C?b.children:w.jsx(h,Y(A({},b),{ref:e,className:fe(a,i&&"show",H[r])}))})})});Z0.displayName="Dropdown";const sf=Object.assign(Z0,{Toggle:J0,Menu:Q0,Item:G0,ItemText:K0,Divider:V0,Header:W0}),nM={type:Fe.string,tooltip:Fe.bool,as:Fe.elementType},Cc=S.forwardRef((l,a)=>{var u=l,{as:n="div",className:e,type:t="valid",tooltip:r=!1}=u,i=le(u,["as","className","type","tooltip"]);return w.jsx(n,Y(A({},i),{ref:a,className:fe(e,"".concat(t,"-").concat(r?"tooltip":"feedback"))}))});Cc.displayName="Feedback";Cc.propTypes=nM;const cr=S.createContext({}),Dp=S.forwardRef((p,d)=>{var h=p,{id:n,bsPrefix:e,className:t,type:r="checkbox",isValid:i=!1,isInvalid:a=!1,as:l="input"}=h,u=le(h,["id","bsPrefix","className","type","isValid","isInvalid","as"]);const{controlId:g}=S.useContext(cr);return e=me(e,"form-check-input"),w.jsx(l,Y(A({},u),{ref:d,type:r,id:n||g,className:fe(t,e,i&&"is-valid",a&&"is-invalid")}))});Dp.displayName="FormCheckInput";const Yl=S.forwardRef((a,i)=>{var l=a,{bsPrefix:n,className:e,htmlFor:t}=l,r=le(l,["bsPrefix","className","htmlFor"]);const{controlId:u}=S.useContext(cr);return n=me(n,"form-check-label"),w.jsx("label",Y(A({},r),{ref:i,htmlFor:t||u,className:fe(e,n)}))});Yl.displayName="FormCheckLabel";const eS=S.forwardRef((O,R)=>{var L=O,{id:n,bsPrefix:e,bsSwitchPrefix:t,inline:r=!1,reverse:i=!1,disabled:a=!1,isValid:l=!1,isInvalid:u=!1,feedbackTooltip:d=!1,feedback:p,feedbackType:h,className:g,style:v,title:b="",type:C="checkbox",label:T,children:x,as:M="input"}=L,I=le(L,["id","bsPrefix","bsSwitchPrefix","inline","reverse","disabled","isValid","isInvalid","feedbackTooltip","feedback","feedbackType","className","style","title","type","label","children","as"]);e=me(e,"form-check"),t=me(t,"form-switch");const{controlId:H}=S.useContext(cr),W=S.useMemo(()=>({controlId:n||H}),[H,n]),F=!x&&T!=null&&T!==!1||wA(x,Yl),K=w.jsx(Dp,Y(A({},I),{type:C==="switch"?"checkbox":C,ref:R,isValid:l,isInvalid:u,disabled:a,as:M}));return w.jsx(cr.Provider,{value:W,children:w.jsx("div",{style:v,className:fe(g,F&&e,r&&"".concat(e,"-inline"),i&&"".concat(e,"-reverse"),C==="switch"&&t),children:x||w.jsxs(w.Fragment,{children:[K,F&&w.jsx(Yl,{title:b,children:T}),p&&w.jsx(Cc,{type:h,tooltip:d,children:p})]})})})});eS.displayName="FormCheck";const Xl=Object.assign(eS,{Input:Dp,Label:Yl}),tS=S.forwardRef((b,v)=>{var C=b,{bsPrefix:n,type:e,size:t,htmlSize:r,id:i,className:a,isValid:l=!1,isInvalid:u=!1,plaintext:d,readOnly:p,as:h="input"}=C,g=le(C,["bsPrefix","type","size","htmlSize","id","className","isValid","isInvalid","plaintext","readOnly","as"]);const{controlId:T}=S.useContext(cr);return n=me(n,"form-control"),w.jsx(h,Y(A({},g),{type:e,size:r,ref:v,readOnly:p,id:i||T,className:fe(a,d?"".concat(n,"-plaintext"):n,t&&"".concat(n,"-").concat(t),e==="color"&&"".concat(n,"-color"),l&&"is-valid",u&&"is-invalid")}))});tS.displayName="FormControl";const rM=Object.assign(tS,{Feedback:Cc}),nS=S.forwardRef((a,i)=>{var l=a,{className:n,bsPrefix:e,as:t="div"}=l,r=le(l,["className","bsPrefix","as"]);return e=me(e,"form-floating"),w.jsx(t,A({ref:i,className:fe(n,e)},r))});nS.displayName="FormFloating";const Np=S.forwardRef((i,r)=>{var a=i,{controlId:n,as:e="div"}=a,t=le(a,["controlId","as"]);const l=S.useMemo(()=>({controlId:n}),[n]);return w.jsx(cr.Provider,{value:l,children:w.jsx(e,Y(A({},t),{ref:r}))})});Np.displayName="FormGroup";const rS=S.forwardRef((d,u)=>{var p=d,{as:n="label",bsPrefix:e,column:t=!1,visuallyHidden:r=!1,className:i,htmlFor:a}=p,l=le(p,["as","bsPrefix","column","visuallyHidden","className","htmlFor"]);const{controlId:h}=S.useContext(cr);e=me(e,"form-label");let g="col-form-label";typeof t=="string"&&(g="".concat(g," ").concat(g,"-").concat(t));const v=fe(i,e,r&&"visually-hidden",t&&g);return a=a||h,t?w.jsx(b0,A({ref:u,as:"label",className:v,htmlFor:a},l)):w.jsx(n,A({ref:u,className:v,htmlFor:a},l))});rS.displayName="FormLabel";const sS=S.forwardRef((a,i)=>{var l=a,{bsPrefix:n,className:e,id:t}=l,r=le(l,["bsPrefix","className","id"]);const{controlId:u}=S.useContext(cr);return n=me(n,"form-range"),w.jsx("input",Y(A({},r),{type:"range",ref:i,className:fe(e,n),id:t||u}))});sS.displayName="FormRange";const iS=S.forwardRef((p,d)=>{var h=p,{bsPrefix:n,size:e,htmlSize:t,className:r,isValid:i=!1,isInvalid:a=!1,id:l}=h,u=le(h,["bsPrefix","size","htmlSize","className","isValid","isInvalid","id"]);const{controlId:g}=S.useContext(cr);return n=me(n,"form-select"),w.jsx("select",Y(A({},u),{size:t,ref:d,className:fe(r,n,e&&"".concat(n,"-").concat(e),i&&"is-valid",a&&"is-invalid"),id:l||g}))});iS.displayName="FormSelect";const oS=S.forwardRef((l,a)=>{var u=l,{bsPrefix:n,className:e,as:t="small",muted:r}=u,i=le(u,["bsPrefix","className","as","muted"]);return n=me(n,"form-text"),w.jsx(t,Y(A({},i),{ref:a,className:fe(e,n,r&&"text-muted")}))});oS.displayName="FormText";const aS=S.forwardRef((n,e)=>w.jsx(Xl,Y(A({},n),{ref:e,type:"switch"})));aS.displayName="Switch";const sM=Object.assign(aS,{Input:Xl.Input,Label:Xl.Label}),lS=S.forwardRef((u,l)=>{var d=u,{bsPrefix:n,className:e,children:t,controlId:r,label:i}=d,a=le(d,["bsPrefix","className","children","controlId","label"]);return n=me(n,"form-floating"),w.jsxs(Np,Y(A({ref:l,className:fe(e,n),controlId:r},a),{children:[t,w.jsx("label",{htmlFor:r,children:i})]}))});lS.displayName="FloatingLabel";const iM={_ref:Fe.any,validated:Fe.bool,as:Fe.elementType},Lp=S.forwardRef((a,i)=>{var l=a,{className:n,validated:e,as:t="form"}=l,r=le(l,["className","validated","as"]);return w.jsx(t,Y(A({},r),{ref:i,className:fe(n,e&&"was-validated")}))});Lp.displayName="Form";Lp.propTypes=iM;const sn=Object.assign(Lp,{Group:Np,Control:rM,Floating:nS,Check:Xl,Switch:sM,Label:rS,Text:oS,Range:sS,Select:iS,FloatingLabel:lS}),aw=n=>!n||typeof n=="function"?n:e=>{n.current=e};function oM(n,e){const t=aw(n),r=aw(e);return i=>{t&&t(i),r&&r(i)}}function sa(n,e){return S.useMemo(()=>oM(n,e),[n,e])}const cS=S.createContext(null),aM=["as","active","eventKey"];function lM(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function jp({key:n,onClick:e,active:t,id:r,role:i,disabled:a}){const l=S.useContext(ks),u=S.useContext(Ec),d=S.useContext(cS);let p=t;const h={role:i};if(u){!i&&u.role==="tablist"&&(h.role="tab");const g=u.getControllerId(n!=null?n:null),v=u.getControlledId(n!=null?n:null);h[Di("event-key")]=n,h.id=g||r,p=t==null&&n!=null?u.activeKey===n:t,(p||!(d!=null&&d.unmountOnExit)&&!(d!=null&&d.mountOnEnter))&&(h["aria-controls"]=v)}return h.role==="tab"&&(h["aria-selected"]=p,p||(h.tabIndex=-1),a&&(h.tabIndex=-1,h["aria-disabled"]=!0)),h.onClick=Ct(g=>{a||(e==null||e(g),n!=null&&l&&!g.isPropagationStopped()&&l(n,g))}),[h,{isActive:p}]}const uS=S.forwardRef((n,e)=>{let{as:t=vp,active:r,eventKey:i}=n,a=lM(n,aM);const[l,u]=jp(Object.assign({key:Si(i,a.href),active:r},a));return l[Di("active")]=u.isActive,w.jsx(t,Object.assign({},a,l,{ref:e}))});uS.displayName="NavItem";const cM=["as","onSelect","activeKey","role","onKeyDown"];function uM(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}const lw=()=>{},cw=Di("event-key"),dS=S.forwardRef((n,e)=>{let{as:t="div",onSelect:r,activeKey:i,role:a,onKeyDown:l}=n,u=uM(n,cM);const d=_0(),p=S.useRef(!1),h=S.useContext(ks),g=S.useContext(cS);let v,b;g&&(a=a||"tablist",i=g.activeKey,v=g.getControlledId,b=g.getControllerId);const C=S.useRef(null),T=R=>{const O=C.current;if(!O)return null;const L=Zn(O,"[".concat(cw,"]:not([aria-disabled=true])")),H=O.querySelector("[aria-selected=true]");if(!H||H!==document.activeElement)return null;const W=L.indexOf(H);if(W===-1)return null;let F=W+R;return F>=L.length&&(F=0),F<0&&(F=L.length-1),L[F]},x=(R,O)=>{R!=null&&(r==null||r(R,O),h==null||h(R,O))},M=R=>{if(l==null||l(R),!g)return;let O;switch(R.key){case"ArrowLeft":case"ArrowUp":O=T(-1);break;case"ArrowRight":case"ArrowDown":O=T(1);break;default:return}O&&(R.preventDefault(),x(O.dataset[QR("EventKey")]||null,R),p.current=!0,d())};S.useEffect(()=>{if(C.current&&p.current){const R=C.current.querySelector("[".concat(cw,"][aria-selected=true]"));R==null||R.focus()}p.current=!1});const I=sa(e,C);return w.jsx(ks.Provider,{value:x,children:w.jsx(Ec.Provider,{value:{role:a,activeKey:Si(i),getControlledId:v||lw,getControllerId:b||lw},children:w.jsx(t,Object.assign({},u,{onKeyDown:M,ref:I,role:a}))})})});dS.displayName="Nav";const fS=Object.assign(dS,{Item:uS}),pS=S.forwardRef((h,p)=>{var g=h,{bsPrefix:n,active:e,disabled:t,eventKey:r,className:i,variant:a,action:l,as:u}=g,d=le(g,["bsPrefix","active","disabled","eventKey","className","variant","action","as"]);n=me(n,"list-group-item");const[v,b]=jp(A({key:Si(r,d.href),active:e},d)),C=Rn(x=>{if(t){x.preventDefault(),x.stopPropagation();return}v.onClick(x)});t&&d.tabIndex===void 0&&(d.tabIndex=-1,d["aria-disabled"]=!0);const T=u||(l?d.href?"a":"button":"div");return w.jsx(T,Y(A(A({ref:p},d),v),{onClick:C,className:fe(i,n,b.isActive&&"active",t&&"disabled",a&&"".concat(n,"-").concat(a),l&&"".concat(n,"-action"))}))});pS.displayName="ListGroupItem";const hS=S.forwardRef((n,e)=>{const g=Qo(n,{activeKey:"onSelect"}),{className:t,bsPrefix:r,variant:i,horizontal:a,numbered:l,as:u="div"}=g,d=le(g,["className","bsPrefix","variant","horizontal","numbered","as"]),p=me(r,"list-group");let h;return a&&(h=a===!0?"horizontal":"horizontal-".concat(a)),w.jsx(fS,Y(A({ref:e},d),{as:u,className:fe(t,p,i&&"".concat(p,"-").concat(i),h&&"".concat(p,"-").concat(h),l&&"".concat(p,"-numbered"))}))});hS.displayName="ListGroup";const uw=Object.assign(hS,{Item:pS});var _l;function dw(n){if((!_l&&_l!==0||n)&&Oi){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),_l=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return _l}function dM(){return S.useState(null)}function of(n){n===void 0&&(n=Mi());try{var e=n.activeElement;return!e||!e.nodeName?null:e}catch(t){return n.body}}function fM(n){const e=S.useRef(n);return e.current=n,e}function pM(n){const e=fM(n);S.useEffect(()=>()=>e.current(),[])}function hM(n=document){const e=n.defaultView;return Math.abs(e.innerWidth-n.documentElement.clientWidth)}const fw=Di("modal-open");class $p{constructor({ownerDocument:e,handleContainerOverflow:t=!0,isRTL:r=!1}={}){this.handleContainerOverflow=t,this.isRTL=r,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return hM(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const t={overflow:"hidden"},r=this.isRTL?"paddingLeft":"paddingRight",i=this.getElement();e.style={overflow:i.style.overflow,[r]:i.style[r]},e.scrollBarWidth&&(t[r]="".concat(parseInt(sr(i,r)||"0",10)+e.scrollBarWidth,"px")),i.setAttribute(fw,""),sr(i,t)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const t=this.getElement();t.removeAttribute(fw),Object.assign(t.style,e.style)}add(e){let t=this.modals.indexOf(e);return t!==-1||(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),t!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t}remove(e){const t=this.modals.indexOf(e);t!==-1&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const af=(n,e)=>Oi?n==null?(e||Mi()).body:(typeof n=="function"&&(n=n()),n&&"current"in n&&(n=n.current),n&&("nodeType"in n||n.getBoundingClientRect)?n:null):null;function Hf(n,e){const t=xc(),[r,i]=S.useState(()=>af(n,t==null?void 0:t.document));if(!r){const a=af(n);a&&i(a)}return S.useEffect(()=>{},[e,r]),S.useEffect(()=>{const a=af(n);a!==r&&i(a)},[n,r]),r}function mM({children:n,in:e,onExited:t,mountOnEnter:r,unmountOnExit:i}){const a=S.useRef(null),l=S.useRef(e),u=Ct(t);S.useEffect(()=>{e?l.current=!0:u(a.current)},[e,u]);const d=sa(a,As(n)),p=S.cloneElement(n,{ref:d});return e?p:i||!l.current&&r?null:p}const gM=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function yM(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function wM(n){let{onEnter:e,onEntering:t,onEntered:r,onExit:i,onExiting:a,onExited:l,addEndListener:u,children:d}=n,p=yM(n,gM);const h=S.useRef(null),g=sa(h,As(d)),v=O=>L=>{O&&h.current&&O(h.current,L)},b=S.useCallback(v(e),[e]),C=S.useCallback(v(t),[t]),T=S.useCallback(v(r),[r]),x=S.useCallback(v(i),[i]),M=S.useCallback(v(a),[a]),I=S.useCallback(v(l),[l]),R=S.useCallback(v(u),[u]);return Object.assign({},p,{nodeRef:h},e&&{onEnter:b},t&&{onEntering:C},r&&{onEntered:T},i&&{onExit:x},a&&{onExiting:M},l&&{onExited:I},u&&{addEndListener:R},{children:typeof d=="function"?(O,L)=>d(O,Object.assign({},L,{ref:g})):S.cloneElement(d,{ref:g})})}const vM=["component"];function SM(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}const bM=S.forwardRef((n,e)=>{let{component:t}=n,r=SM(n,vM);const i=wM(r);return w.jsx(t,Object.assign({ref:e},i))});function _M({in:n,onTransition:e}){const t=S.useRef(null),r=S.useRef(!0),i=Ct(e);return Hy(()=>{if(!t.current)return;let a=!1;return i({in:n,element:t.current,initial:r.current,isStale:()=>a}),()=>{a=!0}},[n,i]),Hy(()=>(r.current=!1,()=>{r.current=!0}),[]),t}function EM({children:n,in:e,onExited:t,onEntered:r,transition:i}){const[a,l]=S.useState(!e);e&&a&&l(!1);const u=_M({in:!!e,onTransition:p=>{const h=()=>{p.isStale()||(p.in?r==null||r(p.element,p.initial):(l(!0),t==null||t(p.element)))};Promise.resolve(i(p)).then(h,g=>{throw p.in||l(!0),g})}}),d=sa(u,As(n));return a&&!e?null:S.cloneElement(n,{ref:d})}function Vf(n,e,t){return n?w.jsx(bM,Object.assign({},t,{component:n})):e?w.jsx(EM,Object.assign({},t,{transition:e})):w.jsx(mM,Object.assign({},t))}const xM=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function CM(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}let lf;function TM(n){return lf||(lf=new $p({ownerDocument:n==null?void 0:n.document})),lf}function IM(n){const e=xc(),t=n||TM(e),r=S.useRef({dialog:null,backdrop:null});return Object.assign(r.current,{add:()=>t.add(r.current),remove:()=>t.remove(r.current),isTopModal:()=>t.isTopModal(r.current),setDialogRef:S.useCallback(i=>{r.current.dialog=i},[]),setBackdropRef:S.useCallback(i=>{r.current.backdrop=i},[])})}const mS=S.forwardRef((n,e)=>{let{show:t=!1,role:r="dialog",className:i,style:a,children:l,backdrop:u=!0,keyboard:d=!0,onBackdropClick:p,onEscapeKeyDown:h,transition:g,runTransition:v,backdropTransition:b,runBackdropTransition:C,autoFocus:T=!0,enforceFocus:x=!0,restoreFocus:M=!0,restoreFocusOptions:I,renderDialog:R,renderBackdrop:O=We=>w.jsx("div",Object.assign({},We)),manager:L,container:H,onShow:W,onHide:F=()=>{},onExit:K,onExited:ae,onExiting:ce,onEnter:ue,onEntering:ve,onEntered:Re}=n,_e=CM(n,xM);const Ie=xc(),pe=Hf(H),ee=IM(L),de=i0(),se=o0(t),[D,J]=S.useState(!t),Ee=S.useRef(null);S.useImperativeHandle(e,()=>ee,[ee]),Oi&&!se&&t&&(Ee.current=of(Ie==null?void 0:Ie.document)),t&&D&&J(!1);const $=Ct(()=>{if(ee.add(),Ve.current=tr(document,"keydown",Ce),Me.current=tr(document,"focus",()=>setTimeout(Z),!0),W&&W(),T){var We,On;const Qt=of((We=(On=ee.dialog)==null?void 0:On.ownerDocument)!=null?We:Ie==null?void 0:Ie.document);ee.dialog&&Qt&&!Bo(ee.dialog,Qt)&&(Ee.current=Qt,ee.dialog.focus())}}),B=Ct(()=>{if(ee.remove(),Ve.current==null||Ve.current(),Me.current==null||Me.current(),M){var We;(We=Ee.current)==null||We.focus==null||We.focus(I),Ee.current=null}});S.useEffect(()=>{!t||!pe||$()},[t,pe,$]),S.useEffect(()=>{D&&B()},[D,B]),pM(()=>{B()});const Z=Ct(()=>{if(!x||!de()||!ee.isTopModal())return;const We=of(Ie==null?void 0:Ie.document);ee.dialog&&We&&!Bo(ee.dialog,We)&&ee.dialog.focus()}),ye=Ct(We=>{We.target===We.currentTarget&&(p==null||p(We),u===!0&&F())}),Ce=Ct(We=>{d&&Zv(We)&&ee.isTopModal()&&(h==null||h(We),We.defaultPrevented||F())}),Me=S.useRef(),Ve=S.useRef(),Tt=(...We)=>{J(!0),ae==null||ae(...We)};if(!pe)return null;const Xt=Object.assign({role:r,ref:ee.setDialogRef,"aria-modal":r==="dialog"?!0:void 0},_e,{style:a,className:i,tabIndex:-1});let vt=R?R(Xt):w.jsx("div",Object.assign({},Xt,{children:S.cloneElement(l,{role:"document"})}));vt=Vf(g,v,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!t,onExit:K,onExiting:ce,onExited:Tt,onEnter:ue,onEntering:ve,onEntered:Re,children:vt});let St=null;return u&&(St=O({ref:ee.setBackdropRef,onClick:ye}),St=Vf(b,C,{in:!!t,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:St})),w.jsx(w.Fragment,{children:fs.createPortal(w.jsxs(w.Fragment,{children:[St,vt]}),pe)})});mS.displayName="Modal";const gS=Object.assign(mS,{Manager:$p});function Wf(n,e){return n.classList?!!e&&n.classList.contains(e):(" "+(n.className.baseVal||n.className)+" ").indexOf(" "+e+" ")!==-1}function kM(n,e){n.classList?n.classList.add(e):Wf(n,e)||(typeof n.className=="string"?n.className=n.className+" "+e:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+e))}function pw(n,e){return n.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function AM(n,e){n.classList?n.classList.remove(e):typeof n.className=="string"?n.className=pw(n.className,e):n.setAttribute("class",pw(n.className&&n.className.baseVal||"",e))}const ai={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class yS extends $p{adjustAndStore(e,t,r){const i=t.style[e];t.dataset[e]=i,sr(t,{[e]:"".concat(parseFloat(sr(t,e))+r,"px")})}restore(e,t){const r=t.dataset[e];r!==void 0&&(delete t.dataset[e],sr(t,{[e]:r}))}setContainerStyle(e){super.setContainerStyle(e);const t=this.getElement();if(kM(t,"modal-open"),!e.scrollBarWidth)return;const r=this.isRTL?"paddingLeft":"paddingRight",i=this.isRTL?"marginLeft":"marginRight";Zn(t,ai.FIXED_CONTENT).forEach(a=>this.adjustAndStore(r,a,e.scrollBarWidth)),Zn(t,ai.STICKY_CONTENT).forEach(a=>this.adjustAndStore(i,a,-e.scrollBarWidth)),Zn(t,ai.NAVBAR_TOGGLER).forEach(a=>this.adjustAndStore(i,a,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const t=this.getElement();AM(t,"modal-open");const r=this.isRTL?"paddingLeft":"paddingRight",i=this.isRTL?"marginLeft":"marginRight";Zn(t,ai.FIXED_CONTENT).forEach(a=>this.restore(r,a)),Zn(t,ai.STICKY_CONTENT).forEach(a=>this.restore(i,a)),Zn(t,ai.NAVBAR_TOGGLER).forEach(a=>this.restore(i,a))}}let cf;function wS(n){return cf||(cf=new yS(n)),cf}const vS=S.forwardRef((a,i)=>{var l=a,{className:n,bsPrefix:e,as:t="div"}=l,r=le(l,["className","bsPrefix","as"]);return e=me(e,"modal-body"),w.jsx(t,A({ref:i,className:fe(n,e)},r))});vS.displayName="ModalBody";const Up=S.createContext({onHide(){}}),Fp=S.forwardRef((h,p)=>{var g=h,{bsPrefix:n,className:e,contentClassName:t,centered:r,size:i,fullscreen:a,children:l,scrollable:u}=g,d=le(g,["bsPrefix","className","contentClassName","centered","size","fullscreen","children","scrollable"]);n=me(n,"modal");const v="".concat(n,"-dialog"),b=typeof a=="string"?"".concat(n,"-fullscreen-").concat(a):"".concat(n,"-fullscreen");return w.jsx("div",Y(A({},d),{ref:p,className:fe(v,e,i&&"".concat(n,"-").concat(i),r&&"".concat(v,"-centered"),u&&"".concat(v,"-scrollable"),a&&b),children:w.jsx("div",{className:fe("".concat(n,"-content"),t),children:l})}))});Fp.displayName="ModalDialog";const SS=S.forwardRef((a,i)=>{var l=a,{className:n,bsPrefix:e,as:t="div"}=l,r=le(l,["className","bsPrefix","as"]);return e=me(e,"modal-footer"),w.jsx(t,A({ref:i,className:fe(n,e)},r))});SS.displayName="ModalFooter";const zp=S.forwardRef((u,l)=>{var d=u,{closeLabel:n="Close",closeVariant:e,closeButton:t=!1,onHide:r,children:i}=d,a=le(d,["closeLabel","closeVariant","closeButton","onHide","children"]);const p=S.useContext(Up),h=Rn(()=>{p==null||p.onHide(),r==null||r()});return w.jsxs("div",Y(A({ref:l},a),{children:[i,t&&w.jsx(ea,{"aria-label":n,variant:e,onClick:h})]}))});zp.displayName="AbstractModalHeader";const bS=S.forwardRef((l,a)=>{var u=l,{bsPrefix:n,className:e,closeLabel:t="Close",closeButton:r=!1}=u,i=le(u,["bsPrefix","className","closeLabel","closeButton"]);return n=me(n,"modal-header"),w.jsx(zp,Y(A({ref:a},i),{className:fe(e,n),closeLabel:t,closeButton:r}))});bS.displayName="ModalHeader";const RM=Zo("h4"),_S=S.forwardRef((a,i)=>{var l=a,{className:n,bsPrefix:e,as:t=RM}=l,r=le(l,["className","bsPrefix","as"]);return e=me(e,"modal-title"),w.jsx(t,A({ref:i,className:fe(n,e)},r))});_S.displayName="ModalTitle";function MM(n){return w.jsx(ar,Y(A({},n),{timeout:null}))}function OM(n){return w.jsx(ar,Y(A({},n),{timeout:null}))}const ES=S.forwardRef((pe,Ie)=>{var ee=pe,{bsPrefix:n,className:e,style:t,dialogClassName:r,contentClassName:i,children:a,dialogAs:l=Fp,"data-bs-theme":u,"aria-labelledby":d,"aria-describedby":p,"aria-label":h,show:g=!1,animation:v=!0,backdrop:b=!0,keyboard:C=!0,onEscapeKeyDown:T,onShow:x,onHide:M,container:I,autoFocus:R=!0,enforceFocus:O=!0,restoreFocus:L=!0,restoreFocusOptions:H,onEntered:W,onExit:F,onExiting:K,onEnter:ae,onEntering:ce,onExited:ue,backdropClassName:ve,manager:Re}=ee,_e=le(ee,["bsPrefix","className","style","dialogClassName","contentClassName","children","dialogAs","data-bs-theme","aria-labelledby","aria-describedby","aria-label","show","animation","backdrop","keyboard","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClassName","manager"]);const[de,se]=S.useState({}),[D,J]=S.useState(!1),Ee=S.useRef(!1),$=S.useRef(!1),B=S.useRef(null),[Z,ye]=dM(),Ce=Pi(Ie,ye),Me=Rn(M),Ve=yc();n=me(n,"modal");const Tt=S.useMemo(()=>({onHide:Me}),[Me]);function Xt(){return Re||wS({isRTL:Ve})}function vt(je){if(!Oi)return;const qn=Xt().getScrollbarWidth()>0,gr=je.scrollHeight>Mi(je).documentElement.clientHeight;se({paddingRight:qn&&!gr?dw():void 0,paddingLeft:!qn&&gr?dw():void 0})}const St=Rn(()=>{Z&&vt(Z.dialog)});w0(()=>{Uf(window,"resize",St),B.current==null||B.current()});const We=()=>{Ee.current=!0},On=je=>{Ee.current&&Z&&je.target===Z.dialog&&($.current=!0),Ee.current=!1},Qt=()=>{J(!0),B.current=e0(Z.dialog,()=>{J(!1)})},Ms=je=>{je.target===je.currentTarget&&Qt()},Gr=je=>{if(b==="static"){Ms(je);return}if($.current||je.target!==je.currentTarget){$.current=!1;return}M==null||M()},Ot=je=>{C?T==null||T(je):(je.preventDefault(),b==="static"&&Qt())},Jt=(je,qn)=>{je&&vt(je),ae==null||ae(je,qn)},fr=je=>{B.current==null||B.current(),F==null||F(je)},Kr=(je,qn)=>{ce==null||ce(je,qn),gp(window,"resize",St)},pr=je=>{je&&(je.style.display=""),ue==null||ue(je),Uf(window,"resize",St)},Yr=S.useCallback(je=>w.jsx("div",Y(A({},je),{className:fe("".concat(n,"-backdrop"),ve,!v&&"show")})),[v,ve,n]),hr=A(A({},t),de);hr.display="block";const mr=je=>w.jsx("div",Y(A({role:"dialog"},je),{style:hr,className:fe(e,n,D&&"".concat(n,"-static"),!v&&"show"),onClick:b?Gr:void 0,onMouseUp:On,"data-bs-theme":u,"aria-label":h,"aria-labelledby":d,"aria-describedby":p,children:w.jsx(l,Y(A({},_e),{onMouseDown:We,className:r,contentClassName:i,children:a}))}));return w.jsx(Up.Provider,{value:Tt,children:w.jsx(gS,{show:g,ref:Ce,backdrop:b,container:I,keyboard:!0,autoFocus:R,enforceFocus:O,restoreFocus:L,restoreFocusOptions:H,onEscapeKeyDown:Ot,onShow:x,onHide:M,onEnter:Jt,onEntering:Kr,onEntered:W,onExit:fr,onExiting:K,onExited:pr,manager:Xt(),transition:v?MM:void 0,backdropTransition:v?OM:void 0,renderBackdrop:Yr,renderDialog:mr})})});ES.displayName="Modal";const $t=Object.assign(ES,{Body:vS,Header:bS,Title:_S,Footer:SS,Dialog:Fp,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),xS=S.forwardRef((a,i)=>{var l=a,{className:n,bsPrefix:e,as:t="div"}=l,r=le(l,["className","bsPrefix","as"]);return e=me(e,"nav-item"),w.jsx(t,A({ref:i,className:fe(n,e)},r))});xS.displayName="NavItem";const CS=S.forwardRef((d,u)=>{var p=d,{bsPrefix:n,className:e,as:t=vc,active:r,eventKey:i,disabled:a=!1}=p,l=le(p,["bsPrefix","className","as","active","eventKey","disabled"]);n=me(n,"nav-link");const[h,g]=jp(A({key:Si(i,l.href),active:r,disabled:a},l));return w.jsx(t,Y(A(A({},l),h),{ref:u,disabled:a,className:fe(e,n,a&&"disabled",g.isActive&&"active")}))});CS.displayName="NavLink";const TS=S.forwardRef((n,e)=>{const I=Qo(n,{activeKey:"onSelect"}),{as:t="div",bsPrefix:r,variant:i,fill:a=!1,justify:l=!1,navbar:u,navbarScroll:d,className:p,activeKey:h}=I,g=le(I,["as","bsPrefix","variant","fill","justify","navbar","navbarScroll","className","activeKey"]),v=me(r,"nav");let b,C,T=!1;const x=S.useContext(Rs),M=S.useContext(_p);return x?(b=x.bsPrefix,T=u==null?!0:u):M&&({cardHeaderBsPrefix:C}=M),w.jsx(fS,A({as:t,ref:e,activeKey:h,className:fe(p,{[v]:!T,["".concat(b,"-nav")]:T,["".concat(b,"-nav-scroll")]:T&&d,["".concat(C,"-").concat(i)]:!!C,["".concat(v,"-").concat(i)]:!!i,["".concat(v,"-fill")]:a,["".concat(v,"-justified")]:l})},g))});TS.displayName="Nav";const Tn=Object.assign(TS,{Item:xS,Link:CS}),IS=S.forwardRef((a,i)=>{var l=a,{bsPrefix:n,className:e,as:t}=l,r=le(l,["bsPrefix","className","as"]);n=me(n,"navbar-brand");const u=t||(r.href?"a":"span");return w.jsx(u,Y(A({},r),{ref:i,className:fe(e,n)}))});IS.displayName="NavbarBrand";const kS=S.forwardRef((i,r)=>{var a=i,{children:n,bsPrefix:e}=a,t=le(a,["children","bsPrefix"]);e=me(e,"navbar-collapse");const l=S.useContext(Rs);return w.jsx(n0,Y(A({in:!!(l&&l.expanded)},t),{children:w.jsx("div",{ref:r,className:e,children:n})}))});kS.displayName="NavbarCollapse";const AS=S.forwardRef((d,u)=>{var p=d,{bsPrefix:n,className:e,children:t,label:r="Toggle navigation",as:i="button",onClick:a}=p,l=le(p,["bsPrefix","className","children","label","as","onClick"]);n=me(n,"navbar-toggler");const{onToggle:h,expanded:g}=S.useContext(Rs)||{},v=Rn(b=>{a&&a(b),h&&h()});return i==="button"&&(l.type="button"),w.jsx(i,Y(A({},l),{ref:u,onClick:v,"aria-label":r,className:fe(e,n,!g&&"collapsed"),children:t||w.jsx("span",{className:"".concat(n,"-icon")})}))});AS.displayName="NavbarToggle";const Gf=new WeakMap,hw=(n,e)=>{if(!n||!e)return;const t=Gf.get(e)||new Map;Gf.set(e,t);let r=t.get(n);return r||(r=e.matchMedia(n),r.refCount=0,t.set(r.media,r)),r};function PM(n,e=typeof window=="undefined"?void 0:window){const t=hw(n,e),[r,i]=S.useState(()=>t?t.matches:!1);return Op(()=>{let a=hw(n,e);if(!a)return i(!1);let l=Gf.get(e);const u=()=>{i(a.matches)};return a.refCount++,a.addListener(u),u(),()=>{a.removeListener(u),a.refCount--,a.refCount<=0&&(l==null||l.delete(a.media)),a=void 0}},[n]),r}function DM(n){const e=Object.keys(n);function t(u,d){return u===d?d:u?"".concat(u," and ").concat(d):d}function r(u){return e[Math.min(e.indexOf(u)+1,e.length-1)]}function i(u){const d=r(u);let p=n[d];return typeof p=="number"?p="".concat(p-.2,"px"):p="calc(".concat(p," - 0.2px)"),"(max-width: ".concat(p,")")}function a(u){let d=n[u];return typeof d=="number"&&(d="".concat(d,"px")),"(min-width: ".concat(d,")")}function l(u,d,p){let h;typeof u=="object"?(h=u,p=d,d=!0):(d=d||!0,h={[u]:d});let g=S.useMemo(()=>Object.entries(h).reduce((v,[b,C])=>((C==="up"||C===!0)&&(v=t(v,a(b))),(C==="down"||C===!0)&&(v=t(v,i(b))),v),""),[JSON.stringify(h)]);return PM(g,p)}return l}const NM=DM({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),RS=S.forwardRef((a,i)=>{var l=a,{className:n,bsPrefix:e,as:t="div"}=l,r=le(l,["className","bsPrefix","as"]);return e=me(e,"offcanvas-body"),w.jsx(t,A({ref:i,className:fe(n,e)},r))});RS.displayName="OffcanvasBody";const LM={[gn]:"show",[er]:"show"},MS=S.forwardRef((p,d)=>{var h=p,{bsPrefix:n,className:e,children:t,in:r=!1,mountOnEnter:i=!1,unmountOnExit:a=!1,appear:l=!1}=h,u=le(h,["bsPrefix","className","children","in","mountOnEnter","unmountOnExit","appear"]);return n=me(n,"offcanvas"),w.jsx(wc,Y(A({ref:d,addEndListener:yp,in:r,mountOnEnter:i,unmountOnExit:a,appear:l},u),{childRef:As(t),children:(g,v)=>S.cloneElement(t,Y(A({},v),{className:fe(e,t.props.className,(g===gn||g===mi)&&"".concat(n,"-toggling"),LM[g])}))}))});MS.displayName="OffcanvasToggling";const OS=S.forwardRef((l,a)=>{var u=l,{bsPrefix:n,className:e,closeLabel:t="Close",closeButton:r=!1}=u,i=le(u,["bsPrefix","className","closeLabel","closeButton"]);return n=me(n,"offcanvas-header"),w.jsx(zp,Y(A({ref:a},i),{className:fe(e,n),closeLabel:t,closeButton:r}))});OS.displayName="OffcanvasHeader";const jM=Zo("h5"),PS=S.forwardRef((a,i)=>{var l=a,{className:n,bsPrefix:e,as:t=jM}=l,r=le(l,["className","bsPrefix","as"]);return e=me(e,"offcanvas-title"),w.jsx(t,A({ref:i,className:fe(n,e)},r))});PS.displayName="OffcanvasTitle";function $M(n){return w.jsx(MS,A({},n))}function UM(n){return w.jsx(ar,A({},n))}const DS=S.forwardRef((ve,ue)=>{var Re=ve,{bsPrefix:n,className:e,children:t,"aria-labelledby":r,placement:i="start",responsive:a,show:l=!1,backdrop:u=!0,keyboard:d=!0,scroll:p=!1,onEscapeKeyDown:h,onShow:g,onHide:v,container:b,autoFocus:C=!0,enforceFocus:T=!0,restoreFocus:x=!0,restoreFocusOptions:M,onEntered:I,onExit:R,onExiting:O,onEnter:L,onEntering:H,onExited:W,backdropClassName:F,manager:K,renderStaticNode:ae=!1}=Re,ce=le(Re,["bsPrefix","className","children","aria-labelledby","placement","responsive","show","backdrop","keyboard","scroll","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClassName","manager","renderStaticNode"]);const _e=S.useRef();n=me(n,"offcanvas");const[Ie,pe]=S.useState(!1),ee=Rn(v),de=NM(a||"xs","up");S.useEffect(()=>{pe(a?l&&!de:l)},[l,a,de]);const se=S.useMemo(()=>({onHide:ee}),[ee]);function D(){return K||(p?(_e.current||(_e.current=new yS({handleContainerOverflow:!1})),_e.current):wS())}const J=(Z,...ye)=>{Z&&(Z.style.visibility="visible"),L==null||L(Z,...ye)},Ee=(Z,...ye)=>{Z&&(Z.style.visibility=""),W==null||W(...ye)},$=S.useCallback(Z=>w.jsx("div",Y(A({},Z),{className:fe("".concat(n,"-backdrop"),F)})),[F,n]),B=Z=>w.jsx("div",Y(A(A({},Z),ce),{className:fe(e,a?"".concat(n,"-").concat(a):n,"".concat(n,"-").concat(i)),"aria-labelledby":r,children:t}));return w.jsxs(w.Fragment,{children:[!Ie&&(a||ae)&&B({}),w.jsx(Up.Provider,{value:se,children:w.jsx(gS,{show:Ie,ref:ue,backdrop:u,container:b,keyboard:d,autoFocus:C,enforceFocus:T&&!p,restoreFocus:x,restoreFocusOptions:M,onEscapeKeyDown:h,onShow:g,onHide:ee,onEnter:J,onEntering:H,onEntered:I,onExit:R,onExiting:O,onExited:Ee,manager:D(),transition:$M,backdropTransition:UM,renderBackdrop:$,renderDialog:B})})]})});DS.displayName="Offcanvas";const FM=Object.assign(DS,{Body:RS,Header:OS,Title:PS}),NS=S.forwardRef((r,t)=>{var i=r,{onHide:n}=i,e=le(i,["onHide"]);const a=S.useContext(Rs),l=Rn(()=>{a==null||a.onToggle==null||a.onToggle(),n==null||n()});return w.jsx(FM,Y(A({ref:t,show:!!(a!=null&&a.expanded)},e),{renderStaticNode:!0,onHide:l}))});NS.displayName="NavbarOffcanvas";const LS=S.forwardRef((a,i)=>{var l=a,{className:n,bsPrefix:e,as:t="span"}=l,r=le(l,["className","bsPrefix","as"]);return e=me(e,"navbar-text"),w.jsx(t,A({ref:i,className:fe(n,e)},r))});LS.displayName="NavbarText";const jS=S.forwardRef((n,e)=>{const R=Qo(n,{expanded:"onToggle"}),{bsPrefix:t,expand:r=!0,variant:i="light",bg:a,fixed:l,sticky:u,className:d,as:p="nav",expanded:h,onToggle:g,onSelect:v,collapseOnSelect:b=!1}=R,C=le(R,["bsPrefix","expand","variant","bg","fixed","sticky","className","as","expanded","onToggle","onSelect","collapseOnSelect"]),T=me(t,"navbar"),x=S.useCallback((...O)=>{v==null||v(...O),b&&h&&(g==null||g(!1))},[v,b,h,g]);C.role===void 0&&p!=="nav"&&(C.role="navigation");let M="".concat(T,"-expand");typeof r=="string"&&(M="".concat(M,"-").concat(r));const I=S.useMemo(()=>({onToggle:()=>g==null?void 0:g(!h),bsPrefix:T,expanded:!!h,expand:r}),[T,h,r,g]);return w.jsx(Rs.Provider,{value:I,children:w.jsx(ks.Provider,{value:x,children:w.jsx(p,Y(A({ref:e},C),{className:fe(d,T,r&&M,i&&"".concat(T,"-").concat(i),a&&"bg-".concat(a),u&&"sticky-".concat(u),l&&"fixed-".concat(l))}))})})});jS.displayName="Navbar";const El=Object.assign(jS,{Brand:IS,Collapse:kS,Offcanvas:NS,Text:LS,Toggle:AS}),zM=()=>{};function BM(n,e,{disabled:t,clickTrigger:r}={}){const i=e||zM;P0(n,i,{disabled:t,clickTrigger:r});const a=Ct(l=>{Zv(l)&&i(l)});S.useEffect(()=>{if(t||n==null)return;const l=Mi(Ol(n));let u=(l.defaultView||window).event;const d=tr(l,"keyup",p=>{if(p===u){u=void 0;return}a(p)});return()=>{d()}},[n,t,a])}const $S=S.forwardRef((n,e)=>{const{flip:t,offset:r,placement:i,containerPadding:a,popperConfig:l={},transition:u,runTransition:d}=n,[p,h]=Ff(),[g,v]=Ff(),b=sa(h,e),C=Hf(n.container),T=Hf(n.target),[x,M]=S.useState(!n.show),I=O0(T,p,D0({placement:i,enableEvents:!!n.show,containerPadding:a||5,flip:t,offset:r,arrowElement:g,popperConfig:l}));n.show&&x&&M(!1);const R=(...ce)=>{M(!0),n.onExited&&n.onExited(...ce)},O=n.show||!x;if(BM(p,n.onHide,{disabled:!n.rootClose||n.rootCloseDisabled,clickTrigger:n.rootCloseEvent}),!O)return null;const{onExit:L,onExiting:H,onEnter:W,onEntering:F,onEntered:K}=n;let ae=n.children(Object.assign({},I.attributes.popper,{style:I.styles.popper,ref:b}),{popper:I,placement:i,show:!!n.show,arrowProps:Object.assign({},I.attributes.arrow,{style:I.styles.arrow,ref:v})});return ae=Vf(u,d,{in:!!n.show,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:ae,onExit:L,onExiting:H,onExited:R,onEnter:W,onEntering:F,onEntered:K}),C?fs.createPortal(ae,C):null});$S.displayName="Overlay";const US=S.forwardRef((a,i)=>{var l=a,{className:n,bsPrefix:e,as:t="div"}=l,r=le(l,["className","bsPrefix","as"]);return e=me(e,"popover-header"),w.jsx(t,A({ref:i,className:fe(n,e)},r))});US.displayName="PopoverHeader";const Bp=S.forwardRef((a,i)=>{var l=a,{className:n,bsPrefix:e,as:t="div"}=l,r=le(l,["className","bsPrefix","as"]);return e=me(e,"popover-body"),w.jsx(t,A({ref:i,className:fe(n,e)},r))});Bp.displayName="PopoverBody";function FS(n,e){let t=n;return n==="left"?t=e?"end":"start":n==="right"&&(t=e?"start":"end"),t}function zS(n="absolute"){return{position:n,top:"0",left:"0",opacity:"0",pointerEvents:"none"}}const BS=S.forwardRef((v,g)=>{var b=v,{bsPrefix:n,placement:e="right",className:t,style:r,children:i,body:a,arrowProps:l,hasDoneInitialMeasure:u,popper:d,show:p}=b,h=le(b,["bsPrefix","placement","className","style","children","body","arrowProps","hasDoneInitialMeasure","popper","show"]);const C=me(n,"popover"),T=yc(),[x]=(e==null?void 0:e.split("-"))||[],M=FS(x,T);let I=r;return p&&!u&&(I=A(A({},r),zS(d==null?void 0:d.strategy))),w.jsxs("div",Y(A({ref:g,role:"tooltip",style:I,"x-placement":x,className:fe(t,C,x&&"bs-popover-".concat(M))},h),{children:[w.jsx("div",A({className:"popover-arrow"},l)),a?w.jsx(Bp,{children:i}):i]}))});BS.displayName="Popover";const qM=Object.assign(BS,{Header:US,Body:Bp,POPPER_OFFSET:[0,8]}),qS=S.forwardRef((g,h)=>{var v=g,{bsPrefix:n,placement:e="right",className:t,style:r,children:i,arrowProps:a,hasDoneInitialMeasure:l,popper:u,show:d}=v,p=le(v,["bsPrefix","placement","className","style","children","arrowProps","hasDoneInitialMeasure","popper","show"]);n=me(n,"tooltip");const b=yc(),[C]=(e==null?void 0:e.split("-"))||[],T=FS(C,b);let x=r;return d&&!l&&(x=A(A({},r),zS(u==null?void 0:u.strategy))),w.jsxs("div",Y(A({ref:h,style:x,role:"tooltip","x-placement":C,className:fe(t,n,"bs-tooltip-".concat(T))},p),{children:[w.jsx("div",A({className:"tooltip-arrow"},a)),w.jsx("div",{className:"".concat(n,"-inner"),children:i})]}))});qS.displayName="Tooltip";const HS=Object.assign(qS,{TOOLTIP_OFFSET:[0,6]});function HM(n){const e=S.useRef(null),t=me(void 0,"popover"),r=me(void 0,"tooltip"),i=S.useMemo(()=>({name:"offset",options:{offset:()=>{if(n)return n;if(e.current){if(Wf(e.current,t))return qM.POPPER_OFFSET;if(Wf(e.current,r))return HS.TOOLTIP_OFFSET}return[0,0]}}}),[n,t,r]);return[e,[i]]}function VM(n,e){const{ref:t}=n,{ref:r}=e;n.ref=t.__wrapped||(t.__wrapped=i=>t(Gl(i))),e.ref=r.__wrapped||(r.__wrapped=i=>r(Gl(i)))}const VS=S.forwardRef((d,u)=>{var p=d,{children:n,transition:e=ar,popperConfig:t={},rootClose:r=!1,placement:i="top",show:a=!1}=p,l=le(p,["children","transition","popperConfig","rootClose","placement","show"]);const h=S.useRef({}),[g,v]=S.useState(null),[b,C]=HM(l.offset),T=Pi(u,b),x=e===!0?ar:e||void 0,M=Rn(I=>{v(I),t==null||t.onFirstUpdate==null||t.onFirstUpdate(I)});return Op(()=>{g&&l.target&&(h.current.scheduleUpdate==null||h.current.scheduleUpdate())},[g,l.target]),S.useEffect(()=>{a||v(null)},[a]),w.jsx($S,Y(A({},l),{ref:T,popperConfig:Y(A({},t),{modifiers:C.concat(t.modifiers||[]),onFirstUpdate:M}),transition:x,rootClose:r,placement:i,show:a,children:(I,{arrowProps:R,popper:O,show:L})=>{var H;VM(I,R);const W=O==null?void 0:O.placement,F=Object.assign(h.current,{state:O==null?void 0:O.state,scheduleUpdate:O==null?void 0:O.update,placement:W,outOfBoundaries:(O==null||(H=O.state)==null||(H=H.modifiersData.hide)==null?void 0:H.isReferenceHidden)||!1,strategy:t.strategy}),K=!!g;return typeof n=="function"?n(Y(A(Y(A({},I),{placement:W,show:L}),!e&&L&&{className:"show"}),{popper:F,arrowProps:R,hasDoneInitialMeasure:K})):S.cloneElement(n,Y(A({},I),{placement:W,arrowProps:R,popper:F,hasDoneInitialMeasure:K,className:fe(n.props.className,!e&&L&&"show"),style:A(A({},n.props.style),I.style)}))}}))});VS.displayName="Overlay";function WM(n){return n&&typeof n=="object"?n:{show:n,hide:n}}function mw(n,e,t){const[r]=e,i=r.currentTarget,a=r.relatedTarget||r.nativeEvent[t];(!a||a!==i)&&!Bo(i,a)&&n(...e)}Fe.oneOf(["click","hover","focus"]);const GM=g=>{var v=g,{trigger:n=["hover","focus"],overlay:e,children:t,popperConfig:r={},show:i,defaultShow:a=!1,onToggle:l,delay:u,placement:d,flip:p=d&&d.indexOf("auto")!==-1}=v,h=le(v,["trigger","overlay","children","popperConfig","show","defaultShow","onToggle","delay","placement","flip"]);const b=S.useRef(null),C=Pi(b,As(t)),T=S0(),x=S.useRef(""),[M,I]=Qv(i,a,l),R=WM(u),{onFocus:O,onBlur:L,onClick:H}=typeof t!="function"?S.Children.only(t).props:{},W=pe=>{C(Gl(pe))},F=S.useCallback(()=>{if(T.clear(),x.current="show",!R.show){I(!0);return}T.set(()=>{x.current==="show"&&I(!0)},R.show)},[R.show,I,T]),K=S.useCallback(()=>{if(T.clear(),x.current="hide",!R.hide){I(!1);return}T.set(()=>{x.current==="hide"&&I(!1)},R.hide)},[R.hide,I,T]),ae=S.useCallback((...pe)=>{F(),O==null||O(...pe)},[F,O]),ce=S.useCallback((...pe)=>{K(),L==null||L(...pe)},[K,L]),ue=S.useCallback((...pe)=>{I(!M),H==null||H(...pe)},[H,I,M]),ve=S.useCallback((...pe)=>{mw(F,pe,"fromElement")},[F]),Re=S.useCallback((...pe)=>{mw(K,pe,"toElement")},[K]),_e=n==null?[]:[].concat(n),Ie={ref:W};return _e.indexOf("click")!==-1&&(Ie.onClick=ue),_e.indexOf("focus")!==-1&&(Ie.onFocus=ae,Ie.onBlur=ce),_e.indexOf("hover")!==-1&&(Ie.onMouseOver=ve,Ie.onMouseOut=Re),w.jsxs(w.Fragment,{children:[typeof t=="function"?t(Ie):S.cloneElement(t,Ie),w.jsx(VS,Y(A({},h),{show:M,onHide:K,flip:p,placement:d,popperConfig:r,target:b.current,children:e}))]})},bi=S.forwardRef((d,u)=>{var p=d,{bsPrefix:n,variant:e,animation:t="border",size:r,as:i="div",className:a}=p,l=le(p,["bsPrefix","variant","animation","size","as","className"]);n=me(n,"spinner");const h="".concat(n,"-").concat(t);return w.jsx(i,Y(A({ref:u},l),{className:fe(a,h,r&&"".concat(h,"-").concat(r),e&&"text-".concat(e))}))});bi.displayName="Spinner";const KM={[gn]:"showing",[mi]:"showing show"},WS=S.forwardRef((n,e)=>w.jsx(ar,Y(A({},n),{ref:e,transitionClasses:KM})));WS.displayName="ToastFade";const GS=S.createContext({onClose(){}}),KS=S.forwardRef((d,u)=>{var p=d,{bsPrefix:n,closeLabel:e="Close",closeVariant:t,closeButton:r=!0,className:i,children:a}=p,l=le(p,["bsPrefix","closeLabel","closeVariant","closeButton","className","children"]);n=me(n,"toast-header");const h=S.useContext(GS),g=Rn(v=>{h==null||h.onClose==null||h.onClose(v)});return w.jsxs("div",Y(A({ref:u},l),{className:fe(n,i),children:[a,r&&w.jsx(ea,{"aria-label":e,variant:t,onClick:g,"data-dismiss":"toast"})]}))});KS.displayName="ToastHeader";const YS=S.forwardRef((a,i)=>{var l=a,{className:n,bsPrefix:e,as:t="div"}=l,r=le(l,["className","bsPrefix","as"]);return e=me(e,"toast-body"),w.jsx(t,A({ref:i,className:fe(n,e)},r))});YS.displayName="ToastBody";const XS=S.forwardRef((M,x)=>{var I=M,{bsPrefix:n,className:e,transition:t=WS,show:r=!0,animation:i=!0,delay:a=5e3,autohide:l=!1,onClose:u,onEntered:d,onExit:p,onExiting:h,onEnter:g,onEntering:v,onExited:b,bg:C}=I,T=le(I,["bsPrefix","className","transition","show","animation","delay","autohide","onClose","onEntered","onExit","onExiting","onEnter","onEntering","onExited","bg"]);n=me(n,"toast");const R=S.useRef(a),O=S.useRef(u);S.useEffect(()=>{R.current=a,O.current=u},[a,u]);const L=S0(),H=!!(l&&r),W=S.useCallback(()=>{H&&(O.current==null||O.current())},[H]);S.useEffect(()=>{L.set(W,R.current)},[L,W]);const F=S.useMemo(()=>({onClose:u}),[u]),K=!!(t&&i),ae=w.jsx("div",Y(A({},T),{ref:x,className:fe(n,e,C&&"bg-".concat(C),!K&&(r?"show":"hide")),role:"alert","aria-live":"assertive","aria-atomic":"true"}));return w.jsx(GS.Provider,{value:F,children:K&&t?w.jsx(t,{in:r,onEnter:g,onEntering:v,onEntered:d,onExit:p,onExiting:h,onExited:b,unmountOnExit:!0,children:ae}):ae})});XS.displayName="Toast";const uf=Object.assign(XS,{Body:YS,Header:KS}),YM={"top-start":"top-0 start-0","top-center":"top-0 start-50 translate-middle-x","top-end":"top-0 end-0","middle-start":"top-50 start-0 translate-middle-y","middle-center":"top-50 start-50 translate-middle","middle-end":"top-50 end-0 translate-middle-y","bottom-start":"bottom-0 start-0","bottom-center":"bottom-0 start-50 translate-middle-x","bottom-end":"bottom-0 end-0"},QS=S.forwardRef((u,l)=>{var d=u,{bsPrefix:n,position:e,containerPosition:t,className:r,as:i="div"}=d,a=le(d,["bsPrefix","position","containerPosition","className","as"]);return n=me(n,"toast-container"),w.jsx(i,Y(A({ref:l},a),{className:fe(n,e&&YM[e],t&&"position-".concat(t),r)}))});QS.displayName="ToastContainer";var JS="https://js.stripe.com/v3",XM=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/;var QM=function(){for(var e=document.querySelectorAll('script[src^="'.concat(JS,'"]')),t=0;t<e.length;t++){var r=e[t];if(XM.test(r.src))return r}return null},gw=function(e){var t="",r=document.createElement("script");r.src="".concat(JS).concat(t);var i=document.head||document.body;if(!i)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return i.appendChild(r),r},JM=function(e,t){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"3.4.1",startTime:t})},Eo=null,xl=null,Cl=null,ZM=function(e){return function(){e(new Error("Failed to load Stripe.js"))}},eO=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}},tO=function(e){return Eo!==null?Eo:(Eo=new Promise(function(t,r){if(typeof window=="undefined"||typeof document=="undefined"){t(null);return}if(window.Stripe){t(window.Stripe);return}try{var i=QM();if(!(i&&e)){if(!i)i=gw(e);else if(i&&Cl!==null&&xl!==null){var a;i.removeEventListener("load",Cl),i.removeEventListener("error",xl),(a=i.parentNode)===null||a===void 0||a.removeChild(i),i=gw(e)}}Cl=eO(t,r),xl=ZM(r),i.addEventListener("load",Cl),i.addEventListener("error",xl)}catch(l){r(l);return}}),Eo.catch(function(t){return Eo=null,Promise.reject(t)}))},nO=function(e,t,r){if(e===null)return null;var i=e.apply(void 0,t);return JM(i,r),i},xo,ZS=!1,eb=function(){return xo||(xo=tO(null).catch(function(e){return xo=null,Promise.reject(e)}),xo)};Promise.resolve().then(function(){return eb()}).catch(function(n){ZS||console.warn(n)});var rO=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];ZS=!0;var i=Date.now();return eb().then(function(a){return nO(a,t,i)})};function yw(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function ww(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?yw(Object(t),!0).forEach(function(r){tb(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):yw(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Pl(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Pl=function(e){return typeof e}:Pl=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pl(n)}function tb(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function sO(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function iO(n,e){if(n==null)return{};var t=sO(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function nb(n,e){return oO(n)||aO(n,e)||lO(n,e)||cO()}function oO(n){if(Array.isArray(n))return n}function aO(n,e){var t=n&&(typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"]);if(t!=null){var r=[],i=!0,a=!1,l,u;try{for(t=t.call(n);!(i=(l=t.next()).done)&&(r.push(l.value),!(e&&r.length===e));i=!0);}catch(d){a=!0,u=d}finally{try{!i&&t.return!=null&&t.return()}finally{if(a)throw u}}return r}}function lO(n,e){if(n){if(typeof n=="string")return vw(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return vw(n,e)}}function vw(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function cO(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var rn=function(e,t,r){var i=!!r,a=oe.useRef(r);oe.useEffect(function(){a.current=r},[r]),oe.useEffect(function(){if(!i||!e)return function(){};var l=function(){a.current&&a.current.apply(a,arguments)};return e.on(t,l),function(){e.off(t,l)}},[i,t,e,a])},Kf=function(e){var t=oe.useRef(e);return oe.useEffect(function(){t.current=e},[e]),t.current},_i=function(e){return e!==null&&Pl(e)==="object"},uO=function(e){return _i(e)&&typeof e.then=="function"},dO=function(e){return _i(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},Sw="[object Object]",fO=function n(e,t){if(!_i(e)||!_i(t))return e===t;var r=Array.isArray(e),i=Array.isArray(t);if(r!==i)return!1;var a=Object.prototype.toString.call(e)===Sw,l=Object.prototype.toString.call(t)===Sw;if(a!==l)return!1;if(!a&&!r)return e===t;var u=Object.keys(e),d=Object.keys(t);if(u.length!==d.length)return!1;for(var p={},h=0;h<u.length;h+=1)p[u[h]]=!0;for(var g=0;g<d.length;g+=1)p[d[g]]=!0;var v=Object.keys(p);if(v.length!==u.length)return!1;var b=e,C=t,T=function(M){return n(b[M],C[M])};return v.every(T)},rb=function(e,t,r){return _i(e)?Object.keys(e).reduce(function(i,a){var l=!_i(t)||!fO(e[a],t[a]);return r.includes(a)?(l&&console.warn("Unsupported prop change: options.".concat(a," is not a mutable property.")),i):l?ww(ww({},i||{}),{},tb({},a,e[a])):i},null):null},sb="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",bw=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:sb;if(e===null||dO(e))return e;throw new Error(t)},pO=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:sb;if(uO(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(i){return bw(i,t)})};var r=bw(e,t);return r===null?{tag:"empty"}:{tag:"sync",stripe:r}},hO=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"3.9.0"}),e.registerAppInfo({name:"react-stripe-js",version:"3.9.0",url:"https://stripe.com/docs/stripe-js/react"}))},Tc=oe.createContext(null);Tc.displayName="ElementsContext";var ib=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},ob=function(e){var t=e.stripe,r=e.options,i=e.children,a=oe.useMemo(function(){return pO(t)},[t]),l=oe.useState(function(){return{stripe:a.tag==="sync"?a.stripe:null,elements:a.tag==="sync"?a.stripe.elements(r):null}}),u=nb(l,2),d=u[0],p=u[1];oe.useEffect(function(){var v=!0,b=function(T){p(function(x){return x.stripe?x:{stripe:T,elements:T.elements(r)}})};return a.tag==="async"&&!d.stripe?a.stripePromise.then(function(C){C&&v&&b(C)}):a.tag==="sync"&&!d.stripe&&b(a.stripe),function(){v=!1}},[a,d,r]);var h=Kf(t);oe.useEffect(function(){h!==null&&h!==t&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[h,t]);var g=Kf(r);return oe.useEffect(function(){if(d.elements){var v=rb(r,g,["clientSecret","fonts"]);v&&d.elements.update(v)}},[r,g,d.elements]),oe.useEffect(function(){hO(d.stripe)},[d.stripe]),oe.createElement(Tc.Provider,{value:d},i)};ob.propTypes={stripe:Fe.any,options:Fe.object};var mO=function(e){var t=oe.useContext(Tc);return ib(t,e)},gO=function(){var e=mO("calls useElements()"),t=e.elements;return t};Fe.func.isRequired;var ab=oe.createContext(null);ab.displayName="CheckoutSdkContext";var yO=function(e,t){if(!e)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(t," in an <CheckoutProvider> provider."));return e},wO=oe.createContext(null);wO.displayName="CheckoutContext";Fe.any,Fe.shape({fetchClientSecret:Fe.func.isRequired,elementsOptions:Fe.object}).isRequired;var Yf=function(e){var t=oe.useContext(ab),r=oe.useContext(Tc);if(t&&r)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return t?yO(t,e):ib(r,e)},vO=["mode"],SO=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},lt=function(e,t){var r="".concat(SO(e),"Element"),i=function(d){var p=d.id,h=d.className,g=d.options,v=g===void 0?{}:g,b=d.onBlur,C=d.onFocus,T=d.onReady,x=d.onChange,M=d.onEscape,I=d.onClick,R=d.onLoadError,O=d.onLoaderStart,L=d.onNetworksChange,H=d.onConfirm,W=d.onCancel,F=d.onShippingAddressChange,K=d.onShippingRateChange,ae=Yf("mounts <".concat(r,">")),ce="elements"in ae?ae.elements:null,ue="checkoutSdk"in ae?ae.checkoutSdk:null,ve=oe.useState(null),Re=nb(ve,2),_e=Re[0],Ie=Re[1],pe=oe.useRef(null),ee=oe.useRef(null);rn(_e,"blur",b),rn(_e,"focus",C),rn(_e,"escape",M),rn(_e,"click",I),rn(_e,"loaderror",R),rn(_e,"loaderstart",O),rn(_e,"networkschange",L),rn(_e,"confirm",H),rn(_e,"cancel",W),rn(_e,"shippingaddresschange",F),rn(_e,"shippingratechange",K),rn(_e,"change",x);var de;T&&(e==="expressCheckout"?de=T:de=function(){T(_e)}),rn(_e,"ready",de),oe.useLayoutEffect(function(){if(pe.current===null&&ee.current!==null&&(ce||ue)){var D=null;if(ue)switch(e){case"payment":D=ue.createPaymentElement(v);break;case"address":if("mode"in v){var J=v.mode,Ee=iO(v,vO);if(J==="shipping")D=ue.createShippingAddressElement(Ee);else if(J==="billing")D=ue.createBillingAddressElement(Ee);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":D=ue.createExpressCheckoutElement(v);break;case"currencySelector":D=ue.createCurrencySelectorElement();break;case"taxId":D=ue.createTaxIdElement(v);break;default:throw new Error("Invalid Element type ".concat(r,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else ce&&(D=ce.create(e,v));pe.current=D,Ie(D),D&&D.mount(ee.current)}},[ce,ue,v]);var se=Kf(v);return oe.useEffect(function(){if(pe.current){var D=rb(v,se,["paymentRequest"]);D&&"update"in pe.current&&pe.current.update(D)}},[v,se]),oe.useLayoutEffect(function(){return function(){if(pe.current&&typeof pe.current.destroy=="function")try{pe.current.destroy(),pe.current=null}catch(D){}}},[]),oe.createElement("div",{id:p,className:h,ref:ee})},a=function(d){Yf("mounts <".concat(r,">"));var p=d.id,h=d.className;return oe.createElement("div",{id:p,className:h})},l=t?a:i;return l.propTypes={id:Fe.string,className:Fe.string,onChange:Fe.func,onBlur:Fe.func,onFocus:Fe.func,onReady:Fe.func,onEscape:Fe.func,onClick:Fe.func,onLoadError:Fe.func,onLoaderStart:Fe.func,onNetworksChange:Fe.func,onConfirm:Fe.func,onCancel:Fe.func,onShippingAddressChange:Fe.func,onShippingRateChange:Fe.func,options:Fe.object},l.displayName=r,l.__elementType=e,l},ct=typeof window=="undefined",bO=oe.createContext(null);bO.displayName="EmbeddedCheckoutProviderContext";var _O=function(){var e=Yf("calls useStripe()"),t=e.stripe;return t};lt("auBankAccount",ct);var _w=lt("card",ct);lt("cardNumber",ct);lt("cardExpiry",ct);lt("cardCvc",ct);lt("fpxBank",ct);lt("iban",ct);lt("idealBank",ct);lt("p24Bank",ct);lt("epsBank",ct);lt("payment",ct);lt("expressCheckout",ct);lt("currencySelector",ct);lt("paymentRequestButton",ct);lt("linkAuthentication",ct);lt("address",ct);lt("shippingAddress",ct);lt("paymentMethodMessaging",ct);lt("affirmMessage",ct);lt("afterpayClearpayMessage",ct);lt("taxId",ct);const EO={style:{base:{fontSize:"16px",color:"#424770","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}},xO=({onSuccess:n,onError:e})=>{const t=_O(),r=gO(),[i,a]=S.useState(!1),[l,u]=S.useState(null);S.useEffect(()=>{E(null,null,function*(){try{const h=yield Ne.post("/payments/create-payment-intent",{membership_type:"verified_human",amount_cents:500,currency:"usd"});u(h.data)}catch(h){console.error("Error creating payment intent:",h),e("Failed to initialize payment. Please try again.")}})},[e]);const d=p=>E(null,null,function*(){if(p.preventDefault(),!t||!r||!l){e("Payment system not ready. Please wait and try again.");return}a(!0);const h=r.getElement(_w);try{const{error:g,paymentIntent:v}=yield t.confirmCardPayment(l.client_secret,{payment_method:{card:h,billing_details:{}}});g?(console.error("Payment failed:",g),e(g.message||"Payment failed. Please try again.")):v.status==="succeeded"?n({payment_intent_id:v.id,amount:v.amount/100}):e("Payment was not completed. Please try again.")}catch(g){console.error("Unexpected payment error:",g),e("An unexpected error occurred. Please try again.")}finally{a(!1)}});return l?w.jsxs(sn,{onSubmit:d,children:[w.jsxs("div",{className:"mb-4",children:[w.jsx("h5",{className:"mb-3",children:"Payment Information"}),w.jsx("div",{className:"d-flex justify-content-center mb-3",children:w.jsxs("small",{className:"text-muted d-flex align-items-center",children:[w.jsx("i",{className:"fas fa-shield-alt text-success me-1"}),"256-bit SSL Encryption",w.jsx("span",{className:"mx-2",children:""}),w.jsx("i",{className:"fas fa-lock text-success me-1"}),"PCI Compliant"]})}),w.jsx("div",{className:"border rounded p-3 bg-light",children:w.jsx(_w,{options:EO})}),w.jsx("small",{className:"text-muted mt-2 d-block",children:"Your payment information is encrypted and processed securely by Stripe. We never store your card details."})]}),w.jsx(Sc,{variant:"info",className:"mb-4",children:w.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[w.jsxs("div",{children:[w.jsx("h6",{className:"mb-1",children:"Verified Human Membership"}),w.jsx("small",{children:"Billed monthly  Cancel anytime"})]}),w.jsx("div",{className:"text-end",children:w.jsxs("h5",{className:"mb-0 text-success",children:["$",l.amount_cents/100]})})]})}),w.jsx(jt,{type:"submit",variant:"primary",size:"lg",className:"w-100",disabled:!t||i,children:i?w.jsxs(w.Fragment,{children:[w.jsx(bi,{animation:"border",size:"sm",className:"me-2"}),"Processing Payment..."]}):w.jsxs(w.Fragment,{children:[w.jsx("i",{className:"fas fa-credit-card me-2"}),"Complete Payment ($5.00)"]})})]}):w.jsxs("div",{className:"text-center p-4",children:[w.jsx(bi,{animation:"border",role:"status",children:w.jsx("span",{className:"visually-hidden",children:"Loading payment form..."})}),w.jsx("p",{className:"mt-2 text-muted",children:"Preparing secure payment..."})]})},CO=({show:n,onHide:e,onMembershipUpdate:t})=>{const[r,i]=S.useState(null),[a,l]=S.useState(!1),[u,d]=S.useState(!1);S.useEffect(()=>{n&&!r&&E(null,null,function*(){try{const b=yield Ne.post("/payments/create-payment-intent",{membership_type:"verified_human",amount_cents:500}),C=yield rO(b.data.publishable_key);i(C)}catch(b){console.error("Error initializing Stripe:",b),De.error("Failed to initialize payment system")}})},[n,r]);const p=v=>E(null,null,function*(){l(!0),d(!0);let b=0;const C=10,T=()=>E(null,null,function*(){try{const x=yield Ne.get("/payments/subscription-status");x.data.is_active&&x.data.payment_verified?(d(!1),De.success(" Payment successful! Your Verified Human membership is now active."),t&&t(),setTimeout(()=>{e(),l(!1)},2e3)):b<C?(b++,setTimeout(T,3e3)):(d(!1),De.warning("Payment processed but membership activation is taking longer than expected. Please refresh the page."))}catch(x){console.error("Error checking membership status:",x),d(!1),De.error("Payment processed but there was an error activating your membership. Please contact support.")}});setTimeout(T,2e3)}),h=v=>{De.error(v)},g=()=>{u||(e(),l(!1))};return w.jsxs($t,{show:n,onHide:g,centered:!0,size:"lg",backdrop:u?"static":!0,children:[w.jsx($t.Header,{closeButton:!u,children:w.jsxs($t.Title,{children:[w.jsx("i",{className:"fas fa-check-circle text-primary me-2"}),a?"Payment Processing...":"Secure Payment"]})}),w.jsx($t.Body,{children:a?w.jsxs("div",{className:"text-center py-4",children:[w.jsx("div",{className:"mb-4",children:w.jsx("i",{className:"fas fa-check-circle text-success",style:{fontSize:"4rem"}})}),w.jsx("h4",{className:"text-success mb-3",children:"Payment Successful!"}),u?w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"mb-3",children:w.jsx(bi,{animation:"border",variant:"primary"})}),w.jsxs("p",{className:"text-muted",children:["Activating your Verified Human membership...",w.jsx("br",{}),"This may take a few moments."]})]}):w.jsx("p",{className:"text-success",children:"Your membership is now active!"})]}):w.jsx(Lt,{className:"border-0",children:w.jsxs(Lt.Body,{children:[w.jsxs(Sc,{variant:"info",className:"mb-4",children:[w.jsxs("h6",{children:[w.jsx("i",{className:"fas fa-star me-2"}),"Verified Human Benefits:"]}),w.jsxs("ul",{className:"mb-0 text-start",children:[w.jsxs("li",{children:[w.jsx("strong",{children:"Verified Badge"})," - Blue checkmark on your profile"]}),w.jsxs("li",{children:[w.jsx("strong",{children:"AI Match Priority"})," - Higher ranking in trade matches"]}),w.jsxs("li",{children:[w.jsx("strong",{children:"Trust Signal"})," - Build credibility with other users"]}),w.jsxs("li",{children:[w.jsx("strong",{children:"Enhanced Security"})," - Reduces spam and fake accounts"]})]})]}),r?w.jsx(ob,{stripe:r,children:w.jsx(xO,{onSuccess:p,onError:h})}):w.jsxs("div",{className:"text-center p-4",children:[w.jsx(bi,{animation:"border",role:"status",children:w.jsx("span",{className:"visually-hidden",children:"Loading..."})}),w.jsx("p",{className:"mt-2 text-muted",children:"Initializing secure payment system..."})]})]})})}),!a&&w.jsxs($t.Footer,{className:"d-flex justify-content-between",children:[w.jsx(jt,{variant:"outline-secondary",onClick:g,children:"Cancel"}),w.jsx("div",{className:"text-end",children:w.jsxs("small",{className:"text-muted d-block",children:[w.jsx("i",{className:"fas fa-shield-alt me-1"}),"Powered by Stripe  Secure & PCI Compliant"]})})]})]})},TO=({show:n,onHide:e,onMembershipUpdate:t})=>{const[r,i]=S.useState(!1),a=()=>{e(),i(!0)},l=()=>{i(!1),t&&t()},u=d=>{console.error("Payment error:",d),i(!1)};return w.jsxs(w.Fragment,{children:[w.jsxs($t,{show:n,onHide:e,centered:!0,children:[w.jsx($t.Header,{closeButton:!0,children:w.jsxs($t.Title,{children:[w.jsx("i",{className:"fas fa-check-circle text-primary me-2"}),"Verified Human Membership"]})}),w.jsx($t.Body,{children:w.jsx(Lt,{className:"border-primary",children:w.jsxs(Lt.Body,{className:"text-center",children:[w.jsx("div",{className:"mb-4",children:w.jsx("i",{className:"fas fa-shield-alt text-primary",style:{fontSize:"3rem"}})}),w.jsx("h4",{className:"text-primary mb-3",children:"Get Verified Human Status"}),w.jsxs("div",{className:"mb-4",children:[w.jsxs("h2",{className:"text-success mb-1",children:["$5",w.jsx("small",{className:"text-muted",children:"/month"})]}),w.jsx("p",{className:"text-muted",children:"Billed monthly, cancel anytime"})]}),w.jsxs(Sc,{variant:"info",className:"text-start",children:[w.jsxs("h6",{children:[w.jsx("i",{className:"fas fa-star me-2"}),"Premium Benefits:"]}),w.jsxs("ul",{className:"mb-0",children:[w.jsxs("li",{children:[w.jsx("strong",{children:"Verified Badge"})," - Blue checkmark on your profile"]}),w.jsxs("li",{children:[w.jsx("strong",{children:"AI Match Priority"})," - Higher ranking in trade matches"]}),w.jsxs("li",{children:[w.jsx("strong",{children:"Trust Signal"})," - Build credibility with other users"]}),w.jsxs("li",{children:[w.jsx("strong",{children:"Human Verification"})," - Reduces spam and fake accounts"]}),w.jsxs("li",{children:[w.jsx("strong",{children:"Community Status"})," - Join the verified trader community"]})]})]}),w.jsx("div",{className:"mb-3",children:w.jsxs("small",{className:"text-muted",children:[w.jsx("i",{className:"fas fa-lock me-1"}),"Secure payment processing  Cancel anytime in settings"]})})]})})}),w.jsxs($t.Footer,{className:"d-flex justify-content-between",children:[w.jsx(jt,{variant:"outline-secondary",onClick:e,children:"Maybe Later"}),w.jsxs(jt,{variant:"primary",size:"lg",onClick:a,className:"px-4",children:[w.jsx("i",{className:"fas fa-credit-card me-2"}),"Continue to Secure Payment"]})]})]}),w.jsx(CO,{show:r,onHide:()=>i(!1),onPaymentSuccess:l,onPaymentError:u,membershipType:"verified_human",amount:5,title:"Verified Human Membership",description:"Monthly subscription for verified human status with premium features"})]})},IO=({isVerified:n,size:e="sm",showText:t=!1})=>{if(!n)return null;const r=w.jsxs(HS,{id:"verified-tooltip",children:[w.jsx("strong",{children:"Verified Human"}),w.jsx("br",{}),"This user has an active $5/month membership and is verified as a real person.",w.jsx("br",{}),"Higher priority in AI matches and trusted by the community."]}),i=e==="lg"?"20px":e==="md"?"16px":"14px";return w.jsx(GM,{_placement:"top",overlay:r,children:w.jsxs(Sp,{bg:"primary",className:"verified-badge d-inline-flex align-items-center",style:{cursor:"help",fontSize:e==="lg"?"0.9rem":e==="md"?"0.8rem":"0.7rem",padding:e==="lg"?"6px 8px":e==="md"?"4px 6px":"3px 5px"},children:[w.jsx("i",{className:"fas fa-check-circle me-1",style:{fontSize:i,color:"#fff"}}),t&&w.jsx("span",{style:{fontWeight:"600"},children:"Verified Human"})]})})};var kO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const AO=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),RO=(n,e)=>{const t=S.forwardRef((h,p)=>{var g=h,{color:r="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:l,children:u}=g,d=le(g,["color","size","strokeWidth","absoluteStrokeWidth","children"]);return S.createElement("svg",A(Y(A({ref:p},kO),{width:i,height:i,stroke:r,strokeWidth:l?Number(a)*24/Number(i):a,className:"lucide lucide-".concat(AO(n))}),d),[...e.map(([v,b])=>S.createElement(v,b)),...(Array.isArray(u)?u:[u])||[]])});return t.displayName="".concat(n),t};var Wr=RO;const MO=Wr("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),df=Wr("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),OO=Wr("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),PO=Wr("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),DO=Wr("Package",[["path",{d:"M16.5 9.4 7.55 4.24",key:"10qotr"}],["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),NO=Wr("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),LO=Wr("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),jO=Wr("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);class $O{constructor(){this.subscriptions=new Map,this.eventHandlers=new Map,this.isConnected=!1}subscribe(e,t,r=null){try{const i=r||"sub_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9));console.log(" Setting up real-time subscription:",{id:i,channels:e});const a=Bn.subscribe(e,l=>{var u;try{console.log(" Real-time event received:",l);const d={event:l.event||((u=l.events)==null?void 0:u[0]),payload:l.payload,timestamp:new Date().toISOString(),channels:l.channels,subscriptionId:i};t(d)}catch(d){console.error(" Real-time callback error:",d)}});return this.subscriptions.set(i,{channels:e,callback:t,unsubscribe:a,createdAt:new Date().toISOString()}),console.log(" Real-time subscription created:",i),i}catch(i){return console.error(" Real-time subscription failed:",i),null}}unsubscribe(e){try{const t=this.subscriptions.get(e);return t?(t.unsubscribe(),this.subscriptions.delete(e),console.log(" Unsubscribed from real-time events:",e),!0):(console.warn(" Subscription not found:",e),!1)}catch(t){return console.error(" Unsubscribe failed:",t),!1}}unsubscribeAll(){try{let e=0;for(const[t,r]of this.subscriptions)try{r.unsubscribe(),e++}catch(i){console.error(" Failed to unsubscribe ".concat(t,":"),i)}return this.subscriptions.clear(),this.eventHandlers.clear(),console.log(" Unsubscribed from ".concat(e," real-time subscriptions")),e}catch(e){return console.error(" Unsubscribe all failed:",e),0}}subscribeToMessages(e,t){const r=["databases.".concat(V,".collections.").concat(X.messages,".documents")],i=a=>{const{event:l,payload:u}=a;l&&l.includes(".messages.")&&u&&u.recipient_id===e&&t(A({type:"new_message",message:u},a))};return this.subscribe(r,i,"messages_".concat(e))}subscribeToTrades(e,t){const r=["databases.".concat(V,".collections.").concat(X.trades,".documents")],i=a=>{const{event:l,payload:u}=a;if(l&&l.includes(".trades.")&&u&&(u.user1_id===e||u.user2_id===e)){let d="trade_updated";l.includes(".create")?d="new_trade":l.includes(".update")?d="trade_updated":l.includes(".delete")&&(d="trade_deleted"),t(A({type:d,trade:u},a))}};return this.subscribe(r,i,"trades_".concat(e))}subscribeToMarketplace(e,t={}){const r=["databases.".concat(V,".collections.").concat(X.items,".documents")],i=l=>{const{event:u,payload:d}=l;if(u&&u.includes(".items.")&&d){if(t.location&&d.location!==t.location||t.category&&d.category!==t.category)return;let p="listing_updated";u.includes(".create")?p="new_listing":u.includes(".update")?p="listing_updated":u.includes(".delete")&&(p="listing_deleted"),e(A({type:p,listing:d},l))}},a="marketplace_".concat(t.location||"all","_").concat(t.category||"all");return this.subscribe(r,i,a)}subscribeToUserUpdates(e,t){const r=["databases.".concat(V,".collections.").concat(X.users,".documents.").concat(e)],i=a=>{const{event:l,payload:u}=a;l&&l.includes(".users.")&&u&&t(A({type:"profile_updated",profile:u},a))};return this.subscribe(r,i,"user_".concat(e))}subscribeToMatches(e,t){const r=["databases.".concat(V,".collections.matching_suggestions.documents"),"user:".concat(e,":matches"),"user:".concat(e,":notifications")],i=a=>{const{event:l,payload:u}=a;if(l&&u){let d="match_updated";l.includes("matching_suggestions")&&l.includes(".create")?(u.user1_id===e||u.user2_id===e)&&(d="new_match"):l.includes("matching_suggestions")&&l.includes(".update")?(u.user1_id===e||u.user2_id===e)&&(u.status==="accepted"?d="match_accepted":u.status==="declined"&&(d="match_declined")):l.includes("new_match")?d="new_match":l.includes("match_accepted")&&(d="match_accepted"),d&&t(A({type:d,match:u},a))}};return this.subscribe(r,i,"matches_".concat(e))}subscribeToUserNotifications(e,t={}){try{console.log(" Setting up AI matching notifications for user:",e);const r=this.subscribeToMatches(e,i=>{const{type:a}=i;if(t[a])try{t[a](i)}catch(l){console.error("Error in ".concat(a," handler:"),l)}if(t.onMatch)try{t.onMatch(i)}catch(l){console.error("Error in onMatch handler:",l)}});return console.log(" AI matching notifications setup complete"),r}catch(r){return console.error(" Failed to setup AI matching notifications:",r),null}}setupUserRealtime(e,t={}){try{console.log(" Setting up comprehensive real-time for user:",e);const r={};return t.onMessage&&(r.messages=this.subscribeToMessages(e,t.onMessage)),t.onTrade&&(r.trades=this.subscribeToTrades(e,t.onTrade)),(t.onMatch||t.new_match||t.match_accepted)&&(r.matches=this.subscribeToMatches(e,t.onMatch)),t.onMarketplace&&(r.marketplace=this.subscribeToMarketplace(t.onMarketplace)),t.onProfile&&(r.profile=this.subscribeToUserUpdates(e,t.onProfile)),this.eventHandlers.set("user_".concat(e),r),console.log(" User real-time setup complete:",Object.keys(r)),r}catch(r){return console.error(" Setup user real-time failed:",r),{}}}cleanupUserRealtime(e){try{const t=this.eventHandlers.get("user_".concat(e));if(t){let r=0;return Object.values(t).forEach(i=>{this.unsubscribe(i)&&r++}),this.eventHandlers.delete("user_".concat(e)),console.log(" Cleaned up ".concat(r," user real-time subscriptions for user:"),e),r}return 0}catch(t){return console.error(" Cleanup user real-time failed:",t),0}}sendTypingIndicator(e,t,r){try{const i=new CustomEvent("typing-indicator",{detail:{senderId:e,recipientId:t,isTyping:r,timestamp:new Date().toISOString()}});return document.dispatchEvent(i),console.log(" Typing indicator sent:",{senderId:e,recipientId:t,isTyping:r}),!0}catch(i){return console.error(" Send typing indicator failed:",i),!1}}onTypingIndicator(e){const t=r=>e(r.detail);return document.addEventListener("typing-indicator",t),()=>document.removeEventListener("typing-indicator",t)}sendReadReceipt(e,t,r){try{const i=new CustomEvent("read-receipt",{detail:{senderId:e,recipientId:t,messageId:r,timestamp:new Date().toISOString()}});return document.dispatchEvent(i),console.log(" Read receipt sent:",{senderId:e,recipientId:t,messageId:r}),!0}catch(i){return console.error(" Send read receipt failed:",i),!1}}onReadReceipt(e){const t=r=>e(r.detail);return document.addEventListener("read-receipt",t),()=>document.removeEventListener("read-receipt",t)}checkConnectionStatus(){return this.isConnected}getActiveSubscriptions(){const e=[];for(const[t,r]of this.subscriptions)e.push({id:t,channels:r.channels,createdAt:r.createdAt});return e}healthCheck(){return{isConnected:this.isConnected,activeSubscriptions:this.subscriptions.size,eventHandlers:this.eventHandlers.size,status:this.subscriptions.size>0?"active":"idle"}}enableDebugging(){this.debugMode=!0,console.log(" Real-time debugging enabled")}disableDebugging(){this.debugMode=!1,console.log(" Real-time debugging disabled")}}const Ql=new $O;window.addEventListener("beforeunload",()=>{Ql.unsubscribeAll()});const UP=(n,e)=>Ql.subscribeToUserNotifications(n,e),UO=()=>{var se,D,J,Ee;const{currentUser:n}=Qf($=>$.user),[e,t]=S.useState([]),[r,i]=S.useState(0),[a,l]=S.useState(!1),[u,d]=S.useState(!1),[p,h]=S.useState(!1),[g,v]=S.useState({enabled:!0,sound:!0,push:!0,email:!1,categories:{messages:!0,matches:!0,trades:!0,reviews:!0,system:!0},quiet_hours:{enabled:!1,start:"22:00",end:"08:00"}}),[b,C]=S.useState([]),[T,x]=S.useState(null);S.useEffect(()=>{if(n)return M(),O(),L(),()=>{pe()}},[n]);const M=()=>E(null,null,function*(){try{l(!0),yield I(),yield R()}catch($){console.error("Failed to initialize notifications:",$)}finally{l(!1)}}),I=()=>E(null,null,function*(){try{if(!(n!=null&&n.id)&&!(n!=null&&n.$id)){console.log("No user ID available for loading notifications");return}const $=n.id||n.$id,B=yield xt.getNotifications($);t(B),i(B.filter(Z=>!Z.read&&!Z.is_read).length)}catch($){console.error("Failed to load notifications:",$);try{const Z=(yield Ne.get("/notifications")).data;t(Z),i(Z.filter(ye=>!ye.read).length)}catch(B){console.error("Fallback API also failed:",B)}}}),R=()=>E(null,null,function*(){try{if(!(n!=null&&n.id)&&!(n!=null&&n.$id))return;const $=n.id||n.$id,B=yield xt.getNotificationSettings($);v(Z=>A(A({},Z),B))}catch($){console.error("Failed to load notification settings:",$)}}),O=()=>E(null,null,function*(){if("Notification"in window&&Notification.permission==="default")try{(yield Notification.requestPermission())==="granted"&&De.success("Browser notifications enabled!")}catch($){console.error("Failed to request notification permission:",$)}}),L=()=>{if(n)try{const $=Ql.subscribeToUserNotifications(n.id,{new_match:B=>{H({type:"match",title:"New Match Found!",message:"Found a potential trade match for your item",data:B.match,priority:"high"})},match_accepted:B=>{H({type:"match",title:"Match Accepted!",message:"Someone accepted your trade proposal",data:B.match,priority:"high"})},onMessage:B=>{B.type==="new_message"&&H({type:"message",title:"New Message",message:"".concat(B.message.sender_name,": ").concat(B.message.content),data:B.message,priority:"medium"})},onTrade:B=>{H({type:"trade",title:"Trade Update",message:{new_trade:"New trade proposal received",trade_updated:"Trade proposal updated",trade_accepted:"Trade proposal accepted!",trade_completed:"Trade completed successfully!",trade_cancelled:"Trade was cancelled"}[B.type]||"Trade status changed",data:B.trade,priority:B.type==="trade_accepted"?"high":"medium"})}});x($)}catch($){console.error("Failed to setup real-time subscriptions:",$)}},H=S.useCallback($=>{var Z;if(!(g!=null&&g.enabled)||!((Z=g==null?void 0:g.categories)!=null&&Z[$.type])||ae())return;const B={id:"realtime_".concat(Date.now()),type:$.type,title:$.title,message:$.message,data:$.data,read:!1,created_at:new Date().toISOString(),priority:$.priority||"medium"};t(ye=>[B,...ye]),i(ye=>ye+1),W($),F($),g!=null&&g.sound&&K($.type,$.priority),ce(B)},[g]),W=$=>{if("Notification"in window&&Notification.permission==="granted"&&(g!=null&&g.push)){const B=new Notification($.title,{body:$.message,icon:"/favicon.ico",tag:"notification_".concat($.type),badge:"/favicon.ico",timestamp:Date.now(),requireInteraction:$.priority==="high",actions:[{action:"view",title:"View",icon:"/icons/view.png"},{action:"dismiss",title:"Dismiss",icon:"/icons/dismiss.png"}]});B.onclick=()=>{ue($),B.close()},$.priority!=="high"&&setTimeout(()=>{B.close()},5e3)}},F=$=>{const B="toast_".concat(Date.now()),Z={id:B,type:$.type,title:$.title,message:$.message,show:!0,autohide:$.priority!=="high",delay:$.priority==="high"?1e4:5e3};C(ye=>[...ye,Z]),setTimeout(()=>{C(ye=>ye.filter(Ce=>Ce.id!==B))},Z.delay)},K=($="default",B="medium")=>{try{if(xt.playNotificationSound($),B==="high")try{const Z=new Audio("/sounds/high-priority.mp3");Z.volume=.3,Z.play().catch(()=>{})}catch(Z){}}catch(Z){}},ae=()=>{var Xt,vt,St;if(!((Xt=g==null?void 0:g.quiet_hours)!=null&&Xt.enabled))return!1;const $=new Date,B=$.getHours()*60+$.getMinutes(),[Z,ye]=(((vt=g==null?void 0:g.quiet_hours)==null?void 0:vt.start)||"22:00").split(":").map(Number),[Ce,Me]=(((St=g==null?void 0:g.quiet_hours)==null?void 0:St.end)||"08:00").split(":").map(Number),Ve=Z*60+ye,Tt=Ce*60+Me;return Ve<=Tt?B>=Ve&&B<=Tt:B>=Ve||B<=Tt},ce=$=>E(null,null,function*(){try{if(!(n!=null&&n.id)&&!(n!=null&&n.$id))return;const B=n.id||n.$id;yield xt.createEnhancedNotification(B,$.title,$.message,$.type,$.data||{})}catch(B){console.error("Failed to store notification via enhanced service:",B);try{yield Ne.post("/notifications",{type:$.type,title:$.title,message:$.message,data:$.data,priority:$.priority})}catch(Z){console.error("Fallback API also failed:",Z)}}}),ue=$=>{var B,Z;switch($.type){case"message":(B=$.data)!=null&&B.sender_id&&window.open("/messages/".concat($.data.sender_id),"_blank");break;case"match":window.open("/matches","_blank");break;case"trade":(Z=$.data)!=null&&Z.id&&window.open("/trades/".concat($.data.id),"_blank");break;default:window.open("/","_blank")}ve($.id||$.$id)},ve=$=>E(null,null,function*(){try{yield xt.markAsRead($),t(B=>B.map(Z=>Z.id===$||Z.$id===$?Y(A({},Z),{read:!0,is_read:!0}):Z)),i(B=>Math.max(0,B-1))}catch(B){console.error("Failed to mark notification as read:",B);try{yield Ne.patch("/notifications/".concat($,"/read")),t(Z=>Z.map(ye=>ye.id===$?Y(A({},ye),{read:!0}):ye)),i(Z=>Math.max(0,Z-1))}catch(Z){console.error("Fallback API also failed:",Z)}}}),Re=()=>E(null,null,function*(){try{if(!(n!=null&&n.id)&&!(n!=null&&n.$id))return;const $=n.id||n.$id;yield xt.markAllAsRead($),t(B=>B.map(Z=>Y(A({},Z),{read:!0,is_read:!0}))),i(0)}catch($){console.error("Failed to mark all notifications as read:",$);try{yield Ne.patch("/notifications/read-all"),t(B=>B.map(Z=>Y(A({},Z),{read:!0}))),i(0)}catch(B){console.error("Fallback API also failed:",B)}}}),_e=$=>E(null,null,function*(){try{yield xt.deleteNotification($),t(B=>{const Z=B.find(Ce=>Ce.id===$||Ce.$id===$),ye=B.filter(Ce=>Ce.id!==$&&Ce.$id!==$);return Z&&!Z.read&&!Z.is_read&&i(Ce=>Math.max(0,Ce-1)),ye})}catch(B){console.error("Failed to delete notification:",B);try{yield Ne.delete("/notifications/".concat($)),t(Z=>{const ye=Z.find(Me=>Me.id===$),Ce=Z.filter(Me=>Me.id!==$);return ye&&!ye.read&&i(Me=>Math.max(0,Me-1)),Ce})}catch(Z){console.error("Fallback API also failed:",Z)}}}),Ie=$=>E(null,null,function*(){try{if(!(n!=null&&n.id)&&!(n!=null&&n.$id))return;const B=n.id||n.$id;yield xt.updateNotificationSettings(B,$),v($),xt.setSoundEnabled($.sound),De.success("Notification settings updated!")}catch(B){console.error("Failed to update notification settings:",B),De.error("Failed to update settings")}}),pe=()=>{T&&Ql.unsubscribe(T)},ee=$=>{const Z={message:PO,match:OO,trade:DO,review:LO,system:MO}[$]||df;return w.jsx(Z,{size:16})},de=$=>{const B=new Date($),ye=new Date-B,Ce=Math.floor(ye/6e4),Me=Math.floor(Ce/60),Ve=Math.floor(Me/24);return Ce<1?"Just now":Ce<60?"".concat(Ce,"m ago"):Me<24?"".concat(Me,"h ago"):Ve<7?"".concat(Ve,"d ago"):B.toLocaleDateString()};return w.jsxs(w.Fragment,{children:[w.jsxs(sf,{show:u,onToggle:d,align:"end",children:[w.jsxs(sf.Toggle,{variant:"outline-secondary",className:"position-relative border-0",id:"notification-dropdown",children:[w.jsx(df,{size:20}),r>0&&w.jsx(Sp,{bg:"danger",className:"position-absolute top-0 start-100 translate-middle rounded-pill",style:{fontSize:"0.7rem"},children:r>99?"99+":r})]}),w.jsxs(sf.Menu,{className:"notification-dropdown",style:{width:"380px",maxHeight:"500px",overflowY:"auto"},children:[w.jsxs("div",{className:"d-flex justify-content-between align-items-center p-3 border-bottom",children:[w.jsx("h6",{className:"mb-0",children:"Notifications"}),w.jsxs("div",{children:[w.jsx(jt,{variant:"link",size:"sm",className:"p-0 me-2",onClick:()=>h(!0),children:w.jsx(NO,{size:16})}),r>0&&w.jsx(jt,{variant:"link",size:"sm",className:"p-0",onClick:Re,children:"Mark all read"})]})]}),a?w.jsx("div",{className:"text-center p-4",children:w.jsx(bi,{animation:"border",size:"sm"})}):e.length===0?w.jsxs("div",{className:"text-center p-4 text-muted",children:[w.jsx(df,{size:32,className:"mb-2"}),w.jsx("p",{className:"mb-0",children:"No notifications yet"})]}):w.jsx(uw,{variant:"flush",children:e.slice(0,10).map($=>w.jsx(uw.Item,{className:"notification-item ".concat(!$.read&&!$.is_read?"unread":""),style:{cursor:"pointer"},onClick:()=>ue($),children:w.jsxs("div",{className:"d-flex align-items-start",children:[w.jsx("div",{className:"notification-icon me-3 mt-1",children:ee($.type)}),w.jsxs("div",{className:"flex-grow-1 min-width-0",children:[w.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[w.jsx("h6",{className:"mb-1 text-truncate",children:$.title}),w.jsxs("div",{className:"d-flex align-items-center",children:[w.jsx("small",{className:"text-muted me-2",children:de($.created_at||$.createdAt)}),w.jsx(jt,{variant:"link",size:"sm",className:"p-0",onClick:B=>{B.stopPropagation(),_e($.id||$.$id)},children:w.jsx(jO,{size:14})})]})]}),w.jsx("p",{className:"mb-0 text-muted small",children:$.message}),!$.read&&!$.is_read&&w.jsx("div",{className:"notification-unread-indicator"})]})]})},$.id||$.$id))}),e.length>10&&w.jsx("div",{className:"text-center p-2 border-top",children:w.jsx(jt,{variant:"link",size:"sm",children:"View all notifications"})})]})]}),w.jsxs($t,{show:p,onHide:()=>h(!1),size:"lg",children:[w.jsx($t.Header,{closeButton:!0,children:w.jsx($t.Title,{children:"Notification Settings"})}),w.jsxs($t.Body,{children:[w.jsxs(Lt,{className:"mb-3",children:[w.jsx(Lt.Header,{children:w.jsx("h6",{className:"mb-0",children:"General Settings"})}),w.jsxs(Lt.Body,{children:[w.jsx(sn.Check,{type:"switch",id:"notifications-enabled",label:"Enable notifications",checked:(g==null?void 0:g.enabled)||!1,onChange:$=>v(B=>Y(A({},B),{enabled:$.target.checked})),className:"mb-3"}),w.jsx(sn.Check,{type:"switch",id:"notification-sound",label:"Sound notifications",checked:(g==null?void 0:g.sound)||!1,onChange:$=>v(B=>Y(A({},B),{sound:$.target.checked})),disabled:!(g!=null&&g.enabled),className:"mb-3"}),w.jsx(sn.Check,{type:"switch",id:"push-notifications",label:"Browser push notifications",checked:(g==null?void 0:g.push)||!1,onChange:$=>v(B=>Y(A({},B),{push:$.target.checked})),disabled:!(g!=null&&g.enabled),className:"mb-3"}),w.jsx(sn.Check,{type:"switch",id:"email-notifications",label:"Email notifications",checked:(g==null?void 0:g.email)||!1,onChange:$=>v(B=>Y(A({},B),{email:$.target.checked})),disabled:!(g!=null&&g.enabled)})]})]}),w.jsxs(Lt,{className:"mb-3",children:[w.jsx(Lt.Header,{children:w.jsx("h6",{className:"mb-0",children:"Notification Categories"})}),w.jsx(Lt.Body,{children:(g==null?void 0:g.categories)&&typeof g.categories=="object"&&Object.entries(g.categories).map(([$,B])=>w.jsx(sn.Check,{type:"switch",id:"category-".concat($),label:$.charAt(0).toUpperCase()+$.slice(1),checked:B,onChange:Z=>v(ye=>Y(A({},ye),{categories:Y(A({},ye.categories),{[$]:Z.target.checked})})),disabled:!(g!=null&&g.enabled),className:"mb-2"},$))})]}),w.jsxs(Lt,{children:[w.jsx(Lt.Header,{children:w.jsx("h6",{className:"mb-0",children:"Quiet Hours"})}),w.jsxs(Lt.Body,{children:[w.jsx(sn.Check,{type:"switch",id:"quiet-hours",label:"Enable quiet hours",checked:((se=g==null?void 0:g.quiet_hours)==null?void 0:se.enabled)||!1,onChange:$=>v(B=>Y(A({},B),{quiet_hours:Y(A({},(B==null?void 0:B.quiet_hours)||{}),{enabled:$.target.checked})})),className:"mb-3"}),((D=g==null?void 0:g.quiet_hours)==null?void 0:D.enabled)&&w.jsxs("div",{className:"row",children:[w.jsx("div",{className:"col-md-6",children:w.jsxs(sn.Group,{children:[w.jsx(sn.Label,{children:"Start time"}),w.jsx(sn.Control,{type:"time",value:((J=g==null?void 0:g.quiet_hours)==null?void 0:J.start)||"22:00",onChange:$=>v(B=>Y(A({},B),{quiet_hours:Y(A({},(B==null?void 0:B.quiet_hours)||{}),{start:$.target.value})}))})]})}),w.jsx("div",{className:"col-md-6",children:w.jsxs(sn.Group,{children:[w.jsx(sn.Label,{children:"End time"}),w.jsx(sn.Control,{type:"time",value:((Ee=g==null?void 0:g.quiet_hours)==null?void 0:Ee.end)||"08:00",onChange:$=>v(B=>Y(A({},B),{quiet_hours:Y(A({},(B==null?void 0:B.quiet_hours)||{}),{end:$.target.value})}))})]})})]})]})]})]}),w.jsxs($t.Footer,{children:[w.jsx(jt,{variant:"secondary",onClick:()=>h(!1),children:"Cancel"}),w.jsx(jt,{variant:"primary",onClick:()=>{Ie(g),h(!1)},children:"Save Settings"})]})]}),w.jsx(QS,{position:"top-end",className:"p-3",children:b.map($=>w.jsxs(uf,{show:$.show,autohide:$.autohide,delay:$.delay,onClose:()=>C(B=>B.filter(Z=>Z.id!==$.id)),children:[w.jsxs(uf.Header,{children:[w.jsx("div",{className:"me-2",children:ee($.type)}),w.jsx("strong",{className:"me-auto",children:$.title})]}),w.jsx(uf.Body,{children:$.message})]},$.id))})]})},FO=({children:n})=>{const e=Ii(),t=Ow(),{user:r,isAuthenticated:i}=mc(),[a,l]=S.useState(!1),[u,d]=S.useState(null);S.useEffect(()=>{i&&p()},[i]);const p=()=>E(null,null,function*(){try{const g=yield Ne.get("/memberships/my-membership");d(g.data)}catch(g){console.error("Error loading membership:",g)}}),h=()=>{t(jv()),e("/login")};return w.jsxs(w.Fragment,{children:[w.jsx(El,{bg:"white",expand:"lg",className:"border-bottom",children:w.jsxs(Ep,{fluid:!0,children:[w.jsxs(El.Brand,{as:Lr,to:"/",className:"fw-bold text-primary fs-4 btn-animated",children:[w.jsx("i",{className:"fas fa-store icon-float me-2"}),"Trading Post"]}),w.jsx(El.Toggle,{"aria-controls":"basic-navbar-nav"}),w.jsxs(El.Collapse,{id:"basic-navbar-nav",children:[w.jsx(Tn,{children:i&&w.jsxs(w.Fragment,{children:[!(u!=null&&u.is_active)&&w.jsxs(jt,{variant:"warning",size:"sm",className:"me-2 btn-animated btn-glow-warning",onClick:()=>l(!0),style:{fontWeight:"bold",fontSize:"0.8rem"},title:"Get Verified",children:[w.jsx("i",{className:"fas fa-check-circle icon-animated"}),w.jsx("span",{className:"d-none d-md-inline ms-1",children:"Get Verified"})]}),w.jsxs(Tn.Link,{as:Lr,to:"/listings/new",className:"btn btn-primary btn-sm me-2 btn-animated btn-glow-primary",title:"Sell",children:[w.jsx("i",{className:"fas fa-plus icon-animated"}),w.jsx("span",{className:"d-none d-md-inline ms-1",children:"Sell"})]})]})}),w.jsx(Tn,{className:"mx-auto",children:i&&w.jsxs(w.Fragment,{children:[w.jsxs(Tn.Link,{as:Lr,to:"/",className:"mx-2 btn-animated",title:"Marketplace",children:[w.jsx("i",{className:"fas fa-store icon-animated"}),w.jsx("span",{className:"d-none d-lg-inline ms-1",children:"Marketplace"})]}),w.jsxs(Tn.Link,{as:Lr,to:"/map",className:"mx-2 btn-animated",title:"Map View",children:[w.jsx("i",{className:"fas fa-map icon-animated"}),w.jsx("span",{className:"d-none d-lg-inline ms-1",children:"Map View"})]}),w.jsxs(Tn.Link,{as:Lr,to:"/matches",className:"mx-2 btn-animated",title:"AI Matches",children:[w.jsx("i",{className:"fas fa-robot icon-spin"}),w.jsx("span",{className:"d-none d-lg-inline ms-1",children:"AI Matches"})]}),w.jsxs(Tn.Link,{as:Lr,to:"/messages",className:"mx-2 btn-animated",title:"Messages",children:[w.jsx("i",{className:"fas fa-comments icon-bounce"}),w.jsx("span",{className:"d-none d-lg-inline ms-1",children:"Messages"})]})]})}),w.jsx(Tn,{className:"d-flex align-items-center",children:i?w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"me-3",children:w.jsx(UO,{})}),w.jsxs(Tn.Link,{as:Lr,to:"/profile",className:"btn-animated d-flex align-items-center me-2",style:{textDecoration:"none",minWidth:"fit-content",whiteSpace:"nowrap"},title:"Profile",children:[w.jsx("i",{className:"fas fa-user-circle"}),w.jsx("span",{className:"d-none d-sm-inline ms-1 fw-semibold",children:(r==null?void 0:r.username)||"User"}),(u==null?void 0:u.is_active)&&w.jsx(IO,{isVerified:!0,size:"sm",className:"ms-1"})]}),w.jsxs(Tn.Link,{onClick:h,className:"btn btn-outline-danger btn-sm btn-animated",style:{cursor:"pointer",textDecoration:"none",minWidth:"fit-content"},title:"Logout",children:[w.jsx("i",{className:"fas fa-sign-out-alt"}),w.jsx("span",{className:"d-none d-sm-inline ms-1",children:"Logout"})]})]}):w.jsx(Tn.Link,{as:Lr,to:"/login",className:"btn btn-primary",children:"Login"})})]})]})}),w.jsx("main",{children:n}),w.jsx(TO,{show:a,onHide:()=>l(!1),onMembershipUpdate:()=>{p(),l(!1)}})]})};class zO extends oe.Component{constructor(t){super(t);ri(this,"handleRetry",()=>{this.setState({hasError:!1,error:null,errorInfo:null,errorId:null})});ri(this,"handleReload",()=>{window.location.reload()});this.state={hasError:!1,error:null,errorInfo:null,errorId:null}}static getDerivedStateFromError(t){return{hasError:!0,errorId:"ERR_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))}}componentDidCatch(t,r){if(console.error("ErrorBoundary caught an error:",t,r),this.setState({error:t,errorInfo:r}),window.errorLoggingService)try{window.errorLoggingService.logError(t,{componentStack:r.componentStack,errorId:this.state.errorId})}catch(i){}}render(){if(this.state.hasError){const{error:t,errorInfo:r,errorId:i}=this.state;return w.jsx(Ep,{className:"py-5",children:w.jsx(Lt,{className:"mx-auto",style:{maxWidth:"600px"},children:w.jsxs(Lt.Body,{children:[w.jsxs("div",{className:"text-center mb-4",children:[w.jsx("i",{className:"fas fa-exclamation-triangle text-danger",style:{fontSize:"3rem"}}),w.jsx("h2",{className:"mt-3 text-danger",children:"Something went wrong"}),w.jsx("p",{className:"text-muted",children:"We encountered an unexpected error. Our team has been notified."})]}),i&&w.jsx(Sc,{variant:"info",className:"text-center",children:w.jsxs("small",{children:["Error ID: ",i]})}),w.jsxs("div",{className:"d-flex gap-2 justify-content-center mb-4",children:[w.jsxs(jt,{variant:"primary",onClick:this.handleRetry,children:[w.jsx("i",{className:"fas fa-redo me-2"}),"Try Again"]}),w.jsxs(jt,{variant:"outline-secondary",onClick:this.handleReload,children:[w.jsx("i",{className:"fas fa-refresh me-2"}),"Reload Page"]})]}),!1]})})})}return this.props.children}}const BO=({message:n="Loading...",size:e="normal"})=>{const t=e==="large"?"spinner-border-lg":e==="small"?"spinner-border-sm":"",r=e==="large"?"70vh":"50vh";return w.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{height:r,minHeight:"200px"},children:w.jsxs("div",{className:"text-center",children:[w.jsx("div",{className:"spinner-border text-primary ".concat(t),role:"status",children:w.jsx("span",{className:"visually-hidden",children:"Loading..."})}),n&&w.jsx("div",{className:"mt-3",children:w.jsx("p",{className:"text-muted",children:n})})]})})},qO=({children:n})=>{const e=Ii(),t=Hr();return S.useEffect(()=>{const r=t.pathname,i=t.hash,a=window.location.href;(r==="/auth/callback"&&i==="#"||r==="/oauth/callback"&&i==="#"||a.endsWith("/auth/callback#")||a.endsWith("/oauth/callback#")||a.includes("/auth/callback#/")||a.includes("/oauth/callback#/"))&&(console.log(" OAuth Redirect Guard: Invalid callback URL detected, redirecting to marketplace"),console.log(" Path:",r),console.log(" Hash:",i),console.log(" Full URL:",a),e("/",{replace:!0}))},[t,e]),n},HO=()=>{const{currentUser:n}=Qf(p=>p.user),[e,t]=S.useState(!1),[r,i]=S.useState(null),[a,l]=S.useState(!1),[u,d]=S.useState({includeUsers:!0,includeItems:!0,includeWants:!0,includeTrades:!0,includeMessages:!0,includeMatches:!0,includeNotifications:!0,includeSavedItems:!0,userCount:6,itemsPerUser:4,wantsPerUser:2});return null},VO=oe.lazy(()=>Ye(()=>import("./LoginSimple-BQgOjE3p.js"),[])),WO=oe.lazy(()=>Ye(()=>import("./LoginDirect-BSIHfuP4.js"),[]));oe.lazy(()=>Ye(()=>import("./AppwriteAuth-apnbgcYu.js"),__vite__mapDeps([6,7,4,8])));const GO=oe.lazy(()=>Ye(()=>import("./UserProfile-CkoJgSs1.js"),__vite__mapDeps([9,4,10]))),KO=oe.lazy(()=>Ye(()=>import("./MyListings-Bm9Auuby.js"),__vite__mapDeps([11,4,12]))),YO=oe.lazy(()=>Ye(()=>import("./UserProfile-Z5bcDWHj.js"),__vite__mapDeps([13,4,10]))),XO=oe.lazy(()=>Ye(()=>import("./ReviewDetail-B_pJhz8v.js"),__vite__mapDeps([14,4]))),Ew=oe.lazy(()=>Ye(()=>import("./ListingForm-Ck6qu_7q.js"),__vite__mapDeps([15,7,16,17,4,18]))),QO=oe.lazy(()=>Ye(()=>import("./MatchesDashboard-Q6gyBQqL.js"),__vite__mapDeps([19,4,17,12]))),JO=oe.lazy(()=>Ye(()=>import("./SearchControls-CQAliH80.js"),__vite__mapDeps([2,3,4,5]))),xw=oe.lazy(()=>Ye(()=>import("./BasicMarketplace-BSgN2qe4.js"),__vite__mapDeps([20,16]))),Cw=oe.lazy(()=>Ye(()=>import("./EnhancedMessages-DjSsbupM.js"),__vite__mapDeps([21,4,18,22]))),Tw=oe.lazy(()=>Ye(()=>import("./ListingDetailFixed-CK51Jvw2.js"),__vite__mapDeps([23,3,4]))),ZO=oe.lazy(()=>Ye(()=>import("./DesignCustomizer-ChGMwgRR.js"),__vite__mapDeps([24,4]))),Co=oe.lazy(()=>Ye(()=>import("./OAuthCallbackHandler-DCpoW8_s.js"),[])),eP=oe.lazy(()=>Ye(()=>import("./OAuthHashRedirect-DZb69-UL.js"),[])),tP=oe.lazy(()=>Ye(()=>import("./ForgotPassword-DUirAeYc.js"),__vite__mapDeps([25,7,8]))),Nt=({children:n})=>{const{isAuthenticated:e,loading:t,user:r}=mc(),[i,a]=S.useState(!1),l=Hr();if(S.useEffect(()=>{console.log(" [PROTECTED-ROUTE] Auth state changed:",{isAuthenticated:e,loading:t,hasUser:!!r,userEmail:(r==null?void 0:r.email)||"none",userProfile:!!(r!=null&&r.profile),currentPath:l.pathname,timestamp:new Date().toISOString()})},[e,t,r,l.pathname]),S.useEffect(()=>{const u=setTimeout(()=>{!e&&!r&&t&&(console.log(" [PROTECTED-ROUTE] Auth timeout reached - stopping loading state"),a(!0))},8e3);return()=>clearTimeout(u)},[e,r,t]),t&&!i&&!r)return console.log(" [PROTECTED-ROUTE] SHOWING: Loading spinner (auth in progress)"),w.jsxs("div",{className:"d-flex flex-column justify-content-center align-items-center",style:{height:"50vh"},children:[w.jsx("div",{className:"spinner-border text-primary mb-3",role:"status",children:w.jsx("span",{className:"visually-hidden",children:"Loading..."})}),w.jsx("p",{className:"text-muted",children:"Checking authentication..."}),w.jsx("small",{className:"text-muted",children:"If this takes too long, please refresh the page"})]});if(!e&&!t){console.log(" [PROTECTED-ROUTE] REDIRECTING: Not authenticated - sending to login");const u=l.pathname+l.search+l.hash;return u!=="/login"&&u!=="/signup"&&(console.log(" [PROTECTED-ROUTE] Storing redirect path:",u),wt.isMobile?(console.log(" [PROTECTED-ROUTE] Using mobile redirect path storage..."),wt.setMobileRedirectPath(u)):sessionStorage.setItem("redirectPath",u)),w.jsx(Tl,{to:"/login",replace:!0})}return console.log(" [PROTECTED-ROUTE] RENDERING: Protected content (user authenticated)"),n},Iw=()=>{const{setUser:n}=mc(),e=Ii(),t=qv("trading-post",{appwriteEndpoint:"https://nyc.cloud.appwrite.io/v1",appwriteProjectId:"689bdee000098bd9d55c",databaseId:"trading_post_db",enabledProviders:["google","github","microsoft"],features:{emailAuth:!0,ssoAuth:!0,biometricAuth:!1}}),r=a=>{console.log(" Trading Post authentication successful:",a),n(a);const l=wt.isMobile?wt.getMobileRedirectPath():"/";e(l)},i=a=>{console.error(" Trading Post authentication failed:",a)};return w.jsx("div",{className:"mobile-viewport mobile-safe-area tp-auth-container",children:w.jsx(QI,{appwriteConfig:t,onSuccess:r,onError:i,title:"Trading Post",subtitle:"Connect. Trade. Discover.",enabledProviders:["google","github","microsoft"],showEmailAuth:!0,showSSOAuth:!0,className:"trading-post-auth"})})},nP=()=>{const{isAuthenticated:n,loading:e,user:t}=mc();return S.useEffect(()=>{console.log(" App auth state:",{isAuthenticated:n,loading:e,hasUser:!!t,userEmail:(t==null?void 0:t.email)||"none"})},[n,e,t]),S.useEffect(()=>{const r=sessionStorage.getItem("redirectPath");r&&window.location.pathname==="/"&&(console.log(" Found redirect path in sessionStorage:",r),sessionStorage.removeItem("redirectPath"),window.history.replaceState(null,"",r))},[]),w.jsxs(Fx,{children:[w.jsx(qO,{children:w.jsx(FO,{children:w.jsx(S.Suspense,{fallback:w.jsx(BO,{message:"Loading page..."}),children:w.jsxs(Ox,{children:[w.jsx(Ge,{path:"/login",element:n&&!e?(()=>{const r=wt.isMobile?wt.getMobileRedirectPath():"/";return console.log(" [APP] Redirecting authenticated user from login to:",r),w.jsx(Tl,{to:r,replace:!0})})():w.jsx(Iw,{})}),w.jsx(Ge,{path:"/signup",element:n&&!e?w.jsx(Tl,{to:"/",replace:!0}):w.jsx(Iw,{})}),w.jsx(Ge,{path:"/forgot-password",element:w.jsx(tP,{})}),w.jsx(Ge,{path:"/auth/callback",element:w.jsx(Co,{})}),w.jsx(Ge,{path:"/auth/callback/*",element:w.jsx(Co,{})}),w.jsx(Ge,{path:"/auth/error",element:w.jsx(Co,{})}),w.jsx(Ge,{path:"/oauth/callback",element:w.jsx(Co,{})}),w.jsx(Ge,{path:"/oauth/callback/*",element:w.jsx(Co,{})}),w.jsx(Ge,{path:"/auth",element:w.jsx(eP,{})}),w.jsx(Ge,{path:"/login-simple",element:w.jsx(VO,{})}),w.jsx(Ge,{path:"/login-direct",element:w.jsx(WO,{})}),w.jsx(Ge,{path:"/",element:w.jsx(Nt,{children:w.jsx(xw,{})})}),w.jsx(Ge,{path:"/map",element:w.jsx(Nt,{children:w.jsx(JO,{})})}),w.jsx(Ge,{path:"/profile",element:w.jsx(Nt,{children:w.jsx(GO,{})})}),w.jsx(Ge,{path:"/my-listings",element:w.jsx(Nt,{children:w.jsx(KO,{})})}),w.jsx(Ge,{path:"/listings/new",element:w.jsx(Nt,{children:w.jsx(Ew,{})})}),w.jsx(Ge,{path:"/listings/:id",element:w.jsx(Nt,{children:w.jsx(Tw,{})})}),w.jsx(Ge,{path:"/listing/:id",element:w.jsx(Nt,{children:w.jsx(Tw,{})})}),w.jsx(Ge,{path:"/listings/edit/:id",element:w.jsx(Nt,{children:w.jsx(Ew,{})})}),w.jsx(Ge,{path:"/matches",element:w.jsx(Nt,{children:w.jsx(QO,{})})}),w.jsx(Ge,{path:"/messages",element:w.jsx(Nt,{children:w.jsx(Cw,{})})}),w.jsx(Ge,{path:"/messages/:userId",element:w.jsx(Nt,{children:w.jsx(Cw,{})})}),w.jsx(Ge,{path:"/saved",element:w.jsx(Nt,{children:w.jsx(xw,{saved:!0})})}),w.jsx(Ge,{path:"/users/:userId",element:w.jsx(Nt,{children:w.jsx(YO,{})})}),w.jsx(Ge,{path:"/reviews/:reviewId",element:w.jsx(Nt,{children:w.jsx(XO,{})})}),w.jsx(Ge,{path:"/design",element:w.jsx(Nt,{children:w.jsx(ZO,{})})}),w.jsx(Ge,{path:"*",element:w.jsx(Tl,{to:"/",replace:!0})})]})})})}),w.jsx(xC,{position:"top-right",autoClose:3e3}),w.jsx(HO,{})]})};function rP(){return S.useEffect(()=>{let n=null;try{console.log(" Initializing Trading Post mobile responsiveness..."),ek({enableSafeArea:!0,enableVirtualKeyboard:!0,enableTouchOptimization:!0,enableIOSSafari:!0}),console.log(" Trading Post mobile system initialized"),console.log(" Initializing Trading Post extension protection..."),Hv(),Yv(),console.log(" Trading Post extension protection initialized"),console.log(" Initializing Trading Post debug console and database fixes..."),Nv(),He.enable(),console.log(" Initializing API adapter to handle legacy API calls..."),gk(),console.log(" API adapter initialized - old API calls will be redirected to Appwrite"),setTimeout(()=>{gI().then(t=>{console.log(" Trading Post database fixes applied:",t)}).catch(t=>{console.error(" Database fix failed:",t)})},2e3),console.log(" Trading Post debug system initialized - Press ` to open debug console"),console.log(" Starting comprehensive system initialization..."),ci.initializeSystem({quickDbFix:!0}).then(t=>{t.success?console.log(" System initialization completed successfully:",t):console.error(" System initialization completed with issues:",t)}).catch(t=>{console.error(" System initialization failed:",t)});try{Ye(()=>E(null,null,function*(){const{account:t}=yield Promise.resolve().then(()=>pc);return{account:t}}),void 0).then(({account:t})=>{console.log(" Attempting to activate Appwrite platform..."),t.getSession("current").then(()=>{console.log(" Platform activated with active session!")}).catch(r=>{r.code===401?console.log(" Platform connection established! (No active session)"):console.log(" Platform activation error:",r.message)})}).catch(t=>{console.log(" Could not load Appwrite config for platform activation:",t.message)})}catch(t){console.log(" Platform activation failed:",t.message)}const e=localStorage.getItem("customColors");if(e)try{const t=JSON.parse(e),r=document.documentElement;t&&typeof t=="object"&&!Array.isArray(t)&&Object.entries(t).forEach(([a,l])=>{r.style.setProperty("--bs-".concat(a),l),r.style.setProperty("--".concat(a),l)});const i=(a,l)=>{try{const u=parseInt(a.replace("#",""),16),d=Math.round(2.55*l),p=Math.max(0,Math.min(255,(u>>16&255)-d)),h=Math.max(0,Math.min(255,(u>>8&255)-d)),g=Math.max(0,Math.min(255,(u&255)-d));return"#"+((1<<24)+(p<<16)+(h<<8)+g).toString(16).slice(1)}catch(u){return a}};n=document.getElementById("custom-theme-styles"),n||(n=document.createElement("style"),n.id="custom-theme-styles",document.head.appendChild(n)),n.innerHTML="\n            .btn-primary {\n              background-color: ".concat(t.primary," !important;\n              border-color: ").concat(t.primary," !important;\n            }\n            .btn-primary:hover {\n              background-color: ").concat(i(t.primary,10)," !important;\n              border-color: ").concat(i(t.primary,10)," !important;\n            }\n            .btn-secondary {\n              background-color: ").concat(t.secondary," !important;\n              border-color: ").concat(t.secondary," !important;\n            }\n            .btn-success {\n              background-color: ").concat(t.success," !important;\n              border-color: ").concat(t.success," !important;\n            }\n            .btn-danger {\n              background-color: ").concat(t.danger," !important;\n              border-color: ").concat(t.danger," !important;\n            }\n            .btn-warning {\n              background-color: ").concat(t.warning," !important;\n              border-color: ").concat(t.warning," !important;\n            }\n            .btn-info {\n              background-color: ").concat(t.info," !important;\n              border-color: ").concat(t.info," !important;\n            }\n            .bg-primary {\n              background-color: ").concat(t.primary," !important;\n            }\n            .text-primary {\n              color: ").concat(t.primary," !important;\n            }\n            .border-primary {\n              border-color: ").concat(t.primary," !important;\n            }\n            .navbar {\n              background-color: ").concat(t.dark," !important;\n            }\n            .card-header {\n              background-color: ").concat(t.light," !important;\n              border-bottom-color: ").concat(t.secondary," !important;\n            }\n            a {\n              color: ").concat(t.primary,";\n            }\n            a:hover {\n              color: ").concat(i(t.primary,15),";\n            }\n          "),console.log(" Loaded and applied saved theme colors with Bootstrap overrides")}catch(t){console.error("Error loading saved colors:",t)}}catch(e){console.error("Failed to initialize extension protection:",e)}return()=>{n&&n.remove();const e=document.documentElement,t=localStorage.getItem("customColors");if(t)try{const r=JSON.parse(t);Object.keys(r).forEach(i=>{e.style.removeProperty("--bs-".concat(i)),e.style.removeProperty("--".concat(i))})}catch(r){console.error("Error cleaning up theme variables:",r)}}},[]),w.jsx("div",{className:"mobile-viewport mobile-safe-area",children:w.jsx(zO,{children:w.jsx(Aw,{store:Bv,children:w.jsx(nP,{})})})})}const Ei=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),qp=/iPad|Android(?!.*Mobile)/i.test(navigator.userAgent),lb=!!(window.history&&window.history.pushState&&window.history.replaceState),cb="noModule"in HTMLScriptElement.prototype;console.log(" TRADING POST MOBILE-COMPATIBLE: Starting full app");console.log(" Device Info:",{isMobile:Ei,isTablet:qp,supportsHistory:lb,supportsModules:cb,userAgent:navigator.userAgent,viewport:"".concat(window.innerWidth,"x").concat(window.innerHeight),pixelRatio:window.devicePixelRatio});if(Ei||qp){let n=0;const e=3;window.addEventListener("error",function(t){var r,i;if(n++,console.error("MOBILE ERROR ".concat(n,":"),{message:t.message,filename:t.filename,lineno:t.lineno,colno:t.colno,error:(r=t.error)==null?void 0:r.stack}),n<=2){const a=document.createElement("div");a.innerHTML='\n        <div style="\n          position: fixed; \n          top: '.concat(n*50,'px; \n          right: 10px; \n          background: #dc3545; \n          color: white; \n          padding: 8px 12px; \n          border-radius: 4px; \n          z-index: 10000;\n          font-size: 12px;\n          max-width: 200px;\n        ">\n          Error ').concat(n,": ").concat(((i=t.message)==null?void 0:i.substring(0,50))||"Unknown error",'...\n          <button onclick="this.parentElement.remove()" style="\n            background: none; \n            border: none; \n            color: white; \n            margin-left: 8px; \n            cursor: pointer;\n          "></button>\n        </div>\n      '),document.body.appendChild(a),setTimeout(()=>{try{a.remove()}catch(l){}},1e4)}if(n>=e){const a=document.createElement("div");a.innerHTML='\n        <div style="\n          position: fixed; \n          top: 50%; \n          left: 50%; \n          transform: translate(-50%, -50%); \n          background: white; \n          padding: 20px; \n          border-radius: 8px; \n          box-shadow: 0 4px 20px rgba(0,0,0,0.3); \n          z-index: 10001;\n          text-align: center;\n          max-width: 300px;\n        ">\n          <h3 style="color: #dc3545; margin-bottom: 15px;">App Error Detected</h3>\n          <p style="margin-bottom: 15px;">The app encountered '.concat(n,' errors. This might be due to network issues or device compatibility.</p>\n          <button onclick="window.location.reload()" style="\n            background: #007bff; \n            color: white; \n            border: none; \n            padding: 10px 20px; \n            border-radius: 5px; \n            margin: 5px;\n            cursor: pointer;\n          ">Refresh App</button>\n          <button onclick="this.parentElement.parentElement.remove()" style="\n            background: #6c757d; \n            color: white; \n            border: none; \n            padding: 10px 20px; \n            border-radius: 5px; \n            margin: 5px;\n            cursor: pointer;\n          ">Dismiss</button>\n        </div>\n      '),document.body.appendChild(a)}}),window.addEventListener("unhandledrejection",function(t){console.error("MOBILE PROMISE REJECTION:",t.reason),t.preventDefault()})}if(Ei){const n=document.createElement("style");n.textContent="\n    * {\n      -webkit-transform-style: preserve-3d;\n      transform-style: preserve-3d;\n      -webkit-backface-visibility: hidden;\n      backface-visibility: hidden;\n    }\n    \n    @media (max-width: 768px) {\n      .card-animated,\n      .btn-animated,\n      .fade,\n      .collapse,\n      .navbar-collapse {\n        transition: none !important;\n        animation: none !important;\n      }\n      \n      /* Optimize scrolling performance */\n      body {\n        -webkit-overflow-scrolling: touch;\n        overflow-x: hidden;\n      }\n      \n      /* Reduce expensive box-shadows on mobile */\n      .card, .btn, .modal, .dropdown-menu {\n        box-shadow: 0 2px 4px rgba(0,0,0,0.1) !important;\n      }\n    }\n  ",document.head.appendChild(n)}class sP extends oe.Component{constructor(t){super(t);ri(this,"handleRetry",()=>{this.setState(t=>({hasError:!1,error:null,errorInfo:null,retryCount:t.retryCount+1}))});this.state={hasError:!1,error:null,errorInfo:null,retryCount:0}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error(" TRADING POST ERROR BOUNDARY:",t,r),this.setState({errorInfo:r}),console.error(" Mobile Error Context:",{isMobile:Ei,isTablet:qp,viewport:"".concat(window.innerWidth,"x").concat(window.innerHeight),userAgent:navigator.userAgent,error:t.toString(),stack:t.stack})}render(){return this.state.hasError?w.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",padding:"20px",textAlign:"center",backgroundColor:"#f8f9fa"},children:w.jsxs("div",{style:{background:"white",padding:"30px",borderRadius:"8px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",maxWidth:"400px",width:"100%"},children:[w.jsx("h2",{style:{color:"#dc3545",marginBottom:"15px"},children:" Trading Post Error"}),w.jsx("p",{style:{marginBottom:"15px",color:"#6c757d"},children:"The app encountered an error and needs to restart. This sometimes happens on mobile devices."}),Ei&&w.jsx("div",{style:{background:"#e3f2fd",padding:"10px",borderRadius:"4px",marginBottom:"15px",fontSize:"14px"},children:" Mobile device detected. If issues persist, try refreshing or clearing browser cache."}),w.jsxs("div",{style:{marginBottom:"15px"},children:[w.jsx("button",{onClick:this.handleRetry,style:{background:"#007bff",color:"white",border:"none",padding:"10px 20px",borderRadius:"5px",marginRight:"10px",cursor:"pointer",fontSize:"14px"},children:" Try Again"}),w.jsx("button",{onClick:()=>window.location.reload(),style:{background:"#28a745",color:"white",border:"none",padding:"10px 20px",borderRadius:"5px",cursor:"pointer",fontSize:"14px"},children:" Refresh Page"})]}),w.jsxs("details",{style:{marginTop:"15px",textAlign:"left"},children:[w.jsx("summary",{style:{cursor:"pointer",color:"#6c757d"},children:"Technical Details"}),w.jsxs("pre",{style:{background:"#f8f9fa",padding:"10px",borderRadius:"4px",fontSize:"12px",overflow:"auto",maxHeight:"200px",marginTop:"10px"},children:[this.state.error&&this.state.error.toString(),this.state.errorInfo&&this.state.errorInfo.componentStack]})]})]})}):this.props.children}}function iP(){const n={es6Classes:(()=>{try{return typeof class{}=="function"}catch(t){return!1}})(),asyncAwait:(()=>{try{return!0}catch(t){return!1}})(),fetch:typeof fetch!="undefined",localStorage:(()=>{try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch(t){return!1}})(),history:lb,modules:cb},e=Object.entries(n).filter(([t,r])=>!r);if(e.length>0&&(console.warn(" Browser compatibility issues detected:",e.map(([t])=>t)),Ei&&e.length>2)){const t=document.createElement("div");t.innerHTML='\n        <div style="\n          background: #fff3cd; \n          color: #856404; \n          padding: 15px; \n          margin: 10px; \n          border-radius: 5px; \n          border: 1px solid #ffeeba;\n        ">\n          <strong> Browser Compatibility Notice:</strong><br>\n          Your browser may not support all features of Trading Post. For the best experience, please update your browser.\n          <button onclick="this.parentElement.style.display=\'none\'" style="\n            float: right; \n            background: none; \n            border: none; \n            font-size: 18px; \n            cursor: pointer;\n          "></button>\n        </div>\n      ',document.body.insertBefore(t,document.body.firstChild)}return n}const oP=iP();console.log(" Browser Compatibility Check:",oP);console.log(" TRADING POST MOBILE-COMPATIBLE: Rendering full app with Redux store...");const aP=SE.createRoot(document.getElementById("root"));aP.render(w.jsx(oe.StrictMode,{children:w.jsx(sP,{children:w.jsx(Aw,{store:Bv,children:w.jsx(rP,{})})})}));console.log(" TRADING POST MOBILE-COMPATIBLE: Full app render complete!");export{HR as $,Sc as A,jt as B,Ep as C,tI as D,De as E,sn as F,$d as G,Vd as H,ze as I,Kd as J,DP as K,bi as L,$t as M,cP as N,Of as O,cS as P,Si as Q,mM as R,rI as S,AP as T,ks as U,IO as V,bA as W,ar as X,Fe as Y,Qo as Z,Ye as _,Ow as a,Tn as a0,jP as a1,$P as a2,xS as a3,CS as a4,n0 as a5,Wr as a6,MO as a7,DO as a8,uw as a9,Ri as aA,Bn as aB,yc as aC,tA as aD,Rn as aE,t0 as aF,S0 as aG,wc as aH,yp as aI,Pk as aJ,Dk as aK,uP as aL,wt as aM,pi as aN,xe as aO,xi as aP,ms as aQ,zE as aR,pc as aS,Gd as aa,Wd as ab,Uo as ac,Bd as ad,$I as ae,UP as af,GM as ag,HS as ah,qd as ai,OP as aj,Hd as ak,Uv as al,LI as am,vc as an,oe as ao,Yd as ap,we as aq,N as ar,Xo as as,Le as at,V as au,X as av,ws as aw,Rl as ax,gl as ay,NO as az,Lt as b,Ne as c,me as d,fe as e,jd as f,Pp as g,Dp as h,Jn as i,w as j,eI as k,nI as l,vs as m,Yo as n,Hr as o,Qf as p,mc as q,S as r,zd as s,b0 as t,Ii as u,Oy as v,vl as w,Lv as x,Sp as y,TO as z};
